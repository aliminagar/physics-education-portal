var t9=Object.defineProperty;var n9=(n,e,t)=>e in n?t9(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var cn=(n,e,t)=>n9(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();var y0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function E3(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var V6={exports:{}},fv={},G6={exports:{}},vn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Np=Symbol.for("react.element"),i9=Symbol.for("react.portal"),r9=Symbol.for("react.fragment"),s9=Symbol.for("react.strict_mode"),o9=Symbol.for("react.profiler"),a9=Symbol.for("react.provider"),l9=Symbol.for("react.context"),c9=Symbol.for("react.forward_ref"),u9=Symbol.for("react.suspense"),h9=Symbol.for("react.memo"),f9=Symbol.for("react.lazy"),YS=Symbol.iterator;function d9(n){return n===null||typeof n!="object"?null:(n=YS&&n[YS]||n["@@iterator"],typeof n=="function"?n:null)}var W6={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j6=Object.assign,q6={};function Xf(n,e,t){this.props=n,this.context=e,this.refs=q6,this.updater=t||W6}Xf.prototype.isReactComponent={};Xf.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Xf.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function X6(){}X6.prototype=Xf.prototype;function T3(n,e,t){this.props=n,this.context=e,this.refs=q6,this.updater=t||W6}var A3=T3.prototype=new X6;A3.constructor=T3;j6(A3,Xf.prototype);A3.isPureReactComponent=!0;var ZS=Array.isArray,Y6=Object.prototype.hasOwnProperty,C3={current:null},Z6={key:!0,ref:!0,__self:!0,__source:!0};function K6(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Y6.call(e,i)&&!Z6.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Np,type:n,key:s,ref:o,props:r,_owner:C3.current}}function p9(n,e){return{$$typeof:Np,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function P3(n){return typeof n=="object"&&n!==null&&n.$$typeof===Np}function m9(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var KS=/\/+/g;function Ny(n,e){return typeof n=="object"&&n!==null&&n.key!=null?m9(""+n.key):e.toString(36)}function e1(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Np:case i9:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+Ny(o,0):i,ZS(r)?(t="",n!=null&&(t=n.replace(KS,"$&/")+"/"),e1(r,e,t,"",function(c){return c})):r!=null&&(P3(r)&&(r=p9(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(KS,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",ZS(n))for(var a=0;a<n.length;a++){s=n[a];var l=i+Ny(s,a);o+=e1(s,e,t,l,r)}else if(l=d9(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=i+Ny(s,a++),o+=e1(s,e,t,l,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function bm(n,e,t){if(n==null)return n;var i=[],r=0;return e1(n,i,"","",function(s){return e.call(t,s,r++)}),i}function g9(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var ss={current:null},t1={transition:null},v9={ReactCurrentDispatcher:ss,ReactCurrentBatchConfig:t1,ReactCurrentOwner:C3};function Q6(){throw Error("act(...) is not supported in production builds of React.")}vn.Children={map:bm,forEach:function(n,e,t){bm(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return bm(n,function(){e++}),e},toArray:function(n){return bm(n,function(e){return e})||[]},only:function(n){if(!P3(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};vn.Component=Xf;vn.Fragment=r9;vn.Profiler=o9;vn.PureComponent=T3;vn.StrictMode=s9;vn.Suspense=u9;vn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=v9;vn.act=Q6;vn.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=j6({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=C3.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)Y6.call(e,l)&&!Z6.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Np,type:n.type,key:r,ref:s,props:i,_owner:o}};vn.createContext=function(n){return n={$$typeof:l9,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:a9,_context:n},n.Consumer=n};vn.createElement=K6;vn.createFactory=function(n){var e=K6.bind(null,n);return e.type=n,e};vn.createRef=function(){return{current:null}};vn.forwardRef=function(n){return{$$typeof:c9,render:n}};vn.isValidElement=P3;vn.lazy=function(n){return{$$typeof:f9,_payload:{_status:-1,_result:n},_init:g9}};vn.memo=function(n,e){return{$$typeof:h9,type:n,compare:e===void 0?null:e}};vn.startTransition=function(n){var e=t1.transition;t1.transition={};try{n()}finally{t1.transition=e}};vn.unstable_act=Q6;vn.useCallback=function(n,e){return ss.current.useCallback(n,e)};vn.useContext=function(n){return ss.current.useContext(n)};vn.useDebugValue=function(){};vn.useDeferredValue=function(n){return ss.current.useDeferredValue(n)};vn.useEffect=function(n,e){return ss.current.useEffect(n,e)};vn.useId=function(){return ss.current.useId()};vn.useImperativeHandle=function(n,e,t){return ss.current.useImperativeHandle(n,e,t)};vn.useInsertionEffect=function(n,e){return ss.current.useInsertionEffect(n,e)};vn.useLayoutEffect=function(n,e){return ss.current.useLayoutEffect(n,e)};vn.useMemo=function(n,e){return ss.current.useMemo(n,e)};vn.useReducer=function(n,e,t){return ss.current.useReducer(n,e,t)};vn.useRef=function(n){return ss.current.useRef(n)};vn.useState=function(n){return ss.current.useState(n)};vn.useSyncExternalStore=function(n,e,t){return ss.current.useSyncExternalStore(n,e,t)};vn.useTransition=function(){return ss.current.useTransition()};vn.version="18.3.1";G6.exports=vn;var Qe=G6.exports;const ar=E3(Qe);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y9=Qe,x9=Symbol.for("react.element"),_9=Symbol.for("react.fragment"),S9=Object.prototype.hasOwnProperty,w9=y9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,b9={key:!0,ref:!0,__self:!0,__source:!0};function J6(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)S9.call(e,i)&&!b9.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:x9,type:n,key:s,ref:o,props:r,_owner:w9.current}}fv.Fragment=_9;fv.jsx=J6;fv.jsxs=J6;V6.exports=fv;var O=V6.exports,$6={exports:{}},Xs={},e7={exports:{}},t7={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(X,$){var J=X.length;X.push($);e:for(;0<J;){var j=J-1>>>1,se=X[j];if(0<r(se,$))X[j]=$,X[J]=se,J=j;else break e}}function t(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var $=X[0],J=X.pop();if(J!==$){X[0]=J;e:for(var j=0,se=X.length,ve=se>>>1;j<ve;){var oe=2*(j+1)-1,he=X[oe],ye=oe+1,Me=X[ye];if(0>r(he,J))ye<se&&0>r(Me,he)?(X[j]=Me,X[ye]=J,j=ye):(X[j]=he,X[oe]=J,j=oe);else if(ye<se&&0>r(Me,J))X[j]=Me,X[ye]=J,j=ye;else break e}}return $}function r(X,$){var J=X.sortIndex-$.sortIndex;return J!==0?J:X.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,d=3,h=!1,g=!1,_=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(X){for(var $=t(c);$!==null;){if($.callback===null)i(c);else if($.startTime<=X)i(c),$.sortIndex=$.expirationTime,e(l,$);else break;$=t(c)}}function A(X){if(_=!1,b(X),!g)if(t(l)!==null)g=!0,re(T);else{var $=t(c);$!==null&&de(A,$.startTime-X)}}function T(X,$){g=!1,_&&(_=!1,y(N),N=-1),h=!0;var J=d;try{for(b($),f=t(l);f!==null&&(!(f.expirationTime>$)||X&&!F());){var j=f.callback;if(typeof j=="function"){f.callback=null,d=f.priorityLevel;var se=j(f.expirationTime<=$);$=n.unstable_now(),typeof se=="function"?f.callback=se:f===t(l)&&i(l),b($)}else i(l);f=t(l)}if(f!==null)var ve=!0;else{var oe=t(c);oe!==null&&de(A,oe.startTime-$),ve=!1}return ve}finally{f=null,d=J,h=!1}}var P=!1,k=null,N=-1,z=5,R=-1;function F(){return!(n.unstable_now()-R<z)}function V(){if(k!==null){var X=n.unstable_now();R=X;var $=!0;try{$=k(!0,X)}finally{$?K():(P=!1,k=null)}}else P=!1}var K;if(typeof M=="function")K=function(){M(V)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,ne=W.port2;W.port1.onmessage=V,K=function(){ne.postMessage(null)}}else K=function(){x(V,0)};function re(X){k=X,P||(P=!0,K())}function de(X,$){N=x(function(){X(n.unstable_now())},$)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_continueExecution=function(){g||h||(g=!0,re(T))},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(X){switch(d){case 1:case 2:case 3:var $=3;break;default:$=d}var J=d;d=$;try{return X()}finally{d=J}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(X,$){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var J=d;d=X;try{return $()}finally{d=J}},n.unstable_scheduleCallback=function(X,$,J){var j=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?j+J:j):J=j,X){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=J+se,X={id:u++,callback:$,priorityLevel:X,startTime:J,expirationTime:se,sortIndex:-1},J>j?(X.sortIndex=J,e(c,X),t(l)===null&&X===t(c)&&(_?(y(N),N=-1):_=!0,de(A,J-j))):(X.sortIndex=se,e(l,X),g||h||(g=!0,re(T))),X},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(X){var $=d;return function(){var J=d;d=$;try{return X.apply(this,arguments)}finally{d=J}}}})(t7);e7.exports=t7;var M9=e7.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E9=Qe,js=M9;function yt(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n7=new Set,V0={};function ju(n,e){Nf(n,e),Nf(n+"Capture",e)}function Nf(n,e){for(V0[n]=e,n=0;n<e.length;n++)n7.add(e[n])}var tl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),b2=Object.prototype.hasOwnProperty,T9=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,QS={},JS={};function A9(n){return b2.call(JS,n)?!0:b2.call(QS,n)?!1:T9.test(n)?JS[n]=!0:(QS[n]=!0,!1)}function C9(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function P9(n,e,t,i){if(e===null||typeof e>"u"||C9(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function os(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Mr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Mr[n]=new os(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Mr[e]=new os(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Mr[n]=new os(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Mr[n]=new os(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Mr[n]=new os(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Mr[n]=new os(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Mr[n]=new os(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Mr[n]=new os(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Mr[n]=new os(n,5,!1,n.toLowerCase(),null,!1,!1)});var R3=/[\-:]([a-z])/g;function k3(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(R3,k3);Mr[e]=new os(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(R3,k3);Mr[e]=new os(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(R3,k3);Mr[e]=new os(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Mr[n]=new os(n,1,!1,n.toLowerCase(),null,!1,!1)});Mr.xlinkHref=new os("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Mr[n]=new os(n,1,!1,n.toLowerCase(),null,!0,!0)});function L3(n,e,t,i){var r=Mr.hasOwnProperty(e)?Mr[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(P9(e,t,r,i)&&(t=null),i||r===null?A9(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var cl=E9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Mm=Symbol.for("react.element"),af=Symbol.for("react.portal"),lf=Symbol.for("react.fragment"),N3=Symbol.for("react.strict_mode"),M2=Symbol.for("react.profiler"),i7=Symbol.for("react.provider"),r7=Symbol.for("react.context"),I3=Symbol.for("react.forward_ref"),E2=Symbol.for("react.suspense"),T2=Symbol.for("react.suspense_list"),D3=Symbol.for("react.memo"),Gl=Symbol.for("react.lazy"),s7=Symbol.for("react.offscreen"),$S=Symbol.iterator;function Id(n){return n===null||typeof n!="object"?null:(n=$S&&n[$S]||n["@@iterator"],typeof n=="function"?n:null)}var xi=Object.assign,Iy;function l0(n){if(Iy===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Iy=e&&e[1]||""}return`
`+Iy+n}var Dy=!1;function Oy(n,e){if(!n||Dy)return"";Dy=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{Dy=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?l0(n):""}function R9(n){switch(n.tag){case 5:return l0(n.type);case 16:return l0("Lazy");case 13:return l0("Suspense");case 19:return l0("SuspenseList");case 0:case 2:case 15:return n=Oy(n.type,!1),n;case 11:return n=Oy(n.type.render,!1),n;case 1:return n=Oy(n.type,!0),n;default:return""}}function A2(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case lf:return"Fragment";case af:return"Portal";case M2:return"Profiler";case N3:return"StrictMode";case E2:return"Suspense";case T2:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case r7:return(n.displayName||"Context")+".Consumer";case i7:return(n._context.displayName||"Context")+".Provider";case I3:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case D3:return e=n.displayName||null,e!==null?e:A2(n.type)||"Memo";case Gl:e=n._payload,n=n._init;try{return A2(n(e))}catch{}}return null}function k9(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return A2(e);case 8:return e===N3?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function uc(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function o7(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function L9(n){var e=o7(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Em(n){n._valueTracker||(n._valueTracker=L9(n))}function a7(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=o7(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function T1(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function C2(n,e){var t=e.checked;return xi({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function ew(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=uc(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function l7(n,e){e=e.checked,e!=null&&L3(n,"checked",e,!1)}function P2(n,e){l7(n,e);var t=uc(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?R2(n,e.type,t):e.hasOwnProperty("defaultValue")&&R2(n,e.type,uc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function tw(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function R2(n,e,t){(e!=="number"||T1(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var c0=Array.isArray;function Ef(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+uc(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function k2(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(yt(91));return xi({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function nw(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(yt(92));if(c0(t)){if(1<t.length)throw Error(yt(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:uc(t)}}function c7(n,e){var t=uc(e.value),i=uc(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function iw(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function u7(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function L2(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?u7(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Tm,h7=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Tm=Tm||document.createElement("div"),Tm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Tm.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function G0(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var x0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},N9=["Webkit","ms","Moz","O"];Object.keys(x0).forEach(function(n){N9.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),x0[e]=x0[n]})});function f7(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||x0.hasOwnProperty(n)&&x0[n]?(""+e).trim():e+"px"}function d7(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=f7(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var I9=xi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function N2(n,e){if(e){if(I9[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(yt(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(yt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(yt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(yt(62))}}function I2(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var D2=null;function O3(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var O2=null,Tf=null,Af=null;function rw(n){if(n=Op(n)){if(typeof O2!="function")throw Error(yt(280));var e=n.stateNode;e&&(e=vv(e),O2(n.stateNode,n.type,e))}}function p7(n){Tf?Af?Af.push(n):Af=[n]:Tf=n}function m7(){if(Tf){var n=Tf,e=Af;if(Af=Tf=null,rw(n),e)for(n=0;n<e.length;n++)rw(e[n])}}function g7(n,e){return n(e)}function v7(){}var Fy=!1;function y7(n,e,t){if(Fy)return n(e,t);Fy=!0;try{return g7(n,e,t)}finally{Fy=!1,(Tf!==null||Af!==null)&&(v7(),m7())}}function W0(n,e){var t=n.stateNode;if(t===null)return null;var i=vv(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(yt(231,e,typeof t));return t}var F2=!1;if(tl)try{var Dd={};Object.defineProperty(Dd,"passive",{get:function(){F2=!0}}),window.addEventListener("test",Dd,Dd),window.removeEventListener("test",Dd,Dd)}catch{F2=!1}function D9(n,e,t,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var _0=!1,A1=null,C1=!1,U2=null,O9={onError:function(n){_0=!0,A1=n}};function F9(n,e,t,i,r,s,o,a,l){_0=!1,A1=null,D9.apply(O9,arguments)}function U9(n,e,t,i,r,s,o,a,l){if(F9.apply(this,arguments),_0){if(_0){var c=A1;_0=!1,A1=null}else throw Error(yt(198));C1||(C1=!0,U2=c)}}function qu(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function x7(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function sw(n){if(qu(n)!==n)throw Error(yt(188))}function z9(n){var e=n.alternate;if(!e){if(e=qu(n),e===null)throw Error(yt(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return sw(r),n;if(s===i)return sw(r),e;s=s.sibling}throw Error(yt(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o)throw Error(yt(189))}}if(t.alternate!==i)throw Error(yt(190))}if(t.tag!==3)throw Error(yt(188));return t.stateNode.current===t?n:e}function _7(n){return n=z9(n),n!==null?S7(n):null}function S7(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=S7(n);if(e!==null)return e;n=n.sibling}return null}var w7=js.unstable_scheduleCallback,ow=js.unstable_cancelCallback,B9=js.unstable_shouldYield,H9=js.unstable_requestPaint,ki=js.unstable_now,V9=js.unstable_getCurrentPriorityLevel,F3=js.unstable_ImmediatePriority,b7=js.unstable_UserBlockingPriority,P1=js.unstable_NormalPriority,G9=js.unstable_LowPriority,M7=js.unstable_IdlePriority,dv=null,fa=null;function W9(n){if(fa&&typeof fa.onCommitFiberRoot=="function")try{fa.onCommitFiberRoot(dv,n,void 0,(n.current.flags&128)===128)}catch{}}var Uo=Math.clz32?Math.clz32:X9,j9=Math.log,q9=Math.LN2;function X9(n){return n>>>=0,n===0?32:31-(j9(n)/q9|0)|0}var Am=64,Cm=4194304;function u0(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function R1(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?i=u0(a):(s&=o,s!==0&&(i=u0(s)))}else o=t&~r,o!==0?i=u0(o):s!==0&&(i=u0(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-Uo(e),r=1<<t,i|=n[t],e&=~r;return i}function Y9(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Z9(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Uo(s),a=1<<o,l=r[o];l===-1?(!(a&t)||a&i)&&(r[o]=Y9(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function z2(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function E7(){var n=Am;return Am<<=1,!(Am&4194240)&&(Am=64),n}function Uy(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Ip(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Uo(e),n[e]=t}function K9(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-Uo(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function U3(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-Uo(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var Wn=0;function T7(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var A7,z3,C7,P7,R7,B2=!1,Pm=[],Ql=null,Jl=null,$l=null,j0=new Map,q0=new Map,jl=[],Q9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function aw(n,e){switch(n){case"focusin":case"focusout":Ql=null;break;case"dragenter":case"dragleave":Jl=null;break;case"mouseover":case"mouseout":$l=null;break;case"pointerover":case"pointerout":j0.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":q0.delete(e.pointerId)}}function Od(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Op(e),e!==null&&z3(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function J9(n,e,t,i,r){switch(e){case"focusin":return Ql=Od(Ql,n,e,t,i,r),!0;case"dragenter":return Jl=Od(Jl,n,e,t,i,r),!0;case"mouseover":return $l=Od($l,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return j0.set(s,Od(j0.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,q0.set(s,Od(q0.get(s)||null,n,e,t,i,r)),!0}return!1}function k7(n){var e=vu(n.target);if(e!==null){var t=qu(e);if(t!==null){if(e=t.tag,e===13){if(e=x7(t),e!==null){n.blockedOn=e,R7(n.priority,function(){C7(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function n1(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=H2(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);D2=i,t.target.dispatchEvent(i),D2=null}else return e=Op(t),e!==null&&z3(e),n.blockedOn=t,!1;e.shift()}return!0}function lw(n,e,t){n1(n)&&t.delete(e)}function $9(){B2=!1,Ql!==null&&n1(Ql)&&(Ql=null),Jl!==null&&n1(Jl)&&(Jl=null),$l!==null&&n1($l)&&($l=null),j0.forEach(lw),q0.forEach(lw)}function Fd(n,e){n.blockedOn===e&&(n.blockedOn=null,B2||(B2=!0,js.unstable_scheduleCallback(js.unstable_NormalPriority,$9)))}function X0(n){function e(r){return Fd(r,n)}if(0<Pm.length){Fd(Pm[0],n);for(var t=1;t<Pm.length;t++){var i=Pm[t];i.blockedOn===n&&(i.blockedOn=null)}}for(Ql!==null&&Fd(Ql,n),Jl!==null&&Fd(Jl,n),$l!==null&&Fd($l,n),j0.forEach(e),q0.forEach(e),t=0;t<jl.length;t++)i=jl[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<jl.length&&(t=jl[0],t.blockedOn===null);)k7(t),t.blockedOn===null&&jl.shift()}var Cf=cl.ReactCurrentBatchConfig,k1=!0;function eP(n,e,t,i){var r=Wn,s=Cf.transition;Cf.transition=null;try{Wn=1,B3(n,e,t,i)}finally{Wn=r,Cf.transition=s}}function tP(n,e,t,i){var r=Wn,s=Cf.transition;Cf.transition=null;try{Wn=4,B3(n,e,t,i)}finally{Wn=r,Cf.transition=s}}function B3(n,e,t,i){if(k1){var r=H2(n,e,t,i);if(r===null)Yy(n,e,i,L1,t),aw(n,i);else if(J9(r,n,e,t,i))i.stopPropagation();else if(aw(n,i),e&4&&-1<Q9.indexOf(n)){for(;r!==null;){var s=Op(r);if(s!==null&&A7(s),s=H2(n,e,t,i),s===null&&Yy(n,e,i,L1,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else Yy(n,e,i,null,t)}}var L1=null;function H2(n,e,t,i){if(L1=null,n=O3(i),n=vu(n),n!==null)if(e=qu(n),e===null)n=null;else if(t=e.tag,t===13){if(n=x7(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return L1=n,null}function L7(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(V9()){case F3:return 1;case b7:return 4;case P1:case G9:return 16;case M7:return 536870912;default:return 16}default:return 16}}var Yl=null,H3=null,i1=null;function N7(){if(i1)return i1;var n,e=H3,t=e.length,i,r="value"in Yl?Yl.value:Yl.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return i1=r.slice(n,1<i?1-i:void 0)}function r1(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Rm(){return!0}function cw(){return!1}function Ys(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Rm:cw,this.isPropagationStopped=cw,this}return xi(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Rm)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Rm)},persist:function(){},isPersistent:Rm}),e}var Yf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},V3=Ys(Yf),Dp=xi({},Yf,{view:0,detail:0}),nP=Ys(Dp),zy,By,Ud,pv=xi({},Dp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:G3,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ud&&(Ud&&n.type==="mousemove"?(zy=n.screenX-Ud.screenX,By=n.screenY-Ud.screenY):By=zy=0,Ud=n),zy)},movementY:function(n){return"movementY"in n?n.movementY:By}}),uw=Ys(pv),iP=xi({},pv,{dataTransfer:0}),rP=Ys(iP),sP=xi({},Dp,{relatedTarget:0}),Hy=Ys(sP),oP=xi({},Yf,{animationName:0,elapsedTime:0,pseudoElement:0}),aP=Ys(oP),lP=xi({},Yf,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),cP=Ys(lP),uP=xi({},Yf,{data:0}),hw=Ys(uP),hP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pP(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=dP[n])?!!e[n]:!1}function G3(){return pP}var mP=xi({},Dp,{key:function(n){if(n.key){var e=hP[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=r1(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?fP[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:G3,charCode:function(n){return n.type==="keypress"?r1(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?r1(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),gP=Ys(mP),vP=xi({},pv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fw=Ys(vP),yP=xi({},Dp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:G3}),xP=Ys(yP),_P=xi({},Yf,{propertyName:0,elapsedTime:0,pseudoElement:0}),SP=Ys(_P),wP=xi({},pv,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),bP=Ys(wP),MP=[9,13,27,32],W3=tl&&"CompositionEvent"in window,S0=null;tl&&"documentMode"in document&&(S0=document.documentMode);var EP=tl&&"TextEvent"in window&&!S0,I7=tl&&(!W3||S0&&8<S0&&11>=S0),dw=" ",pw=!1;function D7(n,e){switch(n){case"keyup":return MP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function O7(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var cf=!1;function TP(n,e){switch(n){case"compositionend":return O7(e);case"keypress":return e.which!==32?null:(pw=!0,dw);case"textInput":return n=e.data,n===dw&&pw?null:n;default:return null}}function AP(n,e){if(cf)return n==="compositionend"||!W3&&D7(n,e)?(n=N7(),i1=H3=Yl=null,cf=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return I7&&e.locale!=="ko"?null:e.data;default:return null}}var CP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mw(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!CP[n.type]:e==="textarea"}function F7(n,e,t,i){p7(i),e=N1(e,"onChange"),0<e.length&&(t=new V3("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var w0=null,Y0=null;function PP(n){Y7(n,0)}function mv(n){var e=ff(n);if(a7(e))return n}function RP(n,e){if(n==="change")return e}var U7=!1;if(tl){var Vy;if(tl){var Gy="oninput"in document;if(!Gy){var gw=document.createElement("div");gw.setAttribute("oninput","return;"),Gy=typeof gw.oninput=="function"}Vy=Gy}else Vy=!1;U7=Vy&&(!document.documentMode||9<document.documentMode)}function vw(){w0&&(w0.detachEvent("onpropertychange",z7),Y0=w0=null)}function z7(n){if(n.propertyName==="value"&&mv(Y0)){var e=[];F7(e,Y0,n,O3(n)),y7(PP,e)}}function kP(n,e,t){n==="focusin"?(vw(),w0=e,Y0=t,w0.attachEvent("onpropertychange",z7)):n==="focusout"&&vw()}function LP(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return mv(Y0)}function NP(n,e){if(n==="click")return mv(e)}function IP(n,e){if(n==="input"||n==="change")return mv(e)}function DP(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Bo=typeof Object.is=="function"?Object.is:DP;function Z0(n,e){if(Bo(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!b2.call(e,r)||!Bo(n[r],e[r]))return!1}return!0}function yw(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function xw(n,e){var t=yw(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=yw(t)}}function B7(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?B7(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function H7(){for(var n=window,e=T1();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=T1(n.document)}return e}function j3(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function OP(n){var e=H7(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&B7(t.ownerDocument.documentElement,t)){if(i!==null&&j3(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=xw(t,s);var o=xw(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var FP=tl&&"documentMode"in document&&11>=document.documentMode,uf=null,V2=null,b0=null,G2=!1;function _w(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;G2||uf==null||uf!==T1(i)||(i=uf,"selectionStart"in i&&j3(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),b0&&Z0(b0,i)||(b0=i,i=N1(V2,"onSelect"),0<i.length&&(e=new V3("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=uf)))}function km(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var hf={animationend:km("Animation","AnimationEnd"),animationiteration:km("Animation","AnimationIteration"),animationstart:km("Animation","AnimationStart"),transitionend:km("Transition","TransitionEnd")},Wy={},V7={};tl&&(V7=document.createElement("div").style,"AnimationEvent"in window||(delete hf.animationend.animation,delete hf.animationiteration.animation,delete hf.animationstart.animation),"TransitionEvent"in window||delete hf.transitionend.transition);function gv(n){if(Wy[n])return Wy[n];if(!hf[n])return n;var e=hf[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in V7)return Wy[n]=e[t];return n}var G7=gv("animationend"),W7=gv("animationiteration"),j7=gv("animationstart"),q7=gv("transitionend"),X7=new Map,Sw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mc(n,e){X7.set(n,e),ju(e,[n])}for(var jy=0;jy<Sw.length;jy++){var qy=Sw[jy],UP=qy.toLowerCase(),zP=qy[0].toUpperCase()+qy.slice(1);mc(UP,"on"+zP)}mc(G7,"onAnimationEnd");mc(W7,"onAnimationIteration");mc(j7,"onAnimationStart");mc("dblclick","onDoubleClick");mc("focusin","onFocus");mc("focusout","onBlur");mc(q7,"onTransitionEnd");Nf("onMouseEnter",["mouseout","mouseover"]);Nf("onMouseLeave",["mouseout","mouseover"]);Nf("onPointerEnter",["pointerout","pointerover"]);Nf("onPointerLeave",["pointerout","pointerover"]);ju("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ju("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ju("onBeforeInput",["compositionend","keypress","textInput","paste"]);ju("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ju("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ju("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var h0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BP=new Set("cancel close invalid load scroll toggle".split(" ").concat(h0));function ww(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,U9(i,e,void 0,n),n.currentTarget=null}function Y7(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;ww(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;ww(r,a,c),s=l}}}if(C1)throw n=U2,C1=!1,U2=null,n}function ii(n,e){var t=e[Y2];t===void 0&&(t=e[Y2]=new Set);var i=n+"__bubble";t.has(i)||(Z7(e,n,2,!1),t.add(i))}function Xy(n,e,t){var i=0;e&&(i|=4),Z7(t,n,i,e)}var Lm="_reactListening"+Math.random().toString(36).slice(2);function K0(n){if(!n[Lm]){n[Lm]=!0,n7.forEach(function(t){t!=="selectionchange"&&(BP.has(t)||Xy(t,!1,n),Xy(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Lm]||(e[Lm]=!0,Xy("selectionchange",!1,e))}}function Z7(n,e,t,i){switch(L7(e)){case 1:var r=eP;break;case 4:r=tP;break;default:r=B3}t=r.bind(null,e,t,n),r=void 0,!F2||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function Yy(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=vu(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}y7(function(){var c=s,u=O3(t),f=[];e:{var d=X7.get(n);if(d!==void 0){var h=V3,g=n;switch(n){case"keypress":if(r1(t)===0)break e;case"keydown":case"keyup":h=gP;break;case"focusin":g="focus",h=Hy;break;case"focusout":g="blur",h=Hy;break;case"beforeblur":case"afterblur":h=Hy;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=uw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=rP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=xP;break;case G7:case W7:case j7:h=aP;break;case q7:h=SP;break;case"scroll":h=nP;break;case"wheel":h=bP;break;case"copy":case"cut":case"paste":h=cP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=fw}var _=(e&4)!==0,x=!_&&n==="scroll",y=_?d!==null?d+"Capture":null:d;_=[];for(var M=c,b;M!==null;){b=M;var A=b.stateNode;if(b.tag===5&&A!==null&&(b=A,y!==null&&(A=W0(M,y),A!=null&&_.push(Q0(M,A,b)))),x)break;M=M.return}0<_.length&&(d=new h(d,g,null,t,u),f.push({event:d,listeners:_}))}}if(!(e&7)){e:{if(d=n==="mouseover"||n==="pointerover",h=n==="mouseout"||n==="pointerout",d&&t!==D2&&(g=t.relatedTarget||t.fromElement)&&(vu(g)||g[nl]))break e;if((h||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,h?(g=t.relatedTarget||t.toElement,h=c,g=g?vu(g):null,g!==null&&(x=qu(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(h=null,g=c),h!==g)){if(_=uw,A="onMouseLeave",y="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(_=fw,A="onPointerLeave",y="onPointerEnter",M="pointer"),x=h==null?d:ff(h),b=g==null?d:ff(g),d=new _(A,M+"leave",h,t,u),d.target=x,d.relatedTarget=b,A=null,vu(u)===c&&(_=new _(y,M+"enter",g,t,u),_.target=b,_.relatedTarget=x,A=_),x=A,h&&g)t:{for(_=h,y=g,M=0,b=_;b;b=kh(b))M++;for(b=0,A=y;A;A=kh(A))b++;for(;0<M-b;)_=kh(_),M--;for(;0<b-M;)y=kh(y),b--;for(;M--;){if(_===y||y!==null&&_===y.alternate)break t;_=kh(_),y=kh(y)}_=null}else _=null;h!==null&&bw(f,d,h,_,!1),g!==null&&x!==null&&bw(f,x,g,_,!0)}}e:{if(d=c?ff(c):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var T=RP;else if(mw(d))if(U7)T=IP;else{T=LP;var P=kP}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(T=NP);if(T&&(T=T(n,c))){F7(f,T,t,u);break e}P&&P(n,d,c),n==="focusout"&&(P=d._wrapperState)&&P.controlled&&d.type==="number"&&R2(d,"number",d.value)}switch(P=c?ff(c):window,n){case"focusin":(mw(P)||P.contentEditable==="true")&&(uf=P,V2=c,b0=null);break;case"focusout":b0=V2=uf=null;break;case"mousedown":G2=!0;break;case"contextmenu":case"mouseup":case"dragend":G2=!1,_w(f,t,u);break;case"selectionchange":if(FP)break;case"keydown":case"keyup":_w(f,t,u)}var k;if(W3)e:{switch(n){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else cf?D7(n,t)&&(N="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(N="onCompositionStart");N&&(I7&&t.locale!=="ko"&&(cf||N!=="onCompositionStart"?N==="onCompositionEnd"&&cf&&(k=N7()):(Yl=u,H3="value"in Yl?Yl.value:Yl.textContent,cf=!0)),P=N1(c,N),0<P.length&&(N=new hw(N,n,null,t,u),f.push({event:N,listeners:P}),k?N.data=k:(k=O7(t),k!==null&&(N.data=k)))),(k=EP?TP(n,t):AP(n,t))&&(c=N1(c,"onBeforeInput"),0<c.length&&(u=new hw("onBeforeInput","beforeinput",null,t,u),f.push({event:u,listeners:c}),u.data=k))}Y7(f,e)})}function Q0(n,e,t){return{instance:n,listener:e,currentTarget:t}}function N1(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=W0(n,t),s!=null&&i.unshift(Q0(n,s,r)),s=W0(n,e),s!=null&&i.push(Q0(n,s,r))),n=n.return}return i}function kh(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function bw(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=W0(t,s),l!=null&&o.unshift(Q0(t,l,a))):r||(l=W0(t,s),l!=null&&o.push(Q0(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var HP=/\r\n?/g,VP=/\u0000|\uFFFD/g;function Mw(n){return(typeof n=="string"?n:""+n).replace(HP,`
`).replace(VP,"")}function Nm(n,e,t){if(e=Mw(e),Mw(n)!==e&&t)throw Error(yt(425))}function I1(){}var W2=null,j2=null;function q2(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var X2=typeof setTimeout=="function"?setTimeout:void 0,GP=typeof clearTimeout=="function"?clearTimeout:void 0,Ew=typeof Promise=="function"?Promise:void 0,WP=typeof queueMicrotask=="function"?queueMicrotask:typeof Ew<"u"?function(n){return Ew.resolve(null).then(n).catch(jP)}:X2;function jP(n){setTimeout(function(){throw n})}function Zy(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),X0(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);X0(e)}function ec(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function Tw(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Zf=Math.random().toString(36).slice(2),la="__reactFiber$"+Zf,J0="__reactProps$"+Zf,nl="__reactContainer$"+Zf,Y2="__reactEvents$"+Zf,qP="__reactListeners$"+Zf,XP="__reactHandles$"+Zf;function vu(n){var e=n[la];if(e)return e;for(var t=n.parentNode;t;){if(e=t[nl]||t[la]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=Tw(n);n!==null;){if(t=n[la])return t;n=Tw(n)}return e}n=t,t=n.parentNode}return null}function Op(n){return n=n[la]||n[nl],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ff(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(yt(33))}function vv(n){return n[J0]||null}var Z2=[],df=-1;function gc(n){return{current:n}}function ai(n){0>df||(n.current=Z2[df],Z2[df]=null,df--)}function ei(n,e){df++,Z2[df]=n.current,n.current=e}var hc={},Br=gc(hc),bs=gc(!1),Du=hc;function If(n,e){var t=n.type.contextTypes;if(!t)return hc;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function Ms(n){return n=n.childContextTypes,n!=null}function D1(){ai(bs),ai(Br)}function Aw(n,e,t){if(Br.current!==hc)throw Error(yt(168));ei(Br,e),ei(bs,t)}function K7(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(yt(108,k9(n)||"Unknown",r));return xi({},t,i)}function O1(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||hc,Du=Br.current,ei(Br,n),ei(bs,bs.current),!0}function Cw(n,e,t){var i=n.stateNode;if(!i)throw Error(yt(169));t?(n=K7(n,e,Du),i.__reactInternalMemoizedMergedChildContext=n,ai(bs),ai(Br),ei(Br,n)):ai(bs),ei(bs,t)}var Wa=null,yv=!1,Ky=!1;function Q7(n){Wa===null?Wa=[n]:Wa.push(n)}function YP(n){yv=!0,Q7(n)}function vc(){if(!Ky&&Wa!==null){Ky=!0;var n=0,e=Wn;try{var t=Wa;for(Wn=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}Wa=null,yv=!1}catch(r){throw Wa!==null&&(Wa=Wa.slice(n+1)),w7(F3,vc),r}finally{Wn=e,Ky=!1}}return null}var pf=[],mf=0,F1=null,U1=0,oo=[],ao=0,Ou=null,Za=1,Ka="";function au(n,e){pf[mf++]=U1,pf[mf++]=F1,F1=n,U1=e}function J7(n,e,t){oo[ao++]=Za,oo[ao++]=Ka,oo[ao++]=Ou,Ou=n;var i=Za;n=Ka;var r=32-Uo(i)-1;i&=~(1<<r),t+=1;var s=32-Uo(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Za=1<<32-Uo(e)+r|t<<r|i,Ka=s+n}else Za=1<<s|t<<r|i,Ka=n}function q3(n){n.return!==null&&(au(n,1),J7(n,1,0))}function X3(n){for(;n===F1;)F1=pf[--mf],pf[mf]=null,U1=pf[--mf],pf[mf]=null;for(;n===Ou;)Ou=oo[--ao],oo[ao]=null,Ka=oo[--ao],oo[ao]=null,Za=oo[--ao],oo[ao]=null}var Gs=null,Hs=null,fi=!1,Io=null;function $7(n,e){var t=lo(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function Pw(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Gs=n,Hs=ec(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Gs=n,Hs=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Ou!==null?{id:Za,overflow:Ka}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=lo(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Gs=n,Hs=null,!0):!1;default:return!1}}function K2(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Q2(n){if(fi){var e=Hs;if(e){var t=e;if(!Pw(n,e)){if(K2(n))throw Error(yt(418));e=ec(t.nextSibling);var i=Gs;e&&Pw(n,e)?$7(i,t):(n.flags=n.flags&-4097|2,fi=!1,Gs=n)}}else{if(K2(n))throw Error(yt(418));n.flags=n.flags&-4097|2,fi=!1,Gs=n}}}function Rw(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Gs=n}function Im(n){if(n!==Gs)return!1;if(!fi)return Rw(n),fi=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!q2(n.type,n.memoizedProps)),e&&(e=Hs)){if(K2(n))throw e8(),Error(yt(418));for(;e;)$7(n,e),e=ec(e.nextSibling)}if(Rw(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(yt(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Hs=ec(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Hs=null}}else Hs=Gs?ec(n.stateNode.nextSibling):null;return!0}function e8(){for(var n=Hs;n;)n=ec(n.nextSibling)}function Df(){Hs=Gs=null,fi=!1}function Y3(n){Io===null?Io=[n]:Io.push(n)}var ZP=cl.ReactCurrentBatchConfig;function zd(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(yt(309));var i=t.stateNode}if(!i)throw Error(yt(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(yt(284));if(!t._owner)throw Error(yt(290,n))}return n}function Dm(n,e){throw n=Object.prototype.toString.call(e),Error(yt(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function kw(n){var e=n._init;return e(n._payload)}function t8(n){function e(y,M){if(n){var b=y.deletions;b===null?(y.deletions=[M],y.flags|=16):b.push(M)}}function t(y,M){if(!n)return null;for(;M!==null;)e(y,M),M=M.sibling;return null}function i(y,M){for(y=new Map;M!==null;)M.key!==null?y.set(M.key,M):y.set(M.index,M),M=M.sibling;return y}function r(y,M){return y=rc(y,M),y.index=0,y.sibling=null,y}function s(y,M,b){return y.index=b,n?(b=y.alternate,b!==null?(b=b.index,b<M?(y.flags|=2,M):b):(y.flags|=2,M)):(y.flags|=1048576,M)}function o(y){return n&&y.alternate===null&&(y.flags|=2),y}function a(y,M,b,A){return M===null||M.tag!==6?(M=ix(b,y.mode,A),M.return=y,M):(M=r(M,b),M.return=y,M)}function l(y,M,b,A){var T=b.type;return T===lf?u(y,M,b.props.children,A,b.key):M!==null&&(M.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Gl&&kw(T)===M.type)?(A=r(M,b.props),A.ref=zd(y,M,b),A.return=y,A):(A=h1(b.type,b.key,b.props,null,y.mode,A),A.ref=zd(y,M,b),A.return=y,A)}function c(y,M,b,A){return M===null||M.tag!==4||M.stateNode.containerInfo!==b.containerInfo||M.stateNode.implementation!==b.implementation?(M=rx(b,y.mode,A),M.return=y,M):(M=r(M,b.children||[]),M.return=y,M)}function u(y,M,b,A,T){return M===null||M.tag!==7?(M=Au(b,y.mode,A,T),M.return=y,M):(M=r(M,b),M.return=y,M)}function f(y,M,b){if(typeof M=="string"&&M!==""||typeof M=="number")return M=ix(""+M,y.mode,b),M.return=y,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Mm:return b=h1(M.type,M.key,M.props,null,y.mode,b),b.ref=zd(y,null,M),b.return=y,b;case af:return M=rx(M,y.mode,b),M.return=y,M;case Gl:var A=M._init;return f(y,A(M._payload),b)}if(c0(M)||Id(M))return M=Au(M,y.mode,b,null),M.return=y,M;Dm(y,M)}return null}function d(y,M,b,A){var T=M!==null?M.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return T!==null?null:a(y,M,""+b,A);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Mm:return b.key===T?l(y,M,b,A):null;case af:return b.key===T?c(y,M,b,A):null;case Gl:return T=b._init,d(y,M,T(b._payload),A)}if(c0(b)||Id(b))return T!==null?null:u(y,M,b,A,null);Dm(y,b)}return null}function h(y,M,b,A,T){if(typeof A=="string"&&A!==""||typeof A=="number")return y=y.get(b)||null,a(M,y,""+A,T);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Mm:return y=y.get(A.key===null?b:A.key)||null,l(M,y,A,T);case af:return y=y.get(A.key===null?b:A.key)||null,c(M,y,A,T);case Gl:var P=A._init;return h(y,M,b,P(A._payload),T)}if(c0(A)||Id(A))return y=y.get(b)||null,u(M,y,A,T,null);Dm(M,A)}return null}function g(y,M,b,A){for(var T=null,P=null,k=M,N=M=0,z=null;k!==null&&N<b.length;N++){k.index>N?(z=k,k=null):z=k.sibling;var R=d(y,k,b[N],A);if(R===null){k===null&&(k=z);break}n&&k&&R.alternate===null&&e(y,k),M=s(R,M,N),P===null?T=R:P.sibling=R,P=R,k=z}if(N===b.length)return t(y,k),fi&&au(y,N),T;if(k===null){for(;N<b.length;N++)k=f(y,b[N],A),k!==null&&(M=s(k,M,N),P===null?T=k:P.sibling=k,P=k);return fi&&au(y,N),T}for(k=i(y,k);N<b.length;N++)z=h(k,y,N,b[N],A),z!==null&&(n&&z.alternate!==null&&k.delete(z.key===null?N:z.key),M=s(z,M,N),P===null?T=z:P.sibling=z,P=z);return n&&k.forEach(function(F){return e(y,F)}),fi&&au(y,N),T}function _(y,M,b,A){var T=Id(b);if(typeof T!="function")throw Error(yt(150));if(b=T.call(b),b==null)throw Error(yt(151));for(var P=T=null,k=M,N=M=0,z=null,R=b.next();k!==null&&!R.done;N++,R=b.next()){k.index>N?(z=k,k=null):z=k.sibling;var F=d(y,k,R.value,A);if(F===null){k===null&&(k=z);break}n&&k&&F.alternate===null&&e(y,k),M=s(F,M,N),P===null?T=F:P.sibling=F,P=F,k=z}if(R.done)return t(y,k),fi&&au(y,N),T;if(k===null){for(;!R.done;N++,R=b.next())R=f(y,R.value,A),R!==null&&(M=s(R,M,N),P===null?T=R:P.sibling=R,P=R);return fi&&au(y,N),T}for(k=i(y,k);!R.done;N++,R=b.next())R=h(k,y,N,R.value,A),R!==null&&(n&&R.alternate!==null&&k.delete(R.key===null?N:R.key),M=s(R,M,N),P===null?T=R:P.sibling=R,P=R);return n&&k.forEach(function(V){return e(y,V)}),fi&&au(y,N),T}function x(y,M,b,A){if(typeof b=="object"&&b!==null&&b.type===lf&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Mm:e:{for(var T=b.key,P=M;P!==null;){if(P.key===T){if(T=b.type,T===lf){if(P.tag===7){t(y,P.sibling),M=r(P,b.props.children),M.return=y,y=M;break e}}else if(P.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Gl&&kw(T)===P.type){t(y,P.sibling),M=r(P,b.props),M.ref=zd(y,P,b),M.return=y,y=M;break e}t(y,P);break}else e(y,P);P=P.sibling}b.type===lf?(M=Au(b.props.children,y.mode,A,b.key),M.return=y,y=M):(A=h1(b.type,b.key,b.props,null,y.mode,A),A.ref=zd(y,M,b),A.return=y,y=A)}return o(y);case af:e:{for(P=b.key;M!==null;){if(M.key===P)if(M.tag===4&&M.stateNode.containerInfo===b.containerInfo&&M.stateNode.implementation===b.implementation){t(y,M.sibling),M=r(M,b.children||[]),M.return=y,y=M;break e}else{t(y,M);break}else e(y,M);M=M.sibling}M=rx(b,y.mode,A),M.return=y,y=M}return o(y);case Gl:return P=b._init,x(y,M,P(b._payload),A)}if(c0(b))return g(y,M,b,A);if(Id(b))return _(y,M,b,A);Dm(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,M!==null&&M.tag===6?(t(y,M.sibling),M=r(M,b),M.return=y,y=M):(t(y,M),M=ix(b,y.mode,A),M.return=y,y=M),o(y)):t(y,M)}return x}var Of=t8(!0),n8=t8(!1),z1=gc(null),B1=null,gf=null,Z3=null;function K3(){Z3=gf=B1=null}function Q3(n){var e=z1.current;ai(z1),n._currentValue=e}function J2(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function Pf(n,e){B1=n,Z3=gf=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(ws=!0),n.firstContext=null)}function fo(n){var e=n._currentValue;if(Z3!==n)if(n={context:n,memoizedValue:e,next:null},gf===null){if(B1===null)throw Error(yt(308));gf=n,B1.dependencies={lanes:0,firstContext:n}}else gf=gf.next=n;return e}var yu=null;function J3(n){yu===null?yu=[n]:yu.push(n)}function i8(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,J3(e)):(t.next=r.next,r.next=t),e.interleaved=t,il(n,i)}function il(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Wl=!1;function $3(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function r8(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function $a(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function tc(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,En&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,il(n,t)}return r=i.interleaved,r===null?(e.next=e,J3(i)):(e.next=r.next,r.next=e),i.interleaved=e,il(n,t)}function s1(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,U3(n,t)}}function Lw(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function H1(n,e,t,i){var r=n.updateQueue;Wl=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var f=r.baseState;o=0,u=c=l=null,a=s;do{var d=a.lane,h=a.eventTime;if((i&d)===d){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=n,_=a;switch(d=e,h=t,_.tag){case 1:if(g=_.payload,typeof g=="function"){f=g.call(h,f,d);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=_.payload,d=typeof g=="function"?g.call(h,f,d):g,d==null)break e;f=xi({},f,d);break e;case 2:Wl=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,d=r.effects,d===null?r.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=h,l=f):u=u.next=h,o|=d;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;d=a,a=d.next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}while(!0);if(u===null&&(l=f),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Uu|=o,n.lanes=o,n.memoizedState=f}}function Nw(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(yt(191,r));r.call(i)}}}var Fp={},da=gc(Fp),$0=gc(Fp),ep=gc(Fp);function xu(n){if(n===Fp)throw Error(yt(174));return n}function e_(n,e){switch(ei(ep,e),ei($0,n),ei(da,Fp),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:L2(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=L2(e,n)}ai(da),ei(da,e)}function Ff(){ai(da),ai($0),ai(ep)}function s8(n){xu(ep.current);var e=xu(da.current),t=L2(e,n.type);e!==t&&(ei($0,n),ei(da,t))}function t_(n){$0.current===n&&(ai(da),ai($0))}var mi=gc(0);function V1(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Qy=[];function n_(){for(var n=0;n<Qy.length;n++)Qy[n]._workInProgressVersionPrimary=null;Qy.length=0}var o1=cl.ReactCurrentDispatcher,Jy=cl.ReactCurrentBatchConfig,Fu=0,vi=null,Zi=null,or=null,G1=!1,M0=!1,tp=0,KP=0;function Rr(){throw Error(yt(321))}function i_(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Bo(n[t],e[t]))return!1;return!0}function r_(n,e,t,i,r,s){if(Fu=s,vi=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,o1.current=n===null||n.memoizedState===null?eR:tR,n=t(i,r),M0){s=0;do{if(M0=!1,tp=0,25<=s)throw Error(yt(301));s+=1,or=Zi=null,e.updateQueue=null,o1.current=nR,n=t(i,r)}while(M0)}if(o1.current=W1,e=Zi!==null&&Zi.next!==null,Fu=0,or=Zi=vi=null,G1=!1,e)throw Error(yt(300));return n}function s_(){var n=tp!==0;return tp=0,n}function sa(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return or===null?vi.memoizedState=or=n:or=or.next=n,or}function po(){if(Zi===null){var n=vi.alternate;n=n!==null?n.memoizedState:null}else n=Zi.next;var e=or===null?vi.memoizedState:or.next;if(e!==null)or=e,Zi=n;else{if(n===null)throw Error(yt(310));Zi=n,n={memoizedState:Zi.memoizedState,baseState:Zi.baseState,baseQueue:Zi.baseQueue,queue:Zi.queue,next:null},or===null?vi.memoizedState=or=n:or=or.next=n}return or}function np(n,e){return typeof e=="function"?e(n):e}function $y(n){var e=po(),t=e.queue;if(t===null)throw Error(yt(311));t.lastRenderedReducer=n;var i=Zi,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Fu&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=i):l=l.next=f,vi.lanes|=u,Uu|=u}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,Bo(i,e.memoizedState)||(ws=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,vi.lanes|=s,Uu|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function ex(n){var e=po(),t=e.queue;if(t===null)throw Error(yt(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);Bo(s,e.memoizedState)||(ws=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function o8(){}function a8(n,e){var t=vi,i=po(),r=e(),s=!Bo(i.memoizedState,r);if(s&&(i.memoizedState=r,ws=!0),i=i.queue,o_(u8.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||or!==null&&or.memoizedState.tag&1){if(t.flags|=2048,ip(9,c8.bind(null,t,i,r,e),void 0,null),cr===null)throw Error(yt(349));Fu&30||l8(t,e,r)}return r}function l8(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=vi.updateQueue,e===null?(e={lastEffect:null,stores:null},vi.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function c8(n,e,t,i){e.value=t,e.getSnapshot=i,h8(e)&&f8(n)}function u8(n,e,t){return t(function(){h8(e)&&f8(n)})}function h8(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Bo(n,t)}catch{return!0}}function f8(n){var e=il(n,1);e!==null&&zo(e,n,1,-1)}function Iw(n){var e=sa();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:np,lastRenderedState:n},e.queue=n,n=n.dispatch=$P.bind(null,vi,n),[e.memoizedState,n]}function ip(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=vi.updateQueue,e===null?(e={lastEffect:null,stores:null},vi.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function d8(){return po().memoizedState}function a1(n,e,t,i){var r=sa();vi.flags|=n,r.memoizedState=ip(1|e,t,void 0,i===void 0?null:i)}function xv(n,e,t,i){var r=po();i=i===void 0?null:i;var s=void 0;if(Zi!==null){var o=Zi.memoizedState;if(s=o.destroy,i!==null&&i_(i,o.deps)){r.memoizedState=ip(e,t,s,i);return}}vi.flags|=n,r.memoizedState=ip(1|e,t,s,i)}function Dw(n,e){return a1(8390656,8,n,e)}function o_(n,e){return xv(2048,8,n,e)}function p8(n,e){return xv(4,2,n,e)}function m8(n,e){return xv(4,4,n,e)}function g8(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function v8(n,e,t){return t=t!=null?t.concat([n]):null,xv(4,4,g8.bind(null,e,n),t)}function a_(){}function y8(n,e){var t=po();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&i_(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function x8(n,e){var t=po();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&i_(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function _8(n,e,t){return Fu&21?(Bo(t,e)||(t=E7(),vi.lanes|=t,Uu|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,ws=!0),n.memoizedState=t)}function QP(n,e){var t=Wn;Wn=t!==0&&4>t?t:4,n(!0);var i=Jy.transition;Jy.transition={};try{n(!1),e()}finally{Wn=t,Jy.transition=i}}function S8(){return po().memoizedState}function JP(n,e,t){var i=ic(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},w8(n))b8(e,t);else if(t=i8(n,e,t,i),t!==null){var r=is();zo(t,n,i,r),M8(t,e,i)}}function $P(n,e,t){var i=ic(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(w8(n))b8(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(r.hasEagerState=!0,r.eagerState=a,Bo(a,o)){var l=e.interleaved;l===null?(r.next=r,J3(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=i8(n,e,r,i),t!==null&&(r=is(),zo(t,n,i,r),M8(t,e,i))}}function w8(n){var e=n.alternate;return n===vi||e!==null&&e===vi}function b8(n,e){M0=G1=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function M8(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,U3(n,t)}}var W1={readContext:fo,useCallback:Rr,useContext:Rr,useEffect:Rr,useImperativeHandle:Rr,useInsertionEffect:Rr,useLayoutEffect:Rr,useMemo:Rr,useReducer:Rr,useRef:Rr,useState:Rr,useDebugValue:Rr,useDeferredValue:Rr,useTransition:Rr,useMutableSource:Rr,useSyncExternalStore:Rr,useId:Rr,unstable_isNewReconciler:!1},eR={readContext:fo,useCallback:function(n,e){return sa().memoizedState=[n,e===void 0?null:e],n},useContext:fo,useEffect:Dw,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,a1(4194308,4,g8.bind(null,e,n),t)},useLayoutEffect:function(n,e){return a1(4194308,4,n,e)},useInsertionEffect:function(n,e){return a1(4,2,n,e)},useMemo:function(n,e){var t=sa();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=sa();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=JP.bind(null,vi,n),[i.memoizedState,n]},useRef:function(n){var e=sa();return n={current:n},e.memoizedState=n},useState:Iw,useDebugValue:a_,useDeferredValue:function(n){return sa().memoizedState=n},useTransition:function(){var n=Iw(!1),e=n[0];return n=QP.bind(null,n[1]),sa().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=vi,r=sa();if(fi){if(t===void 0)throw Error(yt(407));t=t()}else{if(t=e(),cr===null)throw Error(yt(349));Fu&30||l8(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,Dw(u8.bind(null,i,s,n),[n]),i.flags|=2048,ip(9,c8.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=sa(),e=cr.identifierPrefix;if(fi){var t=Ka,i=Za;t=(i&~(1<<32-Uo(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=tp++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=KP++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},tR={readContext:fo,useCallback:y8,useContext:fo,useEffect:o_,useImperativeHandle:v8,useInsertionEffect:p8,useLayoutEffect:m8,useMemo:x8,useReducer:$y,useRef:d8,useState:function(){return $y(np)},useDebugValue:a_,useDeferredValue:function(n){var e=po();return _8(e,Zi.memoizedState,n)},useTransition:function(){var n=$y(np)[0],e=po().memoizedState;return[n,e]},useMutableSource:o8,useSyncExternalStore:a8,useId:S8,unstable_isNewReconciler:!1},nR={readContext:fo,useCallback:y8,useContext:fo,useEffect:o_,useImperativeHandle:v8,useInsertionEffect:p8,useLayoutEffect:m8,useMemo:x8,useReducer:ex,useRef:d8,useState:function(){return ex(np)},useDebugValue:a_,useDeferredValue:function(n){var e=po();return Zi===null?e.memoizedState=n:_8(e,Zi.memoizedState,n)},useTransition:function(){var n=ex(np)[0],e=po().memoizedState;return[n,e]},useMutableSource:o8,useSyncExternalStore:a8,useId:S8,unstable_isNewReconciler:!1};function ko(n,e){if(n&&n.defaultProps){e=xi({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function $2(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:xi({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var _v={isMounted:function(n){return(n=n._reactInternals)?qu(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=is(),r=ic(n),s=$a(i,r);s.payload=e,t!=null&&(s.callback=t),e=tc(n,s,r),e!==null&&(zo(e,n,r,i),s1(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=is(),r=ic(n),s=$a(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=tc(n,s,r),e!==null&&(zo(e,n,r,i),s1(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=is(),i=ic(n),r=$a(t,i);r.tag=2,e!=null&&(r.callback=e),e=tc(n,r,i),e!==null&&(zo(e,n,i,t),s1(e,n,i))}};function Ow(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Z0(t,i)||!Z0(r,s):!0}function E8(n,e,t){var i=!1,r=hc,s=e.contextType;return typeof s=="object"&&s!==null?s=fo(s):(r=Ms(e)?Du:Br.current,i=e.contextTypes,s=(i=i!=null)?If(n,r):hc),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=_v,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function Fw(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&_v.enqueueReplaceState(e,e.state,null)}function e4(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs={},$3(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=fo(s):(s=Ms(e)?Du:Br.current,r.context=If(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&($2(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&_v.enqueueReplaceState(r,r.state,null),H1(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function Uf(n,e){try{var t="",i=e;do t+=R9(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function tx(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function t4(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var iR=typeof WeakMap=="function"?WeakMap:Map;function T8(n,e,t){t=$a(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){q1||(q1=!0,h4=i),t4(n,e)},t}function A8(n,e,t){t=$a(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){t4(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){t4(n,e),typeof i!="function"&&(nc===null?nc=new Set([this]):nc.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function Uw(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new iR;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=vR.bind(null,n,e,t),e.then(n,n))}function zw(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function Bw(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=$a(-1,1),e.tag=2,tc(t,e,1))),t.lanes|=1),n)}var rR=cl.ReactCurrentOwner,ws=!1;function es(n,e,t,i){e.child=n===null?n8(e,null,t,i):Of(e,n.child,t,i)}function Hw(n,e,t,i,r){t=t.render;var s=e.ref;return Pf(e,r),i=r_(n,e,t,i,s,r),t=s_(),n!==null&&!ws?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,rl(n,e,r)):(fi&&t&&q3(e),e.flags|=1,es(n,e,i,r),e.child)}function Vw(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!m_(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,C8(n,e,s,i,r)):(n=h1(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Z0,t(o,i)&&n.ref===e.ref)return rl(n,e,r)}return e.flags|=1,n=rc(s,i),n.ref=e.ref,n.return=e,e.child=n}function C8(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(Z0(s,i)&&n.ref===e.ref)if(ws=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(ws=!0);else return e.lanes=n.lanes,rl(n,e,r)}return n4(n,e,t,i,r)}function P8(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ei(yf,Us),Us|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,ei(yf,Us),Us|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,ei(yf,Us),Us|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,ei(yf,Us),Us|=i;return es(n,e,r,t),e.child}function R8(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function n4(n,e,t,i,r){var s=Ms(t)?Du:Br.current;return s=If(e,s),Pf(e,r),t=r_(n,e,t,i,s,r),i=s_(),n!==null&&!ws?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,rl(n,e,r)):(fi&&i&&q3(e),e.flags|=1,es(n,e,t,r),e.child)}function Gw(n,e,t,i,r){if(Ms(t)){var s=!0;O1(e)}else s=!1;if(Pf(e,r),e.stateNode===null)l1(n,e),E8(e,t,i),e4(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=fo(c):(c=Ms(t)?Du:Br.current,c=If(e,c));var u=t.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&Fw(e,o,i,c),Wl=!1;var d=e.memoizedState;o.state=d,H1(e,i,o,r),l=e.memoizedState,a!==i||d!==l||bs.current||Wl?(typeof u=="function"&&($2(e,t,u,i),l=e.memoizedState),(a=Wl||Ow(e,t,a,i,d,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,r8(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:ko(e.type,a),o.props=c,f=e.pendingProps,d=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=fo(l):(l=Ms(t)?Du:Br.current,l=If(e,l));var h=t.getDerivedStateFromProps;(u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==l)&&Fw(e,o,i,l),Wl=!1,d=e.memoizedState,o.state=d,H1(e,i,o,r);var g=e.memoizedState;a!==f||d!==g||bs.current||Wl?(typeof h=="function"&&($2(e,t,h,i),g=e.memoizedState),(c=Wl||Ow(e,t,c,i,d,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),o.props=i,o.state=g,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),i=!1)}return i4(n,e,t,i,s,r)}function i4(n,e,t,i,r,s){R8(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&Cw(e,t,!1),rl(n,e,s);i=e.stateNode,rR.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=Of(e,n.child,null,s),e.child=Of(e,null,a,s)):es(n,e,a,s),e.memoizedState=i.state,r&&Cw(e,t,!0),e.child}function k8(n){var e=n.stateNode;e.pendingContext?Aw(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Aw(n,e.context,!1),e_(n,e.containerInfo)}function Ww(n,e,t,i,r){return Df(),Y3(r),e.flags|=256,es(n,e,t,i),e.child}var r4={dehydrated:null,treeContext:null,retryLane:0};function s4(n){return{baseLanes:n,cachePool:null,transitions:null}}function L8(n,e,t){var i=e.pendingProps,r=mi.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),ei(mi,r&1),n===null)return Q2(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=bv(o,i,0,null),n=Au(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=s4(t),e.memoizedState=r4,n):l_(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return sR(n,e,o,i,a,r,t);if(s){s=i.fallback,o=e.mode,r=n.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=rc(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=rc(a,s):(s=Au(s,o,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=n.child.memoizedState,o=o===null?s4(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=r4,i}return s=n.child,n=s.sibling,i=rc(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function l_(n,e){return e=bv({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Om(n,e,t,i){return i!==null&&Y3(i),Of(e,n.child,null,t),n=l_(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function sR(n,e,t,i,r,s,o){if(t)return e.flags&256?(e.flags&=-257,i=tx(Error(yt(422))),Om(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=bv({mode:"visible",children:i.children},r,0,null),s=Au(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Of(e,n.child,null,o),e.child.memoizedState=s4(o),e.memoizedState=r4,s);if(!(e.mode&1))return Om(n,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(yt(419)),i=tx(s,i,void 0),Om(n,e,o,i)}if(a=(o&n.childLanes)!==0,ws||a){if(i=cr,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,il(n,r),zo(i,n,r,-1))}return p_(),i=tx(Error(yt(421))),Om(n,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=yR.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,Hs=ec(r.nextSibling),Gs=e,fi=!0,Io=null,n!==null&&(oo[ao++]=Za,oo[ao++]=Ka,oo[ao++]=Ou,Za=n.id,Ka=n.overflow,Ou=e),e=l_(e,i.children),e.flags|=4096,e)}function jw(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),J2(n.return,e,t)}function nx(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function N8(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(es(n,e,i.children,t),i=mi.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&jw(n,t,e);else if(n.tag===19)jw(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(ei(mi,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&V1(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),nx(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&V1(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}nx(e,!0,t,null,s);break;case"together":nx(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function l1(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function rl(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Uu|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(yt(153));if(e.child!==null){for(n=e.child,t=rc(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=rc(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function oR(n,e,t){switch(e.tag){case 3:k8(e),Df();break;case 5:s8(e);break;case 1:Ms(e.type)&&O1(e);break;case 4:e_(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;ei(z1,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(ei(mi,mi.current&1),e.flags|=128,null):t&e.child.childLanes?L8(n,e,t):(ei(mi,mi.current&1),n=rl(n,e,t),n!==null?n.sibling:null);ei(mi,mi.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return N8(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ei(mi,mi.current),i)break;return null;case 22:case 23:return e.lanes=0,P8(n,e,t)}return rl(n,e,t)}var I8,o4,D8,O8;I8=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};o4=function(){};D8=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,xu(da.current);var s=null;switch(t){case"input":r=C2(n,r),i=C2(n,i),s=[];break;case"select":r=xi({},r,{value:void 0}),i=xi({},i,{value:void 0}),s=[];break;case"textarea":r=k2(n,r),i=k2(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=I1)}N2(t,i);var o;t=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(V0.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(V0.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ii("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};O8=function(n,e,t,i){t!==i&&(e.flags|=4)};function Bd(n,e){if(!fi)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function kr(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function aR(n,e,t){var i=e.pendingProps;switch(X3(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kr(e),null;case 1:return Ms(e.type)&&D1(),kr(e),null;case 3:return i=e.stateNode,Ff(),ai(bs),ai(Br),n_(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Im(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Io!==null&&(p4(Io),Io=null))),o4(n,e),kr(e),null;case 5:t_(e);var r=xu(ep.current);if(t=e.type,n!==null&&e.stateNode!=null)D8(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(yt(166));return kr(e),null}if(n=xu(da.current),Im(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[la]=e,i[J0]=s,n=(e.mode&1)!==0,t){case"dialog":ii("cancel",i),ii("close",i);break;case"iframe":case"object":case"embed":ii("load",i);break;case"video":case"audio":for(r=0;r<h0.length;r++)ii(h0[r],i);break;case"source":ii("error",i);break;case"img":case"image":case"link":ii("error",i),ii("load",i);break;case"details":ii("toggle",i);break;case"input":ew(i,s),ii("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},ii("invalid",i);break;case"textarea":nw(i,s),ii("invalid",i)}N2(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Nm(i.textContent,a,n),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Nm(i.textContent,a,n),r=["children",""+a]):V0.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ii("scroll",i)}switch(t){case"input":Em(i),tw(i,s,!0);break;case"textarea":Em(i),iw(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=I1)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=u7(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[la]=e,n[J0]=i,I8(n,e,!1,!1),e.stateNode=n;e:{switch(o=I2(t,i),t){case"dialog":ii("cancel",n),ii("close",n),r=i;break;case"iframe":case"object":case"embed":ii("load",n),r=i;break;case"video":case"audio":for(r=0;r<h0.length;r++)ii(h0[r],n);r=i;break;case"source":ii("error",n),r=i;break;case"img":case"image":case"link":ii("error",n),ii("load",n),r=i;break;case"details":ii("toggle",n),r=i;break;case"input":ew(n,i),r=C2(n,i),ii("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=xi({},i,{value:void 0}),ii("invalid",n);break;case"textarea":nw(n,i),r=k2(n,i),ii("invalid",n);break;default:r=i}N2(t,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?d7(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&h7(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&G0(n,l):typeof l=="number"&&G0(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(V0.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ii("scroll",n):l!=null&&L3(n,s,l,o))}switch(t){case"input":Em(n),tw(n,i,!1);break;case"textarea":Em(n),iw(n);break;case"option":i.value!=null&&n.setAttribute("value",""+uc(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?Ef(n,!!i.multiple,s,!1):i.defaultValue!=null&&Ef(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=I1)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return kr(e),null;case 6:if(n&&e.stateNode!=null)O8(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(yt(166));if(t=xu(ep.current),xu(da.current),Im(e)){if(i=e.stateNode,t=e.memoizedProps,i[la]=e,(s=i.nodeValue!==t)&&(n=Gs,n!==null))switch(n.tag){case 3:Nm(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Nm(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[la]=e,e.stateNode=i}return kr(e),null;case 13:if(ai(mi),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(fi&&Hs!==null&&e.mode&1&&!(e.flags&128))e8(),Df(),e.flags|=98560,s=!1;else if(s=Im(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(yt(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(yt(317));s[la]=e}else Df(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;kr(e),s=!1}else Io!==null&&(p4(Io),Io=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||mi.current&1?Ki===0&&(Ki=3):p_())),e.updateQueue!==null&&(e.flags|=4),kr(e),null);case 4:return Ff(),o4(n,e),n===null&&K0(e.stateNode.containerInfo),kr(e),null;case 10:return Q3(e.type._context),kr(e),null;case 17:return Ms(e.type)&&D1(),kr(e),null;case 19:if(ai(mi),s=e.memoizedState,s===null)return kr(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Bd(s,!1);else{if(Ki!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=V1(n),o!==null){for(e.flags|=128,Bd(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return ei(mi,mi.current&1|2),e.child}n=n.sibling}s.tail!==null&&ki()>zf&&(e.flags|=128,i=!0,Bd(s,!1),e.lanes=4194304)}else{if(!i)if(n=V1(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Bd(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!fi)return kr(e),null}else 2*ki()-s.renderingStartTime>zf&&t!==1073741824&&(e.flags|=128,i=!0,Bd(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ki(),e.sibling=null,t=mi.current,ei(mi,i?t&1|2:t&1),e):(kr(e),null);case 22:case 23:return d_(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Us&1073741824&&(kr(e),e.subtreeFlags&6&&(e.flags|=8192)):kr(e),null;case 24:return null;case 25:return null}throw Error(yt(156,e.tag))}function lR(n,e){switch(X3(e),e.tag){case 1:return Ms(e.type)&&D1(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Ff(),ai(bs),ai(Br),n_(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return t_(e),null;case 13:if(ai(mi),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(yt(340));Df()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return ai(mi),null;case 4:return Ff(),null;case 10:return Q3(e.type._context),null;case 22:case 23:return d_(),null;case 24:return null;default:return null}}var Fm=!1,Or=!1,cR=typeof WeakSet=="function"?WeakSet:Set,Nt=null;function vf(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){wi(n,e,i)}else t.current=null}function a4(n,e,t){try{t()}catch(i){wi(n,e,i)}}var qw=!1;function uR(n,e){if(W2=k1,n=H7(),j3(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,f=n,d=null;t:for(;;){for(var h;f!==t||r!==0&&f.nodeType!==3||(a=o+r),f!==s||i!==0&&f.nodeType!==3||(l=o+i),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===n)break t;if(d===t&&++c===r&&(a=o),d===s&&++u===i&&(l=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(j2={focusedElem:n,selectionRange:t},k1=!1,Nt=e;Nt!==null;)if(e=Nt,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Nt=n;else for(;Nt!==null;){e=Nt;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var _=g.memoizedProps,x=g.memoizedState,y=e.stateNode,M=y.getSnapshotBeforeUpdate(e.elementType===e.type?_:ko(e.type,_),x);y.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(yt(163))}}catch(A){wi(e,e.return,A)}if(n=e.sibling,n!==null){n.return=e.return,Nt=n;break}Nt=e.return}return g=qw,qw=!1,g}function E0(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&a4(e,t,s)}r=r.next}while(r!==i)}}function Sv(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function l4(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function F8(n){var e=n.alternate;e!==null&&(n.alternate=null,F8(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[la],delete e[J0],delete e[Y2],delete e[qP],delete e[XP])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function U8(n){return n.tag===5||n.tag===3||n.tag===4}function Xw(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||U8(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function c4(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=I1));else if(i!==4&&(n=n.child,n!==null))for(c4(n,e,t),n=n.sibling;n!==null;)c4(n,e,t),n=n.sibling}function u4(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(u4(n,e,t),n=n.sibling;n!==null;)u4(n,e,t),n=n.sibling}var Sr=null,No=!1;function Ll(n,e,t){for(t=t.child;t!==null;)z8(n,e,t),t=t.sibling}function z8(n,e,t){if(fa&&typeof fa.onCommitFiberUnmount=="function")try{fa.onCommitFiberUnmount(dv,t)}catch{}switch(t.tag){case 5:Or||vf(t,e);case 6:var i=Sr,r=No;Sr=null,Ll(n,e,t),Sr=i,No=r,Sr!==null&&(No?(n=Sr,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Sr.removeChild(t.stateNode));break;case 18:Sr!==null&&(No?(n=Sr,t=t.stateNode,n.nodeType===8?Zy(n.parentNode,t):n.nodeType===1&&Zy(n,t),X0(n)):Zy(Sr,t.stateNode));break;case 4:i=Sr,r=No,Sr=t.stateNode.containerInfo,No=!0,Ll(n,e,t),Sr=i,No=r;break;case 0:case 11:case 14:case 15:if(!Or&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&a4(t,e,o),r=r.next}while(r!==i)}Ll(n,e,t);break;case 1:if(!Or&&(vf(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){wi(t,e,a)}Ll(n,e,t);break;case 21:Ll(n,e,t);break;case 22:t.mode&1?(Or=(i=Or)||t.memoizedState!==null,Ll(n,e,t),Or=i):Ll(n,e,t);break;default:Ll(n,e,t)}}function Yw(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new cR),e.forEach(function(i){var r=xR.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function Ao(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Sr=a.stateNode,No=!1;break e;case 3:Sr=a.stateNode.containerInfo,No=!0;break e;case 4:Sr=a.stateNode.containerInfo,No=!0;break e}a=a.return}if(Sr===null)throw Error(yt(160));z8(s,o,r),Sr=null,No=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){wi(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)B8(e,n),e=e.sibling}function B8(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ao(e,n),ea(n),i&4){try{E0(3,n,n.return),Sv(3,n)}catch(_){wi(n,n.return,_)}try{E0(5,n,n.return)}catch(_){wi(n,n.return,_)}}break;case 1:Ao(e,n),ea(n),i&512&&t!==null&&vf(t,t.return);break;case 5:if(Ao(e,n),ea(n),i&512&&t!==null&&vf(t,t.return),n.flags&32){var r=n.stateNode;try{G0(r,"")}catch(_){wi(n,n.return,_)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&l7(r,s),I2(a,o);var c=I2(a,s);for(o=0;o<l.length;o+=2){var u=l[o],f=l[o+1];u==="style"?d7(r,f):u==="dangerouslySetInnerHTML"?h7(r,f):u==="children"?G0(r,f):L3(r,u,f,c)}switch(a){case"input":P2(r,s);break;case"textarea":c7(r,s);break;case"select":var d=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Ef(r,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?Ef(r,!!s.multiple,s.defaultValue,!0):Ef(r,!!s.multiple,s.multiple?[]:"",!1))}r[J0]=s}catch(_){wi(n,n.return,_)}}break;case 6:if(Ao(e,n),ea(n),i&4){if(n.stateNode===null)throw Error(yt(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(_){wi(n,n.return,_)}}break;case 3:if(Ao(e,n),ea(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{X0(e.containerInfo)}catch(_){wi(n,n.return,_)}break;case 4:Ao(e,n),ea(n);break;case 13:Ao(e,n),ea(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(h_=ki())),i&4&&Yw(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(Or=(c=Or)||u,Ao(e,n),Or=c):Ao(e,n),ea(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(Nt=n,u=n.child;u!==null;){for(f=Nt=u;Nt!==null;){switch(d=Nt,h=d.child,d.tag){case 0:case 11:case 14:case 15:E0(4,d,d.return);break;case 1:vf(d,d.return);var g=d.stateNode;if(typeof g.componentWillUnmount=="function"){i=d,t=d.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(_){wi(i,t,_)}}break;case 5:vf(d,d.return);break;case 22:if(d.memoizedState!==null){Kw(f);continue}}h!==null?(h.return=d,Nt=h):Kw(f)}u=u.sibling}e:for(u=null,f=n;;){if(f.tag===5){if(u===null){u=f;try{r=f.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=f7("display",o))}catch(_){wi(n,n.return,_)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(_){wi(n,n.return,_)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ao(e,n),ea(n),i&4&&Yw(n);break;case 21:break;default:Ao(e,n),ea(n)}}function ea(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(U8(t)){var i=t;break e}t=t.return}throw Error(yt(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(G0(r,""),i.flags&=-33);var s=Xw(n);u4(n,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=Xw(n);c4(n,a,o);break;default:throw Error(yt(161))}}catch(l){wi(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function hR(n,e,t){Nt=n,H8(n)}function H8(n,e,t){for(var i=(n.mode&1)!==0;Nt!==null;){var r=Nt,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Fm;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Or;a=Fm;var c=Or;if(Fm=o,(Or=l)&&!c)for(Nt=r;Nt!==null;)o=Nt,l=o.child,o.tag===22&&o.memoizedState!==null?Qw(r):l!==null?(l.return=o,Nt=l):Qw(r);for(;s!==null;)Nt=s,H8(s),s=s.sibling;Nt=r,Fm=a,Or=c}Zw(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Nt=s):Zw(n)}}function Zw(n){for(;Nt!==null;){var e=Nt;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Or||Sv(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Or)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:ko(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Nw(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}Nw(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&X0(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(yt(163))}Or||e.flags&512&&l4(e)}catch(d){wi(e,e.return,d)}}if(e===n){Nt=null;break}if(t=e.sibling,t!==null){t.return=e.return,Nt=t;break}Nt=e.return}}function Kw(n){for(;Nt!==null;){var e=Nt;if(e===n){Nt=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Nt=t;break}Nt=e.return}}function Qw(n){for(;Nt!==null;){var e=Nt;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Sv(4,e)}catch(l){wi(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){wi(e,r,l)}}var s=e.return;try{l4(e)}catch(l){wi(e,s,l)}break;case 5:var o=e.return;try{l4(e)}catch(l){wi(e,o,l)}}}catch(l){wi(e,e.return,l)}if(e===n){Nt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Nt=a;break}Nt=e.return}}var fR=Math.ceil,j1=cl.ReactCurrentDispatcher,c_=cl.ReactCurrentOwner,ho=cl.ReactCurrentBatchConfig,En=0,cr=null,Hi=null,br=0,Us=0,yf=gc(0),Ki=0,rp=null,Uu=0,wv=0,u_=0,T0=null,_s=null,h_=0,zf=1/0,Ga=null,q1=!1,h4=null,nc=null,Um=!1,Zl=null,X1=0,A0=0,f4=null,c1=-1,u1=0;function is(){return En&6?ki():c1!==-1?c1:c1=ki()}function ic(n){return n.mode&1?En&2&&br!==0?br&-br:ZP.transition!==null?(u1===0&&(u1=E7()),u1):(n=Wn,n!==0||(n=window.event,n=n===void 0?16:L7(n.type)),n):1}function zo(n,e,t,i){if(50<A0)throw A0=0,f4=null,Error(yt(185));Ip(n,t,i),(!(En&2)||n!==cr)&&(n===cr&&(!(En&2)&&(wv|=t),Ki===4&&ql(n,br)),Es(n,i),t===1&&En===0&&!(e.mode&1)&&(zf=ki()+500,yv&&vc()))}function Es(n,e){var t=n.callbackNode;Z9(n,e);var i=R1(n,n===cr?br:0);if(i===0)t!==null&&ow(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&ow(t),e===1)n.tag===0?YP(Jw.bind(null,n)):Q7(Jw.bind(null,n)),WP(function(){!(En&6)&&vc()}),t=null;else{switch(T7(i)){case 1:t=F3;break;case 4:t=b7;break;case 16:t=P1;break;case 536870912:t=M7;break;default:t=P1}t=Z8(t,V8.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function V8(n,e){if(c1=-1,u1=0,En&6)throw Error(yt(327));var t=n.callbackNode;if(Rf()&&n.callbackNode!==t)return null;var i=R1(n,n===cr?br:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=Y1(n,i);else{e=i;var r=En;En|=2;var s=W8();(cr!==n||br!==e)&&(Ga=null,zf=ki()+500,Tu(n,e));do try{mR();break}catch(a){G8(n,a)}while(!0);K3(),j1.current=s,En=r,Hi!==null?e=0:(cr=null,br=0,e=Ki)}if(e!==0){if(e===2&&(r=z2(n),r!==0&&(i=r,e=d4(n,r))),e===1)throw t=rp,Tu(n,0),ql(n,i),Es(n,ki()),t;if(e===6)ql(n,i);else{if(r=n.current.alternate,!(i&30)&&!dR(r)&&(e=Y1(n,i),e===2&&(s=z2(n),s!==0&&(i=s,e=d4(n,s))),e===1))throw t=rp,Tu(n,0),ql(n,i),Es(n,ki()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(yt(345));case 2:lu(n,_s,Ga);break;case 3:if(ql(n,i),(i&130023424)===i&&(e=h_+500-ki(),10<e)){if(R1(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){is(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=X2(lu.bind(null,n,_s,Ga),e);break}lu(n,_s,Ga);break;case 4:if(ql(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var o=31-Uo(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=ki()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*fR(i/1960))-i,10<i){n.timeoutHandle=X2(lu.bind(null,n,_s,Ga),i);break}lu(n,_s,Ga);break;case 5:lu(n,_s,Ga);break;default:throw Error(yt(329))}}}return Es(n,ki()),n.callbackNode===t?V8.bind(null,n):null}function d4(n,e){var t=T0;return n.current.memoizedState.isDehydrated&&(Tu(n,e).flags|=256),n=Y1(n,e),n!==2&&(e=_s,_s=t,e!==null&&p4(e)),n}function p4(n){_s===null?_s=n:_s.push.apply(_s,n)}function dR(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!Bo(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ql(n,e){for(e&=~u_,e&=~wv,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Uo(e),i=1<<t;n[t]=-1,e&=~i}}function Jw(n){if(En&6)throw Error(yt(327));Rf();var e=R1(n,0);if(!(e&1))return Es(n,ki()),null;var t=Y1(n,e);if(n.tag!==0&&t===2){var i=z2(n);i!==0&&(e=i,t=d4(n,i))}if(t===1)throw t=rp,Tu(n,0),ql(n,e),Es(n,ki()),t;if(t===6)throw Error(yt(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,lu(n,_s,Ga),Es(n,ki()),null}function f_(n,e){var t=En;En|=1;try{return n(e)}finally{En=t,En===0&&(zf=ki()+500,yv&&vc())}}function zu(n){Zl!==null&&Zl.tag===0&&!(En&6)&&Rf();var e=En;En|=1;var t=ho.transition,i=Wn;try{if(ho.transition=null,Wn=1,n)return n()}finally{Wn=i,ho.transition=t,En=e,!(En&6)&&vc()}}function d_(){Us=yf.current,ai(yf)}function Tu(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,GP(t)),Hi!==null)for(t=Hi.return;t!==null;){var i=t;switch(X3(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&D1();break;case 3:Ff(),ai(bs),ai(Br),n_();break;case 5:t_(i);break;case 4:Ff();break;case 13:ai(mi);break;case 19:ai(mi);break;case 10:Q3(i.type._context);break;case 22:case 23:d_()}t=t.return}if(cr=n,Hi=n=rc(n.current,null),br=Us=e,Ki=0,rp=null,u_=wv=Uu=0,_s=T0=null,yu!==null){for(e=0;e<yu.length;e++)if(t=yu[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}t.pending=i}yu=null}return n}function G8(n,e){do{var t=Hi;try{if(K3(),o1.current=W1,G1){for(var i=vi.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}G1=!1}if(Fu=0,or=Zi=vi=null,M0=!1,tp=0,c_.current=null,t===null||t.return===null){Ki=1,rp=e,Hi=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=br,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=zw(o);if(h!==null){h.flags&=-257,Bw(h,o,a,s,e),h.mode&1&&Uw(s,c,e),e=h,l=c;var g=e.updateQueue;if(g===null){var _=new Set;_.add(l),e.updateQueue=_}else g.add(l);break e}else{if(!(e&1)){Uw(s,c,e),p_();break e}l=Error(yt(426))}}else if(fi&&a.mode&1){var x=zw(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Bw(x,o,a,s,e),Y3(Uf(l,a));break e}}s=l=Uf(l,a),Ki!==4&&(Ki=2),T0===null?T0=[s]:T0.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=T8(s,l,e);Lw(s,y);break e;case 1:a=l;var M=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof M.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(nc===null||!nc.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var A=A8(s,a,e);Lw(s,A);break e}}s=s.return}while(s!==null)}q8(t)}catch(T){e=T,Hi===t&&t!==null&&(Hi=t=t.return);continue}break}while(!0)}function W8(){var n=j1.current;return j1.current=W1,n===null?W1:n}function p_(){(Ki===0||Ki===3||Ki===2)&&(Ki=4),cr===null||!(Uu&268435455)&&!(wv&268435455)||ql(cr,br)}function Y1(n,e){var t=En;En|=2;var i=W8();(cr!==n||br!==e)&&(Ga=null,Tu(n,e));do try{pR();break}catch(r){G8(n,r)}while(!0);if(K3(),En=t,j1.current=i,Hi!==null)throw Error(yt(261));return cr=null,br=0,Ki}function pR(){for(;Hi!==null;)j8(Hi)}function mR(){for(;Hi!==null&&!B9();)j8(Hi)}function j8(n){var e=Y8(n.alternate,n,Us);n.memoizedProps=n.pendingProps,e===null?q8(n):Hi=e,c_.current=null}function q8(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=lR(t,e),t!==null){t.flags&=32767,Hi=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ki=6,Hi=null;return}}else if(t=aR(t,e,Us),t!==null){Hi=t;return}if(e=e.sibling,e!==null){Hi=e;return}Hi=e=n}while(e!==null);Ki===0&&(Ki=5)}function lu(n,e,t){var i=Wn,r=ho.transition;try{ho.transition=null,Wn=1,gR(n,e,t,i)}finally{ho.transition=r,Wn=i}return null}function gR(n,e,t,i){do Rf();while(Zl!==null);if(En&6)throw Error(yt(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(yt(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(K9(n,s),n===cr&&(Hi=cr=null,br=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Um||(Um=!0,Z8(P1,function(){return Rf(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=ho.transition,ho.transition=null;var o=Wn;Wn=1;var a=En;En|=4,c_.current=null,uR(n,t),B8(t,n),OP(j2),k1=!!W2,j2=W2=null,n.current=t,hR(t),H9(),En=a,Wn=o,ho.transition=s}else n.current=t;if(Um&&(Um=!1,Zl=n,X1=r),s=n.pendingLanes,s===0&&(nc=null),W9(t.stateNode),Es(n,ki()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(q1)throw q1=!1,n=h4,h4=null,n;return X1&1&&n.tag!==0&&Rf(),s=n.pendingLanes,s&1?n===f4?A0++:(A0=0,f4=n):A0=0,vc(),null}function Rf(){if(Zl!==null){var n=T7(X1),e=ho.transition,t=Wn;try{if(ho.transition=null,Wn=16>n?16:n,Zl===null)var i=!1;else{if(n=Zl,Zl=null,X1=0,En&6)throw Error(yt(331));var r=En;for(En|=4,Nt=n.current;Nt!==null;){var s=Nt,o=s.child;if(Nt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Nt=c;Nt!==null;){var u=Nt;switch(u.tag){case 0:case 11:case 15:E0(8,u,s)}var f=u.child;if(f!==null)f.return=u,Nt=f;else for(;Nt!==null;){u=Nt;var d=u.sibling,h=u.return;if(F8(u),u===c){Nt=null;break}if(d!==null){d.return=h,Nt=d;break}Nt=h}}}var g=s.alternate;if(g!==null){var _=g.child;if(_!==null){g.child=null;do{var x=_.sibling;_.sibling=null,_=x}while(_!==null)}}Nt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Nt=o;else e:for(;Nt!==null;){if(s=Nt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:E0(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Nt=y;break e}Nt=s.return}}var M=n.current;for(Nt=M;Nt!==null;){o=Nt;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Nt=b;else e:for(o=M;Nt!==null;){if(a=Nt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Sv(9,a)}}catch(T){wi(a,a.return,T)}if(a===o){Nt=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,Nt=A;break e}Nt=a.return}}if(En=r,vc(),fa&&typeof fa.onPostCommitFiberRoot=="function")try{fa.onPostCommitFiberRoot(dv,n)}catch{}i=!0}return i}finally{Wn=t,ho.transition=e}}return!1}function $w(n,e,t){e=Uf(t,e),e=T8(n,e,1),n=tc(n,e,1),e=is(),n!==null&&(Ip(n,1,e),Es(n,e))}function wi(n,e,t){if(n.tag===3)$w(n,n,t);else for(;e!==null;){if(e.tag===3){$w(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(nc===null||!nc.has(i))){n=Uf(t,n),n=A8(e,n,1),e=tc(e,n,1),n=is(),e!==null&&(Ip(e,1,n),Es(e,n));break}}e=e.return}}function vR(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=is(),n.pingedLanes|=n.suspendedLanes&t,cr===n&&(br&t)===t&&(Ki===4||Ki===3&&(br&130023424)===br&&500>ki()-h_?Tu(n,0):u_|=t),Es(n,e)}function X8(n,e){e===0&&(n.mode&1?(e=Cm,Cm<<=1,!(Cm&130023424)&&(Cm=4194304)):e=1);var t=is();n=il(n,e),n!==null&&(Ip(n,e,t),Es(n,t))}function yR(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),X8(n,t)}function xR(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(yt(314))}i!==null&&i.delete(e),X8(n,t)}var Y8;Y8=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||bs.current)ws=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return ws=!1,oR(n,e,t);ws=!!(n.flags&131072)}else ws=!1,fi&&e.flags&1048576&&J7(e,U1,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;l1(n,e),n=e.pendingProps;var r=If(e,Br.current);Pf(e,t),r=r_(null,e,i,n,r,t);var s=s_();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ms(i)?(s=!0,O1(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,$3(e),r.updater=_v,e.stateNode=r,r._reactInternals=e,e4(e,i,n,t),e=i4(null,e,i,!0,s,t)):(e.tag=0,fi&&s&&q3(e),es(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(l1(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=SR(i),n=ko(i,n),r){case 0:e=n4(null,e,i,n,t);break e;case 1:e=Gw(null,e,i,n,t);break e;case 11:e=Hw(null,e,i,n,t);break e;case 14:e=Vw(null,e,i,ko(i.type,n),t);break e}throw Error(yt(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ko(i,r),n4(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ko(i,r),Gw(n,e,i,r,t);case 3:e:{if(k8(e),n===null)throw Error(yt(387));i=e.pendingProps,s=e.memoizedState,r=s.element,r8(n,e),H1(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Uf(Error(yt(423)),e),e=Ww(n,e,i,t,r);break e}else if(i!==r){r=Uf(Error(yt(424)),e),e=Ww(n,e,i,t,r);break e}else for(Hs=ec(e.stateNode.containerInfo.firstChild),Gs=e,fi=!0,Io=null,t=n8(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Df(),i===r){e=rl(n,e,t);break e}es(n,e,i,t)}e=e.child}return e;case 5:return s8(e),n===null&&Q2(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,q2(i,r)?o=null:s!==null&&q2(i,s)&&(e.flags|=32),R8(n,e),es(n,e,o,t),e.child;case 6:return n===null&&Q2(e),null;case 13:return L8(n,e,t);case 4:return e_(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Of(e,null,i,t):es(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ko(i,r),Hw(n,e,i,r,t);case 7:return es(n,e,e.pendingProps,t),e.child;case 8:return es(n,e,e.pendingProps.children,t),e.child;case 12:return es(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,ei(z1,i._currentValue),i._currentValue=o,s!==null)if(Bo(s.value,o)){if(s.children===r.children&&!bs.current){e=rl(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=$a(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),J2(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(yt(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),J2(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}es(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Pf(e,t),r=fo(r),i=i(r),e.flags|=1,es(n,e,i,t),e.child;case 14:return i=e.type,r=ko(i,e.pendingProps),r=ko(i.type,r),Vw(n,e,i,r,t);case 15:return C8(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ko(i,r),l1(n,e),e.tag=1,Ms(i)?(n=!0,O1(e)):n=!1,Pf(e,t),E8(e,i,r),e4(e,i,r,t),i4(null,e,i,!0,n,t);case 19:return N8(n,e,t);case 22:return P8(n,e,t)}throw Error(yt(156,e.tag))};function Z8(n,e){return w7(n,e)}function _R(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function lo(n,e,t,i){return new _R(n,e,t,i)}function m_(n){return n=n.prototype,!(!n||!n.isReactComponent)}function SR(n){if(typeof n=="function")return m_(n)?1:0;if(n!=null){if(n=n.$$typeof,n===I3)return 11;if(n===D3)return 14}return 2}function rc(n,e){var t=n.alternate;return t===null?(t=lo(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function h1(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")m_(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case lf:return Au(t.children,r,s,e);case N3:o=8,r|=8;break;case M2:return n=lo(12,t,e,r|2),n.elementType=M2,n.lanes=s,n;case E2:return n=lo(13,t,e,r),n.elementType=E2,n.lanes=s,n;case T2:return n=lo(19,t,e,r),n.elementType=T2,n.lanes=s,n;case s7:return bv(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case i7:o=10;break e;case r7:o=9;break e;case I3:o=11;break e;case D3:o=14;break e;case Gl:o=16,i=null;break e}throw Error(yt(130,n==null?n:typeof n,""))}return e=lo(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function Au(n,e,t,i){return n=lo(7,n,i,e),n.lanes=t,n}function bv(n,e,t,i){return n=lo(22,n,i,e),n.elementType=s7,n.lanes=t,n.stateNode={isHidden:!1},n}function ix(n,e,t){return n=lo(6,n,null,e),n.lanes=t,n}function rx(n,e,t){return e=lo(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function wR(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Uy(0),this.expirationTimes=Uy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uy(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function g_(n,e,t,i,r,s,o,a,l){return n=new wR(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=lo(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},$3(s),n}function bR(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:af,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function K8(n){if(!n)return hc;n=n._reactInternals;e:{if(qu(n)!==n||n.tag!==1)throw Error(yt(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ms(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(yt(171))}if(n.tag===1){var t=n.type;if(Ms(t))return K7(n,t,e)}return e}function Q8(n,e,t,i,r,s,o,a,l){return n=g_(t,i,!0,n,r,s,o,a,l),n.context=K8(null),t=n.current,i=is(),r=ic(t),s=$a(i,r),s.callback=e??null,tc(t,s,r),n.current.lanes=r,Ip(n,r,i),Es(n,i),n}function Mv(n,e,t,i){var r=e.current,s=is(),o=ic(r);return t=K8(t),e.context===null?e.context=t:e.pendingContext=t,e=$a(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=tc(r,e,o),n!==null&&(zo(n,r,o,s),s1(n,r,o)),o}function Z1(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function eb(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function v_(n,e){eb(n,e),(n=n.alternate)&&eb(n,e)}function MR(){return null}var J8=typeof reportError=="function"?reportError:function(n){console.error(n)};function y_(n){this._internalRoot=n}Ev.prototype.render=y_.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(yt(409));Mv(n,e,null,null)};Ev.prototype.unmount=y_.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;zu(function(){Mv(null,n,null,null)}),e[nl]=null}};function Ev(n){this._internalRoot=n}Ev.prototype.unstable_scheduleHydration=function(n){if(n){var e=P7();n={blockedOn:null,target:n,priority:e};for(var t=0;t<jl.length&&e!==0&&e<jl[t].priority;t++);jl.splice(t,0,n),t===0&&k7(n)}};function x_(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Tv(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function tb(){}function ER(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=Z1(o);s.call(c)}}var o=Q8(e,i,n,0,null,!1,!1,"",tb);return n._reactRootContainer=o,n[nl]=o.current,K0(n.nodeType===8?n.parentNode:n),zu(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=Z1(l);a.call(c)}}var l=g_(n,0,!1,null,null,!1,!1,"",tb);return n._reactRootContainer=l,n[nl]=l.current,K0(n.nodeType===8?n.parentNode:n),zu(function(){Mv(e,l,t,i)}),l}function Av(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Z1(o);a.call(l)}}Mv(e,o,n,r)}else o=ER(t,e,n,r,i);return Z1(o)}A7=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=u0(e.pendingLanes);t!==0&&(U3(e,t|1),Es(e,ki()),!(En&6)&&(zf=ki()+500,vc()))}break;case 13:zu(function(){var i=il(n,1);if(i!==null){var r=is();zo(i,n,1,r)}}),v_(n,1)}};z3=function(n){if(n.tag===13){var e=il(n,134217728);if(e!==null){var t=is();zo(e,n,134217728,t)}v_(n,134217728)}};C7=function(n){if(n.tag===13){var e=ic(n),t=il(n,e);if(t!==null){var i=is();zo(t,n,e,i)}v_(n,e)}};P7=function(){return Wn};R7=function(n,e){var t=Wn;try{return Wn=n,e()}finally{Wn=t}};O2=function(n,e,t){switch(e){case"input":if(P2(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=vv(i);if(!r)throw Error(yt(90));a7(i),P2(i,r)}}}break;case"textarea":c7(n,t);break;case"select":e=t.value,e!=null&&Ef(n,!!t.multiple,e,!1)}};g7=f_;v7=zu;var TR={usingClientEntryPoint:!1,Events:[Op,ff,vv,p7,m7,f_]},Hd={findFiberByHostInstance:vu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},AR={bundleType:Hd.bundleType,version:Hd.version,rendererPackageName:Hd.rendererPackageName,rendererConfig:Hd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:cl.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=_7(n),n===null?null:n.stateNode},findFiberByHostInstance:Hd.findFiberByHostInstance||MR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zm.isDisabled&&zm.supportsFiber)try{dv=zm.inject(AR),fa=zm}catch{}}Xs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TR;Xs.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x_(e))throw Error(yt(200));return bR(n,e,null,t)};Xs.createRoot=function(n,e){if(!x_(n))throw Error(yt(299));var t=!1,i="",r=J8;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=g_(n,1,!1,null,null,t,!1,i,r),n[nl]=e.current,K0(n.nodeType===8?n.parentNode:n),new y_(e)};Xs.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(yt(188)):(n=Object.keys(n).join(","),Error(yt(268,n)));return n=_7(e),n=n===null?null:n.stateNode,n};Xs.flushSync=function(n){return zu(n)};Xs.hydrate=function(n,e,t){if(!Tv(e))throw Error(yt(200));return Av(null,n,e,!0,t)};Xs.hydrateRoot=function(n,e,t){if(!x_(n))throw Error(yt(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",o=J8;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=Q8(e,null,n,1,t??null,r,!1,s,o),n[nl]=e.current,K0(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new Ev(e)};Xs.render=function(n,e,t){if(!Tv(e))throw Error(yt(200));return Av(null,n,e,!1,t)};Xs.unmountComponentAtNode=function(n){if(!Tv(n))throw Error(yt(40));return n._reactRootContainer?(zu(function(){Av(null,null,n,!1,function(){n._reactRootContainer=null,n[nl]=null})}),!0):!1};Xs.unstable_batchedUpdates=f_;Xs.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!Tv(t))throw Error(yt(200));if(n==null||n._reactInternals===void 0)throw Error(yt(38));return Av(n,e,t,!1,i)};Xs.version="18.3.1-next-f1338f8080-20240426";function $8(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($8)}catch(n){console.error(n)}}$8(),$6.exports=Xs;var CR=$6.exports,eE,nb=CR;eE=nb.createRoot,nb.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var PR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RR=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Dn=(n,e)=>{const t=Qe.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,...c},u)=>Qe.createElement("svg",{ref:u,...PR,width:r,height:r,stroke:i,strokeWidth:o?Number(s)*24/Number(r):s,className:["lucide",`lucide-${RR(n)}`,a].join(" "),...c},[...e.map(([f,d])=>Qe.createElement(f,d)),...Array.isArray(l)?l:[l]]));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kR=Dn("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=Dn("Atom",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["path",{d:"M20.2 20.2c2.04-2.03.02-7.36-4.5-11.9-4.54-4.52-9.87-6.54-11.9-4.5-2.04 2.03-.02 7.36 4.5 11.9 4.54 4.52 9.87 6.54 11.9 4.5Z",key:"1l2ple"}],["path",{d:"M15.7 15.7c4.52-4.54 6.54-9.87 4.5-11.9-2.03-2.04-7.36-.02-11.9 4.5-4.52 4.54-6.54 9.87-4.5 11.9 2.03 2.04 7.36.02 11.9-4.5Z",key:"1wam0m"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LR=Dn("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __=Dn("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NR=Dn("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IR=Dn("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tE=Dn("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nE=Dn("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iE=Dn("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DR=Dn("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OR=Dn("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FR=Dn("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UR=Dn("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zR=Dn("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=Dn("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BR=Dn("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HR=Dn("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VR=Dn("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GR=Dn("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WR=Dn("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rE=Dn("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jR=Dn("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rb=Dn("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sE=Dn("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qR=Dn("Telescope",[["path",{d:"m10.065 12.493-6.18 1.318a.934.934 0 0 1-1.108-.702l-.537-2.15a1.07 1.07 0 0 1 .691-1.265l13.504-4.44",key:"k4qptu"}],["path",{d:"m13.56 11.747 4.332-.924",key:"19l80z"}],["path",{d:"m16 21-3.105-6.21",key:"7oh9d"}],["path",{d:"M16.485 5.94a2 2 0 0 1 1.455-2.425l1.09-.272a1 1 0 0 1 1.212.727l1.515 6.06a1 1 0 0 1-.727 1.213l-1.09.272a2 2 0 0 1-2.425-1.455z",key:"m7xp4m"}],["path",{d:"m6.158 8.633 1.114 4.456",key:"74o979"}],["path",{d:"m8 21 3.105-6.21",key:"1fvxut"}],["circle",{cx:"12",cy:"13",r:"2",key:"1c1ljs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XR=Dn("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YR=Dn("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZR=Dn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KR=Dn("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QR=Dn("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JR=Dn("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Up(n){return n+.5|0}const Kl=(n,e,t)=>Math.max(Math.min(n,t),e);function f0(n){return Kl(Up(n*2.55),0,255)}function sc(n){return Kl(Up(n*255),0,255)}function ja(n){return Kl(Up(n/2.55)/100,0,1)}function sb(n){return Kl(Up(n*100),0,100)}const io={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},m4=[..."0123456789ABCDEF"],$R=n=>m4[n&15],ek=n=>m4[(n&240)>>4]+m4[n&15],Bm=n=>(n&240)>>4===(n&15),tk=n=>Bm(n.r)&&Bm(n.g)&&Bm(n.b)&&Bm(n.a);function nk(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&io[n[1]]*17,g:255&io[n[2]]*17,b:255&io[n[3]]*17,a:e===5?io[n[4]]*17:255}:(e===7||e===9)&&(t={r:io[n[1]]<<4|io[n[2]],g:io[n[3]]<<4|io[n[4]],b:io[n[5]]<<4|io[n[6]],a:e===9?io[n[7]]<<4|io[n[8]]:255})),t}const ik=(n,e)=>n<255?e(n):"";function rk(n){var e=tk(n)?$R:ek;return n?"#"+e(n.r)+e(n.g)+e(n.b)+ik(n.a,e):void 0}const sk=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function oE(n,e,t){const i=e*Math.min(t,1-t),r=(s,o=(s+n/30)%12)=>t-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function ok(n,e,t){const i=(r,s=(r+n/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function ak(n,e,t){const i=oE(n,1,.5);let r;for(e+t>1&&(r=1/(e+t),e*=r,t*=r),r=0;r<3;r++)i[r]*=1-e-t,i[r]+=e;return i}function lk(n,e,t,i,r){return n===r?(e-t)/i+(e<t?6:0):e===r?(t-n)/i+2:(n-e)/i+4}function S_(n){const t=n.r/255,i=n.g/255,r=n.b/255,s=Math.max(t,i,r),o=Math.min(t,i,r),a=(s+o)/2;let l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=lk(t,i,r,u,s),l=l*60+.5),[l|0,c||0,a]}function w_(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(sc)}function b_(n,e,t){return w_(oE,n,e,t)}function ck(n,e,t){return w_(ak,n,e,t)}function uk(n,e,t){return w_(ok,n,e,t)}function aE(n){return(n%360+360)%360}function hk(n){const e=sk.exec(n);let t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?f0(+e[5]):sc(+e[5]));const r=aE(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=ck(r,s,o):e[1]==="hsv"?i=uk(r,s,o):i=b_(r,s,o),{r:i[0],g:i[1],b:i[2],a:t}}function fk(n,e){var t=S_(n);t[0]=aE(t[0]+e),t=b_(t),n.r=t[0],n.g=t[1],n.b=t[2]}function dk(n){if(!n)return;const e=S_(n),t=e[0],i=sb(e[1]),r=sb(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${r}%, ${ja(n.a)})`:`hsl(${t}, ${i}%, ${r}%)`}const ob={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},ab={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function pk(){const n={},e=Object.keys(ab),t=Object.keys(ob);let i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<t.length;r++)s=t[r],a=a.replace(s,ob[s]);s=parseInt(ab[o],16),n[a]=[s>>16&255,s>>8&255,s&255]}return n}let Hm;function mk(n){Hm||(Hm=pk(),Hm.transparent=[0,0,0,0]);const e=Hm[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const gk=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function vk(n){const e=gk.exec(n);let t=255,i,r,s;if(e){if(e[7]!==i){const o=+e[7];t=e[8]?f0(o):Kl(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?f0(i):Kl(i,0,255)),r=255&(e[4]?f0(r):Kl(r,0,255)),s=255&(e[6]?f0(s):Kl(s,0,255)),{r:i,g:r,b:s,a:t}}}function yk(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${ja(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const sx=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Lh=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function xk(n,e,t){const i=Lh(ja(n.r)),r=Lh(ja(n.g)),s=Lh(ja(n.b));return{r:sc(sx(i+t*(Lh(ja(e.r))-i))),g:sc(sx(r+t*(Lh(ja(e.g))-r))),b:sc(sx(s+t*(Lh(ja(e.b))-s))),a:n.a+t*(e.a-n.a)}}function Vm(n,e,t){if(n){let i=S_(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=b_(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function lE(n,e){return n&&Object.assign(e||{},n)}function lb(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=sc(n[3]))):(e=lE(n,{r:0,g:0,b:0,a:1}),e.a=sc(e.a)),e}function _k(n){return n.charAt(0)==="r"?vk(n):hk(n)}let cE=class g4{constructor(e){if(e instanceof g4)return e;const t=typeof e;let i;t==="object"?i=lb(e):t==="string"&&(i=nk(e)||mk(e)||_k(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=lE(this._rgb);return e&&(e.a=ja(e.a)),e}set rgb(e){this._rgb=lb(e)}rgbString(){return this._valid?yk(this._rgb):void 0}hexString(){return this._valid?rk(this._rgb):void 0}hslString(){return this._valid?dk(this._rgb):void 0}mix(e,t){if(e){const i=this.rgb,r=e.rgb;let s;const o=t===s?.5:t,a=2*o-1,l=i.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,i.r=255&c*i.r+s*r.r+.5,i.g=255&c*i.g+s*r.g+.5,i.b=255&c*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=xk(this._rgb,e._rgb,t)),this}clone(){return new g4(this.rgb)}alpha(e){return this._rgb.a=sc(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=Up(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Vm(this._rgb,2,e),this}darken(e){return Vm(this._rgb,2,-e),this}saturate(e){return Vm(this._rgb,1,e),this}desaturate(e){return Vm(this._rgb,1,-e),this}rotate(e){return fk(this._rgb,e),this}};/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Ia(){}const Sk=(()=>{let n=0;return()=>n++})();function ti(n){return n==null}function lr(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function In(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function mo(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function ta(n,e){return mo(n)?n:e}function Sn(n,e){return typeof n>"u"?e:n}const wk=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function ri(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function Vn(n,e,t,i){let r,s,o;if(lr(n))for(s=n.length,r=0;r<s;r++)e.call(t,n[r],r);else if(In(n))for(o=Object.keys(n),s=o.length,r=0;r<s;r++)e.call(t,n[o[r]],o[r])}function K1(n,e){let t,i,r,s;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(r=n[t],s=e[t],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function Q1(n){if(lr(n))return n.map(Q1);if(In(n)){const e=Object.create(null),t=Object.keys(n),i=t.length;let r=0;for(;r<i;++r)e[t[r]]=Q1(n[t[r]]);return e}return n}function uE(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function bk(n,e,t,i){if(!uE(n))return;const r=e[n],s=t[n];In(r)&&In(s)?sp(r,s,i):e[n]=Q1(s)}function sp(n,e,t){const i=lr(e)?e:[e],r=i.length;if(!In(n))return n;t=t||{};const s=t.merger||bk;let o;for(let a=0;a<r;++a){if(o=i[a],!In(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],n,o,t)}return n}function P0(n,e){return sp(n,e,{merger:Mk})}function Mk(n,e,t){if(!uE(n))return;const i=e[n],r=t[n];In(i)&&In(r)?P0(i,r):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=Q1(r))}const cb={"":n=>n,x:n=>n.x,y:n=>n.y};function Ek(n){const e=n.split("."),t=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function Tk(n){const e=Ek(n);return t=>{for(const i of e){if(i==="")break;t=t&&t[i]}return t}}function J1(n,e){return(cb[e]||(cb[e]=Tk(e)))(n)}function M_(n){return n.charAt(0).toUpperCase()+n.slice(1)}const $1=n=>typeof n<"u",fc=n=>typeof n=="function",ub=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function Ak(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const ur=Math.PI,pa=2*ur,Ck=pa+ur,ev=Number.POSITIVE_INFINITY,Pk=ur/180,Fo=ur/2,jc=ur/4,hb=ur*2/3,v4=Math.log10,Bf=Math.sign;function R0(n,e,t){return Math.abs(n-e)<t}function fb(n){const e=Math.round(n);n=R0(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(v4(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function Rk(n){const e=[],t=Math.sqrt(n);let i;for(i=1;i<t;i++)n%i===0&&(e.push(i),e.push(n/i));return t===(t|0)&&e.push(t),e.sort((r,s)=>r-s).pop(),e}function kk(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function op(n){return!kk(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function Lk(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function Nk(n,e,t){let i,r,s;for(i=0,r=n.length;i<r;i++)s=n[i][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function _u(n){return n*(ur/180)}function Ik(n){return n*(180/ur)}function db(n){if(!mo(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function Dk(n,e){const t=e.x-n.x,i=e.y-n.y,r=Math.sqrt(t*t+i*i);let s=Math.atan2(i,t);return s<-.5*ur&&(s+=pa),{angle:s,distance:r}}function y4(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function Ok(n,e){return(n-e+Ck)%pa-ur}function Vl(n){return(n%pa+pa)%pa}function hE(n,e,t,i){const r=Vl(n),s=Vl(e),o=Vl(t),a=Vl(s-r),l=Vl(o-r),c=Vl(r-s),u=Vl(r-o);return r===s||r===o||i&&s===o||a>l&&c<u}function co(n,e,t){return Math.max(e,Math.min(t,n))}function Fk(n){return co(n,-32768,32767)}function d0(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function E_(n,e,t){t=t||(o=>n[o]<e);let i=n.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,t(s)?r=s:i=s;return{lo:r,hi:i}}const Su=(n,e,t,i)=>E_(n,t,i?r=>{const s=n[r][e];return s<t||s===t&&n[r+1][e]===t}:r=>n[r][e]<t),Uk=(n,e,t)=>E_(n,t,i=>n[i][e]>=t);function zk(n,e,t){let i=0,r=n.length;for(;i<r&&n[i]<e;)i++;for(;r>i&&n[r-1]>t;)r--;return i>0||r<n.length?n.slice(i,r):n}const fE=["push","pop","shift","splice","unshift"];function Bk(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),fE.forEach(t=>{const i="_onData"+M_(t),r=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return n._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function pb(n,e){const t=n._chartjs;if(!t)return;const i=t.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(fE.forEach(s=>{delete n[s]}),delete n._chartjs)}function Hk(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const dE=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function pE(n,e){let t=[],i=!1;return function(...r){t=r,i||(i=!0,dE.call(window,()=>{i=!1,n.apply(e,t)}))}}function Vk(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}const T_=n=>n==="start"?"left":n==="end"?"right":"center",Dr=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,Gk=(n,e,t,i)=>n===(i?"left":"right")?t:n==="center"?(e+t)/2:e;function Wk(n,e,t){const i=e.length;let r=0,s=i;if(n._sorted){const{iScale:o,vScale:a,_parsed:l}=n,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,u=o.axis,{min:f,max:d,minDefined:h,maxDefined:g}=o.getUserBounds();if(h){if(r=Math.min(Su(l,u,f).lo,t?i:Su(e,u,o.getPixelForValue(f)).lo),c){const _=l.slice(0,r+1).reverse().findIndex(x=>!ti(x[a.axis]));r-=Math.max(0,_)}r=co(r,0,i-1)}if(g){let _=Math.max(Su(l,o.axis,d,!0).hi+1,t?0:Su(e,u,o.getPixelForValue(d),!0).hi+1);if(c){const x=l.slice(_-1).findIndex(y=>!ti(y[a.axis]));_+=Math.max(0,x)}s=co(_,r,i)-r}else s=i-r}return{start:r,count:s}}function jk(n){const{xScale:e,yScale:t,_scaleRanges:i}=n,r={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!i)return n._scaleRanges=r,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,r),s}const Gm=n=>n===0||n===1,mb=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*pa/t)),gb=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*pa/t)+1,k0={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Fo)+1,easeOutSine:n=>Math.sin(n*Fo),easeInOutSine:n=>-.5*(Math.cos(ur*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Gm(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Gm(n)?n:mb(n,.075,.3),easeOutElastic:n=>Gm(n)?n:gb(n,.075,.3),easeInOutElastic(n){return Gm(n)?n:n<.5?.5*mb(n*2,.1125,.45):.5+.5*gb(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-k0.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?k0.easeInBounce(n*2)*.5:k0.easeOutBounce(n*2-1)*.5+.5};function A_(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function vb(n){return A_(n)?n:new cE(n)}function ox(n){return A_(n)?n:new cE(n).saturate(.5).darken(.1).hexString()}const qk=["x","y","borderWidth","radius","tension"],Xk=["color","borderColor","backgroundColor"];function Yk(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:Xk},numbers:{type:"number",properties:qk}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Zk(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const yb=new Map;function Kk(n,e){e=e||{};const t=n+JSON.stringify(e);let i=yb.get(t);return i||(i=new Intl.NumberFormat(n,e),yb.set(t,i)),i}function mE(n,e,t){return Kk(e,t).format(n)}const gE={values(n){return lr(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const i=this.chart.options.locale;let r,s=n;if(t.length>1){const c=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),s=Qk(n,t)}const o=v4(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),mE(n,i,l)},logarithmic(n,e,t){if(n===0)return"0";const i=t[e].significand||n/Math.pow(10,Math.floor(v4(n)));return[1,2,3,5,10,15].includes(i)||e>.8*t.length?gE.numeric.call(this,n,e,t):""}};function Qk(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var vE={formatters:gE};function Jk(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:vE.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Bu=Object.create(null),x4=Object.create(null);function L0(n,e){if(!e)return n;const t=e.split(".");for(let i=0,r=t.length;i<r;++i){const s=t[i];n=n[s]||(n[s]=Object.create(null))}return n}function ax(n,e,t){return typeof e=="string"?sp(L0(n,e),t):sp(L0(n,""),e)}class $k{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>ox(r.backgroundColor),this.hoverBorderColor=(i,r)=>ox(r.borderColor),this.hoverColor=(i,r)=>ox(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return ax(this,e,t)}get(e){return L0(this,e)}describe(e,t){return ax(x4,e,t)}override(e,t){return ax(Bu,e,t)}route(e,t,i,r){const s=L0(this,e),o=L0(this,i),a="_"+t;Object.defineProperties(s,{[a]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){const l=this[a],c=o[r];return In(l)?Object.assign({},c,l):Sn(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(t=>t(this))}}var Ni=new $k({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Yk,Zk,Jk]);function eL(n){return!n||ti(n.size)||ti(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function xb(n,e,t,i,r){let s=e[r];return s||(s=e[r]=n.measureText(r).width,t.push(r)),s>i&&(i=s),i}function qc(n,e,t){const i=n.currentDevicePixelRatio,r=t!==0?Math.max(t/2,.5):0;return Math.round((e-r)*i)/i+r}function _b(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function _4(n,e,t,i){yE(n,e,t,i,null)}function yE(n,e,t,i,r){let s,o,a,l,c,u,f,d;const h=e.pointStyle,g=e.rotation,_=e.radius;let x=(g||0)*Pk;if(h&&typeof h=="object"&&(s=h.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(t,i),n.rotate(x),n.drawImage(h,-h.width/2,-h.height/2,h.width,h.height),n.restore();return}if(!(isNaN(_)||_<=0)){switch(n.beginPath(),h){default:r?n.ellipse(t,i,r/2,_,0,0,pa):n.arc(t,i,_,0,pa),n.closePath();break;case"triangle":u=r?r/2:_,n.moveTo(t+Math.sin(x)*u,i-Math.cos(x)*_),x+=hb,n.lineTo(t+Math.sin(x)*u,i-Math.cos(x)*_),x+=hb,n.lineTo(t+Math.sin(x)*u,i-Math.cos(x)*_),n.closePath();break;case"rectRounded":c=_*.516,l=_-c,o=Math.cos(x+jc)*l,f=Math.cos(x+jc)*(r?r/2-c:l),a=Math.sin(x+jc)*l,d=Math.sin(x+jc)*(r?r/2-c:l),n.arc(t-f,i-a,c,x-ur,x-Fo),n.arc(t+d,i-o,c,x-Fo,x),n.arc(t+f,i+a,c,x,x+Fo),n.arc(t-d,i+o,c,x+Fo,x+ur),n.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*_,u=r?r/2:l,n.rect(t-u,i-l,2*u,2*l);break}x+=jc;case"rectRot":f=Math.cos(x)*(r?r/2:_),o=Math.cos(x)*_,a=Math.sin(x)*_,d=Math.sin(x)*(r?r/2:_),n.moveTo(t-f,i-a),n.lineTo(t+d,i-o),n.lineTo(t+f,i+a),n.lineTo(t-d,i+o),n.closePath();break;case"crossRot":x+=jc;case"cross":f=Math.cos(x)*(r?r/2:_),o=Math.cos(x)*_,a=Math.sin(x)*_,d=Math.sin(x)*(r?r/2:_),n.moveTo(t-f,i-a),n.lineTo(t+f,i+a),n.moveTo(t+d,i-o),n.lineTo(t-d,i+o);break;case"star":f=Math.cos(x)*(r?r/2:_),o=Math.cos(x)*_,a=Math.sin(x)*_,d=Math.sin(x)*(r?r/2:_),n.moveTo(t-f,i-a),n.lineTo(t+f,i+a),n.moveTo(t+d,i-o),n.lineTo(t-d,i+o),x+=jc,f=Math.cos(x)*(r?r/2:_),o=Math.cos(x)*_,a=Math.sin(x)*_,d=Math.sin(x)*(r?r/2:_),n.moveTo(t-f,i-a),n.lineTo(t+f,i+a),n.moveTo(t+d,i-o),n.lineTo(t-d,i+o);break;case"line":o=r?r/2:Math.cos(x)*_,a=Math.sin(x)*_,n.moveTo(t-o,i-a),n.lineTo(t+o,i+a);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(x)*(r?r/2:_),i+Math.sin(x)*_);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function ap(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function C_(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function P_(n){n.restore()}function tL(n,e,t,i,r){if(!e)return n.lineTo(t.x,t.y);if(r==="middle"){const s=(e.x+t.x)/2;n.lineTo(s,e.y),n.lineTo(s,t.y)}else r==="after"!=!!i?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function nL(n,e,t,i){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function iL(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),ti(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function rL(n,e,t,i,r){if(r.strikethrough||r.underline){const s=n.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=t-s.actualBoundingBoxAscent,c=t+s.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(o,u),n.lineTo(a,u),n.stroke()}}function sL(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function lp(n,e,t,i,r,s={}){const o=lr(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(n.save(),n.font=r.string,iL(n,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&sL(n,s.backdrop),a&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),ti(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(c,t,i,s.maxWidth)),n.fillText(c,t,i,s.maxWidth),rL(n,t,i,c,s),i+=Number(r.lineHeight);n.restore()}function S4(n,e){const{x:t,y:i,w:r,h:s,radius:o}=e;n.arc(t+o.topLeft,i+o.topLeft,o.topLeft,1.5*ur,ur,!0),n.lineTo(t,i+s-o.bottomLeft),n.arc(t+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,ur,Fo,!0),n.lineTo(t+r-o.bottomRight,i+s),n.arc(t+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,Fo,0,!0),n.lineTo(t+r,i+o.topRight),n.arc(t+r-o.topRight,i+o.topRight,o.topRight,0,-Fo,!0),n.lineTo(t+o.topLeft,i)}const oL=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,aL=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function lL(n,e){const t=(""+n).match(oL);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const cL=n=>+n||0;function xE(n,e){const t={},i=In(e),r=i?Object.keys(e):e,s=In(n)?i?o=>Sn(n[o],n[e[o]]):o=>n[o]:()=>n;for(const o of r)t[o]=cL(s(o));return t}function uL(n){return xE(n,{top:"y",right:"x",bottom:"y",left:"x"})}function N0(n){return xE(n,["topLeft","topRight","bottomLeft","bottomRight"])}function go(n){const e=uL(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ur(n,e){n=n||{},e=e||Ni.font;let t=Sn(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=Sn(n.style,e.style);i&&!(""+i).match(aL)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:Sn(n.family,e.family),lineHeight:lL(Sn(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:Sn(n.weight,e.weight),string:""};return r.string=eL(r),r}function Wm(n,e,t,i){let r,s,o;for(r=0,s=n.length;r<s;++r)if(o=n[r],o!==void 0&&o!==void 0)return o}function hL(n,e,t){const{min:i,max:r}=n,s=wk(e,(r-i)/2),o=(a,l)=>t&&a===0?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function Xu(n,e){return Object.assign(Object.create(n),e)}function R_(n,e=[""],t,i,r=()=>n[0]){const s=t||n;typeof i>"u"&&(i=bE("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>R_([a,...n],e,s,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete n[0][l],!0},get(a,l){return SE(a,l,()=>xL(l,e,n,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,l){return wb(a).includes(l)},ownKeys(a){return wb(a)},set(a,l,c){const u=a._storage||(a._storage=r());return a[l]=u[l]=c,delete a._keys,!0}})}function Hf(n,e,t,i){const r={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:_E(n,i),setContext:s=>Hf(n,s,t,i),override:s=>Hf(n.override(s),e,t,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete n[o],!0},get(s,o,a){return SE(s,o,()=>dL(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(s,o,a){return n[o]=a,delete s[o],!0}})}function _E(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=n;return{allKeys:r,scriptable:t,indexable:i,isScriptable:fc(t)?t:()=>t,isIndexable:fc(i)?i:()=>i}}const fL=(n,e)=>n?n+M_(e):e,k_=(n,e)=>In(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function SE(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const i=t();return n[e]=i,i}function dL(n,e,t){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=n;let a=i[e];return fc(a)&&o.isScriptable(e)&&(a=pL(e,a,n,t)),lr(a)&&a.length&&(a=mL(e,a,n,o.isIndexable)),k_(e,a)&&(a=Hf(a,r,s&&s[e],o)),a}function pL(n,e,t,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let l=e(s,o||i);return a.delete(n),k_(n,l)&&(l=L_(r._scopes,r,n,l)),l}function mL(n,e,t,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=t;if(typeof s.index<"u"&&i(n))return e[s.index%e.length];if(In(e[0])){const l=e,c=r._scopes.filter(u=>u!==l);e=[];for(const u of l){const f=L_(c,r,n,u);e.push(Hf(f,s,o&&o[n],a))}}return e}function wE(n,e,t){return fc(n)?n(e,t):n}const gL=(n,e)=>n===!0?e:typeof n=="string"?J1(e,n):void 0;function vL(n,e,t,i,r){for(const s of e){const o=gL(t,s);if(o){n.add(o);const a=wE(o._fallback,t,r);if(typeof a<"u"&&a!==t&&a!==i)return a}else if(o===!1&&typeof i<"u"&&t!==i)return null}return!1}function L_(n,e,t,i){const r=e._rootScopes,s=wE(e._fallback,t,i),o=[...n,...r],a=new Set;a.add(i);let l=Sb(a,o,t,s||t,i);return l===null||typeof s<"u"&&s!==t&&(l=Sb(a,o,s,l,i),l===null)?!1:R_(Array.from(a),[""],r,s,()=>yL(e,t,i))}function Sb(n,e,t,i,r){for(;t;)t=vL(n,e,t,i,r);return t}function yL(n,e,t){const i=n._getTarget();e in i||(i[e]={});const r=i[e];return lr(r)&&In(t)?t:r||{}}function xL(n,e,t,i){let r;for(const s of e)if(r=bE(fL(s,n),t),typeof r<"u")return k_(n,r)?L_(t,i,n,r):r}function bE(n,e){for(const t of e){if(!t)continue;const i=t[n];if(typeof i<"u")return i}}function wb(n){let e=n._keys;return e||(e=n._keys=_L(n._scopes)),e}function _L(n){const e=new Set;for(const t of n)for(const i of Object.keys(t).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}const SL=Number.EPSILON||1e-14,Vf=(n,e)=>e<n.length&&!n[e].skip&&n[e],ME=n=>n==="x"?"y":"x";function wL(n,e,t,i){const r=n.skip?e:n,s=e,o=t.skip?e:t,a=y4(s,r),l=y4(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const f=i*c,d=i*u;return{previous:{x:s.x-f*(o.x-r.x),y:s.y-f*(o.y-r.y)},next:{x:s.x+d*(o.x-r.x),y:s.y+d*(o.y-r.y)}}}function bL(n,e,t){const i=n.length;let r,s,o,a,l,c=Vf(n,0);for(let u=0;u<i-1;++u)if(l=c,c=Vf(n,u+1),!(!l||!c)){if(R0(e[u],0,SL)){t[u]=t[u+1]=0;continue}r=t[u]/e[u],s=t[u+1]/e[u],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),t[u]=r*o*e[u],t[u+1]=s*o*e[u])}}function ML(n,e,t="x"){const i=ME(t),r=n.length;let s,o,a,l=Vf(n,0);for(let c=0;c<r;++c){if(o=a,a=l,l=Vf(n,c+1),!a)continue;const u=a[t],f=a[i];o&&(s=(u-o[t])/3,a[`cp1${t}`]=u-s,a[`cp1${i}`]=f-s*e[c]),l&&(s=(l[t]-u)/3,a[`cp2${t}`]=u+s,a[`cp2${i}`]=f+s*e[c])}}function EL(n,e="x"){const t=ME(e),i=n.length,r=Array(i).fill(0),s=Array(i);let o,a,l,c=Vf(n,0);for(o=0;o<i;++o)if(a=l,l=c,c=Vf(n,o+1),!!l){if(c){const u=c[e]-l[e];r[o]=u!==0?(c[t]-l[t])/u:0}s[o]=a?c?Bf(r[o-1])!==Bf(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}bL(n,r,s),ML(n,s,e)}function jm(n,e,t){return Math.max(Math.min(n,t),e)}function TL(n,e){let t,i,r,s,o,a=ap(n[0],e);for(t=0,i=n.length;t<i;++t)o=s,s=a,a=t<i-1&&ap(n[t+1],e),s&&(r=n[t],o&&(r.cp1x=jm(r.cp1x,e.left,e.right),r.cp1y=jm(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=jm(r.cp2x,e.left,e.right),r.cp2y=jm(r.cp2y,e.top,e.bottom)))}function AL(n,e,t,i,r){let s,o,a,l;if(e.spanGaps&&(n=n.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")EL(n,r);else{let c=i?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)a=n[s],l=wL(c,a,n[Math.min(s+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&TL(n,t)}function N_(){return typeof window<"u"&&typeof document<"u"}function I_(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function tv(n,e,t){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=n,i}const Cv=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function CL(n,e){return Cv(n).getPropertyValue(e)}const PL=["top","right","bottom","left"];function Cu(n,e,t){const i={};t=t?"-"+t:"";for(let r=0;r<4;r++){const s=PL[r];i[s]=parseFloat(n[e+"-"+s+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const RL=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function kL(n,e){const t=n.touches,i=t&&t.length?t[0]:n,{offsetX:r,offsetY:s}=i;let o=!1,a,l;if(RL(r,s,n.target))a=r,l=s;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function cu(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:i}=e,r=Cv(t),s=r.boxSizing==="border-box",o=Cu(r,"padding"),a=Cu(r,"border","width"),{x:l,y:c,box:u}=kL(n,t),f=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:h,height:g}=e;return s&&(h-=o.width+a.width,g-=o.height+a.height),{x:Math.round((l-f)/h*t.width/i),y:Math.round((c-d)/g*t.height/i)}}function LL(n,e,t){let i,r;if(e===void 0||t===void 0){const s=n&&I_(n);if(!s)e=n.clientWidth,t=n.clientHeight;else{const o=s.getBoundingClientRect(),a=Cv(s),l=Cu(a,"border","width"),c=Cu(a,"padding");e=o.width-c.width-l.width,t=o.height-c.height-l.height,i=tv(a.maxWidth,s,"clientWidth"),r=tv(a.maxHeight,s,"clientHeight")}}return{width:e,height:t,maxWidth:i||ev,maxHeight:r||ev}}const qm=n=>Math.round(n*10)/10;function NL(n,e,t,i){const r=Cv(n),s=Cu(r,"margin"),o=tv(r.maxWidth,n,"clientWidth")||ev,a=tv(r.maxHeight,n,"clientHeight")||ev,l=LL(n,e,t);let{width:c,height:u}=l;if(r.boxSizing==="content-box"){const d=Cu(r,"border","width"),h=Cu(r,"padding");c-=h.width+d.width,u-=h.height+d.height}return c=Math.max(0,c-s.width),u=Math.max(0,i?c/i:u-s.height),c=qm(Math.min(c,o,l.maxWidth)),u=qm(Math.min(u,a,l.maxHeight)),c&&!u&&(u=qm(c/2)),(e!==void 0||t!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=qm(Math.floor(u*i))),{width:c,height:u}}function bb(n,e,t){const i=e||1,r=Math.floor(n.height*i),s=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(n.currentDevicePixelRatio=i,o.height=r,o.width=s,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const IL=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};N_()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function Mb(n,e){const t=CL(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function uu(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function DL(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:i==="middle"?t<.5?n.y:e.y:i==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function OL(n,e,t,i){const r={x:n.cp2x,y:n.cp2y},s={x:e.cp1x,y:e.cp1y},o=uu(n,r,t),a=uu(r,s,t),l=uu(s,e,t),c=uu(o,a,t),u=uu(a,l,t);return uu(c,u,t)}const FL=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},UL=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function kf(n,e,t){return n?FL(e,t):UL()}function EE(n,e){let t,i;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function TE(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function AE(n){return n==="angle"?{between:hE,compare:Ok,normalize:Vl}:{between:d0,compare:(e,t)=>e-t,normalize:e=>e}}function Eb({start:n,end:e,count:t,loop:i,style:r}){return{start:n%t,end:e%t,loop:i&&(e-n+1)%t===0,style:r}}function zL(n,e,t){const{property:i,start:r,end:s}=t,{between:o,normalize:a}=AE(i),l=e.length;let{start:c,end:u,loop:f}=n,d,h;if(f){for(c+=l,u+=l,d=0,h=l;d<h&&o(a(e[c%l][i]),r,s);++d)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:f,style:n.style}}function BL(n,e,t){if(!t)return[n];const{property:i,start:r,end:s}=t,o=e.length,{compare:a,between:l,normalize:c}=AE(i),{start:u,end:f,loop:d,style:h}=zL(n,e,t),g=[];let _=!1,x=null,y,M,b;const A=()=>l(r,b,y)&&a(r,b)!==0,T=()=>a(s,y)===0||l(s,b,y),P=()=>_||A(),k=()=>!_||T();for(let N=u,z=u;N<=f;++N)M=e[N%o],!M.skip&&(y=c(M[i]),y!==b&&(_=l(y,r,s),x===null&&P()&&(x=a(y,r)===0?N:z),x!==null&&k()&&(g.push(Eb({start:x,end:N,loop:d,count:o,style:h})),x=null),z=N,b=y));return x!==null&&g.push(Eb({start:x,end:f,loop:d,count:o,style:h})),g}function HL(n,e){const t=[],i=n.segments;for(let r=0;r<i.length;r++){const s=BL(i[r],n.points,e);s.length&&t.push(...s)}return t}function VL(n,e,t,i){let r=0,s=e-1;if(t&&!i)for(;r<e&&!n[r].skip;)r++;for(;r<e&&n[r].skip;)r++;for(r%=e,t&&(s+=r);s>r&&n[s%e].skip;)s--;return s%=e,{start:r,end:s}}function GL(n,e,t,i){const r=n.length,s=[];let o=e,a=n[e],l;for(l=e+1;l<=t;++l){const c=n[l%r];c.skip||c.stop?a.skip||(i=!1,s.push({start:e%r,end:(l-1)%r,loop:i}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%r,end:o%r,loop:i}),s}function WL(n,e){const t=n.points,i=n.options.spanGaps,r=t.length;if(!r)return[];const s=!!n._loop,{start:o,end:a}=VL(t,r,s,i);if(i===!0)return Tb(n,[{start:o,end:a,loop:s}],t,e);const l=a<o?a+r:a,c=!!n._fullLoop&&o===0&&a===r-1;return Tb(n,GL(t,o,l,c),t,e)}function Tb(n,e,t,i){return!i||!i.setContext||!t?e:jL(n,e,t,i)}function jL(n,e,t,i){const r=n._chart.getContext(),s=Ab(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,l=t.length,c=[];let u=s,f=e[0].start,d=f;function h(g,_,x,y){const M=a?-1:1;if(g!==_){for(g+=l;t[g%l].skip;)g-=M;for(;t[_%l].skip;)_+=M;g%l!==_%l&&(c.push({start:g%l,end:_%l,loop:x,style:y}),u=y,f=_%l)}}for(const g of e){f=a?f:g.start;let _=t[f%l],x;for(d=f+1;d<=g.end;d++){const y=t[d%l];x=Ab(i.setContext(Xu(r,{type:"segment",p0:_,p1:y,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),qL(x,u)&&h(f,d-1,g.loop,u),_=y,u=x}f<d-1&&h(f,d-1,g.loop,u)}return c}function Ab(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function qL(n,e){if(!e)return!1;const t=[],i=function(r,s){return A_(s)?(t.includes(s)||t.push(s),t.indexOf(s)):s};return JSON.stringify(n,i)!==JSON.stringify(e,i)}/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class XL{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,r){const s=t.listeners[r],o=t.duration;s.forEach(a=>a({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(i-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=dE.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),t+=s.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const i=t.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ha=new XL;const Cb="transparent",YL={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const i=vb(n||Cb),r=i.valid&&vb(e||Cb);return r&&r.valid?r.mix(i,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class ZL{constructor(e,t,i,r){const s=t[i];r=Wm([e.to,r,s,e.from]);const o=Wm([e.from,s,r]);this._active=!0,this._fn=e.fn||YL[e.type||typeof o],this._easing=k0[e.easing]||k0.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Wm([e.to,t,r,e.from]),this._from=Wm([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||t<i),!this._active){this._target[r]=a,this._notify(!0);return}if(t<0){this._target[r]=s;return}l=t/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){const t=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][t]()}}class CE{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!In(e))return;const t=Object.keys(Ni.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!In(s))return;const o={};for(const a of t)o[a]=s[a];(lr(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,t){const i=t.options,r=QL(e,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&KL(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,t){const i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(e,t));continue}const u=t[c];let f=s[c];const d=i.get(c);if(f)if(d&&f.active()){f.update(d,u,a);continue}else f.cancel();if(!d||!d.duration){e[c]=u;continue}s[c]=f=new ZL(d,e,c,u),r.push(f)}return r}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const i=this._createAnimations(e,t);if(i.length)return Ha.add(this._chart,i),!0}}function KL(n,e){const t=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const s=n[i[r]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}function QL(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function Pb(n,e){const t=n&&n.options||{},i=t.reverse,r=t.min===void 0?e:0,s=t.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function JL(n,e,t){if(t===!1)return!1;const i=Pb(n,t),r=Pb(e,t);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function $L(n){let e,t,i,r;return In(n)?(e=n.top,t=n.right,i=n.bottom,r=n.left):e=t=i=r=n,{top:e,right:t,bottom:i,left:r,disabled:n===!1}}function PE(n,e){const t=[],i=n._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)t.push(i[r].index);return t}function Rb(n,e,t,i={}){const r=n.keys,s=i.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===t){if(u=!0,i.all)continue;break}c=n.values[l],mo(c)&&(s||e===0||Bf(e)===Bf(c))&&(e+=c)}return!u&&!i.all?0:e}function eN(n,e){const{iScale:t,vScale:i}=e,r=t.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[r]:u,[s]:n[u]};return a}function lx(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function tN(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function nN(n){const{min:e,max:t,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?t:Number.POSITIVE_INFINITY}}function iN(n,e,t){const i=n[e]||(n[e]={});return i[t]||(i[t]={})}function kb(n,e,t,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const s=n[r.index];if(t&&s>0||!t&&s<0)return r.index}return null}function Lb(n,e){const{chart:t,_cachedMeta:i}=n,r=t._stacks||(t._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,u=tN(s,o,i),f=e.length;let d;for(let h=0;h<f;++h){const g=e[h],{[l]:_,[c]:x}=g,y=g._stacks||(g._stacks={});d=y[c]=iN(r,u,_),d[a]=x,d._top=kb(d,o,!0,i.type),d._bottom=kb(d,o,!1,i.type);const M=d._visualValues||(d._visualValues={});M[a]=x}}function cx(n,e){const t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function rN(n,e){return Xu(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function sN(n,e,t){return Xu(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Vd(n,e){const t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(const r of e){const s=r._stacks;if(!s||s[i]===void 0||s[i][t]===void 0)return;delete s[i][t],s[i]._visualValues!==void 0&&s[i]._visualValues[t]!==void 0&&delete s[i]._visualValues[t]}}}const ux=n=>n==="reset"||n==="none",Nb=(n,e)=>e?n:Object.assign({},n),oN=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:PE(t,!0),values:null};class I0{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=lx(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Vd(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,i=this.getDataset(),r=(f,d,h,g)=>f==="x"?d:f==="r"?g:h,s=t.xAxisID=Sn(i.xAxisID,cx(e,"x")),o=t.yAxisID=Sn(i.yAxisID,cx(e,"y")),a=t.rAxisID=Sn(i.rAxisID,cx(e,"r")),l=t.indexAxis,c=t.iAxisID=r(l,s,o,a),u=t.vAxisID=r(l,o,s,a);t.xScale=this.getScaleForId(s),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(c),t.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&pb(this._data,this),e._stacked&&Vd(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),i=this._data;if(In(t)){const r=this._cachedMeta;this._data=eN(t,r)}else if(i!==t){if(i){pb(i,this);const r=this._cachedMeta;Vd(r),r._parsed=[]}t&&Object.isExtensible(t)&&Bk(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=t._stacked;t._stacked=lx(t.vScale,t),t.stack!==i.stack&&(r=!0,Vd(t),t.stack=i.stack),this._resyncElements(e),(r||s!==t._stacked)&&(Lb(this,t._parsed),t._stacked=lx(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:o}=i,a=s.axis;let l=e===0&&t===r.length?!0:i._sorted,c=e>0&&i._parsed[e-1],u,f,d;if(this._parsing===!1)i._parsed=r,i._sorted=!0,d=r;else{lr(r[e])?d=this.parseArrayData(i,r,e,t):In(r[e])?d=this.parseObjectData(i,r,e,t):d=this.parsePrimitiveData(i,r,e,t);const h=()=>f[a]===null||c&&f[a]<c[a];for(u=0;u<t;++u)i._parsed[u+e]=f=d[u],l&&(h()&&(l=!1),c=f);i._sorted=l}o&&Lb(this,d)}parsePrimitiveData(e,t,i,r){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),u=s===o,f=new Array(r);let d,h,g;for(d=0,h=r;d<h;++d)g=d+i,f[d]={[a]:u||s.parse(c[g],g),[l]:o.parse(t[g],g)};return f}parseArrayData(e,t,i,r){const{xScale:s,yScale:o}=e,a=new Array(r);let l,c,u,f;for(l=0,c=r;l<c;++l)u=l+i,f=t[u],a[l]={x:s.parse(f[0],u),y:o.parse(f[1],u)};return a}parseObjectData(e,t,i,r){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let u,f,d,h;for(u=0,f=r;u<f;++u)d=u+i,h=t[d],c[u]={x:s.parse(J1(h,a),d),y:o.parse(J1(h,l),d)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,i){const r=this.chart,s=this._cachedMeta,o=t[e.axis],a={keys:PE(r,!0),values:t._stacks[e.axis]._visualValues};return Rb(a,o,s.index,{mode:i})}updateRangeFromParsed(e,t,i,r){const s=i[t.axis];let o=s===null?NaN:s;const a=r&&i._stacks[t.axis];r&&a&&(r.values=a,o=Rb(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&e===i.iScale,o=r.length,a=this._getOtherScale(e),l=oN(t,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:f}=nN(a);let d,h;function g(){h=r[d];const _=h[a.axis];return!mo(h[e.axis])||u>_||f<_}for(d=0;d<o&&!(!g()&&(this.updateRangeFromParsed(c,e,h,l),s));++d);if(s){for(d=o-1;d>=0;--d)if(!g()){this.updateRangeFromParsed(c,e,h,l);break}}return c}getAllParsedValues(e){const t=this._cachedMeta._parsed,i=[];let r,s,o;for(r=0,s=t.length;r<s;++r)o=t[r][e.axis],mo(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,i=t.iScale,r=t.vScale,s=this.getParsed(e);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=$L(Sn(this.options.clip,JL(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,i=this._cachedMeta,r=i.data||[],s=t.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,c=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(e,s,a,l),u=a;u<a+l;++u){const f=r[u];f.hidden||(f.active&&c?o.push(f):f.draw(e,s))}for(u=0;u<o.length;++u)o[u].draw(e,s)}getStyle(e,t){const i=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,t,i){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=sN(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=rN(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!t,s.mode=i,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",i){const r=t==="active",s=this._cachedDataOpts,o=e+"-"+t,a=s[o],l=this.enableOptionSharing&&$1(i);if(a)return Nb(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),f=r?[`${e}Hover`,"hover",e,""]:[e,""],d=c.getOptionScopes(this.getDataset(),u),h=Object.keys(Ni.elements[e]),g=()=>this.getContext(i,r,t),_=c.resolveNamedOptions(d,h,g,f);return _.$shared&&(_.$shared=l,s[o]=Object.freeze(Nb(_,l))),_}_resolveAnimations(e,t,i){const r=this.chart,s=this._cachedDataOpts,o=`animation-${t}`,a=s[o];if(a)return a;let l;if(r.options.animation!==!1){const u=this.chart.config,f=u.datasetAnimationScopeKeys(this._type,t),d=u.getOptionScopes(this.getDataset(),f);l=u.createResolver(d,this.getContext(e,i,t))}const c=new CE(r,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||ux(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const i=this.resolveDataElementOptions(e,t),r=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(t,s)||s!==r;return this.updateSharedOptions(s,t,i),{sharedOptions:s,includeOptions:o}}updateElement(e,t,i,r){ux(r)?Object.assign(e,i):this._resolveAnimations(t,r).update(e,i)}updateSharedOptions(e,t,i){e&&!ux(t)&&this._resolveAnimations(void 0,t).update(e,i)}_setStyle(e,t,i,r){e.active=r;const s=this.getStyle(t,r);this._resolveAnimations(t,i,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,t,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,t,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const r=i.length,s=t.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,t,i=!0){const r=this._cachedMeta,s=r.data,o=e+t;let a;const l=c=>{for(c.length+=t,a=c.length-1;a>=o;a--)c[a]=c[a-t]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,t),i&&this.updateElements(s,e,t,"reset")}updateElements(e,t,i,r){}_removeElements(e,t){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,t);i._stacked&&Vd(i,r)}i.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,i,r]=e;this[t](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}cn(I0,"defaults",{}),cn(I0,"datasetElementType",null),cn(I0,"dataElementType",null);class f1 extends I0{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:i,data:r=[],_dataset:s}=t,o=this.chart._animationsDisabled;let{start:a,count:l}=Wk(t,r,o);this._drawStart=a,this._drawCount=l,jk(t)&&(a=0,l=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=r;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:c},e),this.updateElements(r,a,l,e)}updateElements(e,t,i,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:f}=this._getSharedOptions(t,r),d=o.axis,h=a.axis,{spanGaps:g,segment:_}=this.options,x=op(g)?g:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||s||r==="none",M=t+i,b=e.length;let A=t>0&&this.getParsed(t-1);for(let T=0;T<b;++T){const P=e[T],k=y?P:{};if(T<t||T>=M){k.skip=!0;continue}const N=this.getParsed(T),z=ti(N[h]),R=k[d]=o.getPixelForValue(N[d],T),F=k[h]=s||z?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,N,l):N[h],T);k.skip=isNaN(R)||isNaN(F)||z,k.stop=T>0&&Math.abs(N[d]-A[d])>x,_&&(k.parsed=N,k.raw=c.data[T]),f&&(k.options=u||this.resolveDataElementOptions(T,P.active?"active":r)),y||this.updateElement(P,T,k,r),A=N}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,i=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return i;const s=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}cn(f1,"id","line"),cn(f1,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),cn(f1,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Xc(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class D_{constructor(e){cn(this,"options");this.options=e||{}}static override(e){Object.assign(D_.prototype,e)}init(){}formats(){return Xc()}parse(){return Xc()}format(){return Xc()}add(){return Xc()}diff(){return Xc()}startOf(){return Xc()}endOf(){return Xc()}}var aN={_date:D_};function lN(n,e,t,i){const{controller:r,data:s,_sorted:o}=n,a=r._cachedMeta.iScale,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const c=a._reversePixels?Uk:Su;if(i){if(r._sharedOptions){const u=s[0],f=typeof u.getRange=="function"&&u.getRange(e);if(f){const d=c(s,e,t-f),h=c(s,e,t+f);return{lo:d.lo,hi:h.hi}}}}else{const u=c(s,e,t);if(l){const{vScale:f}=r._cachedMeta,{_parsed:d}=n,h=d.slice(0,u.lo+1).reverse().findIndex(_=>!ti(_[f.axis]));u.lo-=Math.max(0,h);const g=d.slice(u.hi).findIndex(_=>!ti(_[f.axis]));u.hi+=Math.max(0,g)}return u}}return{lo:0,hi:s.length-1}}function zp(n,e,t,i,r){const s=n.getSortedVisibleDatasetMetas(),o=t[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:u}=s[a],{lo:f,hi:d}=lN(s[a],e,o,r);for(let h=f;h<=d;++h){const g=u[h];g.skip||i(g,c,h)}}}function cN(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(i,r){const s=e?Math.abs(i.x-r.x):0,o=t?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function hx(n,e,t,i,r){const s=[];return!r&&!n.isPointInArea(e)||zp(n,t,e,function(a,l,c){!r&&!ap(a,n.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function uN(n,e,t,i){let r=[];function s(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:f}=Dk(o,{x:e.x,y:e.y});hE(f,c,u)&&r.push({element:o,datasetIndex:a,index:l})}return zp(n,t,e,s),r}function hN(n,e,t,i,r,s){let o=[];const a=cN(t);let l=Number.POSITIVE_INFINITY;function c(u,f,d){const h=u.inRange(e.x,e.y,r);if(i&&!h)return;const g=u.getCenterPoint(r);if(!(!!s||n.isPointInArea(g))&&!h)return;const x=a(e,g);x<l?(o=[{element:u,datasetIndex:f,index:d}],l=x):x===l&&o.push({element:u,datasetIndex:f,index:d})}return zp(n,t,e,c),o}function fx(n,e,t,i,r,s){return!s&&!n.isPointInArea(e)?[]:t==="r"&&!i?uN(n,e,t,r):hN(n,e,t,i,r,s)}function Ib(n,e,t,i,r){const s=[],o=t==="x"?"inXRange":"inYRange";let a=!1;return zp(n,t,e,(l,c,u)=>{l[o]&&l[o](e[t],r)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,r))}),i&&!a?[]:s}var fN={evaluateInteractionItems:zp,modes:{index(n,e,t,i){const r=cu(e,n),s=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?hx(n,r,s,i,o):fx(n,r,s,!1,i,o),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,f=c.data[u];f&&!f.skip&&l.push({element:f,datasetIndex:c.index,index:u})}),l):[]},dataset(n,e,t,i){const r=cu(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;let a=t.intersect?hx(n,r,s,i,o):fx(n,r,s,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=n.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(n,e,t,i){const r=cu(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return hx(n,r,s,i,o)},nearest(n,e,t,i){const r=cu(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return fx(n,r,s,t.intersect,i,o)},x(n,e,t,i){const r=cu(e,n);return Ib(n,r,"x",t.intersect,i)},y(n,e,t,i){const r=cu(e,n);return Ib(n,r,"y",t.intersect,i)}}};const RE=["left","top","right","bottom"];function Gd(n,e){return n.filter(t=>t.pos===e)}function Db(n,e){return n.filter(t=>RE.indexOf(t.pos)===-1&&t.box.axis===e)}function Wd(n,e){return n.sort((t,i)=>{const r=e?i:t,s=e?t:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function dN(n){const e=[];let t,i,r,s,o,a;for(t=0,i=(n||[]).length;t<i;++t)r=n[t],{position:s,options:{stack:o,stackWeight:a=1}}=r,e.push({index:t,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function pN(n){const e={};for(const t of n){const{stack:i,pos:r,stackWeight:s}=t;if(!i||!RE.includes(r))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function mN(n,e){const t=pN(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,o,a;for(s=0,o=n.length;s<o;++s){a=n[s];const{fullSize:l}=a.box,c=t[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&e.availableWidth,a.height=r):(a.width=i,a.height=u?u*r:l&&e.availableHeight)}return t}function gN(n){const e=dN(n),t=Wd(e.filter(c=>c.box.fullSize),!0),i=Wd(Gd(e,"left"),!0),r=Wd(Gd(e,"right")),s=Wd(Gd(e,"top"),!0),o=Wd(Gd(e,"bottom")),a=Db(e,"x"),l=Db(e,"y");return{fullSize:t,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:Gd(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function Ob(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function kE(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function vN(n,e,t,i){const{pos:r,box:s}=t,o=n.maxPadding;if(!In(r)){t.size&&(n[r]-=t.size);const f=i[t.stack]||{size:0,count:1};f.size=Math.max(f.size,t.horizontal?s.height:s.width),t.size=f.size/f.count,n[r]+=t.size}s.getPadding&&kE(o,s.getPadding());const a=Math.max(0,e.outerWidth-Ob(o,n,"left","right")),l=Math.max(0,e.outerHeight-Ob(o,n,"top","bottom")),c=a!==n.w,u=l!==n.h;return n.w=a,n.h=l,t.horizontal?{same:c,other:u}:{same:u,other:c}}function yN(n){const e=n.maxPadding;function t(i){const r=Math.max(e[i]-n[i],0);return n[i]+=r,r}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function xN(n,e){const t=e.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],t[o])}),s}return i(n?["left","right"]:["top","bottom"])}function p0(n,e,t,i){const r=[];let s,o,a,l,c,u;for(s=0,o=n.length,c=0;s<o;++s){a=n[s],l=a.box,l.update(a.width||e.w,a.height||e.h,xN(a.horizontal,e));const{same:f,other:d}=vN(e,t,a,i);c|=f&&r.length,u=u||d,l.fullSize||r.push(a)}return c&&p0(r,e,t,i)||u}function Xm(n,e,t,i,r){n.top=t,n.left=e,n.right=e+i,n.bottom=t+r,n.width=i,n.height=r}function Fb(n,e,t,i){const r=t.padding;let{x:s,y:o}=e;for(const a of n){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const f=e.w*u,d=c.size||l.height;$1(c.start)&&(o=c.start),l.fullSize?Xm(l,r.left,o,t.outerWidth-r.right-r.left,d):Xm(l,e.left+c.placed,o,f,d),c.start=o,c.placed+=f,o=l.bottom}else{const f=e.h*u,d=c.size||l.width;$1(c.start)&&(s=c.start),l.fullSize?Xm(l,s,r.top,d,t.outerHeight-r.bottom-r.top):Xm(l,s,e.top+c.placed,d,f),c.start=s,c.placed+=f,s=l.right}}e.x=s,e.y=o}var uo={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;const r=go(n.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(t-r.height,0),a=gN(n.boxes),l=a.vertical,c=a.horizontal;Vn(n.boxes,_=>{typeof _.beforeLayout=="function"&&_.beforeLayout()});const u=l.reduce((_,x)=>x.box.options&&x.box.options.display===!1?_:_+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:t,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},r);kE(d,go(i));const h=Object.assign({maxPadding:d,w:s,h:o,x:r.left,y:r.top},r),g=mN(l.concat(c),f);p0(a.fullSize,h,f,g),p0(l,h,f,g),p0(c,h,f,g)&&p0(l,h,f,g),yN(h),Fb(a.leftAndTop,h,f,g),h.x+=h.w,h.y+=h.h,Fb(a.rightAndBottom,h,f,g),n.chartArea={left:h.left,top:h.top,right:h.left+h.w,bottom:h.top+h.h,height:h.h,width:h.w},Vn(a.chartArea,_=>{const x=_.box;Object.assign(x,n.chartArea),x.update(h.w,h.h,{left:0,top:0,right:0,bottom:0})})}};class LE{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,r){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):i)}}isAttached(e){return!0}updateConfig(e){}}class _N extends LE{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const d1="$chartjs",SN={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Ub=n=>n===null||n==="";function wN(n,e){const t=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[d1]={initial:{height:i,width:r,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",Ub(r)){const s=Mb(n,"width");s!==void 0&&(n.width=s)}if(Ub(i))if(n.style.height==="")n.height=n.width/(e||2);else{const s=Mb(n,"height");s!==void 0&&(n.height=s)}return n}const NE=IL?{passive:!0}:!1;function bN(n,e,t){n&&n.addEventListener(e,t,NE)}function MN(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,NE)}function EN(n,e){const t=SN[n.type]||n.type,{x:i,y:r}=cu(n,e);return{type:t,chart:e,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function nv(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function TN(n,e,t){const i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||nv(a.addedNodes,i),o=o&&!nv(a.removedNodes,i);o&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}function AN(n,e,t){const i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||nv(a.removedNodes,i),o=o&&!nv(a.addedNodes,i);o&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}const cp=new Map;let zb=0;function IE(){const n=window.devicePixelRatio;n!==zb&&(zb=n,cp.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function CN(n,e){cp.size||window.addEventListener("resize",IE),cp.set(n,e)}function PN(n){cp.delete(n),cp.size||window.removeEventListener("resize",IE)}function RN(n,e,t){const i=n.canvas,r=i&&I_(i);if(!r)return;const s=pE((a,l)=>{const c=r.clientWidth;t(a,l),c<r.clientWidth&&t()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(r),CN(n,s),o}function dx(n,e,t){t&&t.disconnect(),e==="resize"&&PN(n)}function kN(n,e,t){const i=n.canvas,r=pE(s=>{n.ctx!==null&&t(EN(s,n))},n);return bN(i,e,r),r}class LN extends LE{acquireContext(e,t){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(wN(e,t),i):null}releaseContext(e){const t=e.canvas;if(!t[d1])return!1;const i=t[d1].initial;["height","width"].forEach(s=>{const o=i[s];ti(o)?t.removeAttribute(s):t.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{t.style[s]=r[s]}),t.width=t.width,delete t[d1],!0}addEventListener(e,t,i){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),o={attach:TN,detach:AN,resize:RN}[t]||kN;r[t]=o(e,t,i)}removeEventListener(e,t){const i=e.$proxies||(e.$proxies={}),r=i[t];if(!r)return;({attach:dx,detach:dx,resize:dx}[t]||MN)(e,t,r),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,r){return NL(e,t,i,r)}isAttached(e){const t=e&&I_(e);return!!(t&&t.isConnected)}}function NN(n){return!N_()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?_N:LN}class sl{constructor(){cn(this,"x");cn(this,"y");cn(this,"active",!1);cn(this,"options");cn(this,"$animations")}tooltipPosition(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return op(this.x)&&op(this.y)}getProps(e,t){const i=this.$animations;if(!t||!i)return this;const r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}}cn(sl,"defaults",{}),cn(sl,"defaultRoutes");function IN(n,e){const t=n.options.ticks,i=DN(n),r=Math.min(t.maxTicksLimit||i,i),s=t.major.enabled?FN(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return UN(e,c,s,o/r),c;const u=ON(s,e,r);if(o>0){let f,d;const h=o>1?Math.round((l-a)/(o-1)):null;for(Ym(e,c,u,ti(h)?0:a-h,a),f=0,d=o-1;f<d;f++)Ym(e,c,u,s[f],s[f+1]);return Ym(e,c,u,l,ti(h)?e.length:l+h),c}return Ym(e,c,u),c}function DN(n){const e=n.options.offset,t=n._tickSize(),i=n._length/t+(e?0:1),r=n._maxLength/t;return Math.floor(Math.min(i,r))}function ON(n,e,t){const i=zN(n),r=e.length/t;if(!i)return Math.max(r,1);const s=Rk(i);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}function FN(n){const e=[];let t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}function UN(n,e,t,i){let r=0,s=t[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===s&&(e.push(n[o]),r++,s=t[r*i])}function Ym(n,e,t,i,r){const s=Sn(i,0),o=Math.min(Sn(r,n.length),n.length);let a=0,l,c,u;for(t=Math.ceil(t),r&&(l=r-i,t=l/Math.floor(l/t)),u=s;u<0;)a++,u=Math.round(s+a*t);for(c=Math.max(s,0);c<o;c++)c===u&&(e.push(n[c]),a++,u=Math.round(s+a*t))}function zN(n){const e=n.length;let t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}const BN=n=>n==="left"?"right":n==="right"?"left":n,Bb=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,Hb=(n,e)=>Math.min(e||n,n);function Vb(n,e){const t=[],i=n.length/e,r=n.length;let s=0;for(;s<r;s+=i)t.push(n[Math.floor(s)]);return t}function HN(n,e,t){const i=n.ticks.length,r=Math.min(e,i-1),s=n._startPixel,o=n._endPixel,a=1e-6;let l=n.getPixelForTick(r),c;if(!(t&&(i===1?c=Math.max(l-s,o-l):e===0?c=(n.getPixelForTick(1)-l)/2:c=(l-n.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<s-a||l>o+a)))return l}function VN(n,e){Vn(n,t=>{const i=t.gc,r=i.length/2;let s;if(r>e){for(s=0;s<r;++s)delete t.data[i[s]];i.splice(0,r)}})}function jd(n){return n.drawTicks?n.tickLength:0}function Gb(n,e){if(!n.display)return 0;const t=Ur(n.font,e),i=go(n.padding);return(lr(n.text)?n.text.length:1)*t.lineHeight+i.height}function GN(n,e){return Xu(n,{scale:e,type:"scale"})}function WN(n,e,t){return Xu(n,{tick:t,index:e,type:"tick"})}function jN(n,e,t){let i=T_(n);return(t&&e!=="right"||!t&&e==="right")&&(i=BN(i)),i}function qN(n,e,t,i){const{top:r,left:s,bottom:o,right:a,chart:l}=n,{chartArea:c,scales:u}=l;let f=0,d,h,g;const _=o-r,x=a-s;if(n.isHorizontal()){if(h=Dr(i,s,a),In(t)){const y=Object.keys(t)[0],M=t[y];g=u[y].getPixelForValue(M)+_-e}else t==="center"?g=(c.bottom+c.top)/2+_-e:g=Bb(n,t,e);d=a-s}else{if(In(t)){const y=Object.keys(t)[0],M=t[y];h=u[y].getPixelForValue(M)-x+e}else t==="center"?h=(c.left+c.right)/2-x+e:h=Bb(n,t,e);g=Dr(i,o,r),f=t==="left"?-Fo:Fo}return{titleX:h,titleY:g,maxWidth:d,rotation:f}}class Kf extends sl{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:r}=this;return e=ta(e,Number.POSITIVE_INFINITY),t=ta(t,Number.NEGATIVE_INFINITY),i=ta(i,Number.POSITIVE_INFINITY),r=ta(r,Number.NEGATIVE_INFINITY),{min:ta(e,i),max:ta(t,r),minDefined:mo(e),maxDefined:mo(t)}}getMinMax(e){let{min:t,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:t,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),r||(t=Math.min(t,o.min)),s||(i=Math.max(i,o.max));return t=s&&t>i?i:t,i=r&&t>i?t:i,{min:ta(t,ta(i,t)),max:ta(i,ta(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ri(this.options.beforeUpdate,[this])}update(e,t,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=hL(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Vb(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=IN(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ri(this.options.afterUpdate,[this])}beforeSetDimensions(){ri(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ri(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ri(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ri(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=ri(t.callback,[s.value,i,e],this)}afterTickToLabelConversion(){ri(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ri(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,i=Hb(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,s=t.maxRotation;let o=r,a,l,c;if(!this._isVisible()||!t.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),f=u.widest.width,d=u.highest.height,h=co(this.chart.width-f,0,this.maxWidth);a=e.offset?this.maxWidth/i:h/(i-1),f+6>a&&(a=h/(i-(e.offset?.5:1)),l=this.maxHeight-jd(e.grid)-t.padding-Gb(e.title,this.chart.options.font),c=Math.sqrt(f*f+d*d),o=Ik(Math.min(Math.asin(co((u.highest.height+6)/a,-1,1)),Math.asin(co(l/c,-1,1))-Math.asin(co(d/c,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){ri(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ri(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Gb(r,t.options.font);if(a?(e.width=this.maxWidth,e.height=jd(s)+l):(e.height=this.maxHeight,e.width=jd(s)+l),i.display&&this.ticks.length){const{first:c,last:u,widest:f,highest:d}=this._getLabelSizes(),h=i.padding*2,g=_u(this.labelRotation),_=Math.cos(g),x=Math.sin(g);if(a){const y=i.mirror?0:x*f.width+_*d.height;e.height=Math.min(this.maxHeight,e.height+y+h)}else{const y=i.mirror?0:_*f.width+x*d.height;e.width=Math.min(this.maxWidth,e.width+y+h)}this._calculatePadding(c,u,x,_)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,h=0;l?c?(d=r*e.width,h=i*t.height):(d=i*e.height,h=r*t.width):s==="start"?h=t.width:s==="end"?d=e.width:s!=="inner"&&(d=e.width/2,h=t.width/2),this.paddingLeft=Math.max((d-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((h-f+o)*this.width/(this.width-f),0)}else{let u=t.height/2,f=e.height/2;s==="start"?(u=0,f=e.height):s==="end"&&(u=t.height,f=0),this.paddingTop=u+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ri(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)ti(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let i=this.ticks;t<i.length&&(i=Vb(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){const{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(t/Hb(t,i));let c=0,u=0,f,d,h,g,_,x,y,M,b,A,T;for(f=0;f<t;f+=l){if(g=e[f].label,_=this._resolveTickFontOptions(f),r.font=x=_.string,y=s[x]=s[x]||{data:{},gc:[]},M=_.lineHeight,b=A=0,!ti(g)&&!lr(g))b=xb(r,y.data,y.gc,b,g),A=M;else if(lr(g))for(d=0,h=g.length;d<h;++d)T=g[d],!ti(T)&&!lr(T)&&(b=xb(r,y.data,y.gc,b,T),A+=M);o.push(b),a.push(A),c=Math.max(b,c),u=Math.max(A,u)}VN(s,t);const P=o.indexOf(c),k=a.indexOf(u),N=z=>({width:o[z]||0,height:a[z]||0});return{first:N(0),last:N(t-1),widest:N(P),highest:N(k),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return Fk(this._alignToPixels?qc(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const i=t[e];return i.$context||(i.$context=WN(this.getContext(),e,i))}return this.$context||(this.$context=GN(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=_u(this.labelRotation),i=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,c=this.isHorizontal(),f=this.ticks.length+(l?1:0),d=jd(s),h=[],g=a.setContext(this.getContext()),_=g.display?g.width:0,x=_/2,y=function(re){return qc(i,re,_)};let M,b,A,T,P,k,N,z,R,F,V,K;if(o==="top")M=y(this.bottom),k=this.bottom-d,z=M-x,F=y(e.top)+x,K=e.bottom;else if(o==="bottom")M=y(this.top),F=e.top,K=y(e.bottom)-x,k=M+x,z=this.top+d;else if(o==="left")M=y(this.right),P=this.right-d,N=M-x,R=y(e.left)+x,V=e.right;else if(o==="right")M=y(this.left),R=e.left,V=y(e.right)-x,P=M+x,N=this.left+d;else if(t==="x"){if(o==="center")M=y((e.top+e.bottom)/2+.5);else if(In(o)){const re=Object.keys(o)[0],de=o[re];M=y(this.chart.scales[re].getPixelForValue(de))}F=e.top,K=e.bottom,k=M+x,z=k+d}else if(t==="y"){if(o==="center")M=y((e.left+e.right)/2);else if(In(o)){const re=Object.keys(o)[0],de=o[re];M=y(this.chart.scales[re].getPixelForValue(de))}P=M-x,N=P-d,R=e.left,V=e.right}const W=Sn(r.ticks.maxTicksLimit,f),ne=Math.max(1,Math.ceil(f/W));for(b=0;b<f;b+=ne){const re=this.getContext(b),de=s.setContext(re),X=a.setContext(re),$=de.lineWidth,J=de.color,j=X.dash||[],se=X.dashOffset,ve=de.tickWidth,oe=de.tickColor,he=de.tickBorderDash||[],ye=de.tickBorderDashOffset;A=HN(this,b,l),A!==void 0&&(T=qc(i,A,$),c?P=N=R=V=T:k=z=F=K=T,h.push({tx1:P,ty1:k,tx2:N,ty2:z,x1:R,y1:F,x2:V,y2:K,width:$,color:J,borderDash:j,borderDashOffset:se,tickWidth:ve,tickColor:oe,tickBorderDash:he,tickBorderDashOffset:ye}))}return this._ticksLength=f,this._borderValue=M,h}_computeLabelItems(e){const t=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:f}=s,d=jd(i.grid),h=d+u,g=f?-u:h,_=-_u(this.labelRotation),x=[];let y,M,b,A,T,P,k,N,z,R,F,V,K="middle";if(r==="top")P=this.bottom-g,k=this._getXAxisLabelAlignment();else if(r==="bottom")P=this.top+g,k=this._getXAxisLabelAlignment();else if(r==="left"){const ne=this._getYAxisLabelAlignment(d);k=ne.textAlign,T=ne.x}else if(r==="right"){const ne=this._getYAxisLabelAlignment(d);k=ne.textAlign,T=ne.x}else if(t==="x"){if(r==="center")P=(e.top+e.bottom)/2+h;else if(In(r)){const ne=Object.keys(r)[0],re=r[ne];P=this.chart.scales[ne].getPixelForValue(re)+h}k=this._getXAxisLabelAlignment()}else if(t==="y"){if(r==="center")T=(e.left+e.right)/2-h;else if(In(r)){const ne=Object.keys(r)[0],re=r[ne];T=this.chart.scales[ne].getPixelForValue(re)}k=this._getYAxisLabelAlignment(d).textAlign}t==="y"&&(l==="start"?K="top":l==="end"&&(K="bottom"));const W=this._getLabelSizes();for(y=0,M=a.length;y<M;++y){b=a[y],A=b.label;const ne=s.setContext(this.getContext(y));N=this.getPixelForTick(y)+s.labelOffset,z=this._resolveTickFontOptions(y),R=z.lineHeight,F=lr(A)?A.length:1;const re=F/2,de=ne.color,X=ne.textStrokeColor,$=ne.textStrokeWidth;let J=k;o?(T=N,k==="inner"&&(y===M-1?J=this.options.reverse?"left":"right":y===0?J=this.options.reverse?"right":"left":J="center"),r==="top"?c==="near"||_!==0?V=-F*R+R/2:c==="center"?V=-W.highest.height/2-re*R+R:V=-W.highest.height+R/2:c==="near"||_!==0?V=R/2:c==="center"?V=W.highest.height/2-re*R:V=W.highest.height-F*R,f&&(V*=-1),_!==0&&!ne.showLabelBackdrop&&(T+=R/2*Math.sin(_))):(P=N,V=(1-F)*R/2);let j;if(ne.showLabelBackdrop){const se=go(ne.backdropPadding),ve=W.heights[y],oe=W.widths[y];let he=V-se.top,ye=0-se.left;switch(K){case"middle":he-=ve/2;break;case"bottom":he-=ve;break}switch(k){case"center":ye-=oe/2;break;case"right":ye-=oe;break;case"inner":y===M-1?ye-=oe:y>0&&(ye-=oe/2);break}j={left:ye,top:he,width:oe+se.width,height:ve+se.height,color:ne.backdropColor}}x.push({label:A,font:z,textOffset:V,options:{rotation:_,color:de,strokeColor:X,strokeWidth:$,textAlign:J,textBaseline:K,translation:[T,P],backdrop:j}})}return x}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-_u(this.labelRotation))return e==="top"?"left":"right";let r="center";return t.align==="start"?r="left":t.align==="end"?r="right":t.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,u;return t==="left"?r?(u=this.right+s,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):t==="right"?r?(u=this.left+s,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:i,top:r,width:s,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const r=this.ticks.findIndex(s=>s.value===e);return r>=0?t.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const t=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(t.display)for(s=0,o=r.length;s<o;++s){const l=r[s];t.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),t.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,f,d;this.isHorizontal()?(c=qc(e,this.left,o)-o/2,u=qc(e,this.right,a)+a/2,f=d=l):(f=qc(e,this.top,o)-o/2,d=qc(e,this.bottom,a)+a/2,c=u=l),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(c,f),t.lineTo(u,d),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&C_(i,r);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,u=o.textOffset;lp(i,c,0,u,l,a)}r&&P_(i)}drawTitle(){const{ctx:e,options:{position:t,title:i,reverse:r}}=this;if(!i.display)return;const s=Ur(i.font),o=go(i.padding),a=i.align;let l=s.lineHeight/2;t==="bottom"||t==="center"||In(t)?(l+=o.bottom,lr(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:f,rotation:d}=qN(this,l,t,a);lp(e,i.text,0,0,s,{color:i.color,maxWidth:f,rotation:d,textAlign:jN(a,t,r),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,i=Sn(e.grid&&e.grid.z,-1),r=Sn(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Kf.prototype.draw?[{z:t,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=t.length;s<o;++s){const a=t[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return Ur(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Zm{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let i;ZN(t)&&(i=this.register(t));const r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,XN(e,o,i),this.override&&Ni.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,i=e.id,r=this.scope;i in t&&delete t[i],r&&i in Ni[r]&&(delete Ni[r][i],this.override&&delete Bu[i])}}function XN(n,e,t){const i=sp(Object.create(null),[t?Ni.get(t):{},Ni.get(e),n.defaults]);Ni.set(e,i),n.defaultRoutes&&YN(e,n.defaultRoutes),n.descriptors&&Ni.describe(e,n.descriptors)}function YN(n,e){Object.keys(e).forEach(t=>{const i=t.split("."),r=i.pop(),s=[n].concat(i).join("."),o=e[t].split("."),a=o.pop(),l=o.join(".");Ni.route(s,r,l,a)})}function ZN(n){return"id"in n&&"defaults"in n}class KN{constructor(){this.controllers=new Zm(I0,"datasets",!0),this.elements=new Zm(sl,"elements"),this.plugins=new Zm(Object,"plugins"),this.scales=new Zm(Kf,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):Vn(r,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,t,i){const r=M_(e);ri(i["before"+r],[],i),t[e](i),ri(i["after"+r],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){const r=t.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var oa=new KN;class QN{constructor(){this._init=[]}notify(e,t,i,r){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,t,i);return t==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,i,r){r=r||{};for(const s of e){const o=s.plugin,a=o[i],l=[t,r,s.options];if(ri(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){ti(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const i=e&&e.config,r=Sn(i.options&&i.options.plugins,{}),s=JN(i);return r===!1&&!t?[]:eI(e,s,r,t)}_notifyStateChanges(e){const t=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(t,i),e,"stop"),this._notify(r(i,t),e,"start")}}function JN(n){const e={},t=[],i=Object.keys(oa.plugins.items);for(let s=0;s<i.length;s++)t.push(oa.getPlugin(i[s]));const r=n.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function $N(n,e){return!e&&n===!1?null:n===!0?{}:n}function eI(n,{plugins:e,localIds:t},i,r){const s=[],o=n.getContext();for(const a of e){const l=a.id,c=$N(i[l],r);c!==null&&s.push({plugin:a,options:tI(n.config,{plugin:a,local:t[l]},c,o)})}return s}function tI(n,{plugin:e,local:t},i,r){const s=n.pluginScopeKeys(e),o=n.getOptionScopes(i,s);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function w4(n,e){const t=Ni.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function nI(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function iI(n,e){return n===e?"_index_":"_value_"}function Wb(n){if(n==="x"||n==="y"||n==="r")return n}function rI(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function b4(n,...e){if(Wb(n))return n;for(const t of e){const i=t.axis||rI(t.position)||n.length>1&&Wb(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function jb(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function sI(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(t.length)return jb(n,"x",t[0])||jb(n,"y",t[0])}return{}}function oI(n,e){const t=Bu[n.type]||{scales:{}},i=e.scales||{},r=w4(n.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!In(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=b4(o,a,sI(o,n),Ni.scales[a.type]),c=iI(l,r),u=t.scales||{};s[o]=P0(Object.create(null),[{axis:l},a,u[l],u[c]])}),n.data.datasets.forEach(o=>{const a=o.type||n.type,l=o.indexAxis||w4(a,e),u=(Bu[a]||{}).scales||{};Object.keys(u).forEach(f=>{const d=nI(f,l),h=o[d+"AxisID"]||d;s[h]=s[h]||Object.create(null),P0(s[h],[{axis:d},i[h],u[f]])})}),Object.keys(s).forEach(o=>{const a=s[o];P0(a,[Ni.scales[a.type],Ni.scale])}),s}function DE(n){const e=n.options||(n.options={});e.plugins=Sn(e.plugins,{}),e.scales=oI(n,e)}function OE(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function aI(n){return n=n||{},n.data=OE(n.data),DE(n),n}const qb=new Map,FE=new Set;function Km(n,e){let t=qb.get(n);return t||(t=e(),qb.set(n,t),FE.add(t)),t}const qd=(n,e,t)=>{const i=J1(e,t);i!==void 0&&n.add(i)};class lI{constructor(e){this._config=aI(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=OE(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),DE(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Km(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return Km(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return Km(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,i=this.type;return Km(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const i=this._scopeCache;let r=i.get(e);return(!r||t)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,t,i){const{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(t);if(a)return a;const l=new Set;t.forEach(u=>{e&&(l.add(e),u.forEach(f=>qd(l,e,f))),u.forEach(f=>qd(l,r,f)),u.forEach(f=>qd(l,Bu[s]||{},f)),u.forEach(f=>qd(l,Ni,f)),u.forEach(f=>qd(l,x4,f))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),FE.has(t)&&o.set(t,c),c}chartOptionScopes(){const{options:e,type:t}=this;return[e,Bu[t]||{},Ni.datasets[t]||{},{type:t},Ni,x4]}resolveNamedOptions(e,t,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=Xb(this._resolverCache,e,r);let l=o;if(uI(o,t)){s.$shared=!1,i=fc(i)?i():i;const c=this.createResolver(e,i,a);l=Hf(o,i,c)}for(const c of t)s[c]=l[c];return s}createResolver(e,t,i=[""],r){const{resolver:s}=Xb(this._resolverCache,e,i);return In(t)?Hf(s,t,void 0,r):s}}function Xb(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));const r=t.join();let s=i.get(r);return s||(s={resolver:R_(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const cI=n=>In(n)&&Object.getOwnPropertyNames(n).some(e=>fc(n[e]));function uI(n,e){const{isScriptable:t,isIndexable:i}=_E(n);for(const r of e){const s=t(r),o=i(r),a=(o||s)&&n[r];if(s&&(fc(a)||cI(a))||o&&lr(a))return!0}return!1}var hI="4.4.8";const fI=["top","bottom","left","right","chartArea"];function Yb(n,e){return n==="top"||n==="bottom"||fI.indexOf(n)===-1&&e==="x"}function Zb(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function Kb(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),ri(t&&t.onComplete,[n],e)}function dI(n){const e=n.chart,t=e.options.animation;ri(t&&t.onProgress,[n],e)}function UE(n){return N_()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const p1={},Qb=n=>{const e=UE(n);return Object.values(p1).filter(t=>t.canvas===e).pop()};function pI(n,e,t){const i=Object.keys(n);for(const r of i){const s=+r;if(s>=e){const o=n[r];delete n[r],(t>0||s>e)&&(n[s+t]=o)}}}function mI(n,e,t,i){return!t||n.type==="mouseout"?null:i?e:n}function Qm(n,e,t){return n.options.clip?n[t]:e[t]}function gI(n,e){const{xScale:t,yScale:i}=n;return t&&i?{left:Qm(t,e,"left"),right:Qm(t,e,"right"),top:Qm(i,e,"top"),bottom:Qm(i,e,"bottom")}:e}var Hl;let Pv=(Hl=class{static register(...e){oa.add(...e),Jb()}static unregister(...e){oa.remove(...e),Jb()}constructor(e,t){const i=this.config=new lI(t),r=UE(e),s=Qb(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||NN(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=Sk(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new QN,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Vk(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],p1[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Ha.listen(this,"complete",Kb),Ha.listen(this,"progress",dI),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:r,_aspectRatio:s}=this;return ti(e)?t&&s?s:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return oa}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():bb(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return _b(this.canvas,this.ctx),this}stop(){return Ha.stop(this),this}resize(e,t){Ha.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,t,s),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,bb(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),ri(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};Vn(t,(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,t=e.scales,i=this.scales,r=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let s=[];t&&(s=s.concat(Object.keys(t).map(o=>{const a=t[o],l=b4(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Vn(s,o=>{const a=o.options,l=a.id,c=b4(l,a),u=Sn(a.type,o.dtype);(a.position===void 0||Yb(a.position,c)!==Yb(o.dposition))&&(a.position=o.dposition),r[l]=!0;let f=null;if(l in i&&i[l].type===u)f=i[l];else{const d=oa.getScale(u);f=new d({id:l,type:u,ctx:this.ctx,chart:this}),i[f.id]=f}f.init(a,e)}),Vn(r,(o,a)=>{o||delete i[a]}),Vn(i,o=>{uo.configure(this,o,o.options),uo.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort((r,s)=>r.index-s.index),i>t){for(let r=t;r<i;++r)this._destroyDatasetMeta(r);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(Zb("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((i,r)=>{t.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=t.length;i<r;i++){const s=t[i];let o=this.getDatasetMeta(i);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=s.indexAxis||w4(a,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=oa.getController(a),{datasetElementType:c,dataElementType:u}=Ni.datasets[a];Object.assign(l,{dataElementType:oa.getElement(u),datasetElementType:c&&oa.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Vn(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:f}=this.getDatasetMeta(c),d=!r&&s.indexOf(f)===-1;f.buildOrUpdateElements(d),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||Vn(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Zb("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Vn(this.scales,e=>{uo.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!ub(t,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of t){const o=i==="_removeElements"?-s:s;pI(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,i=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<t;s++)if(!ub(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;uo.update(this,this.width,this.height,e);const t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],Vn(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,i=this.data.datasets.length;t<i;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,fc(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ha.has(this)?this.attached&&!Ha.running(this)&&Ha.start(this):(this.draw(),Kb({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,i=[];let r,s;for(r=0,s=t.length;r<s;++r){const o=t[r];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,i=e._clip,r=!i.disabled,s=gI(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(r&&C_(t,{left:i.left===!1?0:s.left-i.left,right:i.right===!1?this.width:s.right+i.right,top:i.top===!1?0:s.top-i.top,bottom:i.bottom===!1?this.height:s.bottom+i.bottom}),e.controller.draw(),r&&P_(t),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return ap(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,r){const s=fN.modes[t];return typeof s=="function"?s(this,e,i,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],i=this._metasets;let r=i.filter(s=>s&&s._dataset===t).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=Xu(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!t.hidden}setDatasetVisibility(e,t){const i=this.getDatasetMeta(e);i.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){const r=i?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,r);$1(t)?(s.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(s,{visible:i}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Ha.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),_b(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete p1[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,i=(s,o)=>{t.addEventListener(this,s,o),e[s]=o},r=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};Vn(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,i=(l,c)=>{t.addEventListener(this,l,c),e[l]=c},r=(l,c)=>{e[l]&&(t.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",a)},t.isAttached(this.canvas)?a():o()}unbindEvents(){Vn(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Vn(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){const r=i?"set":"remove";let s,o,a,l;for(t==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],i=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!K1(i,t)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,i){const r=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(f=>u.datasetIndex===f.datasetIndex&&u.index===f.index)),o=s(t,e),a=i?e:s(e,t);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,t){const i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(e,t,i){const{_active:r=[],options:s}=this,o=t,a=this._getActiveElements(e,r,i,o),l=Ak(e),c=mI(e,this._lastEvent,i,l);i&&(this._lastEvent=null,ri(s.onHover,[e,a,this],this),l&&ri(s.onClick,[e,a,this],this));const u=!K1(a,r);return(u||t)&&(this._active=a,this._updateHoverStyles(a,r,t)),this._lastEvent=c,u}_getActiveElements(e,t,i,r){if(e.type==="mouseout")return[];if(!i)return t;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}},cn(Hl,"defaults",Ni),cn(Hl,"instances",p1),cn(Hl,"overrides",Bu),cn(Hl,"registry",oa),cn(Hl,"version",hI),cn(Hl,"getChart",Qb),Hl);function Jb(){return Vn(Pv.instances,n=>n._plugins.invalidate())}function zE(n,e,t=e){n.lineCap=Sn(t.borderCapStyle,e.borderCapStyle),n.setLineDash(Sn(t.borderDash,e.borderDash)),n.lineDashOffset=Sn(t.borderDashOffset,e.borderDashOffset),n.lineJoin=Sn(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=Sn(t.borderWidth,e.borderWidth),n.strokeStyle=Sn(t.borderColor,e.borderColor)}function vI(n,e,t){n.lineTo(t.x,t.y)}function yI(n){return n.stepped?tL:n.tension||n.cubicInterpolationMode==="monotone"?nL:vI}function BE(n,e,t={}){const i=n.length,{start:r=0,end:s=i-1}=t,{start:o,end:a}=e,l=Math.max(r,o),c=Math.min(s,a),u=r<o&&s<o||r>a&&s>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!u?i+c-l:c-l}}function xI(n,e,t,i){const{points:r,options:s}=e,{count:o,start:a,loop:l,ilen:c}=BE(r,t,i),u=yI(s);let{move:f=!0,reverse:d}=i||{},h,g,_;for(h=0;h<=c;++h)g=r[(a+(d?c-h:h))%o],!g.skip&&(f?(n.moveTo(g.x,g.y),f=!1):u(n,_,g,d,s.stepped),_=g);return l&&(g=r[(a+(d?c:0))%o],u(n,_,g,d,s.stepped)),!!l}function _I(n,e,t,i){const r=e.points,{count:s,start:o,ilen:a}=BE(r,t,i),{move:l=!0,reverse:c}=i||{};let u=0,f=0,d,h,g,_,x,y;const M=A=>(o+(c?a-A:A))%s,b=()=>{_!==x&&(n.lineTo(u,x),n.lineTo(u,_),n.lineTo(u,y))};for(l&&(h=r[M(0)],n.moveTo(h.x,h.y)),d=0;d<=a;++d){if(h=r[M(d)],h.skip)continue;const A=h.x,T=h.y,P=A|0;P===g?(T<_?_=T:T>x&&(x=T),u=(f*u+A)/++f):(b(),n.lineTo(A,T),g=P,f=0,_=x=T),y=T}b()}function M4(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?_I:xI}function SI(n){return n.stepped?DL:n.tension||n.cubicInterpolationMode==="monotone"?OL:uu}function wI(n,e,t,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,t,i)&&r.closePath()),zE(n,e.options),n.stroke(r)}function bI(n,e,t,i){const{segments:r,options:s}=e,o=M4(e);for(const a of r)zE(n,s,a.style),n.beginPath(),o(n,e,a,{start:t,end:t+i-1})&&n.closePath(),n.stroke()}const MI=typeof Path2D=="function";function EI(n,e,t,i){MI&&!e.options.segment?wI(n,e,t,i):bI(n,e,t,i)}class m0 extends sl{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;AL(this._points,i,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=WL(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,i=e.length;return i&&t[e[i-1].end]}interpolate(e,t){const i=this.options,r=e[t],s=this.points,o=HL(this,{property:t,start:r,end:r});if(!o.length)return;const a=[],l=SI(i);let c,u;for(c=0,u=o.length;c<u;++c){const{start:f,end:d}=o[c],h=s[f],g=s[d];if(h===g){a.push(h);continue}const _=Math.abs((r-h[t])/(g[t]-h[t])),x=l(h,g,_,i.stepped);x[t]=e[t],a.push(x)}return a.length===1?a[0]:a}pathSegment(e,t,i){return M4(this)(e,this,t,i)}path(e,t,i){const r=this.segments,s=M4(this);let o=this._loop;t=t||0,i=i||this.points.length-t;for(const a of r)o&=s(e,this,a,{start:t,end:t+i-1});return!!o}draw(e,t,i,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),EI(e,this,i,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}cn(m0,"id","line"),cn(m0,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),cn(m0,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),cn(m0,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function $b(n,e,t,i){const r=n.options,{[t]:s}=n.getProps([t],i);return Math.abs(e-s)<r.radius+r.hitRadius}class m1 extends sl{constructor(t){super();cn(this,"parsed");cn(this,"skip");cn(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,i,r){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(t-o,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,i){return $b(this,t,"x",i)}inYRange(t,i){return $b(this,t,"y",i)}getCenterPoint(t){const{x:i,y:r}=this.getProps(["x","y"],t);return{x:i,y:r}}size(t){t=t||this.options||{};let i=t.radius||0;i=Math.max(i,i&&t.hoverRadius||0);const r=i&&t.borderWidth||0;return(i+r)*2}draw(t,i){const r=this.options;this.skip||r.radius<.1||!ap(this,i,this.size(r)/2)||(t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.fillStyle=r.backgroundColor,_4(t,r,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}cn(m1,"id","point"),cn(m1,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),cn(m1,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const e5=(n,e)=>{let{boxHeight:t=e,boxWidth:i=e}=n;return n.usePointStyle&&(t=Math.min(t,e),i=n.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(e,t)}},TI=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class t5 extends sl{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=ri(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(i=>e.filter(i,this.chart.data))),e.sort&&(t=t.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,r=Ur(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=e5(i,s);let c,u;t.font=r.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=r+a;let f=e;s.textAlign="left",s.textBaseline="middle";let d=-1,h=-u;return this.legendItems.forEach((g,_)=>{const x=i+t/2+s.measureText(g.text).width;(_===0||c[c.length-1]+x+2*a>o)&&(f+=u,c[c.length-(_>0?0:1)]=0,h+=u,d++),l[_]={left:0,top:h,row:d,width:x,height:r},c[c.length-1]+=x+a}),f}_fitCols(e,t,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let f=a,d=0,h=0,g=0,_=0;return this.legendItems.forEach((x,y)=>{const{itemWidth:M,itemHeight:b}=AI(i,t,s,x,r);y>0&&h+b+2*a>u&&(f+=d+a,c.push({width:d,height:h}),g+=d+a,_++,d=h=0),l[y]={left:g,top:h,col:_,width:M,height:b},d=Math.max(d,M),h+=b+a}),f+=d,c.push({width:d,height:h}),f}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:r},rtl:s}}=this,o=kf(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Dr(i,this.left+r,this.right-this.lineWidths[a]);for(const c of t)a!==c.row&&(a=c.row,l=Dr(i,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+e+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=Dr(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const c of t)c.col!==a&&(a=c.col,l=Dr(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;C_(e,this),this._draw(),P_(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,a=Ni.color,l=kf(e.rtl,this.left,this.width),c=Ur(o.font),{padding:u}=o,f=c.size,d=f/2;let h;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:g,boxHeight:_,itemHeight:x}=e5(o,f),y=function(P,k,N){if(isNaN(g)||g<=0||isNaN(_)||_<0)return;r.save();const z=Sn(N.lineWidth,1);if(r.fillStyle=Sn(N.fillStyle,a),r.lineCap=Sn(N.lineCap,"butt"),r.lineDashOffset=Sn(N.lineDashOffset,0),r.lineJoin=Sn(N.lineJoin,"miter"),r.lineWidth=z,r.strokeStyle=Sn(N.strokeStyle,a),r.setLineDash(Sn(N.lineDash,[])),o.usePointStyle){const R={radius:_*Math.SQRT2/2,pointStyle:N.pointStyle,rotation:N.rotation,borderWidth:z},F=l.xPlus(P,g/2),V=k+d;yE(r,R,F,V,o.pointStyleWidth&&g)}else{const R=k+Math.max((f-_)/2,0),F=l.leftForLtr(P,g),V=N0(N.borderRadius);r.beginPath(),Object.values(V).some(K=>K!==0)?S4(r,{x:F,y:R,w:g,h:_,radius:V}):r.rect(F,R,g,_),r.fill(),z!==0&&r.stroke()}r.restore()},M=function(P,k,N){lp(r,N.text,P,k+x/2,c,{strikethrough:N.hidden,textAlign:l.textAlign(N.textAlign)})},b=this.isHorizontal(),A=this._computeTitleHeight();b?h={x:Dr(s,this.left+u,this.right-i[0]),y:this.top+u+A,line:0}:h={x:this.left+u,y:Dr(s,this.top+A+u,this.bottom-t[0].height),line:0},EE(this.ctx,e.textDirection);const T=x+u;this.legendItems.forEach((P,k)=>{r.strokeStyle=P.fontColor,r.fillStyle=P.fontColor;const N=r.measureText(P.text).width,z=l.textAlign(P.textAlign||(P.textAlign=o.textAlign)),R=g+d+N;let F=h.x,V=h.y;l.setWidth(this.width),b?k>0&&F+R+u>this.right&&(V=h.y+=T,h.line++,F=h.x=Dr(s,this.left+u,this.right-i[h.line])):k>0&&V+T>this.bottom&&(F=h.x=F+t[h.line].width+u,h.line++,V=h.y=Dr(s,this.top+A+u,this.bottom-t[h.line].height));const K=l.x(F);if(y(K,V,P),F=Gk(z,F+g+d,b?F+R:this.right,e.rtl),M(l.x(F),V,P),b)h.x+=R+u;else if(typeof P.text!="string"){const W=c.lineHeight;h.y+=HE(P,W)+u}else h.y+=T}),TE(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,i=Ur(t.font),r=go(t.padding);if(!t.display)return;const s=kf(e.rtl,this.left,this.width),o=this.ctx,a=t.position,l=i.size/2,c=r.top+l;let u,f=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),u=this.top+c,f=Dr(e.align,f,this.right-d);else{const g=this.columnSizes.reduce((_,x)=>Math.max(_,x.height),0);u=c+Dr(e.align,this.top,this.bottom-g-e.labels.padding-this._computeTitleHeight())}const h=Dr(a,f,f+d);o.textAlign=s.textAlign(T_(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=i.string,lp(o,t.text,h,u,i)}_computeTitleHeight(){const e=this.options.title,t=Ur(e.font),i=go(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,r,s;if(d0(e,this.left,this.right)&&d0(t,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],d0(e,r.left,r.left+r.width)&&d0(t,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){const t=this.options;if(!RI(e.type,t))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,s=TI(r,i);r&&!s&&ri(t.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&ri(t.onHover,[e,i,this],this)}else i&&ri(t.onClick,[e,i,this],this)}}function AI(n,e,t,i,r){const s=CI(i,n,e,t),o=PI(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function CI(n,e,t,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+t.size/2+i.measureText(r).width}function PI(n,e,t){let i=n;return typeof e.text!="string"&&(i=HE(e,t)),i}function HE(n,e){const t=n.text?n.text.length:0;return e*t}function RI(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var kI={id:"legend",_element:t5,start(n,e,t){const i=n.legend=new t5({ctx:n.ctx,options:t,chart:n});uo.configure(n,i,t),uo.addBox(n,i)},stop(n){uo.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const i=n.legend;uo.configure(n,i,t),i.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const i=e.datasetIndex,r=t.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(t?0:void 0),u=go(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class VE extends sl{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const r=lr(i.text)?i.text.length:1;this._padding=go(i.padding);const s=r*Ur(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:i,bottom:r,right:s,options:o}=this,a=o.align;let l=0,c,u,f;return this.isHorizontal()?(u=Dr(a,i,s),f=t+e,c=s-i):(o.position==="left"?(u=i+e,f=Dr(a,r,t),l=ur*-.5):(u=s-e,f=Dr(a,t,r),l=ur*.5),c=r-t),{titleX:u,titleY:f,maxWidth:c,rotation:l}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const i=Ur(t.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);lp(e,t.text,0,0,i,{color:t.color,maxWidth:l,rotation:c,textAlign:T_(t.align),textBaseline:"middle",translation:[o,a]})}}function LI(n,e){const t=new VE({ctx:n.ctx,options:e,chart:n});uo.configure(n,t,e),uo.addBox(n,t),n.titleBlock=t}var NI={id:"title",_element:VE,start(n,e,t){LI(n,t)},stop(n){const e=n.titleBlock;uo.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){const i=n.titleBlock;uo.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const g0={average(n){if(!n.length)return!1;let e,t,i=new Set,r=0,s=0;for(e=0,t=n.length;e<t;++e){const a=n[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),r+=l.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:r/s}},nearest(n,e){if(!n.length)return!1;let t=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=n.length;s<o;++s){const l=n[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=y4(e,c);u<r&&(r=u,a=l)}}if(a){const l=a.tooltipPosition();t=l.x,i=l.y}return{x:t,y:i}}};function ra(n,e){return e&&(lr(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function Va(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function II(n,e){const{element:t,datasetIndex:i,index:r}=e,s=n.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:n,label:o,parsed:s.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:t}}function n5(n,e){const t=n.chart.ctx,{body:i,footer:r,title:s}=n,{boxWidth:o,boxHeight:a}=e,l=Ur(e.bodyFont),c=Ur(e.titleFont),u=Ur(e.footerFont),f=s.length,d=r.length,h=i.length,g=go(e.padding);let _=g.height,x=0,y=i.reduce((A,T)=>A+T.before.length+T.lines.length+T.after.length,0);if(y+=n.beforeBody.length+n.afterBody.length,f&&(_+=f*c.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),y){const A=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;_+=h*A+(y-h)*l.lineHeight+(y-1)*e.bodySpacing}d&&(_+=e.footerMarginTop+d*u.lineHeight+(d-1)*e.footerSpacing);let M=0;const b=function(A){x=Math.max(x,t.measureText(A).width+M)};return t.save(),t.font=c.string,Vn(n.title,b),t.font=l.string,Vn(n.beforeBody.concat(n.afterBody),b),M=e.displayColors?o+2+e.boxPadding:0,Vn(i,A=>{Vn(A.before,b),Vn(A.lines,b),Vn(A.after,b)}),M=0,t.font=u.string,Vn(n.footer,b),t.restore(),x+=g.width,{width:x,height:_}}function DI(n,e){const{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}function OI(n,e,t,i){const{x:r,width:s}=i,o=t.caretSize+t.caretPadding;if(n==="left"&&r+s+o>e.width||n==="right"&&r-s-o<0)return!0}function FI(n,e,t,i){const{x:r,width:s}=t,{width:o,chartArea:{left:a,right:l}}=n;let c="center";return i==="center"?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),OI(c,n,e,t)&&(c="center"),c}function i5(n,e,t){const i=t.yAlign||e.yAlign||DI(n,t);return{xAlign:t.xAlign||e.xAlign||FI(n,e,t,i),yAlign:i}}function UI(n,e){let{x:t,width:i}=n;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function zI(n,e,t){let{y:i,height:r}=n;return e==="top"?i+=t:e==="bottom"?i-=r+t:i-=r/2,i}function r5(n,e,t,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=n,{xAlign:a,yAlign:l}=t,c=r+s,{topLeft:u,topRight:f,bottomLeft:d,bottomRight:h}=N0(o);let g=UI(e,a);const _=zI(e,l,c);return l==="center"?a==="left"?g+=c:a==="right"&&(g-=c):a==="left"?g-=Math.max(u,d)+r:a==="right"&&(g+=Math.max(f,h)+r),{x:co(g,0,i.width-e.width),y:co(_,0,i.height-e.height)}}function Jm(n,e,t){const i=go(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-i.right:n.x+i.left}function s5(n){return ra([],Va(n))}function BI(n,e,t){return Xu(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function o5(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const GE={beforeTitle:Ia,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:Ia,beforeBody:Ia,beforeLabel:Ia,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return ti(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Ia,afterBody:Ia,beforeFooter:Ia,footer:Ia,afterFooter:Ia};function ys(n,e,t,i){const r=n[e].call(t,i);return typeof r>"u"?GE[e].call(t,i):r}class E4 extends sl{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&t.options.animation&&i.animations,s=new CE(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=BI(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:i}=t,r=ys(i,"beforeTitle",this,e),s=ys(i,"title",this,e),o=ys(i,"afterTitle",this,e);let a=[];return a=ra(a,Va(r)),a=ra(a,Va(s)),a=ra(a,Va(o)),a}getBeforeBody(e,t){return s5(ys(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:i}=t,r=[];return Vn(e,s=>{const o={before:[],lines:[],after:[]},a=o5(i,s);ra(o.before,Va(ys(a,"beforeLabel",this,s))),ra(o.lines,ys(a,"label",this,s)),ra(o.after,Va(ys(a,"afterLabel",this,s))),r.push(o)}),r}getAfterBody(e,t){return s5(ys(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:i}=t,r=ys(i,"beforeFooter",this,e),s=ys(i,"footer",this,e),o=ys(i,"afterFooter",this,e);let a=[];return a=ra(a,Va(r)),a=ra(a,Va(s)),a=ra(a,Va(o)),a}_createItems(e){const t=this._active,i=this.chart.data,r=[],s=[],o=[];let a=[],l,c;for(l=0,c=t.length;l<c;++l)a.push(II(this.chart,t[l]));return e.filter&&(a=a.filter((u,f,d)=>e.filter(u,f,d,i))),e.itemSort&&(a=a.sort((u,f)=>e.itemSort(u,f,i))),Vn(a,u=>{const f=o5(e.callbacks,u);r.push(ys(f,"labelColor",this,u)),s.push(ys(f,"labelPointStyle",this,u)),o.push(ys(f,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,t){const i=this.options.setContext(this.getContext()),r=this._active;let s,o=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const a=g0[i.position].call(this,r,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=n5(this,i),c=Object.assign({},a,l),u=i5(this.chart,i,c),f=r5(i,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,i,r){const s=this.getCaretPosition(e,i,r);t.lineTo(s.x1,s.y1),t.lineTo(s.x2,s.y2),t.lineTo(s.x3,s.y3)}getCaretPosition(e,t,i){const{xAlign:r,yAlign:s}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:f}=N0(a),{x:d,y:h}=e,{width:g,height:_}=t;let x,y,M,b,A,T;return s==="center"?(A=h+_/2,r==="left"?(x=d,y=x-o,b=A+o,T=A-o):(x=d+g,y=x+o,b=A-o,T=A+o),M=x):(r==="left"?y=d+Math.max(l,u)+o:r==="right"?y=d+g-Math.max(c,f)-o:y=this.caretX,s==="top"?(b=h,A=b-o,x=y-o,M=y+o):(b=h+_,A=b+o,x=y+o,M=y-o),T=b),{x1:x,x2:y,x3:M,y1:b,y2:A,y3:T}}drawTitle(e,t,i){const r=this.title,s=r.length;let o,a,l;if(s){const c=kf(i.rtl,this.x,this.width);for(e.x=Jm(this,i.titleAlign,i),t.textAlign=c.textAlign(i.titleAlign),t.textBaseline="middle",o=Ur(i.titleFont),a=i.titleSpacing,t.fillStyle=i.titleColor,t.font=o.string,l=0;l<s;++l)t.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,t,i,r,s){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=s,u=Ur(s.bodyFont),f=Jm(this,"left",s),d=r.x(f),h=l<u.lineHeight?(u.lineHeight-l)/2:0,g=t.y+h;if(s.usePointStyle){const _={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},x=r.leftForLtr(d,c)+c/2,y=g+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,_4(e,_,x,y),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,_4(e,_,x,y)}else{e.lineWidth=In(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const _=r.leftForLtr(d,c),x=r.leftForLtr(r.xPlus(d,1),c-2),y=N0(o.borderRadius);Object.values(y).some(M=>M!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,S4(e,{x:_,y:g,w:c,h:l,radius:y}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),S4(e,{x,y:g+1,w:c-2,h:l-2,radius:y}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(_,g,c,l),e.strokeRect(_,g,c,l),e.fillStyle=o.backgroundColor,e.fillRect(x,g+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,t,i){const{body:r}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=i,f=Ur(i.bodyFont);let d=f.lineHeight,h=0;const g=kf(i.rtl,this.x,this.width),_=function(N){t.fillText(N,g.x(e.x+h),e.y+d/2),e.y+=d+s},x=g.textAlign(o);let y,M,b,A,T,P,k;for(t.textAlign=o,t.textBaseline="middle",t.font=f.string,e.x=Jm(this,x,i),t.fillStyle=i.bodyColor,Vn(this.beforeBody,_),h=a&&x!=="right"?o==="center"?c/2+u:c+2+u:0,A=0,P=r.length;A<P;++A){for(y=r[A],M=this.labelTextColors[A],t.fillStyle=M,Vn(y.before,_),b=y.lines,a&&b.length&&(this._drawColorBox(t,e,A,g,i),d=Math.max(f.lineHeight,l)),T=0,k=b.length;T<k;++T)_(b[T]),d=f.lineHeight;Vn(y.after,_)}h=0,d=f.lineHeight,Vn(this.afterBody,_),e.y-=s}drawFooter(e,t,i){const r=this.footer,s=r.length;let o,a;if(s){const l=kf(i.rtl,this.x,this.width);for(e.x=Jm(this,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=l.textAlign(i.footerAlign),t.textBaseline="middle",o=Ur(i.footerFont),t.fillStyle=i.footerColor,t.font=o.string,a=0;a<s;++a)t.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,t,i,r){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=i,{topLeft:f,topRight:d,bottomLeft:h,bottomRight:g}=N0(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(a+f,l),o==="top"&&this.drawCaret(e,t,i,r),t.lineTo(a+c-d,l),t.quadraticCurveTo(a+c,l,a+c,l+d),o==="center"&&s==="right"&&this.drawCaret(e,t,i,r),t.lineTo(a+c,l+u-g),t.quadraticCurveTo(a+c,l+u,a+c-g,l+u),o==="bottom"&&this.drawCaret(e,t,i,r),t.lineTo(a+h,l+u),t.quadraticCurveTo(a,l+u,a,l+u-h),o==="center"&&s==="left"&&this.drawCaret(e,t,i,r),t.lineTo(a,l+f),t.quadraticCurveTo(a,l,a+f,l),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const o=g0[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=n5(this,e),l=Object.assign({},o,this._size),c=i5(t,e,l),u=r5(e,l,c,t);(r._to!==u.x||s._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=go(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(s,e,r,t),EE(e,t.textDirection),s.y+=o.top,this.drawTitle(s,e,t),this.drawBody(s,e,t),this.drawFooter(s,e,t),TE(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const i=this._active,r=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!K1(i,r),o=this._positionChanged(r,t);(s||o)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,i=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],o=this._getActiveElements(e,s,t,i),a=this._positionChanged(o,e),l=t||!K1(o,s)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),l}_getActiveElements(e,t,i,r){const s=this.options;if(e.type==="mouseout")return[];if(!r)return t.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:i,caretY:r,options:s}=this,o=g0[s.position].call(this,e,t);return o!==!1&&(i!==o.x||r!==o.y)}}cn(E4,"positioners",g0);var HI={id:"tooltip",_element:E4,positioners:g0,afterInit(n,e,t){t&&(n.tooltip=new E4({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:GE},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const VI=(n,e,t,i)=>(typeof e=="string"?(t=n.push(e)-1,i.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function GI(n,e,t,i){const r=n.indexOf(e);if(r===-1)return VI(n,e,t,i);const s=n.lastIndexOf(e);return r!==s?t:r}const WI=(n,e)=>n===null?null:co(Math.round(n),0,e);function a5(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class T4 extends Kf{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const i=this.getLabels();for(const{index:r,label:s}of t)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(ti(e))return null;const i=this.getLabels();return t=isFinite(t)&&i[t]===e?t:GI(i,e,Sn(t,e),this._addedLabels),WI(t,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),t||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,t=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=e===0&&t===s.length-1?s:s.slice(e,t+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=t;o++)r.push({value:o});return r}getLabelForValue(e){return a5.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}cn(T4,"id","category"),cn(T4,"defaults",{ticks:{callback:a5}});function jI(n,e){const t=[],{bounds:r,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:f,includeBounds:d}=n,h=s||1,g=u-1,{min:_,max:x}=e,y=!ti(o),M=!ti(a),b=!ti(c),A=(x-_)/(f+1);let T=fb((x-_)/g/h)*h,P,k,N,z;if(T<1e-14&&!y&&!M)return[{value:_},{value:x}];z=Math.ceil(x/T)-Math.floor(_/T),z>g&&(T=fb(z*T/g/h)*h),ti(l)||(P=Math.pow(10,l),T=Math.ceil(T*P)/P),r==="ticks"?(k=Math.floor(_/T)*T,N=Math.ceil(x/T)*T):(k=_,N=x),y&&M&&s&&Lk((a-o)/s,T/1e3)?(z=Math.round(Math.min((a-o)/T,u)),T=(a-o)/z,k=o,N=a):b?(k=y?o:k,N=M?a:N,z=c-1,T=(N-k)/z):(z=(N-k)/T,R0(z,Math.round(z),T/1e3)?z=Math.round(z):z=Math.ceil(z));const R=Math.max(db(T),db(k));P=Math.pow(10,ti(l)?R:l),k=Math.round(k*P)/P,N=Math.round(N*P)/P;let F=0;for(y&&(d&&k!==o?(t.push({value:o}),k<o&&F++,R0(Math.round((k+F*T)*P)/P,o,l5(o,A,n))&&F++):k<o&&F++);F<z;++F){const V=Math.round((k+F*T)*P)/P;if(M&&V>a)break;t.push({value:V})}return M&&d&&N!==a?t.length&&R0(t[t.length-1].value,a,l5(a,A,n))?t[t.length-1].value=a:t.push({value:a}):(!M||N===a)&&t.push({value:N}),t}function l5(n,e,{horizontal:t,minRotation:i}){const r=_u(i),s=(t?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+n).length;return Math.min(e/s,o)}class qI extends Kf{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return ti(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=t?r:l,a=l=>s=i?s:l;if(e){const l=Bf(r),c=Bf(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(r-l)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),t=t||11),t&&(r=Math.min(t,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},s=this._range||this,o=jI(r,s);return e.bounds==="ticks"&&Nk(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-t)/Math.max(e.length-1,1)/2;t-=r,i+=r}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return mE(e,this.chart.options.locale,this.options.ticks.format)}}class A4 extends qI{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=mo(e)?e:0,this.max=mo(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,i=_u(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}cn(A4,"id","linear"),cn(A4,"defaults",{ticks:{callback:vE.formatters.numeric}});const Rv={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ss=Object.keys(Rv);function c5(n,e){return n-e}function u5(n,e){if(ti(e))return null;const t=n._adapter,{parser:i,round:r,isoWeekday:s}=n._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),mo(o)||(o=typeof i=="string"?t.parse(o,i):t.parse(o)),o===null?null:(r&&(o=r==="week"&&(op(s)||s===!0)?t.startOf(o,"isoWeek",s):t.startOf(o,r)),+o)}function h5(n,e,t,i){const r=Ss.length;for(let s=Ss.indexOf(n);s<r-1;++s){const o=Rv[Ss[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(a*o.size))<=i)return Ss[s]}return Ss[r-1]}function XI(n,e,t,i,r){for(let s=Ss.length-1;s>=Ss.indexOf(t);s--){const o=Ss[s];if(Rv[o].common&&n._adapter.diff(r,i,o)>=e-1)return o}return Ss[t?Ss.indexOf(t):0]}function YI(n){for(let e=Ss.indexOf(n)+1,t=Ss.length;e<t;++e)if(Rv[Ss[e]].common)return Ss[e]}function f5(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:i,hi:r}=E_(t,e),s=t[i]>=e?t[i]:t[r];n[s]=!0}}function ZI(n,e,t,i){const r=n._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=t[a],l>=0&&(e[l].major=!0);return e}function d5(n,e,t){const i=[],r={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return s===0||!t?i:ZI(n,i,r,t)}class iv extends Kf{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const i=e.time||(e.time={}),r=this._adapter=new aN._date(e.adapters.date);r.init(t),P0(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:u5(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,i=e.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=mo(r)&&!isNaN(r)?r:+t.startOf(Date.now(),i),s=mo(s)&&!isNaN(s)?s:+t.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],i=e[e.length-1]),{min:t,max:i}}buildTicks(){const e=this.options,t=e.time,i=e.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,a=zk(r,s,o);return this._unit=t.unit||(i.autoSkip?h5(t.minUnit,this.min,this.max,this._getLabelCapacity(s)):XI(this,a.length,t.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:YI(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),d5(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,i=0,r,s;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?t=1-r:t=(this.getDecimalForValue(e[1])-r)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?i=s:i=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;t=co(t,0,o),i=co(i,0,o),this._offsets={start:t,end:i,factor:1/(t+1+i)}}_generate(){const e=this._adapter,t=this.min,i=this.max,r=this.options,s=r.time,o=s.unit||h5(s.minUnit,t,i,this._getLabelCapacity(t)),a=Sn(r.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=op(l)||l===!0,u={};let f=t,d,h;if(c&&(f=+e.startOf(f,"isoWeek",l)),f=+e.startOf(f,c?"day":o),e.diff(i,t,o)>1e5*a)throw new Error(t+" and "+i+" are too far apart with stepSize of "+a+" "+o);const g=r.ticks.source==="data"&&this.getDataTimestamps();for(d=f,h=0;d<i;d=+e.add(d,a,o),h++)f5(u,d,g);return(d===i||r.bounds==="ticks"||h===1)&&f5(u,d,g),Object.keys(u).sort(c5).map(_=>+_)}getLabelForValue(e){const t=this._adapter,i=this.options.time;return i.tooltipFormat?t.format(e,i.tooltipFormat):t.format(e,i.displayFormats.datetime)}format(e,t){const r=this.options.time.displayFormats,s=this._unit,o=t||r[s];return this._adapter.format(e,o)}_tickFormatFunction(e,t,i,r){const s=this.options,o=s.ticks.callback;if(o)return ri(o,[e,t,i],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],f=c&&a[c],d=i[t],h=c&&f&&d&&d.major;return this._adapter.format(e,r||(h?f:u))}generateTickLabels(e){let t,i,r;for(t=0,i=e.length;t<i;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+i)*t.factor)}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,i=this.ctx.measureText(e).width,r=_u(this.isHorizontal()?t.maxRotation:t.minRotation),s=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*s+a*o,h:i*o+a*s}}_getLabelCapacity(e){const t=this.options.time,i=t.displayFormats,r=i[t.unit]||i.millisecond,s=this._tickFormatFunction(e,0,d5(this,[e],this._majorUnit),r),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],t,i;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(t=0,i=r.length;t<i;++t)e=e.concat(r[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,i;if(e.length)return e;const r=this.getLabels();for(t=0,i=r.length;t<i;++t)e.push(u5(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Hk(e.sort(c5))}}cn(iv,"id","time"),cn(iv,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function $m(n,e,t){let i=0,r=n.length-1,s,o,a,l;t?(e>=n[i].pos&&e<=n[r].pos&&({lo:i,hi:r}=Su(n,"pos",e)),{pos:s,time:a}=n[i],{pos:o,time:l}=n[r]):(e>=n[i].time&&e<=n[r].time&&({lo:i,hi:r}=Su(n,"time",e)),{time:s,pos:a}=n[i],{time:o,pos:l}=n[r]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class p5 extends iv{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=$m(t,this.min),this._tableRange=$m(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:i}=this,r=[],s=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=t&&c<=i&&r.push(c);if(r.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)u=r[o+1],l=r[o-1],c=r[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,t=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return($m(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return $m(this._table,i*this._tableRange+this._minPos,!0)}}cn(p5,"id","timeseries"),cn(p5,"defaults",iv.defaults);const WE="label";function m5(n,e){typeof n=="function"?n(e):n&&(n.current=e)}function KI(n,e){const t=n.options;t&&e&&Object.assign(t,e)}function jE(n,e){n.labels=e}function qE(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:WE;const i=[];n.datasets=e.map(r=>{const s=n.datasets.find(o=>o[t]===r[t]);return!s||!r.data||i.includes(s)?{...r}:(i.push(s),Object.assign(s,r),s)})}function QI(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:WE;const t={labels:[],datasets:[]};return jE(t,n.labels),qE(t,n.datasets,e),t}function JI(n,e){const{height:t=150,width:i=300,redraw:r=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:f,...d}=n,h=Qe.useRef(null),g=Qe.useRef(null),_=()=>{h.current&&(g.current=new Pv(h.current,{type:o,data:QI(a,s),options:l&&{...l},plugins:c}),m5(e,g.current))},x=()=>{m5(e,null),g.current&&(g.current.destroy(),g.current=null)};return Qe.useEffect(()=>{!r&&g.current&&l&&KI(g.current,l)},[r,l]),Qe.useEffect(()=>{!r&&g.current&&jE(g.current.config.data,a.labels)},[r,a.labels]),Qe.useEffect(()=>{!r&&g.current&&a.datasets&&qE(g.current.config.data,a.datasets,s)},[r,a.datasets]),Qe.useEffect(()=>{g.current&&(r?(x(),setTimeout(_)):g.current.update(f))},[r,l,a.labels,a.datasets,f]),Qe.useEffect(()=>{g.current&&(x(),setTimeout(_))},[o]),Qe.useEffect(()=>(_(),()=>x()),[]),ar.createElement("canvas",{ref:h,role:"img",height:t,width:i,...d},u)}const $I=Qe.forwardRef(JI);function eD(n,e){return Pv.register(e),Qe.forwardRef((t,i)=>ar.createElement($I,{...t,ref:i,type:n}))}const O_=eD("line",f1);function tD(){const[n,e]=ar.useState(1),[t,i]=ar.useState(1),[r,s]=ar.useState(1),[o,a]=ar.useState(1),[l,c]=ar.useState(0),[u,f]=ar.useState(0),d=()=>{const _=Array.from({length:100},(b,A)=>A/100*2*Math.PI),x=_.map(b=>n*Math.sin(r*b+l)),y=_.map(b=>t*Math.sin(o*b+u)),M=x.map((b,A)=>b+y[A]);return{labels:_.map(b=>b.toFixed(2)),datasets:[{label:"Wave 1",data:x,borderColor:"rgba(75, 192, 192, 1)",borderWidth:2,fill:!1},{label:"Wave 2",data:y,borderColor:"rgba(255, 99, 132, 1)",borderWidth:2,fill:!1},{label:"Resultant Wave",data:M,borderColor:"rgba(153, 102, 255, 1)",borderWidth:3,fill:!1}]}},h={responsive:!0,plugins:{title:{display:!0,text:"Wave Interference Demonstration",color:"white"},legend:{labels:{color:"white"}}},scales:{y:{min:-4,max:4,title:{display:!0,text:"Amplitude",color:"white"},grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"white"}},x:{title:{display:!0,text:"Position (radians)",color:"white"},grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"white"}}}};return O.jsxs("div",{className:"bg-gray-800 rounded-xl p-6",children:[O.jsx("h3",{className:"text-2xl font-bold mb-6",children:"Wave Interference"}),O.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[O.jsxs("div",{className:"space-y-6",children:[O.jsxs("div",{children:[O.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Wave 1 Parameters"}),O.jsxs("div",{className:"space-y-4",children:[O.jsxs("div",{children:[O.jsxs("label",{className:"block text-sm mb-2",children:["Amplitude: ",n.toFixed(1)]}),O.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",value:n,onChange:g=>e(Number(g.target.value)),className:"w-full"})]}),O.jsxs("div",{children:[O.jsxs("label",{className:"block text-sm mb-2",children:["Frequency: ",r.toFixed(1)]}),O.jsx("input",{type:"range",min:"0.5",max:"3",step:"0.1",value:r,onChange:g=>s(Number(g.target.value)),className:"w-full"})]}),O.jsxs("div",{children:[O.jsxs("label",{className:"block text-sm mb-2",children:["Phase: ",l.toFixed(1)]}),O.jsx("input",{type:"range",min:"0",max:2*Math.PI,step:"0.1",value:l,onChange:g=>c(Number(g.target.value)),className:"w-full"})]})]})]}),O.jsxs("div",{children:[O.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Wave 2 Parameters"}),O.jsxs("div",{className:"space-y-4",children:[O.jsxs("div",{children:[O.jsxs("label",{className:"block text-sm mb-2",children:["Amplitude: ",t.toFixed(1)]}),O.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",value:t,onChange:g=>i(Number(g.target.value)),className:"w-full"})]}),O.jsxs("div",{children:[O.jsxs("label",{className:"block text-sm mb-2",children:["Frequency: ",o.toFixed(1)]}),O.jsx("input",{type:"range",min:"0.5",max:"3",step:"0.1",value:o,onChange:g=>a(Number(g.target.value)),className:"w-full"})]}),O.jsxs("div",{children:[O.jsxs("label",{className:"block text-sm mb-2",children:["Phase: ",u.toFixed(1)]}),O.jsx("input",{type:"range",min:"0",max:2*Math.PI,step:"0.1",value:u,onChange:g=>f(Number(g.target.value)),className:"w-full"})]})]})]})]}),O.jsx("div",{className:"bg-gray-900 rounded-xl p-4",children:O.jsx(O_,{data:d(),options:h})})]})]})}var XE={exports:{}};/*!
 * matter-js 0.19.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(n,e){(function(i,r){n.exports=r()})(y0,function(){return function(t){var i={};function r(s){if(i[s])return i[s].exports;var o=i[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=i,r.d=function(s,o,a){r.o(s,o)||Object.defineProperty(s,o,{enumerable:!0,get:a})},r.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},r.t=function(s,o){if(o&1&&(s=r(s)),o&8||o&4&&typeof s=="object"&&s&&s.__esModule)return s;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:s}),o&2&&typeof s!="string")for(var l in s)r.d(a,l,(function(c){return s[c]}).bind(null,l));return a},r.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return r.d(o,"a",o),o},r.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)},r.p="",r(r.s=20)}([function(t,i){var r={};t.exports=r,function(){r._baseDelta=1e3/60,r._nextId=0,r._seed=0,r._nowStartTime=+new Date,r._warnedOnce={},r._decomp=null,r.extend=function(o,a){var l,c;typeof a=="boolean"?(l=2,c=a):(l=1,c=!0);for(var u=l;u<arguments.length;u++){var f=arguments[u];if(f)for(var d in f)c&&f[d]&&f[d].constructor===Object&&(!o[d]||o[d].constructor===Object)?(o[d]=o[d]||{},r.extend(o[d],c,f[d])):o[d]=f[d]}return o},r.clone=function(o,a){return r.extend({},a,o)},r.keys=function(o){if(Object.keys)return Object.keys(o);var a=[];for(var l in o)a.push(l);return a},r.values=function(o){var a=[];if(Object.keys){for(var l=Object.keys(o),c=0;c<l.length;c++)a.push(o[l[c]]);return a}for(var u in o)a.push(o[u]);return a},r.get=function(o,a,l,c){a=a.split(".").slice(l,c);for(var u=0;u<a.length;u+=1)o=o[a[u]];return o},r.set=function(o,a,l,c,u){var f=a.split(".").slice(c,u);return r.get(o,a,0,-1)[f[f.length-1]]=l,l},r.shuffle=function(o){for(var a=o.length-1;a>0;a--){var l=Math.floor(r.random()*(a+1)),c=o[a];o[a]=o[l],o[l]=c}return o},r.choose=function(o){return o[Math.floor(r.random()*o.length)]},r.isElement=function(o){return typeof HTMLElement<"u"?o instanceof HTMLElement:!!(o&&o.nodeType&&o.nodeName)},r.isArray=function(o){return Object.prototype.toString.call(o)==="[object Array]"},r.isFunction=function(o){return typeof o=="function"},r.isPlainObject=function(o){return typeof o=="object"&&o.constructor===Object},r.isString=function(o){return toString.call(o)==="[object String]"},r.clamp=function(o,a,l){return o<a?a:o>l?l:o},r.sign=function(o){return o<0?-1:1},r.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-r._nowStartTime},r.random=function(o,a){return o=typeof o<"u"?o:0,a=typeof a<"u"?a:1,o+s()*(a-o)};var s=function(){return r._seed=(r._seed*9301+49297)%233280,r._seed/233280};r.colorToNumber=function(o){return o=o.replace("#",""),o.length==3&&(o=o.charAt(0)+o.charAt(0)+o.charAt(1)+o.charAt(1)+o.charAt(2)+o.charAt(2)),parseInt(o,16)},r.logLevel=1,r.log=function(){console&&r.logLevel>0&&r.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.info=function(){console&&r.logLevel>0&&r.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.warn=function(){console&&r.logLevel>0&&r.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.warnOnce=function(){var o=Array.prototype.slice.call(arguments).join(" ");r._warnedOnce[o]||(r.warn(o),r._warnedOnce[o]=!0)},r.deprecated=function(o,a,l){o[a]=r.chain(function(){r.warnOnce("🔅 deprecated 🔅",l)},o[a])},r.nextId=function(){return r._nextId++},r.indexOf=function(o,a){if(o.indexOf)return o.indexOf(a);for(var l=0;l<o.length;l++)if(o[l]===a)return l;return-1},r.map=function(o,a){if(o.map)return o.map(a);for(var l=[],c=0;c<o.length;c+=1)l.push(a(o[c]));return l},r.topologicalSort=function(o){var a=[],l=[],c=[];for(var u in o)!l[u]&&!c[u]&&r._topologicalSort(u,l,c,o,a);return a},r._topologicalSort=function(o,a,l,c,u){var f=c[o]||[];l[o]=!0;for(var d=0;d<f.length;d+=1){var h=f[d];l[h]||a[h]||r._topologicalSort(h,a,l,c,u)}l[o]=!1,a[o]=!0,u.push(o)},r.chain=function(){for(var o=[],a=0;a<arguments.length;a+=1){var l=arguments[a];l._chained?o.push.apply(o,l._chained):o.push(l)}var c=function(){for(var u,f=new Array(arguments.length),d=0,h=arguments.length;d<h;d++)f[d]=arguments[d];for(d=0;d<o.length;d+=1){var g=o[d].apply(u,f);typeof g<"u"&&(u=g)}return u};return c._chained=o,c},r.chainPathBefore=function(o,a,l){return r.set(o,a,r.chain(l,r.get(o,a)))},r.chainPathAfter=function(o,a,l){return r.set(o,a,r.chain(r.get(o,a),l))},r.setDecomp=function(o){r._decomp=o},r.getDecomp=function(){var o=r._decomp;try{!o&&typeof window<"u"&&(o=window.decomp),!o&&typeof y0<"u"&&(o=y0.decomp)}catch{o=null}return o}}()},function(t,i){var r={};t.exports=r,function(){r.create=function(s){var o={min:{x:0,y:0},max:{x:0,y:0}};return s&&r.update(o,s),o},r.update=function(s,o,a){s.min.x=1/0,s.max.x=-1/0,s.min.y=1/0,s.max.y=-1/0;for(var l=0;l<o.length;l++){var c=o[l];c.x>s.max.x&&(s.max.x=c.x),c.x<s.min.x&&(s.min.x=c.x),c.y>s.max.y&&(s.max.y=c.y),c.y<s.min.y&&(s.min.y=c.y)}a&&(a.x>0?s.max.x+=a.x:s.min.x+=a.x,a.y>0?s.max.y+=a.y:s.min.y+=a.y)},r.contains=function(s,o){return o.x>=s.min.x&&o.x<=s.max.x&&o.y>=s.min.y&&o.y<=s.max.y},r.overlaps=function(s,o){return s.min.x<=o.max.x&&s.max.x>=o.min.x&&s.max.y>=o.min.y&&s.min.y<=o.max.y},r.translate=function(s,o){s.min.x+=o.x,s.max.x+=o.x,s.min.y+=o.y,s.max.y+=o.y},r.shift=function(s,o){var a=s.max.x-s.min.x,l=s.max.y-s.min.y;s.min.x=o.x,s.max.x=o.x+a,s.min.y=o.y,s.max.y=o.y+l}}()},function(t,i){var r={};t.exports=r,function(){r.create=function(s,o){return{x:s||0,y:o||0}},r.clone=function(s){return{x:s.x,y:s.y}},r.magnitude=function(s){return Math.sqrt(s.x*s.x+s.y*s.y)},r.magnitudeSquared=function(s){return s.x*s.x+s.y*s.y},r.rotate=function(s,o,a){var l=Math.cos(o),c=Math.sin(o);a||(a={});var u=s.x*l-s.y*c;return a.y=s.x*c+s.y*l,a.x=u,a},r.rotateAbout=function(s,o,a,l){var c=Math.cos(o),u=Math.sin(o);l||(l={});var f=a.x+((s.x-a.x)*c-(s.y-a.y)*u);return l.y=a.y+((s.x-a.x)*u+(s.y-a.y)*c),l.x=f,l},r.normalise=function(s){var o=r.magnitude(s);return o===0?{x:0,y:0}:{x:s.x/o,y:s.y/o}},r.dot=function(s,o){return s.x*o.x+s.y*o.y},r.cross=function(s,o){return s.x*o.y-s.y*o.x},r.cross3=function(s,o,a){return(o.x-s.x)*(a.y-s.y)-(o.y-s.y)*(a.x-s.x)},r.add=function(s,o,a){return a||(a={}),a.x=s.x+o.x,a.y=s.y+o.y,a},r.sub=function(s,o,a){return a||(a={}),a.x=s.x-o.x,a.y=s.y-o.y,a},r.mult=function(s,o){return{x:s.x*o,y:s.y*o}},r.div=function(s,o){return{x:s.x/o,y:s.y/o}},r.perp=function(s,o){return o=o===!0?-1:1,{x:o*-s.y,y:o*s.x}},r.neg=function(s){return{x:-s.x,y:-s.y}},r.angle=function(s,o){return Math.atan2(o.y-s.y,o.x-s.x)},r._temp=[r.create(),r.create(),r.create(),r.create(),r.create(),r.create()]}()},function(t,i,r){var s={};t.exports=s;var o=r(2),a=r(0);(function(){s.create=function(l,c){for(var u=[],f=0;f<l.length;f++){var d=l[f],h={x:d.x,y:d.y,index:f,body:c,isInternal:!1};u.push(h)}return u},s.fromPath=function(l,c){var u=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,f=[];return l.replace(u,function(d,h,g){f.push({x:parseFloat(h),y:parseFloat(g)})}),s.create(f,c)},s.centre=function(l){for(var c=s.area(l,!0),u={x:0,y:0},f,d,h,g=0;g<l.length;g++)h=(g+1)%l.length,f=o.cross(l[g],l[h]),d=o.mult(o.add(l[g],l[h]),f),u=o.add(u,d);return o.div(u,6*c)},s.mean=function(l){for(var c={x:0,y:0},u=0;u<l.length;u++)c.x+=l[u].x,c.y+=l[u].y;return o.div(c,l.length)},s.area=function(l,c){for(var u=0,f=l.length-1,d=0;d<l.length;d++)u+=(l[f].x-l[d].x)*(l[f].y+l[d].y),f=d;return c?u/2:Math.abs(u)/2},s.inertia=function(l,c){for(var u=0,f=0,d=l,h,g,_=0;_<d.length;_++)g=(_+1)%d.length,h=Math.abs(o.cross(d[g],d[_])),u+=h*(o.dot(d[g],d[g])+o.dot(d[g],d[_])+o.dot(d[_],d[_])),f+=h;return c/6*(u/f)},s.translate=function(l,c,u){u=typeof u<"u"?u:1;var f=l.length,d=c.x*u,h=c.y*u,g;for(g=0;g<f;g++)l[g].x+=d,l[g].y+=h;return l},s.rotate=function(l,c,u){if(c!==0){var f=Math.cos(c),d=Math.sin(c),h=u.x,g=u.y,_=l.length,x,y,M,b;for(b=0;b<_;b++)x=l[b],y=x.x-h,M=x.y-g,x.x=h+(y*f-M*d),x.y=g+(y*d+M*f);return l}},s.contains=function(l,c){for(var u=c.x,f=c.y,d=l.length,h=l[d-1],g,_=0;_<d;_++){if(g=l[_],(u-h.x)*(g.y-h.y)+(f-h.y)*(h.x-g.x)>0)return!1;h=g}return!0},s.scale=function(l,c,u,f){if(c===1&&u===1)return l;f=f||s.centre(l);for(var d,h,g=0;g<l.length;g++)d=l[g],h=o.sub(d,f),l[g].x=f.x+h.x*c,l[g].y=f.y+h.y*u;return l},s.chamfer=function(l,c,u,f,d){typeof c=="number"?c=[c]:c=c||[8],u=typeof u<"u"?u:-1,f=f||2,d=d||14;for(var h=[],g=0;g<l.length;g++){var _=l[g-1>=0?g-1:l.length-1],x=l[g],y=l[(g+1)%l.length],M=c[g<c.length?g:c.length-1];if(M===0){h.push(x);continue}var b=o.normalise({x:x.y-_.y,y:_.x-x.x}),A=o.normalise({x:y.y-x.y,y:x.x-y.x}),T=Math.sqrt(2*Math.pow(M,2)),P=o.mult(a.clone(b),M),k=o.normalise(o.mult(o.add(b,A),.5)),N=o.sub(x,o.mult(k,T)),z=u;u===-1&&(z=Math.pow(M,.32)*1.75),z=a.clamp(z,f,d),z%2===1&&(z+=1);for(var R=Math.acos(o.dot(b,A)),F=R/z,V=0;V<z;V++)h.push(o.add(o.rotate(P,F*V),N))}return h},s.clockwiseSort=function(l){var c=s.mean(l);return l.sort(function(u,f){return o.angle(c,u)-o.angle(c,f)}),l},s.isConvex=function(l){var c=0,u=l.length,f,d,h,g;if(u<3)return null;for(f=0;f<u;f++)if(d=(f+1)%u,h=(f+2)%u,g=(l[d].x-l[f].x)*(l[h].y-l[d].y),g-=(l[d].y-l[f].y)*(l[h].x-l[d].x),g<0?c|=1:g>0&&(c|=2),c===3)return!1;return c!==0?!0:null},s.hull=function(l){var c=[],u=[],f,d;for(l=l.slice(0),l.sort(function(h,g){var _=h.x-g.x;return _!==0?_:h.y-g.y}),d=0;d<l.length;d+=1){for(f=l[d];u.length>=2&&o.cross3(u[u.length-2],u[u.length-1],f)<=0;)u.pop();u.push(f)}for(d=l.length-1;d>=0;d-=1){for(f=l[d];c.length>=2&&o.cross3(c[c.length-2],c[c.length-1],f)<=0;)c.pop();c.push(f)}return c.pop(),u.pop(),c.concat(u)}})()},function(t,i,r){var s={};t.exports=s;var o=r(3),a=r(2),l=r(7),c=r(0),u=r(1),f=r(11);(function(){s._timeCorrection=!0,s._inertiaScale=4,s._nextCollidingGroupId=1,s._nextNonCollidingGroupId=-1,s._nextCategory=1,s._baseDelta=1e3/60,s.create=function(h){var g={id:c.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:o.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,deltaTime:16.666666666666668,_original:null},_=c.extend(g,h);return d(_,h),_},s.nextGroup=function(h){return h?s._nextNonCollidingGroupId--:s._nextCollidingGroupId++},s.nextCategory=function(){return s._nextCategory=s._nextCategory<<1,s._nextCategory};var d=function(h,g){g=g||{},s.set(h,{bounds:h.bounds||u.create(h.vertices),positionPrev:h.positionPrev||a.clone(h.position),anglePrev:h.anglePrev||h.angle,vertices:h.vertices,parts:h.parts||[h],isStatic:h.isStatic,isSleeping:h.isSleeping,parent:h.parent||h}),o.rotate(h.vertices,h.angle,h.position),f.rotate(h.axes,h.angle),u.update(h.bounds,h.vertices,h.velocity),s.set(h,{axes:g.axes||h.axes,area:g.area||h.area,mass:g.mass||h.mass,inertia:g.inertia||h.inertia});var _=h.isStatic?"#14151f":c.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),x=h.isStatic?"#555":"#ccc",y=h.isStatic&&h.render.fillStyle===null?1:0;h.render.fillStyle=h.render.fillStyle||_,h.render.strokeStyle=h.render.strokeStyle||x,h.render.lineWidth=h.render.lineWidth||y,h.render.sprite.xOffset+=-(h.bounds.min.x-h.position.x)/(h.bounds.max.x-h.bounds.min.x),h.render.sprite.yOffset+=-(h.bounds.min.y-h.position.y)/(h.bounds.max.y-h.bounds.min.y)};s.set=function(h,g,_){var x;typeof g=="string"&&(x=g,g={},g[x]=_);for(x in g)if(Object.prototype.hasOwnProperty.call(g,x))switch(_=g[x],x){case"isStatic":s.setStatic(h,_);break;case"isSleeping":l.set(h,_);break;case"mass":s.setMass(h,_);break;case"density":s.setDensity(h,_);break;case"inertia":s.setInertia(h,_);break;case"vertices":s.setVertices(h,_);break;case"position":s.setPosition(h,_);break;case"angle":s.setAngle(h,_);break;case"velocity":s.setVelocity(h,_);break;case"angularVelocity":s.setAngularVelocity(h,_);break;case"speed":s.setSpeed(h,_);break;case"angularSpeed":s.setAngularSpeed(h,_);break;case"parts":s.setParts(h,_);break;case"centre":s.setCentre(h,_);break;default:h[x]=_}},s.setStatic=function(h,g){for(var _=0;_<h.parts.length;_++){var x=h.parts[_];x.isStatic=g,g?(x._original={restitution:x.restitution,friction:x.friction,mass:x.mass,inertia:x.inertia,density:x.density,inverseMass:x.inverseMass,inverseInertia:x.inverseInertia},x.restitution=0,x.friction=1,x.mass=x.inertia=x.density=1/0,x.inverseMass=x.inverseInertia=0,x.positionPrev.x=x.position.x,x.positionPrev.y=x.position.y,x.anglePrev=x.angle,x.angularVelocity=0,x.speed=0,x.angularSpeed=0,x.motion=0):x._original&&(x.restitution=x._original.restitution,x.friction=x._original.friction,x.mass=x._original.mass,x.inertia=x._original.inertia,x.density=x._original.density,x.inverseMass=x._original.inverseMass,x.inverseInertia=x._original.inverseInertia,x._original=null)}},s.setMass=function(h,g){var _=h.inertia/(h.mass/6);h.inertia=_*(g/6),h.inverseInertia=1/h.inertia,h.mass=g,h.inverseMass=1/h.mass,h.density=h.mass/h.area},s.setDensity=function(h,g){s.setMass(h,g*h.area),h.density=g},s.setInertia=function(h,g){h.inertia=g,h.inverseInertia=1/h.inertia},s.setVertices=function(h,g){g[0].body===h?h.vertices=g:h.vertices=o.create(g,h),h.axes=f.fromVertices(h.vertices),h.area=o.area(h.vertices),s.setMass(h,h.density*h.area);var _=o.centre(h.vertices);o.translate(h.vertices,_,-1),s.setInertia(h,s._inertiaScale*o.inertia(h.vertices,h.mass)),o.translate(h.vertices,h.position),u.update(h.bounds,h.vertices,h.velocity)},s.setParts=function(h,g,_){var x;for(g=g.slice(0),h.parts.length=0,h.parts.push(h),h.parent=h,x=0;x<g.length;x++){var y=g[x];y!==h&&(y.parent=h,h.parts.push(y))}if(h.parts.length!==1){if(_=typeof _<"u"?_:!0,_){var M=[];for(x=0;x<g.length;x++)M=M.concat(g[x].vertices);o.clockwiseSort(M);var b=o.hull(M),A=o.centre(b);s.setVertices(h,b),o.translate(h.vertices,A)}var T=s._totalProperties(h);h.area=T.area,h.parent=h,h.position.x=T.centre.x,h.position.y=T.centre.y,h.positionPrev.x=T.centre.x,h.positionPrev.y=T.centre.y,s.setMass(h,T.mass),s.setInertia(h,T.inertia),s.setPosition(h,T.centre)}},s.setCentre=function(h,g,_){_?(h.positionPrev.x+=g.x,h.positionPrev.y+=g.y,h.position.x+=g.x,h.position.y+=g.y):(h.positionPrev.x=g.x-(h.position.x-h.positionPrev.x),h.positionPrev.y=g.y-(h.position.y-h.positionPrev.y),h.position.x=g.x,h.position.y=g.y)},s.setPosition=function(h,g,_){var x=a.sub(g,h.position);_?(h.positionPrev.x=h.position.x,h.positionPrev.y=h.position.y,h.velocity.x=x.x,h.velocity.y=x.y,h.speed=a.magnitude(x)):(h.positionPrev.x+=x.x,h.positionPrev.y+=x.y);for(var y=0;y<h.parts.length;y++){var M=h.parts[y];M.position.x+=x.x,M.position.y+=x.y,o.translate(M.vertices,x),u.update(M.bounds,M.vertices,h.velocity)}},s.setAngle=function(h,g,_){var x=g-h.angle;_?(h.anglePrev=h.angle,h.angularVelocity=x,h.angularSpeed=Math.abs(x)):h.anglePrev+=x;for(var y=0;y<h.parts.length;y++){var M=h.parts[y];M.angle+=x,o.rotate(M.vertices,x,h.position),f.rotate(M.axes,x),u.update(M.bounds,M.vertices,h.velocity),y>0&&a.rotateAbout(M.position,x,h.position,M.position)}},s.setVelocity=function(h,g){var _=h.deltaTime/s._baseDelta;h.positionPrev.x=h.position.x-g.x*_,h.positionPrev.y=h.position.y-g.y*_,h.velocity.x=(h.position.x-h.positionPrev.x)/_,h.velocity.y=(h.position.y-h.positionPrev.y)/_,h.speed=a.magnitude(h.velocity)},s.getVelocity=function(h){var g=s._baseDelta/h.deltaTime;return{x:(h.position.x-h.positionPrev.x)*g,y:(h.position.y-h.positionPrev.y)*g}},s.getSpeed=function(h){return a.magnitude(s.getVelocity(h))},s.setSpeed=function(h,g){s.setVelocity(h,a.mult(a.normalise(s.getVelocity(h)),g))},s.setAngularVelocity=function(h,g){var _=h.deltaTime/s._baseDelta;h.anglePrev=h.angle-g*_,h.angularVelocity=(h.angle-h.anglePrev)/_,h.angularSpeed=Math.abs(h.angularVelocity)},s.getAngularVelocity=function(h){return(h.angle-h.anglePrev)*s._baseDelta/h.deltaTime},s.getAngularSpeed=function(h){return Math.abs(s.getAngularVelocity(h))},s.setAngularSpeed=function(h,g){s.setAngularVelocity(h,c.sign(s.getAngularVelocity(h))*g)},s.translate=function(h,g,_){s.setPosition(h,a.add(h.position,g),_)},s.rotate=function(h,g,_,x){if(!_)s.setAngle(h,h.angle+g,x);else{var y=Math.cos(g),M=Math.sin(g),b=h.position.x-_.x,A=h.position.y-_.y;s.setPosition(h,{x:_.x+(b*y-A*M),y:_.y+(b*M+A*y)},x),s.setAngle(h,h.angle+g,x)}},s.scale=function(h,g,_,x){var y=0,M=0;x=x||h.position;for(var b=0;b<h.parts.length;b++){var A=h.parts[b];o.scale(A.vertices,g,_,x),A.axes=f.fromVertices(A.vertices),A.area=o.area(A.vertices),s.setMass(A,h.density*A.area),o.translate(A.vertices,{x:-A.position.x,y:-A.position.y}),s.setInertia(A,s._inertiaScale*o.inertia(A.vertices,A.mass)),o.translate(A.vertices,{x:A.position.x,y:A.position.y}),b>0&&(y+=A.area,M+=A.inertia),A.position.x=x.x+(A.position.x-x.x)*g,A.position.y=x.y+(A.position.y-x.y)*_,u.update(A.bounds,A.vertices,h.velocity)}h.parts.length>1&&(h.area=y,h.isStatic||(s.setMass(h,h.density*y),s.setInertia(h,M))),h.circleRadius&&(g===_?h.circleRadius*=g:h.circleRadius=null)},s.update=function(h,g){g=(typeof g<"u"?g:1e3/60)*h.timeScale;var _=g*g,x=s._timeCorrection?g/(h.deltaTime||g):1,y=1-h.frictionAir*(g/c._baseDelta),M=(h.position.x-h.positionPrev.x)*x,b=(h.position.y-h.positionPrev.y)*x;h.velocity.x=M*y+h.force.x/h.mass*_,h.velocity.y=b*y+h.force.y/h.mass*_,h.positionPrev.x=h.position.x,h.positionPrev.y=h.position.y,h.position.x+=h.velocity.x,h.position.y+=h.velocity.y,h.deltaTime=g,h.angularVelocity=(h.angle-h.anglePrev)*y*x+h.torque/h.inertia*_,h.anglePrev=h.angle,h.angle+=h.angularVelocity;for(var A=0;A<h.parts.length;A++){var T=h.parts[A];o.translate(T.vertices,h.velocity),A>0&&(T.position.x+=h.velocity.x,T.position.y+=h.velocity.y),h.angularVelocity!==0&&(o.rotate(T.vertices,h.angularVelocity,h.position),f.rotate(T.axes,h.angularVelocity),A>0&&a.rotateAbout(T.position,h.angularVelocity,h.position,T.position)),u.update(T.bounds,T.vertices,h.velocity)}},s.updateVelocities=function(h){var g=s._baseDelta/h.deltaTime,_=h.velocity;_.x=(h.position.x-h.positionPrev.x)*g,_.y=(h.position.y-h.positionPrev.y)*g,h.speed=Math.sqrt(_.x*_.x+_.y*_.y),h.angularVelocity=(h.angle-h.anglePrev)*g,h.angularSpeed=Math.abs(h.angularVelocity)},s.applyForce=function(h,g,_){var x={x:g.x-h.position.x,y:g.y-h.position.y};h.force.x+=_.x,h.force.y+=_.y,h.torque+=x.x*_.y-x.y*_.x},s._totalProperties=function(h){for(var g={mass:0,area:0,inertia:0,centre:{x:0,y:0}},_=h.parts.length===1?0:1;_<h.parts.length;_++){var x=h.parts[_],y=x.mass!==1/0?x.mass:1;g.mass+=y,g.area+=x.area,g.inertia+=x.inertia,g.centre=a.add(g.centre,a.mult(x.position,y))}return g.centre=a.div(g.centre,g.mass),g}})()},function(t,i,r){var s={};t.exports=s;var o=r(0);(function(){s.on=function(a,l,c){for(var u=l.split(" "),f,d=0;d<u.length;d++)f=u[d],a.events=a.events||{},a.events[f]=a.events[f]||[],a.events[f].push(c);return c},s.off=function(a,l,c){if(!l){a.events={};return}typeof l=="function"&&(c=l,l=o.keys(a.events).join(" "));for(var u=l.split(" "),f=0;f<u.length;f++){var d=a.events[u[f]],h=[];if(c&&d)for(var g=0;g<d.length;g++)d[g]!==c&&h.push(d[g]);a.events[u[f]]=h}},s.trigger=function(a,l,c){var u,f,d,h,g=a.events;if(g&&o.keys(g).length>0){c||(c={}),u=l.split(" ");for(var _=0;_<u.length;_++)if(f=u[_],d=g[f],d){h=o.clone(c,!1),h.name=f,h.source=a;for(var x=0;x<d.length;x++)d[x].apply(a,[h])}}}})()},function(t,i,r){var s={};t.exports=s;var o=r(5),a=r(0),l=r(1),c=r(4);(function(){s.create=function(u){return a.extend({id:a.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},u)},s.setModified=function(u,f,d,h){if(u.isModified=f,f&&u.cache&&(u.cache.allBodies=null,u.cache.allConstraints=null,u.cache.allComposites=null),d&&u.parent&&s.setModified(u.parent,f,d,h),h)for(var g=0;g<u.composites.length;g++){var _=u.composites[g];s.setModified(_,f,d,h)}},s.add=function(u,f){var d=[].concat(f);o.trigger(u,"beforeAdd",{object:f});for(var h=0;h<d.length;h++){var g=d[h];switch(g.type){case"body":if(g.parent!==g){a.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}s.addBody(u,g);break;case"constraint":s.addConstraint(u,g);break;case"composite":s.addComposite(u,g);break;case"mouseConstraint":s.addConstraint(u,g.constraint);break}}return o.trigger(u,"afterAdd",{object:f}),u},s.remove=function(u,f,d){var h=[].concat(f);o.trigger(u,"beforeRemove",{object:f});for(var g=0;g<h.length;g++){var _=h[g];switch(_.type){case"body":s.removeBody(u,_,d);break;case"constraint":s.removeConstraint(u,_,d);break;case"composite":s.removeComposite(u,_,d);break;case"mouseConstraint":s.removeConstraint(u,_.constraint);break}}return o.trigger(u,"afterRemove",{object:f}),u},s.addComposite=function(u,f){return u.composites.push(f),f.parent=u,s.setModified(u,!0,!0,!1),u},s.removeComposite=function(u,f,d){var h=a.indexOf(u.composites,f);if(h!==-1&&s.removeCompositeAt(u,h),d)for(var g=0;g<u.composites.length;g++)s.removeComposite(u.composites[g],f,!0);return u},s.removeCompositeAt=function(u,f){return u.composites.splice(f,1),s.setModified(u,!0,!0,!1),u},s.addBody=function(u,f){return u.bodies.push(f),s.setModified(u,!0,!0,!1),u},s.removeBody=function(u,f,d){var h=a.indexOf(u.bodies,f);if(h!==-1&&s.removeBodyAt(u,h),d)for(var g=0;g<u.composites.length;g++)s.removeBody(u.composites[g],f,!0);return u},s.removeBodyAt=function(u,f){return u.bodies.splice(f,1),s.setModified(u,!0,!0,!1),u},s.addConstraint=function(u,f){return u.constraints.push(f),s.setModified(u,!0,!0,!1),u},s.removeConstraint=function(u,f,d){var h=a.indexOf(u.constraints,f);if(h!==-1&&s.removeConstraintAt(u,h),d)for(var g=0;g<u.composites.length;g++)s.removeConstraint(u.composites[g],f,!0);return u},s.removeConstraintAt=function(u,f){return u.constraints.splice(f,1),s.setModified(u,!0,!0,!1),u},s.clear=function(u,f,d){if(d)for(var h=0;h<u.composites.length;h++)s.clear(u.composites[h],f,!0);return f?u.bodies=u.bodies.filter(function(g){return g.isStatic}):u.bodies.length=0,u.constraints.length=0,u.composites.length=0,s.setModified(u,!0,!0,!1),u},s.allBodies=function(u){if(u.cache&&u.cache.allBodies)return u.cache.allBodies;for(var f=[].concat(u.bodies),d=0;d<u.composites.length;d++)f=f.concat(s.allBodies(u.composites[d]));return u.cache&&(u.cache.allBodies=f),f},s.allConstraints=function(u){if(u.cache&&u.cache.allConstraints)return u.cache.allConstraints;for(var f=[].concat(u.constraints),d=0;d<u.composites.length;d++)f=f.concat(s.allConstraints(u.composites[d]));return u.cache&&(u.cache.allConstraints=f),f},s.allComposites=function(u){if(u.cache&&u.cache.allComposites)return u.cache.allComposites;for(var f=[].concat(u.composites),d=0;d<u.composites.length;d++)f=f.concat(s.allComposites(u.composites[d]));return u.cache&&(u.cache.allComposites=f),f},s.get=function(u,f,d){var h,g;switch(d){case"body":h=s.allBodies(u);break;case"constraint":h=s.allConstraints(u);break;case"composite":h=s.allComposites(u).concat(u);break}return h?(g=h.filter(function(_){return _.id.toString()===f.toString()}),g.length===0?null:g[0]):null},s.move=function(u,f,d){return s.remove(u,f),s.add(d,f),u},s.rebase=function(u){for(var f=s.allBodies(u).concat(s.allConstraints(u)).concat(s.allComposites(u)),d=0;d<f.length;d++)f[d].id=a.nextId();return u},s.translate=function(u,f,d){for(var h=d?s.allBodies(u):u.bodies,g=0;g<h.length;g++)c.translate(h[g],f);return u},s.rotate=function(u,f,d,h){for(var g=Math.cos(f),_=Math.sin(f),x=h?s.allBodies(u):u.bodies,y=0;y<x.length;y++){var M=x[y],b=M.position.x-d.x,A=M.position.y-d.y;c.setPosition(M,{x:d.x+(b*g-A*_),y:d.y+(b*_+A*g)}),c.rotate(M,f)}return u},s.scale=function(u,f,d,h,g){for(var _=g?s.allBodies(u):u.bodies,x=0;x<_.length;x++){var y=_[x],M=y.position.x-h.x,b=y.position.y-h.y;c.setPosition(y,{x:h.x+M*f,y:h.y+b*d}),c.scale(y,f,d)}return u},s.bounds=function(u){for(var f=s.allBodies(u),d=[],h=0;h<f.length;h+=1){var g=f[h];d.push(g.bounds.min,g.bounds.max)}return l.create(d)}})()},function(t,i,r){var s={};t.exports=s;var o=r(4),a=r(5),l=r(0);(function(){s._motionWakeThreshold=.18,s._motionSleepThreshold=.08,s._minBias=.9,s.update=function(c,u){for(var f=u/l._baseDelta,d=s._motionSleepThreshold,h=0;h<c.length;h++){var g=c[h],_=o.getSpeed(g),x=o.getAngularSpeed(g),y=_*_+x*x;if(g.force.x!==0||g.force.y!==0){s.set(g,!1);continue}var M=Math.min(g.motion,y),b=Math.max(g.motion,y);g.motion=s._minBias*M+(1-s._minBias)*b,g.sleepThreshold>0&&g.motion<d?(g.sleepCounter+=1,g.sleepCounter>=g.sleepThreshold/f&&s.set(g,!0)):g.sleepCounter>0&&(g.sleepCounter-=1)}},s.afterCollisions=function(c){for(var u=s._motionSleepThreshold,f=0;f<c.length;f++){var d=c[f];if(d.isActive){var h=d.collision,g=h.bodyA.parent,_=h.bodyB.parent;if(!(g.isSleeping&&_.isSleeping||g.isStatic||_.isStatic)&&(g.isSleeping||_.isSleeping)){var x=g.isSleeping&&!g.isStatic?g:_,y=x===g?_:g;!x.isStatic&&y.motion>u&&s.set(x,!1)}}}},s.set=function(c,u){var f=c.isSleeping;u?(c.isSleeping=!0,c.sleepCounter=c.sleepThreshold,c.positionImpulse.x=0,c.positionImpulse.y=0,c.positionPrev.x=c.position.x,c.positionPrev.y=c.position.y,c.anglePrev=c.angle,c.speed=0,c.angularSpeed=0,c.motion=0,f||a.trigger(c,"sleepStart")):(c.isSleeping=!1,c.sleepCounter=0,f&&a.trigger(c,"sleepEnd"))}})()},function(t,i,r){var s={};t.exports=s;var o=r(3),a=r(9);(function(){var l=[],c={overlap:0,axis:null},u={overlap:0,axis:null};s.create=function(f,d){return{pair:null,collided:!1,bodyA:f,bodyB:d,parentA:f.parent,parentB:d.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},s.collides=function(f,d,h){if(s._overlapAxes(c,f.vertices,d.vertices,f.axes),c.overlap<=0||(s._overlapAxes(u,d.vertices,f.vertices,d.axes),u.overlap<=0))return null;var g=h&&h.table[a.id(f,d)],_;g?_=g.collision:(_=s.create(f,d),_.collided=!0,_.bodyA=f.id<d.id?f:d,_.bodyB=f.id<d.id?d:f,_.parentA=_.bodyA.parent,_.parentB=_.bodyB.parent),f=_.bodyA,d=_.bodyB;var x;c.overlap<u.overlap?x=c:x=u;var y=_.normal,M=_.supports,b=x.axis,A=b.x,T=b.y;A*(d.position.x-f.position.x)+T*(d.position.y-f.position.y)<0?(y.x=A,y.y=T):(y.x=-A,y.y=-T),_.tangent.x=-y.y,_.tangent.y=y.x,_.depth=x.overlap,_.penetration.x=y.x*_.depth,_.penetration.y=y.y*_.depth;var P=s._findSupports(f,d,y,1),k=0;if(o.contains(f.vertices,P[0])&&(M[k++]=P[0]),o.contains(f.vertices,P[1])&&(M[k++]=P[1]),k<2){var N=s._findSupports(d,f,y,-1);o.contains(d.vertices,N[0])&&(M[k++]=N[0]),k<2&&o.contains(d.vertices,N[1])&&(M[k++]=N[1])}return k===0&&(M[k++]=P[0]),M.length=k,_},s._overlapAxes=function(f,d,h,g){var _=d.length,x=h.length,y=d[0].x,M=d[0].y,b=h[0].x,A=h[0].y,T=g.length,P=Number.MAX_VALUE,k=0,N,z,R,F,V,K;for(V=0;V<T;V++){var W=g[V],ne=W.x,re=W.y,de=y*ne+M*re,X=b*ne+A*re,$=de,J=X;for(K=1;K<_;K+=1)F=d[K].x*ne+d[K].y*re,F>$?$=F:F<de&&(de=F);for(K=1;K<x;K+=1)F=h[K].x*ne+h[K].y*re,F>J?J=F:F<X&&(X=F);if(z=$-X,R=J-de,N=z<R?z:R,N<P&&(P=N,k=V,N<=0))break}f.axis=g[k],f.overlap=P},s._projectToAxis=function(f,d,h){for(var g=d[0].x*h.x+d[0].y*h.y,_=g,x=1;x<d.length;x+=1){var y=d[x].x*h.x+d[x].y*h.y;y>_?_=y:y<g&&(g=y)}f.min=g,f.max=_},s._findSupports=function(f,d,h,g){var _=d.vertices,x=_.length,y=f.position.x,M=f.position.y,b=h.x*g,A=h.y*g,T=Number.MAX_VALUE,P,k,N,z,R;for(R=0;R<x;R+=1)k=_[R],z=b*(y-k.x)+A*(M-k.y),z<T&&(T=z,P=k);return N=_[(x+P.index-1)%x],T=b*(y-N.x)+A*(M-N.y),k=_[(P.index+1)%x],b*(y-k.x)+A*(M-k.y)<T?(l[0]=P,l[1]=k,l):(l[0]=P,l[1]=N,l)}})()},function(t,i,r){var s={};t.exports=s;var o=r(16);(function(){s.create=function(a,l){var c=a.bodyA,u=a.bodyB,f={id:s.id(c,u),bodyA:c,bodyB:u,collision:a,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:c.isSensor||u.isSensor,timeCreated:l,timeUpdated:l,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return s.update(f,a,l),f},s.update=function(a,l,c){var u=a.contacts,f=l.supports,d=a.activeContacts,h=l.parentA,g=l.parentB,_=h.vertices.length;a.isActive=!0,a.timeUpdated=c,a.collision=l,a.separation=l.depth,a.inverseMass=h.inverseMass+g.inverseMass,a.friction=h.friction<g.friction?h.friction:g.friction,a.frictionStatic=h.frictionStatic>g.frictionStatic?h.frictionStatic:g.frictionStatic,a.restitution=h.restitution>g.restitution?h.restitution:g.restitution,a.slop=h.slop>g.slop?h.slop:g.slop,l.pair=a,d.length=0;for(var x=0;x<f.length;x++){var y=f[x],M=y.body===h?y.index:_+y.index,b=u[M];b?d.push(b):d.push(u[M]=o.create(y))}},s.setActive=function(a,l,c){l?(a.isActive=!0,a.timeUpdated=c):(a.isActive=!1,a.activeContacts.length=0)},s.id=function(a,l){return a.id<l.id?"A"+a.id+"B"+l.id:"A"+l.id+"B"+a.id}})()},function(t,i,r){var s={};t.exports=s;var o=r(3),a=r(2),l=r(7),c=r(1),u=r(11),f=r(0);(function(){s._warming=.4,s._torqueDampen=1,s._minLength=1e-6,s.create=function(d){var h=d;h.bodyA&&!h.pointA&&(h.pointA={x:0,y:0}),h.bodyB&&!h.pointB&&(h.pointB={x:0,y:0});var g=h.bodyA?a.add(h.bodyA.position,h.pointA):h.pointA,_=h.bodyB?a.add(h.bodyB.position,h.pointB):h.pointB,x=a.magnitude(a.sub(g,_));h.length=typeof h.length<"u"?h.length:x,h.id=h.id||f.nextId(),h.label=h.label||"Constraint",h.type="constraint",h.stiffness=h.stiffness||(h.length>0?1:.7),h.damping=h.damping||0,h.angularStiffness=h.angularStiffness||0,h.angleA=h.bodyA?h.bodyA.angle:h.angleA,h.angleB=h.bodyB?h.bodyB.angle:h.angleB,h.plugin={};var y={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return h.length===0&&h.stiffness>.1?(y.type="pin",y.anchors=!1):h.stiffness<.9&&(y.type="spring"),h.render=f.extend(y,h.render),h},s.preSolveAll=function(d){for(var h=0;h<d.length;h+=1){var g=d[h],_=g.constraintImpulse;g.isStatic||_.x===0&&_.y===0&&_.angle===0||(g.position.x+=_.x,g.position.y+=_.y,g.angle+=_.angle)}},s.solveAll=function(d,h){for(var g=f.clamp(h/f._baseDelta,0,1),_=0;_<d.length;_+=1){var x=d[_],y=!x.bodyA||x.bodyA&&x.bodyA.isStatic,M=!x.bodyB||x.bodyB&&x.bodyB.isStatic;(y||M)&&s.solve(d[_],g)}for(_=0;_<d.length;_+=1)x=d[_],y=!x.bodyA||x.bodyA&&x.bodyA.isStatic,M=!x.bodyB||x.bodyB&&x.bodyB.isStatic,!y&&!M&&s.solve(d[_],g)},s.solve=function(d,h){var g=d.bodyA,_=d.bodyB,x=d.pointA,y=d.pointB;if(!(!g&&!_)){g&&!g.isStatic&&(a.rotate(x,g.angle-d.angleA,x),d.angleA=g.angle),_&&!_.isStatic&&(a.rotate(y,_.angle-d.angleB,y),d.angleB=_.angle);var M=x,b=y;if(g&&(M=a.add(g.position,x)),_&&(b=a.add(_.position,y)),!(!M||!b)){var A=a.sub(M,b),T=a.magnitude(A);T<s._minLength&&(T=s._minLength);var P=(T-d.length)/T,k=d.stiffness>=1||d.length===0,N=k?d.stiffness*h:d.stiffness*h*h,z=d.damping*h,R=a.mult(A,P*N),F=(g?g.inverseMass:0)+(_?_.inverseMass:0),V=(g?g.inverseInertia:0)+(_?_.inverseInertia:0),K=F+V,W,ne,re,de,X;if(z>0){var $=a.create();re=a.div(A,T),X=a.sub(_&&a.sub(_.position,_.positionPrev)||$,g&&a.sub(g.position,g.positionPrev)||$),de=a.dot(re,X)}g&&!g.isStatic&&(ne=g.inverseMass/F,g.constraintImpulse.x-=R.x*ne,g.constraintImpulse.y-=R.y*ne,g.position.x-=R.x*ne,g.position.y-=R.y*ne,z>0&&(g.positionPrev.x-=z*re.x*de*ne,g.positionPrev.y-=z*re.y*de*ne),W=a.cross(x,R)/K*s._torqueDampen*g.inverseInertia*(1-d.angularStiffness),g.constraintImpulse.angle-=W,g.angle-=W),_&&!_.isStatic&&(ne=_.inverseMass/F,_.constraintImpulse.x+=R.x*ne,_.constraintImpulse.y+=R.y*ne,_.position.x+=R.x*ne,_.position.y+=R.y*ne,z>0&&(_.positionPrev.x+=z*re.x*de*ne,_.positionPrev.y+=z*re.y*de*ne),W=a.cross(y,R)/K*s._torqueDampen*_.inverseInertia*(1-d.angularStiffness),_.constraintImpulse.angle+=W,_.angle+=W)}}},s.postSolveAll=function(d){for(var h=0;h<d.length;h++){var g=d[h],_=g.constraintImpulse;if(!(g.isStatic||_.x===0&&_.y===0&&_.angle===0)){l.set(g,!1);for(var x=0;x<g.parts.length;x++){var y=g.parts[x];o.translate(y.vertices,_),x>0&&(y.position.x+=_.x,y.position.y+=_.y),_.angle!==0&&(o.rotate(y.vertices,_.angle,g.position),u.rotate(y.axes,_.angle),x>0&&a.rotateAbout(y.position,_.angle,g.position,y.position)),c.update(y.bounds,y.vertices,g.velocity)}_.angle*=s._warming,_.x*=s._warming,_.y*=s._warming}}},s.pointAWorld=function(d){return{x:(d.bodyA?d.bodyA.position.x:0)+(d.pointA?d.pointA.x:0),y:(d.bodyA?d.bodyA.position.y:0)+(d.pointA?d.pointA.y:0)}},s.pointBWorld=function(d){return{x:(d.bodyB?d.bodyB.position.x:0)+(d.pointB?d.pointB.x:0),y:(d.bodyB?d.bodyB.position.y:0)+(d.pointB?d.pointB.y:0)}}})()},function(t,i,r){var s={};t.exports=s;var o=r(2),a=r(0);(function(){s.fromVertices=function(l){for(var c={},u=0;u<l.length;u++){var f=(u+1)%l.length,d=o.normalise({x:l[f].y-l[u].y,y:l[u].x-l[f].x}),h=d.y===0?1/0:d.x/d.y;h=h.toFixed(3).toString(),c[h]=d}return a.values(c)},s.rotate=function(l,c){if(c!==0)for(var u=Math.cos(c),f=Math.sin(c),d=0;d<l.length;d++){var h=l[d],g;g=h.x*u-h.y*f,h.y=h.x*f+h.y*u,h.x=g}}})()},function(t,i,r){var s={};t.exports=s;var o=r(3),a=r(0),l=r(4),c=r(1),u=r(2);(function(){s.rectangle=function(f,d,h,g,_){_=_||{};var x={label:"Rectangle Body",position:{x:f,y:d},vertices:o.fromPath("L 0 0 L "+h+" 0 L "+h+" "+g+" L 0 "+g)};if(_.chamfer){var y=_.chamfer;x.vertices=o.chamfer(x.vertices,y.radius,y.quality,y.qualityMin,y.qualityMax),delete _.chamfer}return l.create(a.extend({},x,_))},s.trapezoid=function(f,d,h,g,_,x){x=x||{},_*=.5;var y=(1-_*2)*h,M=h*_,b=M+y,A=b+M,T;_<.5?T="L 0 0 L "+M+" "+-g+" L "+b+" "+-g+" L "+A+" 0":T="L 0 0 L "+b+" "+-g+" L "+A+" 0";var P={label:"Trapezoid Body",position:{x:f,y:d},vertices:o.fromPath(T)};if(x.chamfer){var k=x.chamfer;P.vertices=o.chamfer(P.vertices,k.radius,k.quality,k.qualityMin,k.qualityMax),delete x.chamfer}return l.create(a.extend({},P,x))},s.circle=function(f,d,h,g,_){g=g||{};var x={label:"Circle Body",circleRadius:h};_=_||25;var y=Math.ceil(Math.max(10,Math.min(_,h)));return y%2===1&&(y+=1),s.polygon(f,d,y,h,a.extend({},x,g))},s.polygon=function(f,d,h,g,_){if(_=_||{},h<3)return s.circle(f,d,g,_);for(var x=2*Math.PI/h,y="",M=x*.5,b=0;b<h;b+=1){var A=M+b*x,T=Math.cos(A)*g,P=Math.sin(A)*g;y+="L "+T.toFixed(3)+" "+P.toFixed(3)+" "}var k={label:"Polygon Body",position:{x:f,y:d},vertices:o.fromPath(y)};if(_.chamfer){var N=_.chamfer;k.vertices=o.chamfer(k.vertices,N.radius,N.quality,N.qualityMin,N.qualityMax),delete _.chamfer}return l.create(a.extend({},k,_))},s.fromVertices=function(f,d,h,g,_,x,y,M){var b=a.getDecomp(),A,T,P,k,N,z,R,F,V,K,W;for(A=!!(b&&b.quickDecomp),g=g||{},P=[],_=typeof _<"u"?_:!1,x=typeof x<"u"?x:.01,y=typeof y<"u"?y:10,M=typeof M<"u"?M:.01,a.isArray(h[0])||(h=[h]),K=0;K<h.length;K+=1)if(z=h[K],k=o.isConvex(z),N=!k,N&&!A&&a.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),k||!A)k?z=o.clockwiseSort(z):z=o.hull(z),P.push({position:{x:f,y:d},vertices:z});else{var ne=z.map(function(ye){return[ye.x,ye.y]});b.makeCCW(ne),x!==!1&&b.removeCollinearPoints(ne,x),M!==!1&&b.removeDuplicatePoints&&b.removeDuplicatePoints(ne,M);var re=b.quickDecomp(ne);for(R=0;R<re.length;R++){var de=re[R],X=de.map(function(ye){return{x:ye[0],y:ye[1]}});y>0&&o.area(X)<y||P.push({position:o.centre(X),vertices:X})}}for(R=0;R<P.length;R++)P[R]=l.create(a.extend(P[R],g));if(_){var $=5;for(R=0;R<P.length;R++){var J=P[R];for(F=R+1;F<P.length;F++){var j=P[F];if(c.overlaps(J.bounds,j.bounds)){var se=J.vertices,ve=j.vertices;for(V=0;V<J.vertices.length;V++)for(W=0;W<j.vertices.length;W++){var oe=u.magnitudeSquared(u.sub(se[(V+1)%se.length],ve[W])),he=u.magnitudeSquared(u.sub(se[V],ve[(W+1)%ve.length]));oe<$&&he<$&&(se[V].isInternal=!0,ve[W].isInternal=!0)}}}}}return P.length>1?(T=l.create(a.extend({parts:P.slice(0)},g)),l.setPosition(T,{x:f,y:d}),T):P[0]}})()},function(t,i,r){var s={};t.exports=s;var o=r(0),a=r(8);(function(){s.create=function(l){var c={bodies:[],pairs:null};return o.extend(c,l)},s.setBodies=function(l,c){l.bodies=c.slice(0)},s.clear=function(l){l.bodies=[]},s.collisions=function(l){var c=[],u=l.pairs,f=l.bodies,d=f.length,h=s.canCollide,g=a.collides,_,x;for(f.sort(s._compareBoundsX),_=0;_<d;_++){var y=f[_],M=y.bounds,b=y.bounds.max.x,A=y.bounds.max.y,T=y.bounds.min.y,P=y.isStatic||y.isSleeping,k=y.parts.length,N=k===1;for(x=_+1;x<d;x++){var z=f[x],R=z.bounds;if(R.min.x>b)break;if(!(A<R.min.y||T>R.max.y)&&!(P&&(z.isStatic||z.isSleeping))&&h(y.collisionFilter,z.collisionFilter)){var F=z.parts.length;if(N&&F===1){var V=g(y,z,u);V&&c.push(V)}else for(var K=k>1?1:0,W=F>1?1:0,ne=K;ne<k;ne++)for(var re=y.parts[ne],M=re.bounds,de=W;de<F;de++){var X=z.parts[de],R=X.bounds;if(!(M.min.x>R.max.x||M.max.x<R.min.x||M.max.y<R.min.y||M.min.y>R.max.y)){var V=g(re,X,u);V&&c.push(V)}}}}}return c},s.canCollide=function(l,c){return l.group===c.group&&l.group!==0?l.group>0:(l.mask&c.category)!==0&&(c.mask&l.category)!==0},s._compareBoundsX=function(l,c){return l.bounds.min.x-c.bounds.min.x}})()},function(t,i,r){var s={};t.exports=s;var o=r(0);(function(){s.create=function(a){var l={};return a||o.log("Mouse.create: element was undefined, defaulting to document.body","warn"),l.element=a||document.body,l.absolute={x:0,y:0},l.position={x:0,y:0},l.mousedownPosition={x:0,y:0},l.mouseupPosition={x:0,y:0},l.offset={x:0,y:0},l.scale={x:1,y:1},l.wheelDelta=0,l.button=-1,l.pixelRatio=parseInt(l.element.getAttribute("data-pixel-ratio"),10)||1,l.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},l.mousemove=function(c){var u=s._getRelativeMousePosition(c,l.element,l.pixelRatio),f=c.changedTouches;f&&(l.button=0,c.preventDefault()),l.absolute.x=u.x,l.absolute.y=u.y,l.position.x=l.absolute.x*l.scale.x+l.offset.x,l.position.y=l.absolute.y*l.scale.y+l.offset.y,l.sourceEvents.mousemove=c},l.mousedown=function(c){var u=s._getRelativeMousePosition(c,l.element,l.pixelRatio),f=c.changedTouches;f?(l.button=0,c.preventDefault()):l.button=c.button,l.absolute.x=u.x,l.absolute.y=u.y,l.position.x=l.absolute.x*l.scale.x+l.offset.x,l.position.y=l.absolute.y*l.scale.y+l.offset.y,l.mousedownPosition.x=l.position.x,l.mousedownPosition.y=l.position.y,l.sourceEvents.mousedown=c},l.mouseup=function(c){var u=s._getRelativeMousePosition(c,l.element,l.pixelRatio),f=c.changedTouches;f&&c.preventDefault(),l.button=-1,l.absolute.x=u.x,l.absolute.y=u.y,l.position.x=l.absolute.x*l.scale.x+l.offset.x,l.position.y=l.absolute.y*l.scale.y+l.offset.y,l.mouseupPosition.x=l.position.x,l.mouseupPosition.y=l.position.y,l.sourceEvents.mouseup=c},l.mousewheel=function(c){l.wheelDelta=Math.max(-1,Math.min(1,c.wheelDelta||-c.detail)),c.preventDefault()},s.setElement(l,l.element),l},s.setElement=function(a,l){a.element=l,l.addEventListener("mousemove",a.mousemove),l.addEventListener("mousedown",a.mousedown),l.addEventListener("mouseup",a.mouseup),l.addEventListener("mousewheel",a.mousewheel),l.addEventListener("DOMMouseScroll",a.mousewheel),l.addEventListener("touchmove",a.mousemove),l.addEventListener("touchstart",a.mousedown),l.addEventListener("touchend",a.mouseup)},s.clearSourceEvents=function(a){a.sourceEvents.mousemove=null,a.sourceEvents.mousedown=null,a.sourceEvents.mouseup=null,a.sourceEvents.mousewheel=null,a.wheelDelta=0},s.setOffset=function(a,l){a.offset.x=l.x,a.offset.y=l.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y},s.setScale=function(a,l){a.scale.x=l.x,a.scale.y=l.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y},s._getRelativeMousePosition=function(a,l,c){var u=l.getBoundingClientRect(),f=document.documentElement||document.body.parentNode||document.body,d=window.pageXOffset!==void 0?window.pageXOffset:f.scrollLeft,h=window.pageYOffset!==void 0?window.pageYOffset:f.scrollTop,g=a.changedTouches,_,x;return g?(_=g[0].pageX-u.left-d,x=g[0].pageY-u.top-h):(_=a.pageX-u.left-d,x=a.pageY-u.top-h),{x:_/(l.clientWidth/(l.width||l.clientWidth)*c),y:x/(l.clientHeight/(l.height||l.clientHeight)*c)}}})()},function(t,i,r){var s={};t.exports=s;var o=r(0);(function(){s._registry={},s.register=function(a){if(s.isPlugin(a)||o.warn("Plugin.register:",s.toString(a),"does not implement all required fields."),a.name in s._registry){var l=s._registry[a.name],c=s.versionParse(a.version).number,u=s.versionParse(l.version).number;c>u?(o.warn("Plugin.register:",s.toString(l),"was upgraded to",s.toString(a)),s._registry[a.name]=a):c<u?o.warn("Plugin.register:",s.toString(l),"can not be downgraded to",s.toString(a)):a!==l&&o.warn("Plugin.register:",s.toString(a),"is already registered to different plugin object")}else s._registry[a.name]=a;return a},s.resolve=function(a){return s._registry[s.dependencyParse(a).name]},s.toString=function(a){return typeof a=="string"?a:(a.name||"anonymous")+"@"+(a.version||a.range||"0.0.0")},s.isPlugin=function(a){return a&&a.name&&a.version&&a.install},s.isUsed=function(a,l){return a.used.indexOf(l)>-1},s.isFor=function(a,l){var c=a.for&&s.dependencyParse(a.for);return!a.for||l.name===c.name&&s.versionSatisfies(l.version,c.range)},s.use=function(a,l){if(a.uses=(a.uses||[]).concat(l||[]),a.uses.length===0){o.warn("Plugin.use:",s.toString(a),"does not specify any dependencies to install.");return}for(var c=s.dependencies(a),u=o.topologicalSort(c),f=[],d=0;d<u.length;d+=1)if(u[d]!==a.name){var h=s.resolve(u[d]);if(!h){f.push("❌ "+u[d]);continue}s.isUsed(a,h.name)||(s.isFor(h,a)||(o.warn("Plugin.use:",s.toString(h),"is for",h.for,"but installed on",s.toString(a)+"."),h._warned=!0),h.install?h.install(a):(o.warn("Plugin.use:",s.toString(h),"does not specify an install function."),h._warned=!0),h._warned?(f.push("🔶 "+s.toString(h)),delete h._warned):f.push("✅ "+s.toString(h)),a.used.push(h.name))}f.length>0&&o.info(f.join("  "))},s.dependencies=function(a,l){var c=s.dependencyParse(a),u=c.name;if(l=l||{},!(u in l)){a=s.resolve(a)||a,l[u]=o.map(a.uses||[],function(d){s.isPlugin(d)&&s.register(d);var h=s.dependencyParse(d),g=s.resolve(d);return g&&!s.versionSatisfies(g.version,h.range)?(o.warn("Plugin.dependencies:",s.toString(g),"does not satisfy",s.toString(h),"used by",s.toString(c)+"."),g._warned=!0,a._warned=!0):g||(o.warn("Plugin.dependencies:",s.toString(d),"used by",s.toString(c),"could not be resolved."),a._warned=!0),h.name});for(var f=0;f<l[u].length;f+=1)s.dependencies(l[u][f],l);return l}},s.dependencyParse=function(a){if(o.isString(a)){var l=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return l.test(a)||o.warn("Plugin.dependencyParse:",a,"is not a valid dependency string."),{name:a.split("@")[0],range:a.split("@")[1]||"*"}}return{name:a.name,range:a.range||a.version}},s.versionParse=function(a){var l=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;l.test(a)||o.warn("Plugin.versionParse:",a,"is not a valid version or range.");var c=l.exec(a),u=Number(c[4]),f=Number(c[5]),d=Number(c[6]);return{isRange:!!(c[1]||c[2]),version:c[3],range:a,operator:c[1]||c[2]||"",major:u,minor:f,patch:d,parts:[u,f,d],prerelease:c[7],number:u*1e8+f*1e4+d}},s.versionSatisfies=function(a,l){l=l||"*";var c=s.versionParse(l),u=s.versionParse(a);if(c.isRange){if(c.operator==="*"||a==="*")return!0;if(c.operator===">")return u.number>c.number;if(c.operator===">=")return u.number>=c.number;if(c.operator==="~")return u.major===c.major&&u.minor===c.minor&&u.patch>=c.patch;if(c.operator==="^")return c.major>0?u.major===c.major&&u.number>=c.number:c.minor>0?u.minor===c.minor&&u.patch>=c.patch:u.patch===c.patch}return a===l||a==="*"}})()},function(t,i){var r={};t.exports=r,function(){r.create=function(s){return{vertex:s,normalImpulse:0,tangentImpulse:0}}}()},function(t,i,r){var s={};t.exports=s;var o=r(7),a=r(18),l=r(13),c=r(19),u=r(5),f=r(6),d=r(10),h=r(0),g=r(4);(function(){s.create=function(_){_=_||{};var x={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},y=h.extend(x,_);return y.world=_.world||f.create({label:"World"}),y.pairs=_.pairs||c.create(),y.detector=_.detector||l.create(),y.grid={buckets:[]},y.world.gravity=y.gravity,y.broadphase=y.grid,y.metrics={},y},s.update=function(_,x){var y=h.now(),M=_.world,b=_.detector,A=_.pairs,T=_.timing,P=T.timestamp,k;x=typeof x<"u"?x:h._baseDelta,x*=T.timeScale,T.timestamp+=x,T.lastDelta=x;var N={timestamp:T.timestamp,delta:x};u.trigger(_,"beforeUpdate",N);var z=f.allBodies(M),R=f.allConstraints(M);for(M.isModified&&(l.setBodies(b,z),f.setModified(M,!1,!1,!0)),_.enableSleeping&&o.update(z,x),s._bodiesApplyGravity(z,_.gravity),x>0&&s._bodiesUpdate(z,x),d.preSolveAll(z),k=0;k<_.constraintIterations;k++)d.solveAll(R,x);d.postSolveAll(z),b.pairs=_.pairs;var F=l.collisions(b);c.update(A,F,P),_.enableSleeping&&o.afterCollisions(A.list),A.collisionStart.length>0&&u.trigger(_,"collisionStart",{pairs:A.collisionStart});var V=h.clamp(20/_.positionIterations,0,1);for(a.preSolvePosition(A.list),k=0;k<_.positionIterations;k++)a.solvePosition(A.list,x,V);for(a.postSolvePosition(z),d.preSolveAll(z),k=0;k<_.constraintIterations;k++)d.solveAll(R,x);for(d.postSolveAll(z),a.preSolveVelocity(A.list),k=0;k<_.velocityIterations;k++)a.solveVelocity(A.list,x);return s._bodiesUpdateVelocities(z),A.collisionActive.length>0&&u.trigger(_,"collisionActive",{pairs:A.collisionActive}),A.collisionEnd.length>0&&u.trigger(_,"collisionEnd",{pairs:A.collisionEnd}),s._bodiesClearForces(z),u.trigger(_,"afterUpdate",N),_.timing.lastElapsed=h.now()-y,_},s.merge=function(_,x){if(h.extend(_,x),x.world){_.world=x.world,s.clear(_);for(var y=f.allBodies(_.world),M=0;M<y.length;M++){var b=y[M];o.set(b,!1),b.id=h.nextId()}}},s.clear=function(_){c.clear(_.pairs),l.clear(_.detector)},s._bodiesClearForces=function(_){for(var x=_.length,y=0;y<x;y++){var M=_[y];M.force.x=0,M.force.y=0,M.torque=0}},s._bodiesApplyGravity=function(_,x){var y=typeof x.scale<"u"?x.scale:.001,M=_.length;if(!(x.x===0&&x.y===0||y===0))for(var b=0;b<M;b++){var A=_[b];A.isStatic||A.isSleeping||(A.force.y+=A.mass*x.y*y,A.force.x+=A.mass*x.x*y)}},s._bodiesUpdate=function(_,x){for(var y=_.length,M=0;M<y;M++){var b=_[M];b.isStatic||b.isSleeping||g.update(b,x)}},s._bodiesUpdateVelocities=function(_){for(var x=_.length,y=0;y<x;y++)g.updateVelocities(_[y])}})()},function(t,i,r){var s={};t.exports=s;var o=r(3),a=r(0),l=r(1);(function(){s._restingThresh=2,s._restingThreshTangent=Math.sqrt(6),s._positionDampen=.9,s._positionWarming=.8,s._frictionNormalMultiplier=5,s._frictionMaxStatic=Number.MAX_VALUE,s.preSolvePosition=function(c){var u,f,d,h=c.length;for(u=0;u<h;u++)f=c[u],f.isActive&&(d=f.activeContacts.length,f.collision.parentA.totalContacts+=d,f.collision.parentB.totalContacts+=d)},s.solvePosition=function(c,u,f){var d,h,g,_,x,y,M,b,A=s._positionDampen*(f||1),T=a.clamp(u/a._baseDelta,0,1),P=c.length;for(d=0;d<P;d++)h=c[d],!(!h.isActive||h.isSensor)&&(g=h.collision,_=g.parentA,x=g.parentB,y=g.normal,h.separation=y.x*(x.positionImpulse.x+g.penetration.x-_.positionImpulse.x)+y.y*(x.positionImpulse.y+g.penetration.y-_.positionImpulse.y));for(d=0;d<P;d++)h=c[d],!(!h.isActive||h.isSensor)&&(g=h.collision,_=g.parentA,x=g.parentB,y=g.normal,b=h.separation-h.slop*T,(_.isStatic||x.isStatic)&&(b*=2),_.isStatic||_.isSleeping||(M=A/_.totalContacts,_.positionImpulse.x+=y.x*b*M,_.positionImpulse.y+=y.y*b*M),x.isStatic||x.isSleeping||(M=A/x.totalContacts,x.positionImpulse.x-=y.x*b*M,x.positionImpulse.y-=y.y*b*M))},s.postSolvePosition=function(c){for(var u=s._positionWarming,f=c.length,d=o.translate,h=l.update,g=0;g<f;g++){var _=c[g],x=_.positionImpulse,y=x.x,M=x.y,b=_.velocity;if(_.totalContacts=0,y!==0||M!==0){for(var A=0;A<_.parts.length;A++){var T=_.parts[A];d(T.vertices,x),h(T.bounds,T.vertices,b),T.position.x+=y,T.position.y+=M}_.positionPrev.x+=y,_.positionPrev.y+=M,y*b.x+M*b.y<0?(x.x=0,x.y=0):(x.x*=u,x.y*=u)}}},s.preSolveVelocity=function(c){var u=c.length,f,d;for(f=0;f<u;f++){var h=c[f];if(!(!h.isActive||h.isSensor)){var g=h.activeContacts,_=g.length,x=h.collision,y=x.parentA,M=x.parentB,b=x.normal,A=x.tangent;for(d=0;d<_;d++){var T=g[d],P=T.vertex,k=T.normalImpulse,N=T.tangentImpulse;if(k!==0||N!==0){var z=b.x*k+A.x*N,R=b.y*k+A.y*N;y.isStatic||y.isSleeping||(y.positionPrev.x+=z*y.inverseMass,y.positionPrev.y+=R*y.inverseMass,y.anglePrev+=y.inverseInertia*((P.x-y.position.x)*R-(P.y-y.position.y)*z)),M.isStatic||M.isSleeping||(M.positionPrev.x-=z*M.inverseMass,M.positionPrev.y-=R*M.inverseMass,M.anglePrev-=M.inverseInertia*((P.x-M.position.x)*R-(P.y-M.position.y)*z))}}}}},s.solveVelocity=function(c,u){var f=u/a._baseDelta,d=f*f,h=d*f,g=-s._restingThresh*f,_=s._restingThreshTangent,x=s._frictionNormalMultiplier*f,y=s._frictionMaxStatic,M=c.length,b,A,T,P;for(T=0;T<M;T++){var k=c[T];if(!(!k.isActive||k.isSensor)){var N=k.collision,z=N.parentA,R=N.parentB,F=z.velocity,V=R.velocity,K=N.normal.x,W=N.normal.y,ne=N.tangent.x,re=N.tangent.y,de=k.activeContacts,X=de.length,$=1/X,J=z.inverseMass+R.inverseMass,j=k.friction*k.frictionStatic*x;for(F.x=z.position.x-z.positionPrev.x,F.y=z.position.y-z.positionPrev.y,V.x=R.position.x-R.positionPrev.x,V.y=R.position.y-R.positionPrev.y,z.angularVelocity=z.angle-z.anglePrev,R.angularVelocity=R.angle-R.anglePrev,P=0;P<X;P++){var se=de[P],ve=se.vertex,oe=ve.x-z.position.x,he=ve.y-z.position.y,ye=ve.x-R.position.x,Me=ve.y-R.position.y,Pe=F.x-he*z.angularVelocity,Xe=F.y+oe*z.angularVelocity,ht=V.x-Me*R.angularVelocity,He=V.y+ye*R.angularVelocity,ie=Pe-ht,je=Xe-He,ke=K*ie+W*je,We=ne*ie+re*je,Fe=k.separation+ke,it=Math.min(Fe,1);it=Fe<0?0:it;var Ue=it*j;We<-Ue||We>Ue?(A=We>0?We:-We,b=k.friction*(We>0?1:-1)*h,b<-A?b=-A:b>A&&(b=A)):(b=We,A=y);var Ye=oe*W-he*K,ot=ye*W-Me*K,Q=$/(J+z.inverseInertia*Ye*Ye+R.inverseInertia*ot*ot),Z=(1+k.restitution)*ke*Q;if(b*=Q,ke<g)se.normalImpulse=0;else{var we=se.normalImpulse;se.normalImpulse+=Z,se.normalImpulse>0&&(se.normalImpulse=0),Z=se.normalImpulse-we}if(We<-_||We>_)se.tangentImpulse=0;else{var Ee=se.tangentImpulse;se.tangentImpulse+=b,se.tangentImpulse<-A&&(se.tangentImpulse=-A),se.tangentImpulse>A&&(se.tangentImpulse=A),b=se.tangentImpulse-Ee}var Ne=K*Z+ne*b,Ze=W*Z+re*b;z.isStatic||z.isSleeping||(z.positionPrev.x+=Ne*z.inverseMass,z.positionPrev.y+=Ze*z.inverseMass,z.anglePrev+=(oe*Ze-he*Ne)*z.inverseInertia),R.isStatic||R.isSleeping||(R.positionPrev.x-=Ne*R.inverseMass,R.positionPrev.y-=Ze*R.inverseMass,R.anglePrev-=(ye*Ze-Me*Ne)*R.inverseInertia)}}}}})()},function(t,i,r){var s={};t.exports=s;var o=r(9),a=r(0);(function(){s.create=function(l){return a.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},l)},s.update=function(l,c,u){var f=l.list,d=f.length,h=l.table,g=c.length,_=l.collisionStart,x=l.collisionEnd,y=l.collisionActive,M,b,A,T;for(_.length=0,x.length=0,y.length=0,T=0;T<d;T++)f[T].confirmedActive=!1;for(T=0;T<g;T++)M=c[T],A=M.pair,A?(A.isActive?y.push(A):_.push(A),o.update(A,M,u),A.confirmedActive=!0):(A=o.create(M,u),h[A.id]=A,_.push(A),f.push(A));var P=[];for(d=f.length,T=0;T<d;T++)A=f[T],A.confirmedActive||(o.setActive(A,!1,u),x.push(A),!A.collision.bodyA.isSleeping&&!A.collision.bodyB.isSleeping&&P.push(T));for(T=0;T<P.length;T++)b=P[T]-T,A=f[b],f.splice(b,1),delete h[A.id]},s.clear=function(l){return l.table={},l.list.length=0,l.collisionStart.length=0,l.collisionActive.length=0,l.collisionEnd.length=0,l}})()},function(t,i,r){var s=t.exports=r(21);s.Axes=r(11),s.Bodies=r(12),s.Body=r(4),s.Bounds=r(1),s.Collision=r(8),s.Common=r(0),s.Composite=r(6),s.Composites=r(22),s.Constraint=r(10),s.Contact=r(16),s.Detector=r(13),s.Engine=r(17),s.Events=r(5),s.Grid=r(23),s.Mouse=r(14),s.MouseConstraint=r(24),s.Pair=r(9),s.Pairs=r(19),s.Plugin=r(15),s.Query=r(25),s.Render=r(26),s.Resolver=r(18),s.Runner=r(27),s.SAT=r(28),s.Sleeping=r(7),s.Svg=r(29),s.Vector=r(2),s.Vertices=r(3),s.World=r(30),s.Engine.run=s.Runner.run,s.Common.deprecated(s.Engine,"run","Engine.run ➤ use Matter.Runner.run(engine) instead")},function(t,i,r){var s={};t.exports=s;var o=r(15),a=r(0);(function(){s.name="matter-js",s.version="0.19.0",s.uses=[],s.used=[],s.use=function(){o.use(s,Array.prototype.slice.call(arguments))},s.before=function(l,c){return l=l.replace(/^Matter./,""),a.chainPathBefore(s,l,c)},s.after=function(l,c){return l=l.replace(/^Matter./,""),a.chainPathAfter(s,l,c)}})()},function(t,i,r){var s={};t.exports=s;var o=r(6),a=r(10),l=r(0),c=r(4),u=r(12),f=l.deprecated;(function(){s.stack=function(d,h,g,_,x,y,M){for(var b=o.create({label:"Stack"}),A=d,T=h,P,k=0,N=0;N<_;N++){for(var z=0,R=0;R<g;R++){var F=M(A,T,R,N,P,k);if(F){var V=F.bounds.max.y-F.bounds.min.y,K=F.bounds.max.x-F.bounds.min.x;V>z&&(z=V),c.translate(F,{x:K*.5,y:V*.5}),A=F.bounds.max.x+x,o.addBody(b,F),P=F,k+=1}else A+=x}T+=z+y,A=d}return b},s.chain=function(d,h,g,_,x,y){for(var M=d.bodies,b=1;b<M.length;b++){var A=M[b-1],T=M[b],P=A.bounds.max.y-A.bounds.min.y,k=A.bounds.max.x-A.bounds.min.x,N=T.bounds.max.y-T.bounds.min.y,z=T.bounds.max.x-T.bounds.min.x,R={bodyA:A,pointA:{x:k*h,y:P*g},bodyB:T,pointB:{x:z*_,y:N*x}},F=l.extend(R,y);o.addConstraint(d,a.create(F))}return d.label+=" Chain",d},s.mesh=function(d,h,g,_,x){var y=d.bodies,M,b,A,T,P;for(M=0;M<g;M++){for(b=1;b<h;b++)A=y[b-1+M*h],T=y[b+M*h],o.addConstraint(d,a.create(l.extend({bodyA:A,bodyB:T},x)));if(M>0)for(b=0;b<h;b++)A=y[b+(M-1)*h],T=y[b+M*h],o.addConstraint(d,a.create(l.extend({bodyA:A,bodyB:T},x))),_&&b>0&&(P=y[b-1+(M-1)*h],o.addConstraint(d,a.create(l.extend({bodyA:P,bodyB:T},x)))),_&&b<h-1&&(P=y[b+1+(M-1)*h],o.addConstraint(d,a.create(l.extend({bodyA:P,bodyB:T},x))))}return d.label+=" Mesh",d},s.pyramid=function(d,h,g,_,x,y,M){return s.stack(d,h,g,_,x,y,function(b,A,T,P,k,N){var z=Math.min(_,Math.ceil(g/2)),R=k?k.bounds.max.x-k.bounds.min.x:0;if(!(P>z)){P=z-P;var F=P,V=g-1-P;if(!(T<F||T>V)){N===1&&c.translate(k,{x:(T+(g%2===1?1:-1))*R,y:0});var K=k?T*R:0;return M(d+K+T*x,A,T,P,k,N)}}})},s.newtonsCradle=function(d,h,g,_,x){for(var y=o.create({label:"Newtons Cradle"}),M=0;M<g;M++){var b=1.9,A=u.circle(d+M*(_*b),h+x,_,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),T=a.create({pointA:{x:d+M*(_*b),y:h},bodyB:A});o.addBody(y,A),o.addConstraint(y,T)}return y},f(s,"newtonsCradle","Composites.newtonsCradle ➤ moved to newtonsCradle example"),s.car=function(d,h,g,_,x){var y=c.nextGroup(!0),M=20,b=-g*.5+M,A=g*.5-M,T=0,P=o.create({label:"Car"}),k=u.rectangle(d,h,g,_,{collisionFilter:{group:y},chamfer:{radius:_*.5},density:2e-4}),N=u.circle(d+b,h+T,x,{collisionFilter:{group:y},friction:.8}),z=u.circle(d+A,h+T,x,{collisionFilter:{group:y},friction:.8}),R=a.create({bodyB:k,pointB:{x:b,y:T},bodyA:N,stiffness:1,length:0}),F=a.create({bodyB:k,pointB:{x:A,y:T},bodyA:z,stiffness:1,length:0});return o.addBody(P,k),o.addBody(P,N),o.addBody(P,z),o.addConstraint(P,R),o.addConstraint(P,F),P},f(s,"car","Composites.car ➤ moved to car example"),s.softBody=function(d,h,g,_,x,y,M,b,A,T){A=l.extend({inertia:1/0},A),T=l.extend({stiffness:.2,render:{type:"line",anchors:!1}},T);var P=s.stack(d,h,g,_,x,y,function(k,N){return u.circle(k,N,b,A)});return s.mesh(P,g,_,M,T),P.label="Soft Body",P},f(s,"softBody","Composites.softBody ➤ moved to softBody and cloth examples")})()},function(t,i,r){var s={};t.exports=s;var o=r(9),a=r(0),l=a.deprecated;(function(){s.create=function(c){var u={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return a.extend(u,c)},s.update=function(c,u,f,d){var h,g,_,x=f.world,y=c.buckets,M,b,A=!1;for(h=0;h<u.length;h++){var T=u[h];if(!(T.isSleeping&&!d)&&!(x.bounds&&(T.bounds.max.x<x.bounds.min.x||T.bounds.min.x>x.bounds.max.x||T.bounds.max.y<x.bounds.min.y||T.bounds.min.y>x.bounds.max.y))){var P=s._getRegion(c,T);if(!T.region||P.id!==T.region.id||d){(!T.region||d)&&(T.region=P);var k=s._regionUnion(P,T.region);for(g=k.startCol;g<=k.endCol;g++)for(_=k.startRow;_<=k.endRow;_++){b=s._getBucketId(g,_),M=y[b];var N=g>=P.startCol&&g<=P.endCol&&_>=P.startRow&&_<=P.endRow,z=g>=T.region.startCol&&g<=T.region.endCol&&_>=T.region.startRow&&_<=T.region.endRow;!N&&z&&z&&M&&s._bucketRemoveBody(c,M,T),(T.region===P||N&&!z||d)&&(M||(M=s._createBucket(y,b)),s._bucketAddBody(c,M,T))}T.region=P,A=!0}}}A&&(c.pairsList=s._createActivePairsList(c))},l(s,"update","Grid.update ➤ replaced by Matter.Detector"),s.clear=function(c){c.buckets={},c.pairs={},c.pairsList=[]},l(s,"clear","Grid.clear ➤ replaced by Matter.Detector"),s._regionUnion=function(c,u){var f=Math.min(c.startCol,u.startCol),d=Math.max(c.endCol,u.endCol),h=Math.min(c.startRow,u.startRow),g=Math.max(c.endRow,u.endRow);return s._createRegion(f,d,h,g)},s._getRegion=function(c,u){var f=u.bounds,d=Math.floor(f.min.x/c.bucketWidth),h=Math.floor(f.max.x/c.bucketWidth),g=Math.floor(f.min.y/c.bucketHeight),_=Math.floor(f.max.y/c.bucketHeight);return s._createRegion(d,h,g,_)},s._createRegion=function(c,u,f,d){return{id:c+","+u+","+f+","+d,startCol:c,endCol:u,startRow:f,endRow:d}},s._getBucketId=function(c,u){return"C"+c+"R"+u},s._createBucket=function(c,u){var f=c[u]=[];return f},s._bucketAddBody=function(c,u,f){var d=c.pairs,h=o.id,g=u.length,_;for(_=0;_<g;_++){var x=u[_];if(!(f.id===x.id||f.isStatic&&x.isStatic)){var y=h(f,x),M=d[y];M?M[2]+=1:d[y]=[f,x,1]}}u.push(f)},s._bucketRemoveBody=function(c,u,f){var d=c.pairs,h=o.id,g;u.splice(a.indexOf(u,f),1);var _=u.length;for(g=0;g<_;g++){var x=d[h(f,u[g])];x&&(x[2]-=1)}},s._createActivePairsList=function(c){var u,f=c.pairs,d=a.keys(f),h=d.length,g=[],_;for(_=0;_<h;_++)u=f[d[_]],u[2]>0?g.push(u):delete f[d[_]];return g}})()},function(t,i,r){var s={};t.exports=s;var o=r(3),a=r(7),l=r(14),c=r(5),u=r(13),f=r(10),d=r(6),h=r(0),g=r(1);(function(){s.create=function(_,x){var y=(_?_.mouse:null)||(x?x.mouse:null);y||(_&&_.render&&_.render.canvas?y=l.create(_.render.canvas):x&&x.element?y=l.create(x.element):(y=l.create(),h.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var M=f.create({label:"Mouse Constraint",pointA:y.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),b={type:"mouseConstraint",mouse:y,element:null,body:null,constraint:M,collisionFilter:{category:1,mask:4294967295,group:0}},A=h.extend(b,x);return c.on(_,"beforeUpdate",function(){var T=d.allBodies(_.world);s.update(A,T),s._triggerEvents(A)}),A},s.update=function(_,x){var y=_.mouse,M=_.constraint,b=_.body;if(y.button===0){if(M.bodyB)a.set(M.bodyB,!1),M.pointA=y.position;else for(var A=0;A<x.length;A++)if(b=x[A],g.contains(b.bounds,y.position)&&u.canCollide(b.collisionFilter,_.collisionFilter))for(var T=b.parts.length>1?1:0;T<b.parts.length;T++){var P=b.parts[T];if(o.contains(P.vertices,y.position)){M.pointA=y.position,M.bodyB=_.body=b,M.pointB={x:y.position.x-b.position.x,y:y.position.y-b.position.y},M.angleB=b.angle,a.set(b,!1),c.trigger(_,"startdrag",{mouse:y,body:b});break}}}else M.bodyB=_.body=null,M.pointB=null,b&&c.trigger(_,"enddrag",{mouse:y,body:b})},s._triggerEvents=function(_){var x=_.mouse,y=x.sourceEvents;y.mousemove&&c.trigger(_,"mousemove",{mouse:x}),y.mousedown&&c.trigger(_,"mousedown",{mouse:x}),y.mouseup&&c.trigger(_,"mouseup",{mouse:x}),l.clearSourceEvents(x)}})()},function(t,i,r){var s={};t.exports=s;var o=r(2),a=r(8),l=r(1),c=r(12),u=r(3);(function(){s.collides=function(f,d){for(var h=[],g=d.length,_=f.bounds,x=a.collides,y=l.overlaps,M=0;M<g;M++){var b=d[M],A=b.parts.length,T=A===1?0:1;if(y(b.bounds,_))for(var P=T;P<A;P++){var k=b.parts[P];if(y(k.bounds,_)){var N=x(k,f);if(N){h.push(N);break}}}}return h},s.ray=function(f,d,h,g){g=g||1e-100;for(var _=o.angle(d,h),x=o.magnitude(o.sub(d,h)),y=(h.x+d.x)*.5,M=(h.y+d.y)*.5,b=c.rectangle(y,M,x,g,{angle:_}),A=s.collides(b,f),T=0;T<A.length;T+=1){var P=A[T];P.body=P.bodyB=P.bodyA}return A},s.region=function(f,d,h){for(var g=[],_=0;_<f.length;_++){var x=f[_],y=l.overlaps(x.bounds,d);(y&&!h||!y&&h)&&g.push(x)}return g},s.point=function(f,d){for(var h=[],g=0;g<f.length;g++){var _=f[g];if(l.contains(_.bounds,d))for(var x=_.parts.length===1?0:1;x<_.parts.length;x++){var y=_.parts[x];if(l.contains(y.bounds,d)&&u.contains(y.vertices,d)){h.push(_);break}}}return h}})()},function(t,i,r){var s={};t.exports=s;var o=r(4),a=r(0),l=r(6),c=r(1),u=r(5),f=r(2),d=r(14);(function(){var h,g;typeof window<"u"&&(h=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(T){window.setTimeout(function(){T(a.now())},1e3/60)},g=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),s._goodFps=30,s._goodDelta=1e3/60,s.create=function(T){var P={engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!T.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},k=a.extend(P,T);return k.canvas&&(k.canvas.width=k.options.width||k.canvas.width,k.canvas.height=k.options.height||k.canvas.height),k.mouse=T.mouse,k.engine=T.engine,k.canvas=k.canvas||y(k.options.width,k.options.height),k.context=k.canvas.getContext("2d"),k.textures={},k.bounds=k.bounds||{min:{x:0,y:0},max:{x:k.canvas.width,y:k.canvas.height}},k.controller=s,k.options.showBroadphase=!1,k.options.pixelRatio!==1&&s.setPixelRatio(k,k.options.pixelRatio),a.isElement(k.element)&&k.element.appendChild(k.canvas),k},s.run=function(T){(function P(k){T.frameRequestId=h(P),_(T,k),s.world(T,k),(T.options.showStats||T.options.showDebug)&&s.stats(T,T.context,k),(T.options.showPerformance||T.options.showDebug)&&s.performance(T,T.context,k)})()},s.stop=function(T){g(T.frameRequestId)},s.setPixelRatio=function(T,P){var k=T.options,N=T.canvas;P==="auto"&&(P=M(N)),k.pixelRatio=P,N.setAttribute("data-pixel-ratio",P),N.width=k.width*P,N.height=k.height*P,N.style.width=k.width+"px",N.style.height=k.height+"px"},s.lookAt=function(T,P,k,N){N=typeof N<"u"?N:!0,P=a.isArray(P)?P:[P],k=k||{x:0,y:0};for(var z={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},R=0;R<P.length;R+=1){var F=P[R],V=F.bounds?F.bounds.min:F.min||F.position||F,K=F.bounds?F.bounds.max:F.max||F.position||F;V&&K&&(V.x<z.min.x&&(z.min.x=V.x),K.x>z.max.x&&(z.max.x=K.x),V.y<z.min.y&&(z.min.y=V.y),K.y>z.max.y&&(z.max.y=K.y))}var W=z.max.x-z.min.x+2*k.x,ne=z.max.y-z.min.y+2*k.y,re=T.canvas.height,de=T.canvas.width,X=de/re,$=W/ne,J=1,j=1;$>X?j=$/X:J=X/$,T.options.hasBounds=!0,T.bounds.min.x=z.min.x,T.bounds.max.x=z.min.x+W*J,T.bounds.min.y=z.min.y,T.bounds.max.y=z.min.y+ne*j,N&&(T.bounds.min.x+=W*.5-W*J*.5,T.bounds.max.x+=W*.5-W*J*.5,T.bounds.min.y+=ne*.5-ne*j*.5,T.bounds.max.y+=ne*.5-ne*j*.5),T.bounds.min.x-=k.x,T.bounds.max.x-=k.x,T.bounds.min.y-=k.y,T.bounds.max.y-=k.y,T.mouse&&(d.setScale(T.mouse,{x:(T.bounds.max.x-T.bounds.min.x)/T.canvas.width,y:(T.bounds.max.y-T.bounds.min.y)/T.canvas.height}),d.setOffset(T.mouse,T.bounds.min))},s.startViewTransform=function(T){var P=T.bounds.max.x-T.bounds.min.x,k=T.bounds.max.y-T.bounds.min.y,N=P/T.options.width,z=k/T.options.height;T.context.setTransform(T.options.pixelRatio/N,0,0,T.options.pixelRatio/z,0,0),T.context.translate(-T.bounds.min.x,-T.bounds.min.y)},s.endViewTransform=function(T){T.context.setTransform(T.options.pixelRatio,0,0,T.options.pixelRatio,0,0)},s.world=function(T,P){var k=a.now(),N=T.engine,z=N.world,R=T.canvas,F=T.context,V=T.options,K=T.timing,W=l.allBodies(z),ne=l.allConstraints(z),re=V.wireframes?V.wireframeBackground:V.background,de=[],X=[],$,J={timestamp:N.timing.timestamp};if(u.trigger(T,"beforeRender",J),T.currentBackground!==re&&A(T,re),F.globalCompositeOperation="source-in",F.fillStyle="transparent",F.fillRect(0,0,R.width,R.height),F.globalCompositeOperation="source-over",V.hasBounds){for($=0;$<W.length;$++){var j=W[$];c.overlaps(j.bounds,T.bounds)&&de.push(j)}for($=0;$<ne.length;$++){var se=ne[$],ve=se.bodyA,oe=se.bodyB,he=se.pointA,ye=se.pointB;ve&&(he=f.add(ve.position,se.pointA)),oe&&(ye=f.add(oe.position,se.pointB)),!(!he||!ye)&&(c.contains(T.bounds,he)||c.contains(T.bounds,ye))&&X.push(se)}s.startViewTransform(T),T.mouse&&(d.setScale(T.mouse,{x:(T.bounds.max.x-T.bounds.min.x)/T.options.width,y:(T.bounds.max.y-T.bounds.min.y)/T.options.height}),d.setOffset(T.mouse,T.bounds.min))}else X=ne,de=W,T.options.pixelRatio!==1&&T.context.setTransform(T.options.pixelRatio,0,0,T.options.pixelRatio,0,0);!V.wireframes||N.enableSleeping&&V.showSleeping?s.bodies(T,de,F):(V.showConvexHulls&&s.bodyConvexHulls(T,de,F),s.bodyWireframes(T,de,F)),V.showBounds&&s.bodyBounds(T,de,F),(V.showAxes||V.showAngleIndicator)&&s.bodyAxes(T,de,F),V.showPositions&&s.bodyPositions(T,de,F),V.showVelocity&&s.bodyVelocity(T,de,F),V.showIds&&s.bodyIds(T,de,F),V.showSeparations&&s.separations(T,N.pairs.list,F),V.showCollisions&&s.collisions(T,N.pairs.list,F),V.showVertexNumbers&&s.vertexNumbers(T,de,F),V.showMousePosition&&s.mousePosition(T,T.mouse,F),s.constraints(X,F),V.hasBounds&&s.endViewTransform(T),u.trigger(T,"afterRender",J),K.lastElapsed=a.now()-k},s.stats=function(T,P,k){for(var N=T.engine,z=N.world,R=l.allBodies(z),F=0,V=55,K=44,W=0,ne=0,re=0;re<R.length;re+=1)F+=R[re].parts.length;var de={Part:F,Body:R.length,Cons:l.allConstraints(z).length,Comp:l.allComposites(z).length,Pair:N.pairs.list.length};P.fillStyle="#0e0f19",P.fillRect(W,ne,V*5.5,K),P.font="12px Arial",P.textBaseline="top",P.textAlign="right";for(var X in de){var $=de[X];P.fillStyle="#aaa",P.fillText(X,W+V,ne+8),P.fillStyle="#eee",P.fillText($,W+V,ne+26),W+=V}},s.performance=function(T,P){var k=T.engine,N=T.timing,z=N.deltaHistory,R=N.elapsedHistory,F=N.timestampElapsedHistory,V=N.engineDeltaHistory,K=N.engineElapsedHistory,W=k.timing.lastDelta,ne=x(z),re=x(R),de=x(V),X=x(K),$=x(F),J=$/ne||0,j=1e3/ne||0,se=4,ve=12,oe=60,he=34,ye=10,Me=69;P.fillStyle="#0e0f19",P.fillRect(0,50,ve*4+oe*5+22,he),s.status(P,ye,Me,oe,se,z.length,Math.round(j)+" fps",j/s._goodFps,function(Pe){return z[Pe]/ne-1}),s.status(P,ye+ve+oe,Me,oe,se,V.length,W.toFixed(2)+" dt",s._goodDelta/W,function(Pe){return V[Pe]/de-1}),s.status(P,ye+(ve+oe)*2,Me,oe,se,K.length,X.toFixed(2)+" ut",1-X/s._goodFps,function(Pe){return K[Pe]/X-1}),s.status(P,ye+(ve+oe)*3,Me,oe,se,R.length,re.toFixed(2)+" rt",1-re/s._goodFps,function(Pe){return R[Pe]/re-1}),s.status(P,ye+(ve+oe)*4,Me,oe,se,F.length,J.toFixed(2)+" x",J*J*J,function(Pe){return(F[Pe]/z[Pe]/J||0)-1})},s.status=function(T,P,k,N,z,R,F,V,K){T.strokeStyle="#888",T.fillStyle="#444",T.lineWidth=1,T.fillRect(P,k+7,N,1),T.beginPath(),T.moveTo(P,k+7-z*a.clamp(.4*K(0),-2,2));for(var W=0;W<N;W+=1)T.lineTo(P+W,k+7-(W<R?z*a.clamp(.4*K(W),-2,2):0));T.stroke(),T.fillStyle="hsl("+a.clamp(25+95*V,0,120)+",100%,60%)",T.fillRect(P,k-7,4,4),T.font="12px Arial",T.textBaseline="middle",T.textAlign="right",T.fillStyle="#eee",T.fillText(F,P+N,k-5)},s.constraints=function(T,P){for(var k=P,N=0;N<T.length;N++){var z=T[N];if(!(!z.render.visible||!z.pointA||!z.pointB)){var R=z.bodyA,F=z.bodyB,V,K;if(R?V=f.add(R.position,z.pointA):V=z.pointA,z.render.type==="pin")k.beginPath(),k.arc(V.x,V.y,3,0,2*Math.PI),k.closePath();else{if(F?K=f.add(F.position,z.pointB):K=z.pointB,k.beginPath(),k.moveTo(V.x,V.y),z.render.type==="spring")for(var W=f.sub(K,V),ne=f.perp(f.normalise(W)),re=Math.ceil(a.clamp(z.length/5,12,20)),de,X=1;X<re;X+=1)de=X%2===0?1:-1,k.lineTo(V.x+W.x*(X/re)+ne.x*de*4,V.y+W.y*(X/re)+ne.y*de*4);k.lineTo(K.x,K.y)}z.render.lineWidth&&(k.lineWidth=z.render.lineWidth,k.strokeStyle=z.render.strokeStyle,k.stroke()),z.render.anchors&&(k.fillStyle=z.render.strokeStyle,k.beginPath(),k.arc(V.x,V.y,3,0,2*Math.PI),k.arc(K.x,K.y,3,0,2*Math.PI),k.closePath(),k.fill())}}},s.bodies=function(T,P,k){var N=k;T.engine;var z=T.options,R=z.showInternalEdges||!z.wireframes,F,V,K,W;for(K=0;K<P.length;K++)if(F=P[K],!!F.render.visible){for(W=F.parts.length>1?1:0;W<F.parts.length;W++)if(V=F.parts[W],!!V.render.visible){if(z.showSleeping&&F.isSleeping?N.globalAlpha=.5*V.render.opacity:V.render.opacity!==1&&(N.globalAlpha=V.render.opacity),V.render.sprite&&V.render.sprite.texture&&!z.wireframes){var ne=V.render.sprite,re=b(T,ne.texture);N.translate(V.position.x,V.position.y),N.rotate(V.angle),N.drawImage(re,re.width*-ne.xOffset*ne.xScale,re.height*-ne.yOffset*ne.yScale,re.width*ne.xScale,re.height*ne.yScale),N.rotate(-V.angle),N.translate(-V.position.x,-V.position.y)}else{if(V.circleRadius)N.beginPath(),N.arc(V.position.x,V.position.y,V.circleRadius,0,2*Math.PI);else{N.beginPath(),N.moveTo(V.vertices[0].x,V.vertices[0].y);for(var de=1;de<V.vertices.length;de++)!V.vertices[de-1].isInternal||R?N.lineTo(V.vertices[de].x,V.vertices[de].y):N.moveTo(V.vertices[de].x,V.vertices[de].y),V.vertices[de].isInternal&&!R&&N.moveTo(V.vertices[(de+1)%V.vertices.length].x,V.vertices[(de+1)%V.vertices.length].y);N.lineTo(V.vertices[0].x,V.vertices[0].y),N.closePath()}z.wireframes?(N.lineWidth=1,N.strokeStyle="#bbb",N.stroke()):(N.fillStyle=V.render.fillStyle,V.render.lineWidth&&(N.lineWidth=V.render.lineWidth,N.strokeStyle=V.render.strokeStyle,N.stroke()),N.fill())}N.globalAlpha=1}}},s.bodyWireframes=function(T,P,k){var N=k,z=T.options.showInternalEdges,R,F,V,K,W;for(N.beginPath(),V=0;V<P.length;V++)if(R=P[V],!!R.render.visible)for(W=R.parts.length>1?1:0;W<R.parts.length;W++){for(F=R.parts[W],N.moveTo(F.vertices[0].x,F.vertices[0].y),K=1;K<F.vertices.length;K++)!F.vertices[K-1].isInternal||z?N.lineTo(F.vertices[K].x,F.vertices[K].y):N.moveTo(F.vertices[K].x,F.vertices[K].y),F.vertices[K].isInternal&&!z&&N.moveTo(F.vertices[(K+1)%F.vertices.length].x,F.vertices[(K+1)%F.vertices.length].y);N.lineTo(F.vertices[0].x,F.vertices[0].y)}N.lineWidth=1,N.strokeStyle="#bbb",N.stroke()},s.bodyConvexHulls=function(T,P,k){var N=k,z,R,F;for(N.beginPath(),R=0;R<P.length;R++)if(z=P[R],!(!z.render.visible||z.parts.length===1)){for(N.moveTo(z.vertices[0].x,z.vertices[0].y),F=1;F<z.vertices.length;F++)N.lineTo(z.vertices[F].x,z.vertices[F].y);N.lineTo(z.vertices[0].x,z.vertices[0].y)}N.lineWidth=1,N.strokeStyle="rgba(255,255,255,0.2)",N.stroke()},s.vertexNumbers=function(T,P,k){var N=k,z,R,F;for(z=0;z<P.length;z++){var V=P[z].parts;for(F=V.length>1?1:0;F<V.length;F++){var K=V[F];for(R=0;R<K.vertices.length;R++)N.fillStyle="rgba(255,255,255,0.2)",N.fillText(z+"_"+R,K.position.x+(K.vertices[R].x-K.position.x)*.8,K.position.y+(K.vertices[R].y-K.position.y)*.8)}}},s.mousePosition=function(T,P,k){var N=k;N.fillStyle="rgba(255,255,255,0.8)",N.fillText(P.position.x+"  "+P.position.y,P.position.x+5,P.position.y-5)},s.bodyBounds=function(T,P,k){var N=k;T.engine;var z=T.options;N.beginPath();for(var R=0;R<P.length;R++){var F=P[R];if(F.render.visible)for(var V=P[R].parts,K=V.length>1?1:0;K<V.length;K++){var W=V[K];N.rect(W.bounds.min.x,W.bounds.min.y,W.bounds.max.x-W.bounds.min.x,W.bounds.max.y-W.bounds.min.y)}}z.wireframes?N.strokeStyle="rgba(255,255,255,0.08)":N.strokeStyle="rgba(0,0,0,0.1)",N.lineWidth=1,N.stroke()},s.bodyAxes=function(T,P,k){var N=k;T.engine;var z=T.options,R,F,V,K;for(N.beginPath(),F=0;F<P.length;F++){var W=P[F],ne=W.parts;if(W.render.visible)if(z.showAxes)for(V=ne.length>1?1:0;V<ne.length;V++)for(R=ne[V],K=0;K<R.axes.length;K++){var re=R.axes[K];N.moveTo(R.position.x,R.position.y),N.lineTo(R.position.x+re.x*20,R.position.y+re.y*20)}else for(V=ne.length>1?1:0;V<ne.length;V++)for(R=ne[V],K=0;K<R.axes.length;K++)N.moveTo(R.position.x,R.position.y),N.lineTo((R.vertices[0].x+R.vertices[R.vertices.length-1].x)/2,(R.vertices[0].y+R.vertices[R.vertices.length-1].y)/2)}z.wireframes?(N.strokeStyle="indianred",N.lineWidth=1):(N.strokeStyle="rgba(255, 255, 255, 0.4)",N.globalCompositeOperation="overlay",N.lineWidth=2),N.stroke(),N.globalCompositeOperation="source-over"},s.bodyPositions=function(T,P,k){var N=k;T.engine;var z=T.options,R,F,V,K;for(N.beginPath(),V=0;V<P.length;V++)if(R=P[V],!!R.render.visible)for(K=0;K<R.parts.length;K++)F=R.parts[K],N.arc(F.position.x,F.position.y,3,0,2*Math.PI,!1),N.closePath();for(z.wireframes?N.fillStyle="indianred":N.fillStyle="rgba(0,0,0,0.5)",N.fill(),N.beginPath(),V=0;V<P.length;V++)R=P[V],R.render.visible&&(N.arc(R.positionPrev.x,R.positionPrev.y,2,0,2*Math.PI,!1),N.closePath());N.fillStyle="rgba(255,165,0,0.8)",N.fill()},s.bodyVelocity=function(T,P,k){var N=k;N.beginPath();for(var z=0;z<P.length;z++){var R=P[z];if(R.render.visible){var F=o.getVelocity(R);N.moveTo(R.position.x,R.position.y),N.lineTo(R.position.x+F.x,R.position.y+F.y)}}N.lineWidth=3,N.strokeStyle="cornflowerblue",N.stroke()},s.bodyIds=function(T,P,k){var N=k,z,R;for(z=0;z<P.length;z++)if(P[z].render.visible){var F=P[z].parts;for(R=F.length>1?1:0;R<F.length;R++){var V=F[R];N.font="12px Arial",N.fillStyle="rgba(255,255,255,0.5)",N.fillText(V.id,V.position.x+10,V.position.y-10)}}},s.collisions=function(T,P,k){var N=k,z=T.options,R,F,V,K;for(N.beginPath(),V=0;V<P.length;V++)if(R=P[V],!!R.isActive)for(F=R.collision,K=0;K<R.activeContacts.length;K++){var W=R.activeContacts[K],ne=W.vertex;N.rect(ne.x-1.5,ne.y-1.5,3.5,3.5)}for(z.wireframes?N.fillStyle="rgba(255,255,255,0.7)":N.fillStyle="orange",N.fill(),N.beginPath(),V=0;V<P.length;V++)if(R=P[V],!!R.isActive&&(F=R.collision,R.activeContacts.length>0)){var re=R.activeContacts[0].vertex.x,de=R.activeContacts[0].vertex.y;R.activeContacts.length===2&&(re=(R.activeContacts[0].vertex.x+R.activeContacts[1].vertex.x)/2,de=(R.activeContacts[0].vertex.y+R.activeContacts[1].vertex.y)/2),F.bodyB===F.supports[0].body||F.bodyA.isStatic===!0?N.moveTo(re-F.normal.x*8,de-F.normal.y*8):N.moveTo(re+F.normal.x*8,de+F.normal.y*8),N.lineTo(re,de)}z.wireframes?N.strokeStyle="rgba(255,165,0,0.7)":N.strokeStyle="orange",N.lineWidth=1,N.stroke()},s.separations=function(T,P,k){var N=k,z=T.options,R,F,V,K,W;for(N.beginPath(),W=0;W<P.length;W++)if(R=P[W],!!R.isActive){F=R.collision,V=F.bodyA,K=F.bodyB;var ne=1;!K.isStatic&&!V.isStatic&&(ne=.5),K.isStatic&&(ne=0),N.moveTo(K.position.x,K.position.y),N.lineTo(K.position.x-F.penetration.x*ne,K.position.y-F.penetration.y*ne),ne=1,!K.isStatic&&!V.isStatic&&(ne=.5),V.isStatic&&(ne=0),N.moveTo(V.position.x,V.position.y),N.lineTo(V.position.x+F.penetration.x*ne,V.position.y+F.penetration.y*ne)}z.wireframes?N.strokeStyle="rgba(255,165,0,0.5)":N.strokeStyle="orange",N.stroke()},s.inspector=function(T,P){T.engine;var k=T.selected,N=T.render,z=N.options,R;if(z.hasBounds){var F=N.bounds.max.x-N.bounds.min.x,V=N.bounds.max.y-N.bounds.min.y,K=F/N.options.width,W=V/N.options.height;P.scale(1/K,1/W),P.translate(-N.bounds.min.x,-N.bounds.min.y)}for(var ne=0;ne<k.length;ne++){var re=k[ne].data;switch(P.translate(.5,.5),P.lineWidth=1,P.strokeStyle="rgba(255,165,0,0.9)",P.setLineDash([1,2]),re.type){case"body":R=re.bounds,P.beginPath(),P.rect(Math.floor(R.min.x-3),Math.floor(R.min.y-3),Math.floor(R.max.x-R.min.x+6),Math.floor(R.max.y-R.min.y+6)),P.closePath(),P.stroke();break;case"constraint":var de=re.pointA;re.bodyA&&(de=re.pointB),P.beginPath(),P.arc(de.x,de.y,10,0,2*Math.PI),P.closePath(),P.stroke();break}P.setLineDash([]),P.translate(-.5,-.5)}T.selectStart!==null&&(P.translate(.5,.5),P.lineWidth=1,P.strokeStyle="rgba(255,165,0,0.6)",P.fillStyle="rgba(255,165,0,0.1)",R=T.selectBounds,P.beginPath(),P.rect(Math.floor(R.min.x),Math.floor(R.min.y),Math.floor(R.max.x-R.min.x),Math.floor(R.max.y-R.min.y)),P.closePath(),P.stroke(),P.fill(),P.translate(-.5,-.5)),z.hasBounds&&P.setTransform(1,0,0,1,0,0)};var _=function(T,P){var k=T.engine,N=T.timing,z=N.historySize,R=k.timing.timestamp;N.delta=P-N.lastTime||s._goodDelta,N.lastTime=P,N.timestampElapsed=R-N.lastTimestamp||0,N.lastTimestamp=R,N.deltaHistory.unshift(N.delta),N.deltaHistory.length=Math.min(N.deltaHistory.length,z),N.engineDeltaHistory.unshift(k.timing.lastDelta),N.engineDeltaHistory.length=Math.min(N.engineDeltaHistory.length,z),N.timestampElapsedHistory.unshift(N.timestampElapsed),N.timestampElapsedHistory.length=Math.min(N.timestampElapsedHistory.length,z),N.engineElapsedHistory.unshift(k.timing.lastElapsed),N.engineElapsedHistory.length=Math.min(N.engineElapsedHistory.length,z),N.elapsedHistory.unshift(N.lastElapsed),N.elapsedHistory.length=Math.min(N.elapsedHistory.length,z)},x=function(T){for(var P=0,k=0;k<T.length;k+=1)P+=T[k];return P/T.length||0},y=function(T,P){var k=document.createElement("canvas");return k.width=T,k.height=P,k.oncontextmenu=function(){return!1},k.onselectstart=function(){return!1},k},M=function(T){var P=T.getContext("2d"),k=window.devicePixelRatio||1,N=P.webkitBackingStorePixelRatio||P.mozBackingStorePixelRatio||P.msBackingStorePixelRatio||P.oBackingStorePixelRatio||P.backingStorePixelRatio||1;return k/N},b=function(T,P){var k=T.textures[P];return k||(k=T.textures[P]=new Image,k.src=P,k)},A=function(T,P){var k=P;/(jpg|gif|png)$/.test(P)&&(k="url("+P+")"),T.canvas.style.background=k,T.canvas.style.backgroundSize="contain",T.currentBackground=P}})()},function(t,i,r){var s={};t.exports=s;var o=r(5),a=r(17),l=r(0);(function(){var c,u;if(typeof window<"u"&&(c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,u=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!c){var f;c=function(d){f=setTimeout(function(){d(l.now())},1e3/60)},u=function(){clearTimeout(f)}}s.create=function(d){var h={fps:60,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,frameRequestId:null,isFixed:!1,enabled:!0},g=l.extend(h,d);return g.delta=g.delta||1e3/g.fps,g.deltaMin=g.deltaMin||1e3/g.fps,g.deltaMax=g.deltaMax||1e3/(g.fps*.5),g.fps=1e3/g.delta,g},s.run=function(d,h){return typeof d.positionIterations<"u"&&(h=d,d=s.create()),function g(_){d.frameRequestId=c(g),_&&d.enabled&&s.tick(d,h,_)}(),d},s.tick=function(d,h,g){var _=h.timing,x;d.isFixed?x=d.delta:(x=g-d.timePrev||d.delta,d.timePrev=g,d.deltaHistory.push(x),d.deltaHistory=d.deltaHistory.slice(-d.deltaSampleSize),x=Math.min.apply(null,d.deltaHistory),x=x<d.deltaMin?d.deltaMin:x,x=x>d.deltaMax?d.deltaMax:x,d.delta=x);var y={timestamp:_.timestamp};o.trigger(d,"beforeTick",y),d.frameCounter+=1,g-d.counterTimestamp>=1e3&&(d.fps=d.frameCounter*((g-d.counterTimestamp)/1e3),d.counterTimestamp=g,d.frameCounter=0),o.trigger(d,"tick",y),o.trigger(d,"beforeUpdate",y),a.update(h,x),o.trigger(d,"afterUpdate",y),o.trigger(d,"afterTick",y)},s.stop=function(d){u(d.frameRequestId)},s.start=function(d,h){s.run(d,h)}})()},function(t,i,r){var s={};t.exports=s;var o=r(8),a=r(0),l=a.deprecated;(function(){s.collides=function(c,u){return o.collides(c,u)},l(s,"collides","SAT.collides ➤ replaced by Collision.collides")})()},function(t,i,r){var s={};t.exports=s,r(1);var o=r(0);(function(){s.pathToVertices=function(a,l){typeof window<"u"&&!("SVGPathSeg"in window)&&o.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var c,u,f,d,h,g,_,x,y,M,b=[],A,T,P=0,k=0,N=0;l=l||15;var z=function(F,V,K){var W=K%2===1&&K>1;if(!y||F!=y.x||V!=y.y){y&&W?(A=y.x,T=y.y):(A=0,T=0);var ne={x:A+F,y:T+V};(W||!y)&&(y=ne),b.push(ne),k=A+F,N=T+V}},R=function(F){var V=F.pathSegTypeAsLetter.toUpperCase();if(V!=="Z"){switch(V){case"M":case"L":case"T":case"C":case"S":case"Q":k=F.x,N=F.y;break;case"H":k=F.x;break;case"V":N=F.y;break}z(k,N,F.pathSegType)}};for(s._svgPathToAbsolute(a),f=a.getTotalLength(),g=[],c=0;c<a.pathSegList.numberOfItems;c+=1)g.push(a.pathSegList.getItem(c));for(_=g.concat();P<f;){if(M=a.getPathSegAtLength(P),h=g[M],h!=x){for(;_.length&&_[0]!=h;)R(_.shift());x=h}switch(h.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":d=a.getPointAtLength(P),z(d.x,d.y,0);break}P+=l}for(c=0,u=_.length;c<u;++c)R(_[c]);return b},s._svgPathToAbsolute=function(a){for(var l,c,u,f,d,h,g=a.pathSegList,_=0,x=0,y=g.numberOfItems,M=0;M<y;++M){var b=g.getItem(M),A=b.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(A))"x"in b&&(_=b.x),"y"in b&&(x=b.y);else switch("x1"in b&&(u=_+b.x1),"x2"in b&&(d=_+b.x2),"y1"in b&&(f=x+b.y1),"y2"in b&&(h=x+b.y2),"x"in b&&(_+=b.x),"y"in b&&(x+=b.y),A){case"m":g.replaceItem(a.createSVGPathSegMovetoAbs(_,x),M);break;case"l":g.replaceItem(a.createSVGPathSegLinetoAbs(_,x),M);break;case"h":g.replaceItem(a.createSVGPathSegLinetoHorizontalAbs(_),M);break;case"v":g.replaceItem(a.createSVGPathSegLinetoVerticalAbs(x),M);break;case"c":g.replaceItem(a.createSVGPathSegCurvetoCubicAbs(_,x,u,f,d,h),M);break;case"s":g.replaceItem(a.createSVGPathSegCurvetoCubicSmoothAbs(_,x,d,h),M);break;case"q":g.replaceItem(a.createSVGPathSegCurvetoQuadraticAbs(_,x,u,f),M);break;case"t":g.replaceItem(a.createSVGPathSegCurvetoQuadraticSmoothAbs(_,x),M);break;case"a":g.replaceItem(a.createSVGPathSegArcAbs(_,x,b.r1,b.r2,b.angle,b.largeArcFlag,b.sweepFlag),M);break;case"z":case"Z":_=l,x=c;break}(A=="M"||A=="m")&&(l=_,c=x)}}})()},function(t,i,r){var s={};t.exports=s;var o=r(6);r(0),function(){s.create=o.create,s.add=o.add,s.remove=o.remove,s.clear=o.clear,s.addComposite=o.addComposite,s.addBody=o.addBody,s.addConstraint=o.addConstraint}()}])})})(XE);var nD=XE.exports;const Ds=E3(nD);var C4={exports:{}},px={exports:{}},mx,g5;function iD(){if(g5)return mx;g5=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return mx=n,mx}var gx,v5;function rD(){if(v5)return gx;v5=1;var n=iD();function e(){}function t(){}return t.resetWarningCache=e,gx=function(){function i(o,a,l,c,u,f){if(f!==n){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}i.isRequired=i;function r(){return i}var s={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},gx}var y5;function sD(){return y5||(y5=1,px.exports=rD()()),px.exports}var vx={exports:{}},x5;function oD(){return x5||(x5=1,function(n,e){(function(i,r){n.exports=r()})(typeof self<"u"?self:y0,function(){return function(){var t={};(function(){t.d=function(S,v){for(var w in v)t.o(v,w)&&!t.o(S,w)&&Object.defineProperty(S,w,{enumerable:!0,get:v[w]})}})(),function(){t.o=function(S,v){return Object.prototype.hasOwnProperty.call(S,v)}}();var i={};t.d(i,{default:function(){return Eh}});class r{constructor(v,w){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;let C="KaTeX parse error: "+v,I,H;const q=w&&w.loc;if(q&&q.start<=q.end){const ce=q.lexer.input;I=q.start,H=q.end,I===ce.length?C+=" at end of input: ":C+=" at position "+(I+1)+": ";const _e=ce.slice(I,H).replace(/[^]/g,"$&̲");let Ae;I>15?Ae="…"+ce.slice(I-15,I):Ae=ce.slice(0,I);let Le;H+15<ce.length?Le=ce.slice(H,H+15)+"…":Le=ce.slice(H),C+=Ae+_e+Le}const ee=new Error(C);return ee.name="ParseError",ee.__proto__=r.prototype,ee.position=I,I!=null&&H!=null&&(ee.length=H-I),ee.rawMessage=v,ee}}r.prototype.__proto__=Error.prototype;var s=r;const o=function(S,v){return S.indexOf(v)!==-1},a=function(S,v){return S===void 0?v:S},l=/([A-Z])/g,c=function(S){return S.replace(l,"-$1").toLowerCase()},u={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},f=/[&><"']/g;function d(S){return String(S).replace(f,v=>u[v])}const h=function(S){return S.type==="ordgroup"||S.type==="color"?S.body.length===1?h(S.body[0]):S:S.type==="font"?h(S.body):S},g=function(S){const v=h(S);return v.type==="mathord"||v.type==="textord"||v.type==="atom"},_=function(S){if(!S)throw new Error("Expected non-null, but got "+String(S));return S};var y={contains:o,deflt:a,escape:d,hyphenate:c,getBaseElem:h,isCharacterBox:g,protocolFromUrl:function(S){const v=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(S);return v?v[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(v[1])?null:v[1].toLowerCase():"_relative"}};const M={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:S=>"#"+S},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(S,v)=>(v.push(S),v)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:S=>Math.max(0,S),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:S=>Math.max(0,S),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:S=>Math.max(0,S),cli:"-e, --max-expand <n>",cliProcessor:S=>S==="Infinity"?1/0:parseInt(S)},globalGroup:{type:"boolean",cli:!1}};function b(S){if(S.default)return S.default;const v=S.type,w=Array.isArray(v)?v[0]:v;if(typeof w!="string")return w.enum[0];switch(w){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class A{constructor(v){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,v=v||{};for(const w in M)if(M.hasOwnProperty(w)){const C=M[w];this[w]=v[w]!==void 0?C.processor?C.processor(v[w]):v[w]:b(C)}}reportNonstrict(v,w,C){let I=this.strict;if(typeof I=="function"&&(I=I(v,w,C)),!(!I||I==="ignore")){if(I===!0||I==="error")throw new s("LaTeX-incompatible input and strict mode is set to 'error': "+(w+" ["+v+"]"),C);I==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(w+" ["+v+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+I+"': "+w+" ["+v+"]"))}}useStrictBehavior(v,w,C){let I=this.strict;if(typeof I=="function")try{I=I(v,w,C)}catch{I="error"}return!I||I==="ignore"?!1:I===!0||I==="error"?!0:I==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(w+" ["+v+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+I+"': "+w+" ["+v+"]")),!1)}isTrusted(v){if(v.url&&!v.protocol){const C=y.protocolFromUrl(v.url);if(C==null)return!1;v.protocol=C}return!!(typeof this.trust=="function"?this.trust(v):this.trust)}}class T{constructor(v,w,C){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=v,this.size=w,this.cramped=C}sup(){return W[ne[this.id]]}sub(){return W[re[this.id]]}fracNum(){return W[de[this.id]]}fracDen(){return W[X[this.id]]}cramp(){return W[$[this.id]]}text(){return W[J[this.id]]}isTight(){return this.size>=2}}const P=0,k=1,N=2,z=3,R=4,F=5,V=6,K=7,W=[new T(P,0,!1),new T(k,0,!0),new T(N,1,!1),new T(z,1,!0),new T(R,2,!1),new T(F,2,!0),new T(V,3,!1),new T(K,3,!0)],ne=[R,F,R,F,V,K,V,K],re=[F,F,F,F,K,K,K,K],de=[N,z,R,F,V,K,V,K],X=[z,z,F,F,K,K,K,K],$=[k,k,z,z,F,F,K,K],J=[P,k,N,z,N,z,N,z];var j={DISPLAY:W[P],TEXT:W[N],SCRIPT:W[R],SCRIPTSCRIPT:W[V]};const se=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function ve(S){for(let v=0;v<se.length;v++){const w=se[v];for(let C=0;C<w.blocks.length;C++){const I=w.blocks[C];if(S>=I[0]&&S<=I[1])return w.name}}return null}const oe=[];se.forEach(S=>S.blocks.forEach(v=>oe.push(...v)));function he(S){for(let v=0;v<oe.length;v+=2)if(S>=oe[v]&&S<=oe[v+1])return!0;return!1}const ye=80,Me=function(S,v){return"M95,"+(622+S+v)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+S/2.075+" -"+S+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+S)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+S)+" "+v+"h400000v"+(40+S)+"h-400000z"},Pe=function(S,v){return"M263,"+(601+S+v)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+S/2.084+" -"+S+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+S)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+S)+" "+v+"h400000v"+(40+S)+"h-400000z"},Xe=function(S,v){return"M983 "+(10+S+v)+`
l`+S/3.13+" -"+S+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+S)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+S)+" "+v+"h400000v"+(40+S)+"h-400000z"},ht=function(S,v){return"M424,"+(2398+S+v)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+S/4.223+" -"+S+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+S)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+S)+" "+v+`
h400000v`+(40+S)+"h-400000z"},He=function(S,v){return"M473,"+(2713+S+v)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+S/5.298+" -"+S+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+S)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+S)+" "+v+"h400000v"+(40+S)+"H1017.7z"},ie=function(S){const v=S/2;return"M400000 "+S+" H0 L"+v+" 0 l65 45 L145 "+(S-80)+" H400000z"},je=function(S,v,w){const C=w-54-v-S;return"M702 "+(S+v)+"H400000"+(40+S)+`
H742v`+C+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+v+"H400000v"+(40+S)+"H742z"},ke=function(S,v,w){v=1e3*v;let C="";switch(S){case"sqrtMain":C=Me(v,ye);break;case"sqrtSize1":C=Pe(v,ye);break;case"sqrtSize2":C=Xe(v,ye);break;case"sqrtSize3":C=ht(v,ye);break;case"sqrtSize4":C=He(v,ye);break;case"sqrtTall":C=je(v,ye,w)}return C},We=function(S,v){switch(S){case"⎜":return"M291 0 H417 V"+v+" H291z M291 0 H417 V"+v+" H291z";case"∣":return"M145 0 H188 V"+v+" H145z M145 0 H188 V"+v+" H145z";case"∥":return"M145 0 H188 V"+v+" H145z M145 0 H188 V"+v+" H145z"+("M367 0 H410 V"+v+" H367z M367 0 H410 V"+v+" H367z");case"⎟":return"M457 0 H583 V"+v+" H457z M457 0 H583 V"+v+" H457z";case"⎢":return"M319 0 H403 V"+v+" H319z M319 0 H403 V"+v+" H319z";case"⎥":return"M263 0 H347 V"+v+" H263z M263 0 H347 V"+v+" H263z";case"⎪":return"M384 0 H504 V"+v+" H384z M384 0 H504 V"+v+" H384z";case"⏐":return"M312 0 H355 V"+v+" H312z M312 0 H355 V"+v+" H312z";case"‖":return"M257 0 H300 V"+v+" H257z M257 0 H300 V"+v+" H257z"+("M478 0 H521 V"+v+" H478z M478 0 H521 V"+v+" H478z");default:return""}},Fe={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},it=function(S,v){switch(S){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+v+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+v+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+v+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+v+" v1759 h84z";case"vert":return"M145 15 v585 v"+v+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-v+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+v+" v585 h43z";case"doublevert":return"M145 15 v585 v"+v+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-v+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+v+` v585 h43z
M367 15 v585 v`+v+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-v+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+v+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+v+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+v+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+v+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+v+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+v+` v602 h84z
M403 1759 V0 H319 V1759 v`+v+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+v+` v602 h84z
M347 1759 V0 h-84 V1759 v`+v+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(v+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(v+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(v+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(v+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class Ue{constructor(v){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=v,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(v){return y.contains(this.classes,v)}toNode(){const v=document.createDocumentFragment();for(let w=0;w<this.children.length;w++)v.appendChild(this.children[w].toNode());return v}toMarkup(){let v="";for(let w=0;w<this.children.length;w++)v+=this.children[w].toMarkup();return v}toText(){const v=w=>w.toText();return this.children.map(v).join("")}}var Ye={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}};const ot={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},Q={Å:"A",Ð:"D",Þ:"o",å:"a",ð:"d",þ:"o",А:"A",Б:"B",В:"B",Г:"F",Д:"A",Е:"E",Ж:"K",З:"3",И:"N",Й:"N",К:"K",Л:"N",М:"M",Н:"H",О:"O",П:"N",Р:"P",С:"C",Т:"T",У:"y",Ф:"O",Х:"X",Ц:"U",Ч:"h",Ш:"W",Щ:"W",Ъ:"B",Ы:"X",Ь:"B",Э:"3",Ю:"X",Я:"R",а:"a",б:"b",в:"a",г:"r",д:"y",е:"e",ж:"m",з:"e",и:"n",й:"n",к:"n",л:"n",м:"m",н:"n",о:"o",п:"n",р:"p",с:"c",т:"o",у:"y",ф:"b",х:"x",ц:"n",ч:"n",ш:"w",щ:"w",ъ:"a",ы:"m",ь:"a",э:"e",ю:"m",я:"r"};function Z(S,v){Ye[S]=v}function we(S,v,w){if(!Ye[v])throw new Error("Font metrics not found for font: "+v+".");let C=S.charCodeAt(0),I=Ye[v][C];if(!I&&S[0]in Q&&(C=Q[S[0]].charCodeAt(0),I=Ye[v][C]),!I&&w==="text"&&he(C)&&(I=Ye[v][77]),I)return{depth:I[0],height:I[1],italic:I[2],skew:I[3],width:I[4]}}const Ee={};function Ne(S){let v;if(S>=5?v=0:S>=3?v=1:v=2,!Ee[v]){const w=Ee[v]={cssEmPerMu:ot.quad[v]/18};for(const C in ot)ot.hasOwnProperty(C)&&(w[C]=ot[C][v])}return Ee[v]}const Ze=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],lt=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],ft=function(S,v){return v.size<2?S:Ze[S-1][v.size-1]};class qe{constructor(v){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=v.style,this.color=v.color,this.size=v.size||qe.BASESIZE,this.textSize=v.textSize||this.size,this.phantom=!!v.phantom,this.font=v.font||"",this.fontFamily=v.fontFamily||"",this.fontWeight=v.fontWeight||"",this.fontShape=v.fontShape||"",this.sizeMultiplier=lt[this.size-1],this.maxSize=v.maxSize,this.minRuleThickness=v.minRuleThickness,this._fontMetrics=void 0}extend(v){const w={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(const C in v)v.hasOwnProperty(C)&&(w[C]=v[C]);return new qe(w)}havingStyle(v){return this.style===v?this:this.extend({style:v,size:ft(this.textSize,v)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(v){return this.size===v&&this.textSize===v?this:this.extend({style:this.style.text(),size:v,textSize:v,sizeMultiplier:lt[v-1]})}havingBaseStyle(v){v=v||this.style.text();const w=ft(qe.BASESIZE,v);return this.size===w&&this.textSize===qe.BASESIZE&&this.style===v?this:this.extend({style:v,size:w})}havingBaseSizing(){let v;switch(this.style.id){case 4:case 5:v=3;break;case 6:case 7:v=1;break;default:v=6}return this.extend({style:this.style.text(),size:v})}withColor(v){return this.extend({color:v})}withPhantom(){return this.extend({phantom:!0})}withFont(v){return this.extend({font:v})}withTextFontFamily(v){return this.extend({fontFamily:v,font:""})}withTextFontWeight(v){return this.extend({fontWeight:v,font:""})}withTextFontShape(v){return this.extend({fontShape:v,font:""})}sizingClasses(v){return v.size!==this.size?["sizing","reset-size"+v.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==qe.BASESIZE?["sizing","reset-size"+this.size,"size"+qe.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=Ne(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}qe.BASESIZE=6;var st=qe;const St={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},nt={ex:!0,em:!0,mu:!0},Lt=function(S){return typeof S!="string"&&(S=S.unit),S in St||S in nt||S==="ex"},ct=function(S,v){let w;if(S.unit in St)w=St[S.unit]/v.fontMetrics().ptPerEm/v.sizeMultiplier;else if(S.unit==="mu")w=v.fontMetrics().cssEmPerMu;else{let C;if(v.style.isTight()?C=v.havingStyle(v.style.text()):C=v,S.unit==="ex")w=C.fontMetrics().xHeight;else if(S.unit==="em")w=C.fontMetrics().quad;else throw new s("Invalid unit: '"+S.unit+"'");C!==v&&(w*=C.sizeMultiplier/v.sizeMultiplier)}return Math.min(S.number*w,v.maxSize)},be=function(S){return+S.toFixed(4)+"em"},fe=function(S){return S.filter(v=>v).join(" ")},De=function(S,v,w){if(this.classes=S||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=w||{},v){v.style.isTight()&&this.classes.push("mtight");const C=v.getColor();C&&(this.style.color=C)}},mt=function(S){const v=document.createElement(S);v.className=fe(this.classes);for(const w in this.style)this.style.hasOwnProperty(w)&&(v.style[w]=this.style[w]);for(const w in this.attributes)this.attributes.hasOwnProperty(w)&&v.setAttribute(w,this.attributes[w]);for(let w=0;w<this.children.length;w++)v.appendChild(this.children[w].toNode());return v},pt=/[\s"'>/=\x00-\x1f]/,vt=function(S){let v="<"+S;this.classes.length&&(v+=' class="'+y.escape(fe(this.classes))+'"');let w="";for(const C in this.style)this.style.hasOwnProperty(C)&&(w+=y.hyphenate(C)+":"+this.style[C]+";");w&&(v+=' style="'+y.escape(w)+'"');for(const C in this.attributes)if(this.attributes.hasOwnProperty(C)){if(pt.test(C))throw new s("Invalid attribute name '"+C+"'");v+=" "+C+'="'+y.escape(this.attributes[C])+'"'}v+=">";for(let C=0;C<this.children.length;C++)v+=this.children[C].toMarkup();return v+="</"+S+">",v};class xe{constructor(v,w,C,I){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,De.call(this,v,C,I),this.children=w||[]}setAttribute(v,w){this.attributes[v]=w}hasClass(v){return y.contains(this.classes,v)}toNode(){return mt.call(this,"span")}toMarkup(){return vt.call(this,"span")}}class gt{constructor(v,w,C,I){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,De.call(this,w,I),this.children=C||[],this.setAttribute("href",v)}setAttribute(v,w){this.attributes[v]=w}hasClass(v){return y.contains(this.classes,v)}toNode(){return mt.call(this,"a")}toMarkup(){return vt.call(this,"a")}}class Re{constructor(v,w,C){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=w,this.src=v,this.classes=["mord"],this.style=C}hasClass(v){return y.contains(this.classes,v)}toNode(){const v=document.createElement("img");v.src=this.src,v.alt=this.alt,v.className="mord";for(const w in this.style)this.style.hasOwnProperty(w)&&(v.style[w]=this.style[w]);return v}toMarkup(){let v='<img src="'+y.escape(this.src)+'"'+(' alt="'+y.escape(this.alt)+'"'),w="";for(const C in this.style)this.style.hasOwnProperty(C)&&(w+=y.hyphenate(C)+":"+this.style[C]+";");return w&&(v+=' style="'+y.escape(w)+'"'),v+="'/>",v}}const et={î:"ı̂",ï:"ı̈",í:"ı́",ì:"ı̀"};class rt{constructor(v,w,C,I,H,q,ee,ce){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=v,this.height=w||0,this.depth=C||0,this.italic=I||0,this.skew=H||0,this.width=q||0,this.classes=ee||[],this.style=ce||{},this.maxFontSize=0;const _e=ve(this.text.charCodeAt(0));_e&&this.classes.push(_e+"_fallback"),/[îïíì]/.test(this.text)&&(this.text=et[this.text])}hasClass(v){return y.contains(this.classes,v)}toNode(){const v=document.createTextNode(this.text);let w=null;this.italic>0&&(w=document.createElement("span"),w.style.marginRight=be(this.italic)),this.classes.length>0&&(w=w||document.createElement("span"),w.className=fe(this.classes));for(const C in this.style)this.style.hasOwnProperty(C)&&(w=w||document.createElement("span"),w.style[C]=this.style[C]);return w?(w.appendChild(v),w):v}toMarkup(){let v=!1,w="<span";this.classes.length&&(v=!0,w+=' class="',w+=y.escape(fe(this.classes)),w+='"');let C="";this.italic>0&&(C+="margin-right:"+this.italic+"em;");for(const H in this.style)this.style.hasOwnProperty(H)&&(C+=y.hyphenate(H)+":"+this.style[H]+";");C&&(v=!0,w+=' style="'+y.escape(C)+'"');const I=y.escape(this.text);return v?(w+=">",w+=I,w+="</span>",w):I}}class wt{constructor(v,w){this.children=void 0,this.attributes=void 0,this.children=v||[],this.attributes=w||{}}toNode(){const w=document.createElementNS("http://www.w3.org/2000/svg","svg");for(const C in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,C)&&w.setAttribute(C,this.attributes[C]);for(let C=0;C<this.children.length;C++)w.appendChild(this.children[C].toNode());return w}toMarkup(){let v='<svg xmlns="http://www.w3.org/2000/svg"';for(const w in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,w)&&(v+=" "+w+'="'+y.escape(this.attributes[w])+'"');v+=">";for(let w=0;w<this.children.length;w++)v+=this.children[w].toMarkup();return v+="</svg>",v}}class _t{constructor(v,w){this.pathName=void 0,this.alternate=void 0,this.pathName=v,this.alternate=w}toNode(){const w=document.createElementNS("http://www.w3.org/2000/svg","path");return this.alternate?w.setAttribute("d",this.alternate):w.setAttribute("d",Fe[this.pathName]),w}toMarkup(){return this.alternate?'<path d="'+y.escape(this.alternate)+'"/>':'<path d="'+y.escape(Fe[this.pathName])+'"/>'}}class Ht{constructor(v){this.attributes=void 0,this.attributes=v||{}}toNode(){const w=document.createElementNS("http://www.w3.org/2000/svg","line");for(const C in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,C)&&w.setAttribute(C,this.attributes[C]);return w}toMarkup(){let v="<line";for(const w in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,w)&&(v+=" "+w+'="'+y.escape(this.attributes[w])+'"');return v+="/>",v}}function an(S){if(S instanceof rt)return S;throw new Error("Expected symbolNode but got "+String(S)+".")}function Gt(S){if(S instanceof xe)return S;throw new Error("Expected span<HtmlDomNode> but got "+String(S)+".")}const hn={bin:1,close:1,inner:1,open:1,punct:1,rel:1},Kn={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},Gi={math:{},text:{}};var fn=Gi;function D(S,v,w,C,I,H){Gi[S][I]={font:v,group:w,replace:C},H&&C&&(Gi[S][C]=Gi[S][I])}const B="math",tt="text",Y="main",me="ams",kn="accent-token",Et="bin",Mi="close",le="inner",Se="mathord",Ie="op-token",Be="open",ze="punct",ae="rel",Rt="spacing",ge="textord";D(B,Y,ae,"≡","\\equiv",!0),D(B,Y,ae,"≺","\\prec",!0),D(B,Y,ae,"≻","\\succ",!0),D(B,Y,ae,"∼","\\sim",!0),D(B,Y,ae,"⊥","\\perp"),D(B,Y,ae,"⪯","\\preceq",!0),D(B,Y,ae,"⪰","\\succeq",!0),D(B,Y,ae,"≃","\\simeq",!0),D(B,Y,ae,"∣","\\mid",!0),D(B,Y,ae,"≪","\\ll",!0),D(B,Y,ae,"≫","\\gg",!0),D(B,Y,ae,"≍","\\asymp",!0),D(B,Y,ae,"∥","\\parallel"),D(B,Y,ae,"⋈","\\bowtie",!0),D(B,Y,ae,"⌣","\\smile",!0),D(B,Y,ae,"⊑","\\sqsubseteq",!0),D(B,Y,ae,"⊒","\\sqsupseteq",!0),D(B,Y,ae,"≐","\\doteq",!0),D(B,Y,ae,"⌢","\\frown",!0),D(B,Y,ae,"∋","\\ni",!0),D(B,Y,ae,"∝","\\propto",!0),D(B,Y,ae,"⊢","\\vdash",!0),D(B,Y,ae,"⊣","\\dashv",!0),D(B,Y,ae,"∋","\\owns"),D(B,Y,ze,".","\\ldotp"),D(B,Y,ze,"⋅","\\cdotp"),D(B,Y,ge,"#","\\#"),D(tt,Y,ge,"#","\\#"),D(B,Y,ge,"&","\\&"),D(tt,Y,ge,"&","\\&"),D(B,Y,ge,"ℵ","\\aleph",!0),D(B,Y,ge,"∀","\\forall",!0),D(B,Y,ge,"ℏ","\\hbar",!0),D(B,Y,ge,"∃","\\exists",!0),D(B,Y,ge,"∇","\\nabla",!0),D(B,Y,ge,"♭","\\flat",!0),D(B,Y,ge,"ℓ","\\ell",!0),D(B,Y,ge,"♮","\\natural",!0),D(B,Y,ge,"♣","\\clubsuit",!0),D(B,Y,ge,"℘","\\wp",!0),D(B,Y,ge,"♯","\\sharp",!0),D(B,Y,ge,"♢","\\diamondsuit",!0),D(B,Y,ge,"ℜ","\\Re",!0),D(B,Y,ge,"♡","\\heartsuit",!0),D(B,Y,ge,"ℑ","\\Im",!0),D(B,Y,ge,"♠","\\spadesuit",!0),D(B,Y,ge,"§","\\S",!0),D(tt,Y,ge,"§","\\S"),D(B,Y,ge,"¶","\\P",!0),D(tt,Y,ge,"¶","\\P"),D(B,Y,ge,"†","\\dag"),D(tt,Y,ge,"†","\\dag"),D(tt,Y,ge,"†","\\textdagger"),D(B,Y,ge,"‡","\\ddag"),D(tt,Y,ge,"‡","\\ddag"),D(tt,Y,ge,"‡","\\textdaggerdbl"),D(B,Y,Mi,"⎱","\\rmoustache",!0),D(B,Y,Be,"⎰","\\lmoustache",!0),D(B,Y,Mi,"⟯","\\rgroup",!0),D(B,Y,Be,"⟮","\\lgroup",!0),D(B,Y,Et,"∓","\\mp",!0),D(B,Y,Et,"⊖","\\ominus",!0),D(B,Y,Et,"⊎","\\uplus",!0),D(B,Y,Et,"⊓","\\sqcap",!0),D(B,Y,Et,"∗","\\ast"),D(B,Y,Et,"⊔","\\sqcup",!0),D(B,Y,Et,"◯","\\bigcirc",!0),D(B,Y,Et,"∙","\\bullet",!0),D(B,Y,Et,"‡","\\ddagger"),D(B,Y,Et,"≀","\\wr",!0),D(B,Y,Et,"⨿","\\amalg"),D(B,Y,Et,"&","\\And"),D(B,Y,ae,"⟵","\\longleftarrow",!0),D(B,Y,ae,"⇐","\\Leftarrow",!0),D(B,Y,ae,"⟸","\\Longleftarrow",!0),D(B,Y,ae,"⟶","\\longrightarrow",!0),D(B,Y,ae,"⇒","\\Rightarrow",!0),D(B,Y,ae,"⟹","\\Longrightarrow",!0),D(B,Y,ae,"↔","\\leftrightarrow",!0),D(B,Y,ae,"⟷","\\longleftrightarrow",!0),D(B,Y,ae,"⇔","\\Leftrightarrow",!0),D(B,Y,ae,"⟺","\\Longleftrightarrow",!0),D(B,Y,ae,"↦","\\mapsto",!0),D(B,Y,ae,"⟼","\\longmapsto",!0),D(B,Y,ae,"↗","\\nearrow",!0),D(B,Y,ae,"↩","\\hookleftarrow",!0),D(B,Y,ae,"↪","\\hookrightarrow",!0),D(B,Y,ae,"↘","\\searrow",!0),D(B,Y,ae,"↼","\\leftharpoonup",!0),D(B,Y,ae,"⇀","\\rightharpoonup",!0),D(B,Y,ae,"↙","\\swarrow",!0),D(B,Y,ae,"↽","\\leftharpoondown",!0),D(B,Y,ae,"⇁","\\rightharpoondown",!0),D(B,Y,ae,"↖","\\nwarrow",!0),D(B,Y,ae,"⇌","\\rightleftharpoons",!0),D(B,me,ae,"≮","\\nless",!0),D(B,me,ae,"","\\@nleqslant"),D(B,me,ae,"","\\@nleqq"),D(B,me,ae,"⪇","\\lneq",!0),D(B,me,ae,"≨","\\lneqq",!0),D(B,me,ae,"","\\@lvertneqq"),D(B,me,ae,"⋦","\\lnsim",!0),D(B,me,ae,"⪉","\\lnapprox",!0),D(B,me,ae,"⊀","\\nprec",!0),D(B,me,ae,"⋠","\\npreceq",!0),D(B,me,ae,"⋨","\\precnsim",!0),D(B,me,ae,"⪹","\\precnapprox",!0),D(B,me,ae,"≁","\\nsim",!0),D(B,me,ae,"","\\@nshortmid"),D(B,me,ae,"∤","\\nmid",!0),D(B,me,ae,"⊬","\\nvdash",!0),D(B,me,ae,"⊭","\\nvDash",!0),D(B,me,ae,"⋪","\\ntriangleleft"),D(B,me,ae,"⋬","\\ntrianglelefteq",!0),D(B,me,ae,"⊊","\\subsetneq",!0),D(B,me,ae,"","\\@varsubsetneq"),D(B,me,ae,"⫋","\\subsetneqq",!0),D(B,me,ae,"","\\@varsubsetneqq"),D(B,me,ae,"≯","\\ngtr",!0),D(B,me,ae,"","\\@ngeqslant"),D(B,me,ae,"","\\@ngeqq"),D(B,me,ae,"⪈","\\gneq",!0),D(B,me,ae,"≩","\\gneqq",!0),D(B,me,ae,"","\\@gvertneqq"),D(B,me,ae,"⋧","\\gnsim",!0),D(B,me,ae,"⪊","\\gnapprox",!0),D(B,me,ae,"⊁","\\nsucc",!0),D(B,me,ae,"⋡","\\nsucceq",!0),D(B,me,ae,"⋩","\\succnsim",!0),D(B,me,ae,"⪺","\\succnapprox",!0),D(B,me,ae,"≆","\\ncong",!0),D(B,me,ae,"","\\@nshortparallel"),D(B,me,ae,"∦","\\nparallel",!0),D(B,me,ae,"⊯","\\nVDash",!0),D(B,me,ae,"⋫","\\ntriangleright"),D(B,me,ae,"⋭","\\ntrianglerighteq",!0),D(B,me,ae,"","\\@nsupseteqq"),D(B,me,ae,"⊋","\\supsetneq",!0),D(B,me,ae,"","\\@varsupsetneq"),D(B,me,ae,"⫌","\\supsetneqq",!0),D(B,me,ae,"","\\@varsupsetneqq"),D(B,me,ae,"⊮","\\nVdash",!0),D(B,me,ae,"⪵","\\precneqq",!0),D(B,me,ae,"⪶","\\succneqq",!0),D(B,me,ae,"","\\@nsubseteqq"),D(B,me,Et,"⊴","\\unlhd"),D(B,me,Et,"⊵","\\unrhd"),D(B,me,ae,"↚","\\nleftarrow",!0),D(B,me,ae,"↛","\\nrightarrow",!0),D(B,me,ae,"⇍","\\nLeftarrow",!0),D(B,me,ae,"⇏","\\nRightarrow",!0),D(B,me,ae,"↮","\\nleftrightarrow",!0),D(B,me,ae,"⇎","\\nLeftrightarrow",!0),D(B,me,ae,"△","\\vartriangle"),D(B,me,ge,"ℏ","\\hslash"),D(B,me,ge,"▽","\\triangledown"),D(B,me,ge,"◊","\\lozenge"),D(B,me,ge,"Ⓢ","\\circledS"),D(B,me,ge,"®","\\circledR"),D(tt,me,ge,"®","\\circledR"),D(B,me,ge,"∡","\\measuredangle",!0),D(B,me,ge,"∄","\\nexists"),D(B,me,ge,"℧","\\mho"),D(B,me,ge,"Ⅎ","\\Finv",!0),D(B,me,ge,"⅁","\\Game",!0),D(B,me,ge,"‵","\\backprime"),D(B,me,ge,"▲","\\blacktriangle"),D(B,me,ge,"▼","\\blacktriangledown"),D(B,me,ge,"■","\\blacksquare"),D(B,me,ge,"⧫","\\blacklozenge"),D(B,me,ge,"★","\\bigstar"),D(B,me,ge,"∢","\\sphericalangle",!0),D(B,me,ge,"∁","\\complement",!0),D(B,me,ge,"ð","\\eth",!0),D(tt,Y,ge,"ð","ð"),D(B,me,ge,"╱","\\diagup"),D(B,me,ge,"╲","\\diagdown"),D(B,me,ge,"□","\\square"),D(B,me,ge,"□","\\Box"),D(B,me,ge,"◊","\\Diamond"),D(B,me,ge,"¥","\\yen",!0),D(tt,me,ge,"¥","\\yen",!0),D(B,me,ge,"✓","\\checkmark",!0),D(tt,me,ge,"✓","\\checkmark"),D(B,me,ge,"ℶ","\\beth",!0),D(B,me,ge,"ℸ","\\daleth",!0),D(B,me,ge,"ℷ","\\gimel",!0),D(B,me,ge,"ϝ","\\digamma",!0),D(B,me,ge,"ϰ","\\varkappa"),D(B,me,Be,"┌","\\@ulcorner",!0),D(B,me,Mi,"┐","\\@urcorner",!0),D(B,me,Be,"└","\\@llcorner",!0),D(B,me,Mi,"┘","\\@lrcorner",!0),D(B,me,ae,"≦","\\leqq",!0),D(B,me,ae,"⩽","\\leqslant",!0),D(B,me,ae,"⪕","\\eqslantless",!0),D(B,me,ae,"≲","\\lesssim",!0),D(B,me,ae,"⪅","\\lessapprox",!0),D(B,me,ae,"≊","\\approxeq",!0),D(B,me,Et,"⋖","\\lessdot"),D(B,me,ae,"⋘","\\lll",!0),D(B,me,ae,"≶","\\lessgtr",!0),D(B,me,ae,"⋚","\\lesseqgtr",!0),D(B,me,ae,"⪋","\\lesseqqgtr",!0),D(B,me,ae,"≑","\\doteqdot"),D(B,me,ae,"≓","\\risingdotseq",!0),D(B,me,ae,"≒","\\fallingdotseq",!0),D(B,me,ae,"∽","\\backsim",!0),D(B,me,ae,"⋍","\\backsimeq",!0),D(B,me,ae,"⫅","\\subseteqq",!0),D(B,me,ae,"⋐","\\Subset",!0),D(B,me,ae,"⊏","\\sqsubset",!0),D(B,me,ae,"≼","\\preccurlyeq",!0),D(B,me,ae,"⋞","\\curlyeqprec",!0),D(B,me,ae,"≾","\\precsim",!0),D(B,me,ae,"⪷","\\precapprox",!0),D(B,me,ae,"⊲","\\vartriangleleft"),D(B,me,ae,"⊴","\\trianglelefteq"),D(B,me,ae,"⊨","\\vDash",!0),D(B,me,ae,"⊪","\\Vvdash",!0),D(B,me,ae,"⌣","\\smallsmile"),D(B,me,ae,"⌢","\\smallfrown"),D(B,me,ae,"≏","\\bumpeq",!0),D(B,me,ae,"≎","\\Bumpeq",!0),D(B,me,ae,"≧","\\geqq",!0),D(B,me,ae,"⩾","\\geqslant",!0),D(B,me,ae,"⪖","\\eqslantgtr",!0),D(B,me,ae,"≳","\\gtrsim",!0),D(B,me,ae,"⪆","\\gtrapprox",!0),D(B,me,Et,"⋗","\\gtrdot"),D(B,me,ae,"⋙","\\ggg",!0),D(B,me,ae,"≷","\\gtrless",!0),D(B,me,ae,"⋛","\\gtreqless",!0),D(B,me,ae,"⪌","\\gtreqqless",!0),D(B,me,ae,"≖","\\eqcirc",!0),D(B,me,ae,"≗","\\circeq",!0),D(B,me,ae,"≜","\\triangleq",!0),D(B,me,ae,"∼","\\thicksim"),D(B,me,ae,"≈","\\thickapprox"),D(B,me,ae,"⫆","\\supseteqq",!0),D(B,me,ae,"⋑","\\Supset",!0),D(B,me,ae,"⊐","\\sqsupset",!0),D(B,me,ae,"≽","\\succcurlyeq",!0),D(B,me,ae,"⋟","\\curlyeqsucc",!0),D(B,me,ae,"≿","\\succsim",!0),D(B,me,ae,"⪸","\\succapprox",!0),D(B,me,ae,"⊳","\\vartriangleright"),D(B,me,ae,"⊵","\\trianglerighteq"),D(B,me,ae,"⊩","\\Vdash",!0),D(B,me,ae,"∣","\\shortmid"),D(B,me,ae,"∥","\\shortparallel"),D(B,me,ae,"≬","\\between",!0),D(B,me,ae,"⋔","\\pitchfork",!0),D(B,me,ae,"∝","\\varpropto"),D(B,me,ae,"◀","\\blacktriangleleft"),D(B,me,ae,"∴","\\therefore",!0),D(B,me,ae,"∍","\\backepsilon"),D(B,me,ae,"▶","\\blacktriangleright"),D(B,me,ae,"∵","\\because",!0),D(B,me,ae,"⋘","\\llless"),D(B,me,ae,"⋙","\\gggtr"),D(B,me,Et,"⊲","\\lhd"),D(B,me,Et,"⊳","\\rhd"),D(B,me,ae,"≂","\\eqsim",!0),D(B,Y,ae,"⋈","\\Join"),D(B,me,ae,"≑","\\Doteq",!0),D(B,me,Et,"∔","\\dotplus",!0),D(B,me,Et,"∖","\\smallsetminus"),D(B,me,Et,"⋒","\\Cap",!0),D(B,me,Et,"⋓","\\Cup",!0),D(B,me,Et,"⩞","\\doublebarwedge",!0),D(B,me,Et,"⊟","\\boxminus",!0),D(B,me,Et,"⊞","\\boxplus",!0),D(B,me,Et,"⋇","\\divideontimes",!0),D(B,me,Et,"⋉","\\ltimes",!0),D(B,me,Et,"⋊","\\rtimes",!0),D(B,me,Et,"⋋","\\leftthreetimes",!0),D(B,me,Et,"⋌","\\rightthreetimes",!0),D(B,me,Et,"⋏","\\curlywedge",!0),D(B,me,Et,"⋎","\\curlyvee",!0),D(B,me,Et,"⊝","\\circleddash",!0),D(B,me,Et,"⊛","\\circledast",!0),D(B,me,Et,"⋅","\\centerdot"),D(B,me,Et,"⊺","\\intercal",!0),D(B,me,Et,"⋒","\\doublecap"),D(B,me,Et,"⋓","\\doublecup"),D(B,me,Et,"⊠","\\boxtimes",!0),D(B,me,ae,"⇢","\\dashrightarrow",!0),D(B,me,ae,"⇠","\\dashleftarrow",!0),D(B,me,ae,"⇇","\\leftleftarrows",!0),D(B,me,ae,"⇆","\\leftrightarrows",!0),D(B,me,ae,"⇚","\\Lleftarrow",!0),D(B,me,ae,"↞","\\twoheadleftarrow",!0),D(B,me,ae,"↢","\\leftarrowtail",!0),D(B,me,ae,"↫","\\looparrowleft",!0),D(B,me,ae,"⇋","\\leftrightharpoons",!0),D(B,me,ae,"↶","\\curvearrowleft",!0),D(B,me,ae,"↺","\\circlearrowleft",!0),D(B,me,ae,"↰","\\Lsh",!0),D(B,me,ae,"⇈","\\upuparrows",!0),D(B,me,ae,"↿","\\upharpoonleft",!0),D(B,me,ae,"⇃","\\downharpoonleft",!0),D(B,Y,ae,"⊶","\\origof",!0),D(B,Y,ae,"⊷","\\imageof",!0),D(B,me,ae,"⊸","\\multimap",!0),D(B,me,ae,"↭","\\leftrightsquigarrow",!0),D(B,me,ae,"⇉","\\rightrightarrows",!0),D(B,me,ae,"⇄","\\rightleftarrows",!0),D(B,me,ae,"↠","\\twoheadrightarrow",!0),D(B,me,ae,"↣","\\rightarrowtail",!0),D(B,me,ae,"↬","\\looparrowright",!0),D(B,me,ae,"↷","\\curvearrowright",!0),D(B,me,ae,"↻","\\circlearrowright",!0),D(B,me,ae,"↱","\\Rsh",!0),D(B,me,ae,"⇊","\\downdownarrows",!0),D(B,me,ae,"↾","\\upharpoonright",!0),D(B,me,ae,"⇂","\\downharpoonright",!0),D(B,me,ae,"⇝","\\rightsquigarrow",!0),D(B,me,ae,"⇝","\\leadsto"),D(B,me,ae,"⇛","\\Rrightarrow",!0),D(B,me,ae,"↾","\\restriction"),D(B,Y,ge,"‘","`"),D(B,Y,ge,"$","\\$"),D(tt,Y,ge,"$","\\$"),D(tt,Y,ge,"$","\\textdollar"),D(B,Y,ge,"%","\\%"),D(tt,Y,ge,"%","\\%"),D(B,Y,ge,"_","\\_"),D(tt,Y,ge,"_","\\_"),D(tt,Y,ge,"_","\\textunderscore"),D(B,Y,ge,"∠","\\angle",!0),D(B,Y,ge,"∞","\\infty",!0),D(B,Y,ge,"′","\\prime"),D(B,Y,ge,"△","\\triangle"),D(B,Y,ge,"Γ","\\Gamma",!0),D(B,Y,ge,"Δ","\\Delta",!0),D(B,Y,ge,"Θ","\\Theta",!0),D(B,Y,ge,"Λ","\\Lambda",!0),D(B,Y,ge,"Ξ","\\Xi",!0),D(B,Y,ge,"Π","\\Pi",!0),D(B,Y,ge,"Σ","\\Sigma",!0),D(B,Y,ge,"Υ","\\Upsilon",!0),D(B,Y,ge,"Φ","\\Phi",!0),D(B,Y,ge,"Ψ","\\Psi",!0),D(B,Y,ge,"Ω","\\Omega",!0),D(B,Y,ge,"A","Α"),D(B,Y,ge,"B","Β"),D(B,Y,ge,"E","Ε"),D(B,Y,ge,"Z","Ζ"),D(B,Y,ge,"H","Η"),D(B,Y,ge,"I","Ι"),D(B,Y,ge,"K","Κ"),D(B,Y,ge,"M","Μ"),D(B,Y,ge,"N","Ν"),D(B,Y,ge,"O","Ο"),D(B,Y,ge,"P","Ρ"),D(B,Y,ge,"T","Τ"),D(B,Y,ge,"X","Χ"),D(B,Y,ge,"¬","\\neg",!0),D(B,Y,ge,"¬","\\lnot"),D(B,Y,ge,"⊤","\\top"),D(B,Y,ge,"⊥","\\bot"),D(B,Y,ge,"∅","\\emptyset"),D(B,me,ge,"∅","\\varnothing"),D(B,Y,Se,"α","\\alpha",!0),D(B,Y,Se,"β","\\beta",!0),D(B,Y,Se,"γ","\\gamma",!0),D(B,Y,Se,"δ","\\delta",!0),D(B,Y,Se,"ϵ","\\epsilon",!0),D(B,Y,Se,"ζ","\\zeta",!0),D(B,Y,Se,"η","\\eta",!0),D(B,Y,Se,"θ","\\theta",!0),D(B,Y,Se,"ι","\\iota",!0),D(B,Y,Se,"κ","\\kappa",!0),D(B,Y,Se,"λ","\\lambda",!0),D(B,Y,Se,"μ","\\mu",!0),D(B,Y,Se,"ν","\\nu",!0),D(B,Y,Se,"ξ","\\xi",!0),D(B,Y,Se,"ο","\\omicron",!0),D(B,Y,Se,"π","\\pi",!0),D(B,Y,Se,"ρ","\\rho",!0),D(B,Y,Se,"σ","\\sigma",!0),D(B,Y,Se,"τ","\\tau",!0),D(B,Y,Se,"υ","\\upsilon",!0),D(B,Y,Se,"ϕ","\\phi",!0),D(B,Y,Se,"χ","\\chi",!0),D(B,Y,Se,"ψ","\\psi",!0),D(B,Y,Se,"ω","\\omega",!0),D(B,Y,Se,"ε","\\varepsilon",!0),D(B,Y,Se,"ϑ","\\vartheta",!0),D(B,Y,Se,"ϖ","\\varpi",!0),D(B,Y,Se,"ϱ","\\varrho",!0),D(B,Y,Se,"ς","\\varsigma",!0),D(B,Y,Se,"φ","\\varphi",!0),D(B,Y,Et,"∗","*",!0),D(B,Y,Et,"+","+"),D(B,Y,Et,"−","-",!0),D(B,Y,Et,"⋅","\\cdot",!0),D(B,Y,Et,"∘","\\circ",!0),D(B,Y,Et,"÷","\\div",!0),D(B,Y,Et,"±","\\pm",!0),D(B,Y,Et,"×","\\times",!0),D(B,Y,Et,"∩","\\cap",!0),D(B,Y,Et,"∪","\\cup",!0),D(B,Y,Et,"∖","\\setminus",!0),D(B,Y,Et,"∧","\\land"),D(B,Y,Et,"∨","\\lor"),D(B,Y,Et,"∧","\\wedge",!0),D(B,Y,Et,"∨","\\vee",!0),D(B,Y,ge,"√","\\surd"),D(B,Y,Be,"⟨","\\langle",!0),D(B,Y,Be,"∣","\\lvert"),D(B,Y,Be,"∥","\\lVert"),D(B,Y,Mi,"?","?"),D(B,Y,Mi,"!","!"),D(B,Y,Mi,"⟩","\\rangle",!0),D(B,Y,Mi,"∣","\\rvert"),D(B,Y,Mi,"∥","\\rVert"),D(B,Y,ae,"=","="),D(B,Y,ae,":",":"),D(B,Y,ae,"≈","\\approx",!0),D(B,Y,ae,"≅","\\cong",!0),D(B,Y,ae,"≥","\\ge"),D(B,Y,ae,"≥","\\geq",!0),D(B,Y,ae,"←","\\gets"),D(B,Y,ae,">","\\gt",!0),D(B,Y,ae,"∈","\\in",!0),D(B,Y,ae,"","\\@not"),D(B,Y,ae,"⊂","\\subset",!0),D(B,Y,ae,"⊃","\\supset",!0),D(B,Y,ae,"⊆","\\subseteq",!0),D(B,Y,ae,"⊇","\\supseteq",!0),D(B,me,ae,"⊈","\\nsubseteq",!0),D(B,me,ae,"⊉","\\nsupseteq",!0),D(B,Y,ae,"⊨","\\models"),D(B,Y,ae,"←","\\leftarrow",!0),D(B,Y,ae,"≤","\\le"),D(B,Y,ae,"≤","\\leq",!0),D(B,Y,ae,"<","\\lt",!0),D(B,Y,ae,"→","\\rightarrow",!0),D(B,Y,ae,"→","\\to"),D(B,me,ae,"≱","\\ngeq",!0),D(B,me,ae,"≰","\\nleq",!0),D(B,Y,Rt," ","\\ "),D(B,Y,Rt," ","\\space"),D(B,Y,Rt," ","\\nobreakspace"),D(tt,Y,Rt," ","\\ "),D(tt,Y,Rt," "," "),D(tt,Y,Rt," ","\\space"),D(tt,Y,Rt," ","\\nobreakspace"),D(B,Y,Rt,null,"\\nobreak"),D(B,Y,Rt,null,"\\allowbreak"),D(B,Y,ze,",",","),D(B,Y,ze,";",";"),D(B,me,Et,"⊼","\\barwedge",!0),D(B,me,Et,"⊻","\\veebar",!0),D(B,Y,Et,"⊙","\\odot",!0),D(B,Y,Et,"⊕","\\oplus",!0),D(B,Y,Et,"⊗","\\otimes",!0),D(B,Y,ge,"∂","\\partial",!0),D(B,Y,Et,"⊘","\\oslash",!0),D(B,me,Et,"⊚","\\circledcirc",!0),D(B,me,Et,"⊡","\\boxdot",!0),D(B,Y,Et,"△","\\bigtriangleup"),D(B,Y,Et,"▽","\\bigtriangledown"),D(B,Y,Et,"†","\\dagger"),D(B,Y,Et,"⋄","\\diamond"),D(B,Y,Et,"⋆","\\star"),D(B,Y,Et,"◃","\\triangleleft"),D(B,Y,Et,"▹","\\triangleright"),D(B,Y,Be,"{","\\{"),D(tt,Y,ge,"{","\\{"),D(tt,Y,ge,"{","\\textbraceleft"),D(B,Y,Mi,"}","\\}"),D(tt,Y,ge,"}","\\}"),D(tt,Y,ge,"}","\\textbraceright"),D(B,Y,Be,"{","\\lbrace"),D(B,Y,Mi,"}","\\rbrace"),D(B,Y,Be,"[","\\lbrack",!0),D(tt,Y,ge,"[","\\lbrack",!0),D(B,Y,Mi,"]","\\rbrack",!0),D(tt,Y,ge,"]","\\rbrack",!0),D(B,Y,Be,"(","\\lparen",!0),D(B,Y,Mi,")","\\rparen",!0),D(tt,Y,ge,"<","\\textless",!0),D(tt,Y,ge,">","\\textgreater",!0),D(B,Y,Be,"⌊","\\lfloor",!0),D(B,Y,Mi,"⌋","\\rfloor",!0),D(B,Y,Be,"⌈","\\lceil",!0),D(B,Y,Mi,"⌉","\\rceil",!0),D(B,Y,ge,"\\","\\backslash"),D(B,Y,ge,"∣","|"),D(B,Y,ge,"∣","\\vert"),D(tt,Y,ge,"|","\\textbar",!0),D(B,Y,ge,"∥","\\|"),D(B,Y,ge,"∥","\\Vert"),D(tt,Y,ge,"∥","\\textbardbl"),D(tt,Y,ge,"~","\\textasciitilde"),D(tt,Y,ge,"\\","\\textbackslash"),D(tt,Y,ge,"^","\\textasciicircum"),D(B,Y,ae,"↑","\\uparrow",!0),D(B,Y,ae,"⇑","\\Uparrow",!0),D(B,Y,ae,"↓","\\downarrow",!0),D(B,Y,ae,"⇓","\\Downarrow",!0),D(B,Y,ae,"↕","\\updownarrow",!0),D(B,Y,ae,"⇕","\\Updownarrow",!0),D(B,Y,Ie,"∐","\\coprod"),D(B,Y,Ie,"⋁","\\bigvee"),D(B,Y,Ie,"⋀","\\bigwedge"),D(B,Y,Ie,"⨄","\\biguplus"),D(B,Y,Ie,"⋂","\\bigcap"),D(B,Y,Ie,"⋃","\\bigcup"),D(B,Y,Ie,"∫","\\int"),D(B,Y,Ie,"∫","\\intop"),D(B,Y,Ie,"∬","\\iint"),D(B,Y,Ie,"∭","\\iiint"),D(B,Y,Ie,"∏","\\prod"),D(B,Y,Ie,"∑","\\sum"),D(B,Y,Ie,"⨂","\\bigotimes"),D(B,Y,Ie,"⨁","\\bigoplus"),D(B,Y,Ie,"⨀","\\bigodot"),D(B,Y,Ie,"∮","\\oint"),D(B,Y,Ie,"∯","\\oiint"),D(B,Y,Ie,"∰","\\oiiint"),D(B,Y,Ie,"⨆","\\bigsqcup"),D(B,Y,Ie,"∫","\\smallint"),D(tt,Y,le,"…","\\textellipsis"),D(B,Y,le,"…","\\mathellipsis"),D(tt,Y,le,"…","\\ldots",!0),D(B,Y,le,"…","\\ldots",!0),D(B,Y,le,"⋯","\\@cdots",!0),D(B,Y,le,"⋱","\\ddots",!0),D(B,Y,ge,"⋮","\\varvdots"),D(tt,Y,ge,"⋮","\\varvdots"),D(B,Y,kn,"ˊ","\\acute"),D(B,Y,kn,"ˋ","\\grave"),D(B,Y,kn,"¨","\\ddot"),D(B,Y,kn,"~","\\tilde"),D(B,Y,kn,"ˉ","\\bar"),D(B,Y,kn,"˘","\\breve"),D(B,Y,kn,"ˇ","\\check"),D(B,Y,kn,"^","\\hat"),D(B,Y,kn,"⃗","\\vec"),D(B,Y,kn,"˙","\\dot"),D(B,Y,kn,"˚","\\mathring"),D(B,Y,Se,"","\\@imath"),D(B,Y,Se,"","\\@jmath"),D(B,Y,ge,"ı","ı"),D(B,Y,ge,"ȷ","ȷ"),D(tt,Y,ge,"ı","\\i",!0),D(tt,Y,ge,"ȷ","\\j",!0),D(tt,Y,ge,"ß","\\ss",!0),D(tt,Y,ge,"æ","\\ae",!0),D(tt,Y,ge,"œ","\\oe",!0),D(tt,Y,ge,"ø","\\o",!0),D(tt,Y,ge,"Æ","\\AE",!0),D(tt,Y,ge,"Œ","\\OE",!0),D(tt,Y,ge,"Ø","\\O",!0),D(tt,Y,kn,"ˊ","\\'"),D(tt,Y,kn,"ˋ","\\`"),D(tt,Y,kn,"ˆ","\\^"),D(tt,Y,kn,"˜","\\~"),D(tt,Y,kn,"ˉ","\\="),D(tt,Y,kn,"˘","\\u"),D(tt,Y,kn,"˙","\\."),D(tt,Y,kn,"¸","\\c"),D(tt,Y,kn,"˚","\\r"),D(tt,Y,kn,"ˇ","\\v"),D(tt,Y,kn,"¨",'\\"'),D(tt,Y,kn,"˝","\\H"),D(tt,Y,kn,"◯","\\textcircled");const ut={"--":!0,"---":!0,"``":!0,"''":!0};D(tt,Y,ge,"–","--",!0),D(tt,Y,ge,"–","\\textendash"),D(tt,Y,ge,"—","---",!0),D(tt,Y,ge,"—","\\textemdash"),D(tt,Y,ge,"‘","`",!0),D(tt,Y,ge,"‘","\\textquoteleft"),D(tt,Y,ge,"’","'",!0),D(tt,Y,ge,"’","\\textquoteright"),D(tt,Y,ge,"“","``",!0),D(tt,Y,ge,"“","\\textquotedblleft"),D(tt,Y,ge,"”","''",!0),D(tt,Y,ge,"”","\\textquotedblright"),D(B,Y,ge,"°","\\degree",!0),D(tt,Y,ge,"°","\\degree"),D(tt,Y,ge,"°","\\textdegree",!0),D(B,Y,ge,"£","\\pounds"),D(B,Y,ge,"£","\\mathsterling",!0),D(tt,Y,ge,"£","\\pounds"),D(tt,Y,ge,"£","\\textsterling",!0),D(B,me,ge,"✠","\\maltese"),D(tt,me,ge,"✠","\\maltese");const Vt='0123456789/@."';for(let S=0;S<Vt.length;S++){const v=Vt.charAt(S);D(B,Y,ge,v,v)}const Xt='0123456789!@*()-=+";:?/.,';for(let S=0;S<Xt.length;S++){const v=Xt.charAt(S);D(tt,Y,ge,v,v)}const Ut="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(let S=0;S<Ut.length;S++){const v=Ut.charAt(S);D(B,Y,Se,v,v),D(tt,Y,ge,v,v)}D(B,me,ge,"C","ℂ"),D(tt,me,ge,"C","ℂ"),D(B,me,ge,"H","ℍ"),D(tt,me,ge,"H","ℍ"),D(B,me,ge,"N","ℕ"),D(tt,me,ge,"N","ℕ"),D(B,me,ge,"P","ℙ"),D(tt,me,ge,"P","ℙ"),D(B,me,ge,"Q","ℚ"),D(tt,me,ge,"Q","ℚ"),D(B,me,ge,"R","ℝ"),D(tt,me,ge,"R","ℝ"),D(B,me,ge,"Z","ℤ"),D(tt,me,ge,"Z","ℤ"),D(B,Y,Se,"h","ℎ"),D(tt,Y,Se,"h","ℎ");let Tt="";for(let S=0;S<Ut.length;S++){const v=Ut.charAt(S);Tt=String.fromCharCode(55349,56320+S),D(B,Y,Se,v,Tt),D(tt,Y,ge,v,Tt),Tt=String.fromCharCode(55349,56372+S),D(B,Y,Se,v,Tt),D(tt,Y,ge,v,Tt),Tt=String.fromCharCode(55349,56424+S),D(B,Y,Se,v,Tt),D(tt,Y,ge,v,Tt),Tt=String.fromCharCode(55349,56580+S),D(B,Y,Se,v,Tt),D(tt,Y,ge,v,Tt),Tt=String.fromCharCode(55349,56684+S),D(B,Y,Se,v,Tt),D(tt,Y,ge,v,Tt),Tt=String.fromCharCode(55349,56736+S),D(B,Y,Se,v,Tt),D(tt,Y,ge,v,Tt),Tt=String.fromCharCode(55349,56788+S),D(B,Y,Se,v,Tt),D(tt,Y,ge,v,Tt),Tt=String.fromCharCode(55349,56840+S),D(B,Y,Se,v,Tt),D(tt,Y,ge,v,Tt),Tt=String.fromCharCode(55349,56944+S),D(B,Y,Se,v,Tt),D(tt,Y,ge,v,Tt),S<26&&(Tt=String.fromCharCode(55349,56632+S),D(B,Y,Se,v,Tt),D(tt,Y,ge,v,Tt),Tt=String.fromCharCode(55349,56476+S),D(B,Y,Se,v,Tt),D(tt,Y,ge,v,Tt))}Tt="𝕜",D(B,Y,Se,"k",Tt),D(tt,Y,ge,"k",Tt);for(let S=0;S<10;S++){const v=S.toString();Tt=String.fromCharCode(55349,57294+S),D(B,Y,Se,v,Tt),D(tt,Y,ge,v,Tt),Tt=String.fromCharCode(55349,57314+S),D(B,Y,Se,v,Tt),D(tt,Y,ge,v,Tt),Tt=String.fromCharCode(55349,57324+S),D(B,Y,Se,v,Tt),D(tt,Y,ge,v,Tt),Tt=String.fromCharCode(55349,57334+S),D(B,Y,Se,v,Tt),D(tt,Y,ge,v,Tt)}const li="ÐÞþ";for(let S=0;S<li.length;S++){const v=li.charAt(S);D(B,Y,Se,v,v),D(tt,Y,ge,v,v)}const _n=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],Qn=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],Bt=function(S,v){const w=S.charCodeAt(0),C=S.charCodeAt(1),I=(w-55296)*1024+(C-56320)+65536,H=v==="math"?0:1;if(119808<=I&&I<120484){const q=Math.floor((I-119808)/26);return[_n[q][2],_n[q][H]]}else if(120782<=I&&I<=120831){const q=Math.floor((I-120782)/10);return[Qn[q][2],Qn[q][H]]}else{if(I===120485||I===120486)return[_n[0][2],_n[0][H]];if(120486<I&&I<120782)return["",""];throw new s("Unsupported character: "+S)}},At=function(S,v,w){return fn[w][S]&&fn[w][S].replace&&(S=fn[w][S].replace),{value:S,metrics:we(S,v,w)}},zn=function(S,v,w,C,I){const H=At(S,v,w),q=H.metrics;S=H.value;let ee;if(q){let ce=q.italic;(w==="text"||C&&C.font==="mathit")&&(ce=0),ee=new rt(S,q.height,q.depth,ce,q.skew,q.width,I)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+S+"' in style '"+v+"' and mode '"+w+"'")),ee=new rt(S,0,0,0,0,0,I);if(C){ee.maxFontSize=C.sizeMultiplier,C.style.isTight()&&ee.classes.push("mtight");const ce=C.getColor();ce&&(ee.style.color=ce)}return ee},Yt=function(S,v,w,C){return C===void 0&&(C=[]),w.font==="boldsymbol"&&At(S,"Main-Bold",v).metrics?zn(S,"Main-Bold",v,w,C.concat(["mathbf"])):S==="\\"||fn[v][S].font==="main"?zn(S,"Main-Regular",v,w,C):zn(S,"AMS-Regular",v,w,C.concat(["amsrm"]))},jn=function(S,v,w,C,I){return I!=="textord"&&At(S,"Math-BoldItalic",v).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},Vr=function(S,v,w){const C=S.mode,I=S.text,H=["mord"],q=C==="math"||C==="text"&&v.font,ee=q?v.font:v.fontFamily;let ce="",_e="";if(I.charCodeAt(0)===55349&&([ce,_e]=Bt(I,C)),ce.length>0)return zn(I,ce,C,v,H.concat(_e));if(ee){let Ae,Le;if(ee==="boldsymbol"){const Ge=jn(I,C,v,H,w);Ae=Ge.fontName,Le=[Ge.fontClass]}else q?(Ae=Zs[ee].fontName,Le=[ee]):(Ae=ls(ee,v.fontWeight,v.fontShape),Le=[ee,v.fontWeight,v.fontShape]);if(At(I,Ae,C).metrics)return zn(I,Ae,C,v,H.concat(Le));if(ut.hasOwnProperty(I)&&Ae.slice(0,10)==="Typewriter"){const Ge=[];for(let dt=0;dt<I.length;dt++)Ge.push(zn(I[dt],Ae,C,v,H.concat(Le)));return er(Ge)}}if(w==="mathord")return zn(I,"Math-Italic",C,v,H.concat(["mathnormal"]));if(w==="textord"){const Ae=fn[C][I]&&fn[C][I].font;if(Ae==="ams"){const Le=ls("amsrm",v.fontWeight,v.fontShape);return zn(I,Le,C,v,H.concat("amsrm",v.fontWeight,v.fontShape))}else if(Ae==="main"||!Ae){const Le=ls("textrm",v.fontWeight,v.fontShape);return zn(I,Le,C,v,H.concat(v.fontWeight,v.fontShape))}else{const Le=ls(Ae,v.fontWeight,v.fontShape);return zn(I,Le,C,v,H.concat(Le,v.fontWeight,v.fontShape))}}else throw new Error("unexpected type: "+w+" in makeOrd")},Ii=(S,v)=>{if(fe(S.classes)!==fe(v.classes)||S.skew!==v.skew||S.maxFontSize!==v.maxFontSize)return!1;if(S.classes.length===1){const w=S.classes[0];if(w==="mbin"||w==="mord")return!1}for(const w in S.style)if(S.style.hasOwnProperty(w)&&S.style[w]!==v.style[w])return!1;for(const w in v.style)if(v.style.hasOwnProperty(w)&&S.style[w]!==v.style[w])return!1;return!0},ci=S=>{for(let v=0;v<S.length-1;v++){const w=S[v],C=S[v+1];w instanceof rt&&C instanceof rt&&Ii(w,C)&&(w.text+=C.text,w.height=Math.max(w.height,C.height),w.depth=Math.max(w.depth,C.depth),w.italic=C.italic,S.splice(v+1,1),v--)}return S},Tn=function(S){let v=0,w=0,C=0;for(let I=0;I<S.children.length;I++){const H=S.children[I];H.height>v&&(v=H.height),H.depth>w&&(w=H.depth),H.maxFontSize>C&&(C=H.maxFontSize)}S.height=v,S.depth=w,S.maxFontSize=C},Bn=function(S,v,w,C){const I=new xe(S,v,w,C);return Tn(I),I},As=(S,v,w,C)=>new xe(S,v,w,C),pi=function(S,v,w){const C=Bn([S],[],v);return C.height=Math.max(w||v.fontMetrics().defaultRuleThickness,v.minRuleThickness),C.style.borderBottomWidth=be(C.height),C.maxFontSize=1,C},Wi=function(S,v,w,C){const I=new gt(S,v,w,C);return Tn(I),I},er=function(S){const v=new Ue(S);return Tn(v),v},yo=function(S,v){return S instanceof Ue?Bn([],[S],v):S},xa=function(S){if(S.positionType==="individualShift"){const w=S.children,C=[w[0]],I=-w[0].shift-w[0].elem.depth;let H=I;for(let q=1;q<w.length;q++){const ee=-w[q].shift-H-w[q].elem.depth,ce=ee-(w[q-1].elem.height+w[q-1].elem.depth);H=H+ee,C.push({type:"kern",size:ce}),C.push(w[q])}return{children:C,depth:I}}let v;if(S.positionType==="top"){let w=S.positionData;for(let C=0;C<S.children.length;C++){const I=S.children[C];w-=I.type==="kern"?I.size:I.elem.height+I.elem.depth}v=w}else if(S.positionType==="bottom")v=-S.positionData;else{const w=S.children[0];if(w.type!=="elem")throw new Error('First child must have type "elem".');if(S.positionType==="shift")v=-w.elem.depth-S.positionData;else if(S.positionType==="firstBaseline")v=-w.elem.depth;else throw new Error("Invalid positionType "+S.positionType+".")}return{children:S.children,depth:v}},$u=function(S,v){const{children:w,depth:C}=xa(S);let I=0;for(let dt=0;dt<w.length;dt++){const kt=w[dt];if(kt.type==="elem"){const Dt=kt.elem;I=Math.max(I,Dt.maxFontSize,Dt.height)}}I+=2;const H=Bn(["pstrut"],[]);H.style.height=be(I);const q=[];let ee=C,ce=C,_e=C;for(let dt=0;dt<w.length;dt++){const kt=w[dt];if(kt.type==="kern")_e+=kt.size;else{const Dt=kt.elem,dn=kt.wrapperClasses||[],nn=kt.wrapperStyle||{},mn=Bn(dn,[H,Dt],void 0,nn);mn.style.top=be(-I-_e-Dt.depth),kt.marginLeft&&(mn.style.marginLeft=kt.marginLeft),kt.marginRight&&(mn.style.marginRight=kt.marginRight),q.push(mn),_e+=Dt.height+Dt.depth}ee=Math.min(ee,_e),ce=Math.max(ce,_e)}const Ae=Bn(["vlist"],q);Ae.style.height=be(ce);let Le;if(ee<0){const dt=Bn([],[]),kt=Bn(["vlist"],[dt]);kt.style.height=be(-ee);const Dt=Bn(["vlist-s"],[new rt("​")]);Le=[Bn(["vlist-r"],[Ae,Dt]),Bn(["vlist-r"],[kt])]}else Le=[Bn(["vlist-r"],[Ae])];const Ge=Bn(["vlist-t"],Le);return Le.length===2&&Ge.classes.push("vlist-t2"),Ge.height=ce,Ge.depth=-ee,Ge},xo=(S,v)=>{const w=Bn(["mspace"],[],v),C=ct(S,v);return w.style.marginRight=be(C),w},ls=function(S,v,w){let C="";switch(S){case"amsrm":C="AMS";break;case"textrm":C="Main";break;case"textsf":C="SansSerif";break;case"texttt":C="Typewriter";break;default:C=S}let I;return v==="textbf"&&w==="textit"?I="BoldItalic":v==="textbf"?I="Bold":v==="textit"?I="Italic":I="Regular",C+"-"+I},Zs={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},Wo={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]};var Oe={fontMap:Zs,makeSymbol:zn,mathsym:Yt,makeSpan:Bn,makeSvgSpan:As,makeLineSpan:pi,makeAnchor:Wi,makeFragment:er,wrapFragment:yo,makeVList:$u,makeOrd:Vr,makeGlue:xo,staticSvg:function(S,v){const[w,C,I]=Wo[S],H=new _t(w),q=new wt([H],{width:be(C),height:be(I),style:"width:"+be(C),viewBox:"0 0 "+1e3*C+" "+1e3*I,preserveAspectRatio:"xMinYMin"}),ee=As(["overlay"],[q],v);return ee.height=I,ee.style.height=be(I),ee.style.width=be(C),ee},svgData:Wo,tryCombineChars:ci};const wn={number:3,unit:"mu"},cs={number:4,unit:"mu"},Di={number:5,unit:"mu"},jo={mord:{mop:wn,mbin:cs,mrel:Di,minner:wn},mop:{mord:wn,mop:wn,mrel:Di,minner:wn},mbin:{mord:cs,mop:cs,mopen:cs,minner:cs},mrel:{mord:Di,mop:Di,mopen:Di,minner:Di},mopen:{},mclose:{mop:wn,mbin:cs,mrel:Di,minner:wn},mpunct:{mord:wn,mop:wn,mrel:Di,mopen:wn,mclose:wn,mpunct:wn,minner:wn},minner:{mord:wn,mop:wn,mbin:cs,mrel:Di,mopen:wn,mpunct:wn,minner:wn}},Ks={mord:{mop:wn},mop:{mord:wn,mop:wn},mbin:{},mrel:{},mopen:{},mclose:{mop:wn},mpunct:{},minner:{mop:wn}},on={},qo={},us={};function Mt(S){let{type:v,names:w,props:C,handler:I,htmlBuilder:H,mathmlBuilder:q}=S;const ee={type:v,numArgs:C.numArgs,argTypes:C.argTypes,allowedInArgument:!!C.allowedInArgument,allowedInText:!!C.allowedInText,allowedInMath:C.allowedInMath===void 0?!0:C.allowedInMath,numOptionalArgs:C.numOptionalArgs||0,infix:!!C.infix,primitive:!!C.primitive,handler:I};for(let ce=0;ce<w.length;++ce)on[w[ce]]=ee;v&&(H&&(qo[v]=H),q&&(us[v]=q))}function Cs(S){let{type:v,htmlBuilder:w,mathmlBuilder:C}=S;Mt({type:v,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:w,mathmlBuilder:C})}const _a=function(S){return S.type==="ordgroup"&&S.body.length===1?S.body[0]:S},Qt=function(S){return S.type==="ordgroup"?S.body:[S]},hr=Oe.makeSpan,eh=["leftmost","mbin","mopen","mrel","mop","mpunct"],fr=["rightmost","mrel","mclose","mpunct"],Sc={display:j.DISPLAY,text:j.TEXT,script:j.SCRIPT,scriptscript:j.SCRIPTSCRIPT},Sa={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},bn=function(S,v,w,C){C===void 0&&(C=[null,null]);const I=[];for(let _e=0;_e<S.length;_e++){const Ae=Zt(S[_e],v);if(Ae instanceof Ue){const Le=Ae.children;I.push(...Le)}else I.push(Ae)}if(Oe.tryCombineChars(I),!w)return I;let H=v;if(S.length===1){const _e=S[0];_e.type==="sizing"?H=v.havingSize(_e.size):_e.type==="styling"&&(H=v.havingStyle(Sc[_e.style]))}const q=hr([C[0]||"leftmost"],[],v),ee=hr([C[1]||"rightmost"],[],v),ce=w==="root";return wa(I,(_e,Ae)=>{const Le=Ae.classes[0],Ge=_e.classes[0];Le==="mbin"&&y.contains(fr,Ge)?Ae.classes[0]="mord":Ge==="mbin"&&y.contains(eh,Le)&&(_e.classes[0]="mord")},{node:q},ee,ce),wa(I,(_e,Ae)=>{const Le=ji(Ae),Ge=ji(_e),dt=Le&&Ge?_e.hasClass("mtight")?Ks[Le][Ge]:jo[Le][Ge]:null;if(dt)return Oe.makeGlue(dt,H)},{node:q},ee,ce),I},wa=function(S,v,w,C,I){C&&S.push(C);let H=0;for(;H<S.length;H++){const q=S[H],ee=wc(q);if(ee){wa(ee.children,v,w,null,I);continue}const ce=!q.hasClass("mspace");if(ce){const _e=v(q,w.node);_e&&(w.insertAfter?w.insertAfter(_e):(S.unshift(_e),H++))}ce?w.node=q:I&&q.hasClass("newline")&&(w.node=hr(["leftmost"])),w.insertAfter=(_e=>Ae=>{S.splice(_e+1,0,Ae),H++})(H)}C&&S.pop()},wc=function(S){return S instanceof Ue||S instanceof gt||S instanceof xe&&S.hasClass("enclosing")?S:null},dr=function(S,v){const w=wc(S);if(w){const C=w.children;if(C.length){if(v==="right")return dr(C[C.length-1],"right");if(v==="left")return dr(C[0],"left")}}return S},ji=function(S,v){return S?(v&&(S=dr(S,v)),Sa[S.classes[0]]||null):null},Er=function(S,v){const w=["nulldelimiter"].concat(S.baseSizingClasses());return hr(v.concat(w))},Zt=function(S,v,w){if(!S)return hr();if(qo[S.type]){let C=qo[S.type](S,v);if(w&&v.size!==w.size){C=hr(v.sizingClasses(w),[C],v);const I=v.sizeMultiplier/w.sizeMultiplier;C.height*=I,C.depth*=I}return C}else throw new s("Got group of unknown type: '"+S.type+"'")};function Xo(S,v){const w=hr(["base"],S,v),C=hr(["strut"]);return C.style.height=be(w.height+w.depth),w.depth&&(C.style.verticalAlign=be(-w.depth)),w.children.unshift(C),w}function ba(S,v){let w=null;S.length===1&&S[0].type==="tag"&&(w=S[0].tag,S=S[0].body);const C=bn(S,v,"root");let I;C.length===2&&C[1].hasClass("tag")&&(I=C.pop());const H=[];let q=[];for(let _e=0;_e<C.length;_e++)if(q.push(C[_e]),C[_e].hasClass("mbin")||C[_e].hasClass("mrel")||C[_e].hasClass("allowbreak")){let Ae=!1;for(;_e<C.length-1&&C[_e+1].hasClass("mspace")&&!C[_e+1].hasClass("newline");)_e++,q.push(C[_e]),C[_e].hasClass("nobreak")&&(Ae=!0);Ae||(H.push(Xo(q,v)),q=[])}else C[_e].hasClass("newline")&&(q.pop(),q.length>0&&(H.push(Xo(q,v)),q=[]),H.push(C[_e]));q.length>0&&H.push(Xo(q,v));let ee;w?(ee=Xo(bn(w,v,!0)),ee.classes=["tag"],H.push(ee)):I&&H.push(I);const ce=hr(["katex-html"],H);if(ce.setAttribute("aria-hidden","true"),ee){const _e=ee.children[0];_e.style.height=be(ce.height+ce.depth),ce.depth&&(_e.style.verticalAlign=be(-ce.depth))}return ce}function pr(S){return new Ue(S)}class Ei{constructor(v,w,C){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=v,this.attributes={},this.children=w||[],this.classes=C||[]}setAttribute(v,w){this.attributes[v]=w}getAttribute(v){return this.attributes[v]}toNode(){const v=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(const w in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,w)&&v.setAttribute(w,this.attributes[w]);this.classes.length>0&&(v.className=fe(this.classes));for(let w=0;w<this.children.length;w++)if(this.children[w]instanceof tr&&this.children[w+1]instanceof tr){let C=this.children[w].toText()+this.children[++w].toText();for(;this.children[w+1]instanceof tr;)C+=this.children[++w].toText();v.appendChild(new tr(C).toNode())}else v.appendChild(this.children[w].toNode());return v}toMarkup(){let v="<"+this.type;for(const w in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,w)&&(v+=" "+w+'="',v+=y.escape(this.attributes[w]),v+='"');this.classes.length>0&&(v+=' class ="'+y.escape(fe(this.classes))+'"'),v+=">";for(let w=0;w<this.children.length;w++)v+=this.children[w].toMarkup();return v+="</"+this.type+">",v}toText(){return this.children.map(v=>v.toText()).join("")}}class tr{constructor(v){this.text=void 0,this.text=v}toNode(){return document.createTextNode(this.text)}toMarkup(){return y.escape(this.toText())}toText(){return this.text}}class Ma{constructor(v){this.width=void 0,this.character=void 0,this.width=v,v>=.05555&&v<=.05556?this.character=" ":v>=.1666&&v<=.1667?this.character=" ":v>=.2222&&v<=.2223?this.character=" ":v>=.2777&&v<=.2778?this.character="  ":v>=-.05556&&v<=-.05555?this.character=" ⁣":v>=-.1667&&v<=-.1666?this.character=" ⁣":v>=-.2223&&v<=-.2222?this.character=" ⁣":v>=-.2778&&v<=-.2777?this.character=" ⁣":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);{const v=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return v.setAttribute("width",be(this.width)),v}}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+be(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var at={MathNode:Ei,TextNode:tr,SpaceNode:Ma,newDocumentFragment:pr};const Ln=function(S,v,w){return fn[v][S]&&fn[v][S].replace&&S.charCodeAt(0)!==55349&&!(ut.hasOwnProperty(S)&&w&&(w.fontFamily&&w.fontFamily.slice(4,6)==="tt"||w.font&&w.font.slice(4,6)==="tt"))&&(S=fn[v][S].replace),new at.TextNode(S)},Yo=function(S){return S.length===1?S[0]:new at.MathNode("mrow",S)},Gr=function(S,v){if(v.fontFamily==="texttt")return"monospace";if(v.fontFamily==="textsf")return v.fontShape==="textit"&&v.fontWeight==="textbf"?"sans-serif-bold-italic":v.fontShape==="textit"?"sans-serif-italic":v.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(v.fontShape==="textit"&&v.fontWeight==="textbf")return"bold-italic";if(v.fontShape==="textit")return"italic";if(v.fontWeight==="textbf")return"bold";const w=v.font;if(!w||w==="mathnormal")return null;const C=S.mode;if(w==="mathit")return"italic";if(w==="boldsymbol")return S.type==="textord"?"bold":"bold-italic";if(w==="mathbf")return"bold";if(w==="mathbb")return"double-struck";if(w==="mathsfit")return"sans-serif-italic";if(w==="mathfrak")return"fraktur";if(w==="mathscr"||w==="mathcal")return"script";if(w==="mathsf")return"sans-serif";if(w==="mathtt")return"monospace";let I=S.text;if(y.contains(["\\imath","\\jmath"],I))return null;fn[C][I]&&fn[C][I].replace&&(I=fn[C][I].replace);const H=Oe.fontMap[w].fontName;return we(I,H,C)?Oe.fontMap[w].variant:null};function Qs(S){if(!S)return!1;if(S.type==="mi"&&S.children.length===1){const v=S.children[0];return v instanceof tr&&v.text==="."}else if(S.type==="mo"&&S.children.length===1&&S.getAttribute("separator")==="true"&&S.getAttribute("lspace")==="0em"&&S.getAttribute("rspace")==="0em"){const v=S.children[0];return v instanceof tr&&v.text===","}else return!1}const Ti=function(S,v,w){if(S.length===1){const H=Kt(S[0],v);return w&&H instanceof Ei&&H.type==="mo"&&(H.setAttribute("lspace","0em"),H.setAttribute("rspace","0em")),[H]}const C=[];let I;for(let H=0;H<S.length;H++){const q=Kt(S[H],v);if(q instanceof Ei&&I instanceof Ei){if(q.type==="mtext"&&I.type==="mtext"&&q.getAttribute("mathvariant")===I.getAttribute("mathvariant")){I.children.push(...q.children);continue}else if(q.type==="mn"&&I.type==="mn"){I.children.push(...q.children);continue}else if(Qs(q)&&I.type==="mn"){I.children.push(...q.children);continue}else if(q.type==="mn"&&Qs(I))q.children=[...I.children,...q.children],C.pop();else if((q.type==="msup"||q.type==="msub")&&q.children.length>=1&&(I.type==="mn"||Qs(I))){const ee=q.children[0];ee instanceof Ei&&ee.type==="mn"&&(ee.children=[...I.children,...ee.children],C.pop())}else if(I.type==="mi"&&I.children.length===1){const ee=I.children[0];if(ee instanceof tr&&ee.text==="̸"&&(q.type==="mo"||q.type==="mi"||q.type==="mn")){const ce=q.children[0];ce instanceof tr&&ce.text.length>0&&(ce.text=ce.text.slice(0,1)+"̸"+ce.text.slice(1),C.pop())}}}C.push(q),I=q}return C},Ps=function(S,v,w){return Yo(Ti(S,v,w))},Kt=function(S,v){if(!S)return new at.MathNode("mrow");if(us[S.type])return us[S.type](S,v);throw new s("Got group of unknown type: '"+S.type+"'")};function nr(S,v,w,C,I){const H=Ti(S,w);let q;H.length===1&&H[0]instanceof Ei&&y.contains(["mrow","mtable"],H[0].type)?q=H[0]:q=new at.MathNode("mrow",H);const ee=new at.MathNode("annotation",[new at.TextNode(v)]);ee.setAttribute("encoding","application/x-tex");const ce=new at.MathNode("semantics",[q,ee]),_e=new at.MathNode("math",[ce]);_e.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),C&&_e.setAttribute("display","block");const Ae=I?"katex":"katex-mathml";return Oe.makeSpan([Ae],[_e])}const ui=function(S){return new st({style:S.displayMode?j.DISPLAY:j.TEXT,maxSize:S.maxSize,minRuleThickness:S.minRuleThickness})},hi=function(S,v){if(v.displayMode){const w=["katex-display"];v.leqno&&w.push("leqno"),v.fleqn&&w.push("fleqn"),S=Oe.makeSpan(w,[S])}return S},Wr=function(S,v,w){const C=ui(w);let I;if(w.output==="mathml")return nr(S,v,C,w.displayMode,!0);if(w.output==="html"){const H=ba(S,C);I=Oe.makeSpan(["katex"],[H])}else{const H=nr(S,v,C,w.displayMode,!1),q=ba(S,C);I=Oe.makeSpan(["katex"],[H,q])}return hi(I,w)},Zo=function(S,v,w){const C=ui(w),I=ba(S,C),H=Oe.makeSpan(["katex"],[I]);return hi(H,w)},id={widehat:"^",widecheck:"ˇ",widetilde:"~",utilde:"~",overleftarrow:"←",underleftarrow:"←",xleftarrow:"←",overrightarrow:"→",underrightarrow:"→",xrightarrow:"→",underbrace:"⏟",overbrace:"⏞",overgroup:"⏠",undergroup:"⏡",overleftrightarrow:"↔",underleftrightarrow:"↔",xleftrightarrow:"↔",Overrightarrow:"⇒",xRightarrow:"⇒",overleftharpoon:"↼",xleftharpoonup:"↼",overrightharpoon:"⇀",xrightharpoonup:"⇀",xLeftarrow:"⇐",xLeftrightarrow:"⇔",xhookleftarrow:"↩",xhookrightarrow:"↪",xmapsto:"↦",xrightharpoondown:"⇁",xleftharpoondown:"↽",xrightleftharpoons:"⇌",xleftrightharpoons:"⇋",xtwoheadleftarrow:"↞",xtwoheadrightarrow:"↠",xlongequal:"=",xtofrom:"⇄",xrightleftarrows:"⇄",xrightequilibrium:"⇌",xleftequilibrium:"⇋","\\cdrightarrow":"→","\\cdleftarrow":"←","\\cdlongequal":"="},Qp=function(S){const v=new at.MathNode("mo",[new at.TextNode(id[S.replace(/^\\/,"")])]);return v.setAttribute("stretchy","true"),v},_o={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},Ko=function(S){return S.type==="ordgroup"?S.body.length:1};var hs={encloseSpan:function(S,v,w,C,I){let H;const q=S.height+S.depth+w+C;if(/fbox|color|angl/.test(v)){if(H=Oe.makeSpan(["stretchy",v],[],I),v==="fbox"){const ee=I.color&&I.getColor();ee&&(H.style.borderColor=ee)}}else{const ee=[];/^[bx]cancel$/.test(v)&&ee.push(new Ht({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(v)&&ee.push(new Ht({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));const ce=new wt(ee,{width:"100%",height:be(q)});H=Oe.makeSvgSpan([],[ce],I)}return H.height=q,H.style.height=be(q),H},mathMLnode:Qp,svgSpan:function(S,v){function w(){let q=4e5;const ee=S.label.slice(1);if(y.contains(["widehat","widecheck","widetilde","utilde"],ee)){const _e=Ko(S.base);let Ae,Le,Ge;if(_e>5)ee==="widehat"||ee==="widecheck"?(Ae=420,q=2364,Ge=.42,Le=ee+"4"):(Ae=312,q=2340,Ge=.34,Le="tilde4");else{const Dt=[1,1,2,2,3,3][_e];ee==="widehat"||ee==="widecheck"?(q=[0,1062,2364,2364,2364][Dt],Ae=[0,239,300,360,420][Dt],Ge=[0,.24,.3,.3,.36,.42][Dt],Le=ee+Dt):(q=[0,600,1033,2339,2340][Dt],Ae=[0,260,286,306,312][Dt],Ge=[0,.26,.286,.3,.306,.34][Dt],Le="tilde"+Dt)}const dt=new _t(Le),kt=new wt([dt],{width:"100%",height:be(Ge),viewBox:"0 0 "+q+" "+Ae,preserveAspectRatio:"none"});return{span:Oe.makeSvgSpan([],[kt],v),minWidth:0,height:Ge}}else{const ce=[],_e=_o[ee],[Ae,Le,Ge]=_e,dt=Ge/1e3,kt=Ae.length;let Dt,dn;if(kt===1){const nn=_e[3];Dt=["hide-tail"],dn=[nn]}else if(kt===2)Dt=["halfarrow-left","halfarrow-right"],dn=["xMinYMin","xMaxYMin"];else if(kt===3)Dt=["brace-left","brace-center","brace-right"],dn=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+kt+" children.");for(let nn=0;nn<kt;nn++){const mn=new _t(Ae[nn]),xn=new wt([mn],{width:"400em",height:be(dt),viewBox:"0 0 "+q+" "+Ge,preserveAspectRatio:dn[nn]+" slice"}),Nn=Oe.makeSvgSpan([Dt[nn]],[xn],v);if(kt===1)return{span:Nn,minWidth:Le,height:dt};Nn.style.height=be(dt),ce.push(Nn)}return{span:Oe.makeSpan(["stretchy"],ce,v),minWidth:Le,height:dt}}}const{span:C,minWidth:I,height:H}=w();return C.height=H,C.style.height=be(H),I>0&&(C.style.minWidth=be(I)),C}};function Jt(S,v){if(!S||S.type!==v)throw new Error("Expected node of type "+v+", but got "+(S?"node of type "+S.type:String(S)));return S}function th(S){const v=pl(S);if(!v)throw new Error("Expected node of symbol group type, but got "+(S?"node of type "+S.type:String(S)));return v}function pl(S){return S&&(S.type==="atom"||Kn.hasOwnProperty(S.type))?S:null}const ml=(S,v)=>{let w,C,I;S&&S.type==="supsub"?(C=Jt(S.base,"accent"),w=C.base,S.base=w,I=Gt(Zt(S,v)),S.base=C):(C=Jt(S,"accent"),w=C.base);const H=Zt(w,v.havingCrampedStyle()),q=C.isShifty&&y.isCharacterBox(w);let ee=0;if(q){const Ge=y.getBaseElem(w),dt=Zt(Ge,v.havingCrampedStyle());ee=an(dt).skew}const ce=C.label==="\\c";let _e=ce?H.height+H.depth:Math.min(H.height,v.fontMetrics().xHeight),Ae;if(C.isStretchy)Ae=hs.svgSpan(C,v),Ae=Oe.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:H},{type:"elem",elem:Ae,wrapperClasses:["svg-align"],wrapperStyle:ee>0?{width:"calc(100% - "+be(2*ee)+")",marginLeft:be(2*ee)}:void 0}]},v);else{let Ge,dt;C.label==="\\vec"?(Ge=Oe.staticSvg("vec",v),dt=Oe.svgData.vec[1]):(Ge=Oe.makeOrd({mode:C.mode,text:C.label},v,"textord"),Ge=an(Ge),Ge.italic=0,dt=Ge.width,ce&&(_e+=Ge.depth)),Ae=Oe.makeSpan(["accent-body"],[Ge]);const kt=C.label==="\\textcircled";kt&&(Ae.classes.push("accent-full"),_e=H.height);let Dt=ee;kt||(Dt-=dt/2),Ae.style.left=be(Dt),C.label==="\\textcircled"&&(Ae.style.top=".2em"),Ae=Oe.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:H},{type:"kern",size:-_e},{type:"elem",elem:Ae}]},v)}const Le=Oe.makeSpan(["mord","accent"],[Ae],v);return I?(I.children[0]=Le,I.height=Math.max(Le.height,I.height),I.classes[0]="mord",I):Le},sd=(S,v)=>{const w=S.isStretchy?hs.mathMLnode(S.label):new at.MathNode("mo",[Ln(S.label,S.mode)]),C=new at.MathNode("mover",[Kt(S.base,v),w]);return C.setAttribute("accent","true"),C},Jp=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(S=>"\\"+S).join("|"));Mt({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(S,v)=>{const w=_a(v[0]),C=!Jp.test(S.funcName),I=!C||S.funcName==="\\widehat"||S.funcName==="\\widetilde"||S.funcName==="\\widecheck";return{type:"accent",mode:S.parser.mode,label:S.funcName,isStretchy:C,isShifty:I,base:w}},htmlBuilder:ml,mathmlBuilder:sd}),Mt({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(S,v)=>{const w=v[0];let C=S.parser.mode;return C==="math"&&(S.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+S.funcName+" works only in text mode"),C="text"),{type:"accent",mode:C,label:S.funcName,isStretchy:!1,isShifty:!0,base:w}},htmlBuilder:ml,mathmlBuilder:sd}),Mt({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(S,v)=>{let{parser:w,funcName:C}=S;const I=v[0];return{type:"accentUnder",mode:w.mode,label:C,base:I}},htmlBuilder:(S,v)=>{const w=Zt(S.base,v),C=hs.svgSpan(S,v),I=S.label==="\\utilde"?.12:0,H=Oe.makeVList({positionType:"top",positionData:w.height,children:[{type:"elem",elem:C,wrapperClasses:["svg-align"]},{type:"kern",size:I},{type:"elem",elem:w}]},v);return Oe.makeSpan(["mord","accentunder"],[H],v)},mathmlBuilder:(S,v)=>{const w=hs.mathMLnode(S.label),C=new at.MathNode("munder",[Kt(S.base,v),w]);return C.setAttribute("accentunder","true"),C}});const bc=S=>{const v=new at.MathNode("mpadded",S?[S]:[]);return v.setAttribute("width","+0.6em"),v.setAttribute("lspace","0.3em"),v};Mt({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(S,v,w){let{parser:C,funcName:I}=S;return{type:"xArrow",mode:C.mode,label:I,body:v[0],below:w[0]}},htmlBuilder(S,v){const w=v.style;let C=v.havingStyle(w.sup());const I=Oe.wrapFragment(Zt(S.body,C,v),v),H=S.label.slice(0,2)==="\\x"?"x":"cd";I.classes.push(H+"-arrow-pad");let q;S.below&&(C=v.havingStyle(w.sub()),q=Oe.wrapFragment(Zt(S.below,C,v),v),q.classes.push(H+"-arrow-pad"));const ee=hs.svgSpan(S,v),ce=-v.fontMetrics().axisHeight+.5*ee.height;let _e=-v.fontMetrics().axisHeight-.5*ee.height-.111;(I.depth>.25||S.label==="\\xleftequilibrium")&&(_e-=I.depth);let Ae;if(q){const Le=-v.fontMetrics().axisHeight+q.height+.5*ee.height+.111;Ae=Oe.makeVList({positionType:"individualShift",children:[{type:"elem",elem:I,shift:_e},{type:"elem",elem:ee,shift:ce},{type:"elem",elem:q,shift:Le}]},v)}else Ae=Oe.makeVList({positionType:"individualShift",children:[{type:"elem",elem:I,shift:_e},{type:"elem",elem:ee,shift:ce}]},v);return Ae.children[0].children[0].children[1].classes.push("svg-align"),Oe.makeSpan(["mrel","x-arrow"],[Ae],v)},mathmlBuilder(S,v){const w=hs.mathMLnode(S.label);w.setAttribute("minsize",S.label.charAt(0)==="x"?"1.75em":"3.0em");let C;if(S.body){const I=bc(Kt(S.body,v));if(S.below){const H=bc(Kt(S.below,v));C=new at.MathNode("munderover",[w,H,I])}else C=new at.MathNode("mover",[w,I])}else if(S.below){const I=bc(Kt(S.below,v));C=new at.MathNode("munder",[w,I])}else C=bc(),C=new at.MathNode("mover",[w,C]);return C}});const od=Oe.makeSpan;function Ea(S,v){const w=bn(S.body,v,!0);return od([S.mclass],w,v)}function Ta(S,v){let w;const C=Ti(S.body,v);return S.mclass==="minner"?w=new at.MathNode("mpadded",C):S.mclass==="mord"?S.isCharacterBox?(w=C[0],w.type="mi"):w=new at.MathNode("mi",C):(S.isCharacterBox?(w=C[0],w.type="mo"):w=new at.MathNode("mo",C),S.mclass==="mbin"?(w.attributes.lspace="0.22em",w.attributes.rspace="0.22em"):S.mclass==="mpunct"?(w.attributes.lspace="0em",w.attributes.rspace="0.17em"):S.mclass==="mopen"||S.mclass==="mclose"?(w.attributes.lspace="0em",w.attributes.rspace="0em"):S.mclass==="minner"&&(w.attributes.lspace="0.0556em",w.attributes.width="+0.1111em")),w}Mt({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(S,v){let{parser:w,funcName:C}=S;const I=v[0];return{type:"mclass",mode:w.mode,mclass:"m"+C.slice(5),body:Qt(I),isCharacterBox:y.isCharacterBox(I)}},htmlBuilder:Ea,mathmlBuilder:Ta});const Aa=S=>{const v=S.type==="ordgroup"&&S.body.length?S.body[0]:S;return v.type==="atom"&&(v.family==="bin"||v.family==="rel")?"m"+v.family:"mord"};Mt({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(S,v){let{parser:w}=S;return{type:"mclass",mode:w.mode,mclass:Aa(v[0]),body:Qt(v[1]),isCharacterBox:y.isCharacterBox(v[1])}}}),Mt({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(S,v){let{parser:w,funcName:C}=S;const I=v[1],H=v[0];let q;C!=="\\stackrel"?q=Aa(I):q="mrel";const ee={type:"op",mode:I.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:C!=="\\stackrel",body:Qt(I)},ce={type:"supsub",mode:H.mode,base:ee,sup:C==="\\underset"?null:H,sub:C==="\\underset"?H:null};return{type:"mclass",mode:w.mode,mclass:q,body:[ce],isCharacterBox:y.isCharacterBox(ce)}},htmlBuilder:Ea,mathmlBuilder:Ta}),Mt({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(S,v){let{parser:w}=S;return{type:"pmb",mode:w.mode,mclass:Aa(v[0]),body:Qt(v[0])}},htmlBuilder(S,v){const w=bn(S.body,v,!0),C=Oe.makeSpan([S.mclass],w,v);return C.style.textShadow="0.02em 0.01em 0.04px",C},mathmlBuilder(S,v){const w=Ti(S.body,v),C=new at.MathNode("mstyle",w);return C.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),C}});const nh={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},jr=()=>({type:"styling",body:[],mode:"math",style:"display"}),qr=S=>S.type==="textord"&&S.text==="@",Ca=(S,v)=>(S.type==="mathord"||S.type==="atom")&&S.text===v;function So(S,v,w){const C=nh[S];switch(C){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return w.callFunction(C,[v[0]],[v[1]]);case"\\uparrow":case"\\downarrow":{const I=w.callFunction("\\\\cdleft",[v[0]],[]),H={type:"atom",text:C,mode:"math",family:"rel"},q=w.callFunction("\\Big",[H],[]),ee=w.callFunction("\\\\cdright",[v[1]],[]),ce={type:"ordgroup",mode:"math",body:[I,q,ee]};return w.callFunction("\\\\cdparent",[ce],[])}case"\\\\cdlongequal":return w.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{const I={type:"textord",text:"\\Vert",mode:"math"};return w.callFunction("\\Big",[I],[])}default:return{type:"textord",text:" ",mode:"math"}}}function wo(S){const v=[];for(S.gullet.beginGroup(),S.gullet.macros.set("\\cr","\\\\\\relax"),S.gullet.beginGroup();;){v.push(S.parseExpression(!1,"\\\\")),S.gullet.endGroup(),S.gullet.beginGroup();const H=S.fetch().text;if(H==="&"||H==="\\\\")S.consume();else if(H==="\\end"){v[v.length-1].length===0&&v.pop();break}else throw new s("Expected \\\\ or \\cr or \\end",S.nextToken)}let w=[];const C=[w];for(let H=0;H<v.length;H++){const q=v[H];let ee=jr();for(let ce=0;ce<q.length;ce++)if(!qr(q[ce]))ee.body.push(q[ce]);else{w.push(ee),ce+=1;const _e=th(q[ce]).text,Ae=new Array(2);if(Ae[0]={type:"ordgroup",mode:"math",body:[]},Ae[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(_e)>-1))if("<>AV".indexOf(_e)>-1)for(let dt=0;dt<2;dt++){let kt=!0;for(let Dt=ce+1;Dt<q.length;Dt++){if(Ca(q[Dt],_e)){kt=!1,ce=Dt;break}if(qr(q[Dt]))throw new s("Missing a "+_e+" character to complete a CD arrow.",q[Dt]);Ae[dt].body.push(q[Dt])}if(kt)throw new s("Missing a "+_e+" character to complete a CD arrow.",q[ce])}else throw new s('Expected one of "<>AV=|." after @',q[ce]);const Ge={type:"styling",body:[So(_e,Ae,S)],mode:"math",style:"display"};w.push(Ge),ee=jr()}H%2===0?w.push(ee):w.shift(),w=[],C.push(w)}S.gullet.endGroup(),S.gullet.endGroup();const I=new Array(C[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:C,arraystretch:1,addJot:!0,rowGaps:[null],cols:I,colSeparationType:"CD",hLinesBeforeRow:new Array(C.length+1).fill([])}}Mt({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(S,v){let{parser:w,funcName:C}=S;return{type:"cdlabel",mode:w.mode,side:C.slice(4),label:v[0]}},htmlBuilder(S,v){const w=v.havingStyle(v.style.sup()),C=Oe.wrapFragment(Zt(S.label,w,v),v);return C.classes.push("cd-label-"+S.side),C.style.bottom=be(.8-C.depth),C.height=0,C.depth=0,C},mathmlBuilder(S,v){let w=new at.MathNode("mrow",[Kt(S.label,v)]);return w=new at.MathNode("mpadded",[w]),w.setAttribute("width","0"),S.side==="left"&&w.setAttribute("lspace","-1width"),w.setAttribute("voffset","0.7em"),w=new at.MathNode("mstyle",[w]),w.setAttribute("displaystyle","false"),w.setAttribute("scriptlevel","1"),w}}),Mt({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(S,v){let{parser:w}=S;return{type:"cdlabelparent",mode:w.mode,fragment:v[0]}},htmlBuilder(S,v){const w=Oe.wrapFragment(Zt(S.fragment,v),v);return w.classes.push("cd-vert-arrow"),w},mathmlBuilder(S,v){return new at.MathNode("mrow",[Kt(S.fragment,v)])}}),Mt({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(S,v){let{parser:w}=S;const I=Jt(v[0],"ordgroup").body;let H="";for(let ce=0;ce<I.length;ce++){const _e=Jt(I[ce],"textord");H+=_e.text}let q=parseInt(H),ee;if(isNaN(q))throw new s("\\@char has non-numeric argument "+H);if(q<0||q>=1114111)throw new s("\\@char with invalid code point "+H);return q<=65535?ee=String.fromCharCode(q):(q-=65536,ee=String.fromCharCode((q>>10)+55296,(q&1023)+56320)),{type:"textord",mode:w.mode,text:ee}}});const Qo=(S,v)=>{const w=bn(S.body,v.withColor(S.color),!1);return Oe.makeFragment(w)},ad=(S,v)=>{const w=Ti(S.body,v.withColor(S.color)),C=new at.MathNode("mstyle",w);return C.setAttribute("mathcolor",S.color),C};Mt({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(S,v){let{parser:w}=S;const C=Jt(v[0],"color-token").color,I=v[1];return{type:"color",mode:w.mode,color:C,body:Qt(I)}},htmlBuilder:Qo,mathmlBuilder:ad}),Mt({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(S,v){let{parser:w,breakOnTokenText:C}=S;const I=Jt(v[0],"color-token").color;w.gullet.macros.set("\\current@color",I);const H=w.parseExpression(!0,C);return{type:"color",mode:w.mode,color:I,body:H}},htmlBuilder:Qo,mathmlBuilder:ad}),Mt({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(S,v,w){let{parser:C}=S;const I=C.gullet.future().text==="["?C.parseSizeGroup(!0):null,H=!C.settings.displayMode||!C.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:C.mode,newLine:H,size:I&&Jt(I,"size").value}},htmlBuilder(S,v){const w=Oe.makeSpan(["mspace"],[],v);return S.newLine&&(w.classes.push("newline"),S.size&&(w.style.marginTop=be(ct(S.size,v)))),w},mathmlBuilder(S,v){const w=new at.MathNode("mspace");return S.newLine&&(w.setAttribute("linebreak","newline"),S.size&&w.setAttribute("height",be(ct(S.size,v)))),w}});const Mc={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},ih=S=>{const v=S.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(v))throw new s("Expected a control sequence",S);return v},Xr=S=>{let v=S.gullet.popToken();return v.text==="="&&(v=S.gullet.popToken(),v.text===" "&&(v=S.gullet.popToken())),v},Tr=(S,v,w,C)=>{let I=S.gullet.macros.get(w.text);I==null&&(w.noexpand=!0,I={tokens:[w],numArgs:0,unexpandable:!S.gullet.isExpandable(w.text)}),S.gullet.macros.set(v,I,C)};Mt({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(S){let{parser:v,funcName:w}=S;v.consumeSpaces();const C=v.fetch();if(Mc[C.text])return(w==="\\global"||w==="\\\\globallong")&&(C.text=Mc[C.text]),Jt(v.parseFunction(),"internal");throw new s("Invalid token after macro prefix",C)}}),Mt({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(S){let{parser:v,funcName:w}=S,C=v.gullet.popToken();const I=C.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(I))throw new s("Expected a control sequence",C);let H=0,q;const ee=[[]];for(;v.gullet.future().text!=="{";)if(C=v.gullet.popToken(),C.text==="#"){if(v.gullet.future().text==="{"){q=v.gullet.future(),ee[H].push("{");break}if(C=v.gullet.popToken(),!/^[1-9]$/.test(C.text))throw new s('Invalid argument number "'+C.text+'"');if(parseInt(C.text)!==H+1)throw new s('Argument number "'+C.text+'" out of order');H++,ee.push([])}else{if(C.text==="EOF")throw new s("Expected a macro definition");ee[H].push(C.text)}let{tokens:ce}=v.gullet.consumeArg();return q&&ce.unshift(q),(w==="\\edef"||w==="\\xdef")&&(ce=v.gullet.expandTokens(ce),ce.reverse()),v.gullet.macros.set(I,{tokens:ce,numArgs:H,delimiters:ee},w===Mc[w]),{type:"internal",mode:v.mode}}}),Mt({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(S){let{parser:v,funcName:w}=S;const C=ih(v.gullet.popToken());v.gullet.consumeSpaces();const I=Xr(v);return Tr(v,C,I,w==="\\\\globallet"),{type:"internal",mode:v.mode}}}),Mt({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(S){let{parser:v,funcName:w}=S;const C=ih(v.gullet.popToken()),I=v.gullet.popToken(),H=v.gullet.popToken();return Tr(v,C,H,w==="\\\\globalfuture"),v.gullet.pushToken(H),v.gullet.pushToken(I),{type:"internal",mode:v.mode}}});const On=function(S,v,w){const C=fn.math[S]&&fn.math[S].replace,I=we(C||S,v,w);if(!I)throw new Error("Unsupported symbol "+S+" and font size "+v+".");return I},Pa=function(S,v,w,C){const I=w.havingBaseStyle(v),H=Oe.makeSpan(C.concat(I.sizingClasses(w)),[S],w),q=I.sizeMultiplier/w.sizeMultiplier;return H.height*=q,H.depth*=q,H.maxFontSize=I.sizeMultiplier,H},fs=function(S,v,w){const C=v.havingBaseStyle(w),I=(1-v.sizeMultiplier/C.sizeMultiplier)*v.fontMetrics().axisHeight;S.classes.push("delimcenter"),S.style.top=be(I),S.height-=I,S.depth+=I},$p=function(S,v,w,C,I,H){const q=Oe.makeSymbol(S,"Main-Regular",I,C),ee=Pa(q,v,C,H);return w&&fs(ee,C,v),ee},em=function(S,v,w,C){return Oe.makeSymbol(S,"Size"+v+"-Regular",w,C)},rh=function(S,v,w,C,I,H){const q=em(S,v,I,C),ee=Pa(Oe.makeSpan(["delimsizing","size"+v],[q],C),j.TEXT,C,H);return w&&fs(ee,C,j.TEXT),ee},Ec=function(S,v,w){let C;return v==="Size1-Regular"?C="delim-size1":C="delim-size4",{type:"elem",elem:Oe.makeSpan(["delimsizinginner",C],[Oe.makeSpan([],[Oe.makeSymbol(S,v,w)])])}},sh=function(S,v,w){const C=Ye["Size4-Regular"][S.charCodeAt(0)]?Ye["Size4-Regular"][S.charCodeAt(0)][4]:Ye["Size1-Regular"][S.charCodeAt(0)][4],I=new _t("inner",We(S,Math.round(1e3*v))),H=new wt([I],{width:be(C),height:be(v),style:"width:"+be(C),viewBox:"0 0 "+1e3*C+" "+Math.round(1e3*v),preserveAspectRatio:"xMinYMin"}),q=Oe.makeSvgSpan([],[H],w);return q.height=v,q.style.height=be(v),q.style.width=be(C),{type:"elem",elem:q}},Ra=.008,bo={type:"kern",size:-1*Ra},ld=["|","\\lvert","\\rvert","\\vert"],Tc=["\\|","\\lVert","\\rVert","\\Vert"],Ac=function(S,v,w,C,I,H){let q,ee,ce,_e,Ae="",Le=0;q=ce=_e=S,ee=null;let Ge="Size1-Regular";S==="\\uparrow"?ce=_e="⏐":S==="\\Uparrow"?ce=_e="‖":S==="\\downarrow"?q=ce="⏐":S==="\\Downarrow"?q=ce="‖":S==="\\updownarrow"?(q="\\uparrow",ce="⏐",_e="\\downarrow"):S==="\\Updownarrow"?(q="\\Uparrow",ce="‖",_e="\\Downarrow"):y.contains(ld,S)?(ce="∣",Ae="vert",Le=333):y.contains(Tc,S)?(ce="∥",Ae="doublevert",Le=556):S==="["||S==="\\lbrack"?(q="⎡",ce="⎢",_e="⎣",Ge="Size4-Regular",Ae="lbrack",Le=667):S==="]"||S==="\\rbrack"?(q="⎤",ce="⎥",_e="⎦",Ge="Size4-Regular",Ae="rbrack",Le=667):S==="\\lfloor"||S==="⌊"?(ce=q="⎢",_e="⎣",Ge="Size4-Regular",Ae="lfloor",Le=667):S==="\\lceil"||S==="⌈"?(q="⎡",ce=_e="⎢",Ge="Size4-Regular",Ae="lceil",Le=667):S==="\\rfloor"||S==="⌋"?(ce=q="⎥",_e="⎦",Ge="Size4-Regular",Ae="rfloor",Le=667):S==="\\rceil"||S==="⌉"?(q="⎤",ce=_e="⎥",Ge="Size4-Regular",Ae="rceil",Le=667):S==="("||S==="\\lparen"?(q="⎛",ce="⎜",_e="⎝",Ge="Size4-Regular",Ae="lparen",Le=875):S===")"||S==="\\rparen"?(q="⎞",ce="⎟",_e="⎠",Ge="Size4-Regular",Ae="rparen",Le=875):S==="\\{"||S==="\\lbrace"?(q="⎧",ee="⎨",_e="⎩",ce="⎪",Ge="Size4-Regular"):S==="\\}"||S==="\\rbrace"?(q="⎫",ee="⎬",_e="⎭",ce="⎪",Ge="Size4-Regular"):S==="\\lgroup"||S==="⟮"?(q="⎧",_e="⎩",ce="⎪",Ge="Size4-Regular"):S==="\\rgroup"||S==="⟯"?(q="⎫",_e="⎭",ce="⎪",Ge="Size4-Regular"):S==="\\lmoustache"||S==="⎰"?(q="⎧",_e="⎭",ce="⎪",Ge="Size4-Regular"):(S==="\\rmoustache"||S==="⎱")&&(q="⎫",_e="⎩",ce="⎪",Ge="Size4-Regular");const dt=On(q,Ge,I),kt=dt.height+dt.depth,Dt=On(ce,Ge,I),dn=Dt.height+Dt.depth,nn=On(_e,Ge,I),mn=nn.height+nn.depth;let xn=0,Nn=1;if(ee!==null){const Yn=On(ee,Ge,I);xn=Yn.height+Yn.depth,Nn=2}const mr=kt+mn+xn,Ai=Math.max(0,Math.ceil((v-mr)/(Nn*dn))),Kr=mr+Ai*Nn*dn;let Na=C.fontMetrics().axisHeight;w&&(Na*=C.sizeMultiplier);const yn=Kr/2-Na,An=[];if(Ae.length>0){const Yn=Kr-kt-mn,qn=Math.round(Kr*1e3),gr=it(Ae,Math.round(Yn*1e3)),zc=new _t(Ae,gr),Th=(Le/1e3).toFixed(3)+"em",Ah=(qn/1e3).toFixed(3)+"em",Rd=new wt([zc],{width:Th,height:Ah,viewBox:"0 0 "+Le+" "+qn}),Bc=Oe.makeSvgSpan([],[Rd],C);Bc.height=qn/1e3,Bc.style.width=Th,Bc.style.height=Ah,An.push({type:"elem",elem:Bc})}else{if(An.push(Ec(_e,Ge,I)),An.push(bo),ee===null){const Yn=Kr-kt-mn+2*Ra;An.push(sh(ce,Yn,C))}else{const Yn=(Kr-kt-mn-xn)/2+2*Ra;An.push(sh(ce,Yn,C)),An.push(bo),An.push(Ec(ee,Ge,I)),An.push(bo),An.push(sh(ce,Yn,C))}An.push(bo),An.push(Ec(q,Ge,I))}const Un=C.havingBaseStyle(j.TEXT),Hn=Oe.makeVList({positionType:"bottom",positionData:yn,children:An},Un);return Pa(Oe.makeSpan(["delimsizing","mult"],[Hn],Un),j.TEXT,C,H)},oh=80,ah=.08,Jo=function(S,v,w,C,I){const H=ke(S,C,w),q=new _t(S,H),ee=new wt([q],{width:"400em",height:be(v),viewBox:"0 0 400000 "+w,preserveAspectRatio:"xMinYMin slice"});return Oe.makeSvgSpan(["hide-tail"],[ee],I)},tm=function(S,v){const w=v.havingBaseSizing(),C=Jn("\\surd",S*w.sizeMultiplier,ud,w);let I=w.sizeMultiplier;const H=Math.max(0,v.minRuleThickness-v.fontMetrics().sqrtRuleThickness);let q,ee=0,ce=0,_e=0,Ae;return C.type==="small"?(_e=1e3+1e3*H+oh,S<1?I=1:S<1.4&&(I=.7),ee=(1+H+ah)/I,ce=(1+H)/I,q=Jo("sqrtMain",ee,_e,H,v),q.style.minWidth="0.853em",Ae=.833/I):C.type==="large"?(_e=(1e3+oh)*Js[C.size],ce=(Js[C.size]+H)/I,ee=(Js[C.size]+H+ah)/I,q=Jo("sqrtSize"+C.size,ee,_e,H,v),q.style.minWidth="1.02em",Ae=1/I):(ee=S+H+ah,ce=S+H,_e=Math.floor(1e3*S+H)+oh,q=Jo("sqrtTall",ee,_e,H,v),q.style.minWidth="0.742em",Ae=1.056),q.height=ce,q.style.height=be(ee),{span:q,advanceWidth:Ae,ruleWidth:(v.fontMetrics().sqrtRuleThickness+H)*I}},gl=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","\\surd"],ds=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱"],vl=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],Js=[0,1.2,1.8,2.4,3],$s=function(S,v,w,C,I){if(S==="<"||S==="\\lt"||S==="⟨"?S="\\langle":(S===">"||S==="\\gt"||S==="⟩")&&(S="\\rangle"),y.contains(gl,S)||y.contains(vl,S))return rh(S,v,!1,w,C,I);if(y.contains(ds,S))return Ac(S,Js[v],!1,w,C,I);throw new s("Illegal delimiter: '"+S+"'")},cd=[{type:"small",style:j.SCRIPTSCRIPT},{type:"small",style:j.SCRIPT},{type:"small",style:j.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],yl=[{type:"small",style:j.SCRIPTSCRIPT},{type:"small",style:j.SCRIPT},{type:"small",style:j.TEXT},{type:"stack"}],ud=[{type:"small",style:j.SCRIPTSCRIPT},{type:"small",style:j.SCRIPT},{type:"small",style:j.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],hd=function(S){if(S.type==="small")return"Main-Regular";if(S.type==="large")return"Size"+S.size+"-Regular";if(S.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+S.type+"' here.")},Jn=function(S,v,w,C){const I=Math.min(2,3-C.style.size);for(let H=I;H<w.length&&w[H].type!=="stack";H++){const q=On(S,hd(w[H]),"math");let ee=q.height+q.depth;if(w[H].type==="small"){const ce=C.havingBaseStyle(w[H].style);ee*=ce.sizeMultiplier}if(ee>v)return w[H]}return w[w.length-1]},Cc=function(S,v,w,C,I,H){S==="<"||S==="\\lt"||S==="⟨"?S="\\langle":(S===">"||S==="\\gt"||S==="⟩")&&(S="\\rangle");let q;y.contains(vl,S)?q=cd:y.contains(gl,S)?q=ud:q=yl;const ee=Jn(S,v,q,C);return ee.type==="small"?$p(S,ee.style,w,C,I,H):ee.type==="large"?rh(S,ee.size,w,C,I,H):Ac(S,v,w,C,I,H)};var Rs={sqrtImage:tm,sizedDelim:$s,sizeToMaxHeight:Js,customSizedDelim:Cc,leftRightDelim:function(S,v,w,C,I,H){const q=C.fontMetrics().axisHeight*C.sizeMultiplier,ee=901,ce=5/C.fontMetrics().ptPerEm,_e=Math.max(v-q,w+q),Ae=Math.max(_e/500*ee,2*_e-ce);return Cc(S,Ae,!0,C,I,H)}};const Pc={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},ps=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","<",">","\\langle","⟨","\\rangle","⟩","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function Mo(S,v){const w=pl(S);if(w&&y.contains(ps,w.text))return w;throw w?new s("Invalid delimiter '"+w.text+"' after '"+v.funcName+"'",S):new s("Invalid delimiter type '"+S.type+"'",S)}Mt({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(S,v)=>{const w=Mo(v[0],S);return{type:"delimsizing",mode:S.parser.mode,size:Pc[S.funcName].size,mclass:Pc[S.funcName].mclass,delim:w.text}},htmlBuilder:(S,v)=>S.delim==="."?Oe.makeSpan([S.mclass]):Rs.sizedDelim(S.delim,S.size,v,S.mode,[S.mclass]),mathmlBuilder:S=>{const v=[];S.delim!=="."&&v.push(Ln(S.delim,S.mode));const w=new at.MathNode("mo",v);S.mclass==="mopen"||S.mclass==="mclose"?w.setAttribute("fence","true"):w.setAttribute("fence","false"),w.setAttribute("stretchy","true");const C=be(Rs.sizeToMaxHeight[S.size]);return w.setAttribute("minsize",C),w.setAttribute("maxsize",C),w}});function ni(S){if(!S.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}Mt({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(S,v)=>{const w=S.parser.gullet.macros.get("\\current@color");if(w&&typeof w!="string")throw new s("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:S.parser.mode,delim:Mo(v[0],S).text,color:w}}}),Mt({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(S,v)=>{const w=Mo(v[0],S),C=S.parser;++C.leftrightDepth;const I=C.parseExpression(!1);--C.leftrightDepth,C.expect("\\right",!1);const H=Jt(C.parseFunction(),"leftright-right");return{type:"leftright",mode:C.mode,body:I,left:w.text,right:H.delim,rightColor:H.color}},htmlBuilder:(S,v)=>{ni(S);const w=bn(S.body,v,!0,["mopen","mclose"]);let C=0,I=0,H=!1;for(let ce=0;ce<w.length;ce++)w[ce].isMiddle?H=!0:(C=Math.max(w[ce].height,C),I=Math.max(w[ce].depth,I));C*=v.sizeMultiplier,I*=v.sizeMultiplier;let q;if(S.left==="."?q=Er(v,["mopen"]):q=Rs.leftRightDelim(S.left,C,I,v,S.mode,["mopen"]),w.unshift(q),H)for(let ce=1;ce<w.length;ce++){const Ae=w[ce].isMiddle;Ae&&(w[ce]=Rs.leftRightDelim(Ae.delim,C,I,Ae.options,S.mode,[]))}let ee;if(S.right===".")ee=Er(v,["mclose"]);else{const ce=S.rightColor?v.withColor(S.rightColor):v;ee=Rs.leftRightDelim(S.right,C,I,ce,S.mode,["mclose"])}return w.push(ee),Oe.makeSpan(["minner"],w,v)},mathmlBuilder:(S,v)=>{ni(S);const w=Ti(S.body,v);if(S.left!=="."){const C=new at.MathNode("mo",[Ln(S.left,S.mode)]);C.setAttribute("fence","true"),w.unshift(C)}if(S.right!=="."){const C=new at.MathNode("mo",[Ln(S.right,S.mode)]);C.setAttribute("fence","true"),S.rightColor&&C.setAttribute("mathcolor",S.rightColor),w.push(C)}return Yo(w)}}),Mt({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(S,v)=>{const w=Mo(v[0],S);if(!S.parser.leftrightDepth)throw new s("\\middle without preceding \\left",w);return{type:"middle",mode:S.parser.mode,delim:w.text}},htmlBuilder:(S,v)=>{let w;if(S.delim===".")w=Er(v,[]);else{w=Rs.sizedDelim(S.delim,1,v,S.mode,[]);const C={delim:S.delim,options:v};w.isMiddle=C}return w},mathmlBuilder:(S,v)=>{const w=S.delim==="\\vert"||S.delim==="|"?Ln("|","text"):Ln(S.delim,S.mode),C=new at.MathNode("mo",[w]);return C.setAttribute("fence","true"),C.setAttribute("lspace","0.05em"),C.setAttribute("rspace","0.05em"),C}});const Oi=(S,v)=>{const w=Oe.wrapFragment(Zt(S.body,v),v),C=S.label.slice(1);let I=v.sizeMultiplier,H,q=0;const ee=y.isCharacterBox(S.body);if(C==="sout")H=Oe.makeSpan(["stretchy","sout"]),H.height=v.fontMetrics().defaultRuleThickness/I,q=-.5*v.fontMetrics().xHeight;else if(C==="phase"){const _e=ct({number:.6,unit:"pt"},v),Ae=ct({number:.35,unit:"ex"},v),Le=v.havingBaseSizing();I=I/Le.sizeMultiplier;const Ge=w.height+w.depth+_e+Ae;w.style.paddingLeft=be(Ge/2+_e);const dt=Math.floor(1e3*Ge*I),kt=ie(dt),Dt=new wt([new _t("phase",kt)],{width:"400em",height:be(dt/1e3),viewBox:"0 0 400000 "+dt,preserveAspectRatio:"xMinYMin slice"});H=Oe.makeSvgSpan(["hide-tail"],[Dt],v),H.style.height=be(Ge),q=w.depth+_e+Ae}else{/cancel/.test(C)?ee||w.classes.push("cancel-pad"):C==="angl"?w.classes.push("anglpad"):w.classes.push("boxpad");let _e=0,Ae=0,Le=0;/box/.test(C)?(Le=Math.max(v.fontMetrics().fboxrule,v.minRuleThickness),_e=v.fontMetrics().fboxsep+(C==="colorbox"?0:Le),Ae=_e):C==="angl"?(Le=Math.max(v.fontMetrics().defaultRuleThickness,v.minRuleThickness),_e=4*Le,Ae=Math.max(0,.25-w.depth)):(_e=ee?.2:0,Ae=_e),H=hs.encloseSpan(w,C,_e,Ae,v),/fbox|boxed|fcolorbox/.test(C)?(H.style.borderStyle="solid",H.style.borderWidth=be(Le)):C==="angl"&&Le!==.049&&(H.style.borderTopWidth=be(Le),H.style.borderRightWidth=be(Le)),q=w.depth+Ae,S.backgroundColor&&(H.style.backgroundColor=S.backgroundColor,S.borderColor&&(H.style.borderColor=S.borderColor))}let ce;if(S.backgroundColor)ce=Oe.makeVList({positionType:"individualShift",children:[{type:"elem",elem:H,shift:q},{type:"elem",elem:w,shift:0}]},v);else{const _e=/cancel|phase/.test(C)?["svg-align"]:[];ce=Oe.makeVList({positionType:"individualShift",children:[{type:"elem",elem:w,shift:0},{type:"elem",elem:H,shift:q,wrapperClasses:_e}]},v)}return/cancel/.test(C)&&(ce.height=w.height,ce.depth=w.depth),/cancel/.test(C)&&!ee?Oe.makeSpan(["mord","cancel-lap"],[ce],v):Oe.makeSpan(["mord"],[ce],v)},_i=(S,v)=>{let w=0;const C=new at.MathNode(S.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Kt(S.body,v)]);switch(S.label){case"\\cancel":C.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":C.setAttribute("notation","downdiagonalstrike");break;case"\\phase":C.setAttribute("notation","phasorangle");break;case"\\sout":C.setAttribute("notation","horizontalstrike");break;case"\\fbox":C.setAttribute("notation","box");break;case"\\angl":C.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(w=v.fontMetrics().fboxsep*v.fontMetrics().ptPerEm,C.setAttribute("width","+"+2*w+"pt"),C.setAttribute("height","+"+2*w+"pt"),C.setAttribute("lspace",w+"pt"),C.setAttribute("voffset",w+"pt"),S.label==="\\fcolorbox"){const I=Math.max(v.fontMetrics().fboxrule,v.minRuleThickness);C.setAttribute("style","border: "+I+"em solid "+String(S.borderColor))}break;case"\\xcancel":C.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return S.backgroundColor&&C.setAttribute("mathbackground",S.backgroundColor),C};Mt({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(S,v,w){let{parser:C,funcName:I}=S;const H=Jt(v[0],"color-token").color,q=v[1];return{type:"enclose",mode:C.mode,label:I,backgroundColor:H,body:q}},htmlBuilder:Oi,mathmlBuilder:_i}),Mt({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(S,v,w){let{parser:C,funcName:I}=S;const H=Jt(v[0],"color-token").color,q=Jt(v[1],"color-token").color,ee=v[2];return{type:"enclose",mode:C.mode,label:I,backgroundColor:q,borderColor:H,body:ee}},htmlBuilder:Oi,mathmlBuilder:_i}),Mt({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(S,v){let{parser:w}=S;return{type:"enclose",mode:w.mode,label:"\\fbox",body:v[0]}}}),Mt({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(S,v){let{parser:w,funcName:C}=S;const I=v[0];return{type:"enclose",mode:w.mode,label:C,body:I}},htmlBuilder:Oi,mathmlBuilder:_i}),Mt({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(S,v){let{parser:w}=S;return{type:"enclose",mode:w.mode,label:"\\angl",body:v[0]}}});const Rc={};function Ar(S){let{type:v,names:w,props:C,handler:I,htmlBuilder:H,mathmlBuilder:q}=S;const ee={type:v,numArgs:C.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:I};for(let ce=0;ce<w.length;++ce)Rc[w[ce]]=ee;H&&(qo[v]=H),q&&(us[v]=q)}const xl={};function te(S,v){xl[S]=v}class Fn{constructor(v,w,C){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=v,this.start=w,this.end=C}static range(v,w){return w?!v||!v.loc||!w.loc||v.loc.lexer!==w.loc.lexer?null:new Fn(v.loc.lexer,v.loc.start,w.loc.end):v&&v.loc}}class Cr{constructor(v,w){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=v,this.loc=w}range(v,w){return new Cr(w,Fn.range(this,v))}}function lh(S){const v=[];S.consumeSpaces();let w=S.fetch().text;for(w==="\\relax"&&(S.consume(),S.consumeSpaces(),w=S.fetch().text);w==="\\hline"||w==="\\hdashline";)S.consume(),v.push(w==="\\hdashline"),S.consumeSpaces(),w=S.fetch().text;return v}const _l=S=>{if(!S.parser.settings.displayMode)throw new s("{"+S.envName+"} can be used only in display mode.")};function ks(S){if(S.indexOf("ed")===-1)return S.indexOf("*")===-1}function qi(S,v,w){let{hskipBeforeAndAfter:C,addJot:I,cols:H,arraystretch:q,colSeparationType:ee,autoTag:ce,singleRow:_e,emptySingleRow:Ae,maxNumCols:Le,leqno:Ge}=v;if(S.gullet.beginGroup(),_e||S.gullet.macros.set("\\cr","\\\\\\relax"),!q){const Nn=S.gullet.expandMacroAsText("\\arraystretch");if(Nn==null)q=1;else if(q=parseFloat(Nn),!q||q<0)throw new s("Invalid \\arraystretch: "+Nn)}S.gullet.beginGroup();let dt=[];const kt=[dt],Dt=[],dn=[],nn=ce!=null?[]:void 0;function mn(){ce&&S.gullet.macros.set("\\@eqnsw","1",!0)}function xn(){nn&&(S.gullet.macros.get("\\df@tag")?(nn.push(S.subparse([new Cr("\\df@tag")])),S.gullet.macros.set("\\df@tag",void 0,!0)):nn.push(!!ce&&S.gullet.macros.get("\\@eqnsw")==="1"))}for(mn(),dn.push(lh(S));;){let Nn=S.parseExpression(!1,_e?"\\end":"\\\\");S.gullet.endGroup(),S.gullet.beginGroup(),Nn={type:"ordgroup",mode:S.mode,body:Nn},w&&(Nn={type:"styling",mode:S.mode,style:w,body:[Nn]}),dt.push(Nn);const mr=S.fetch().text;if(mr==="&"){if(Le&&dt.length===Le){if(_e||ee)throw new s("Too many tab characters: &",S.nextToken);S.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}S.consume()}else if(mr==="\\end"){xn(),dt.length===1&&Nn.type==="styling"&&Nn.body[0].body.length===0&&(kt.length>1||!Ae)&&kt.pop(),dn.length<kt.length+1&&dn.push([]);break}else if(mr==="\\\\"){S.consume();let Ai;S.gullet.future().text!==" "&&(Ai=S.parseSizeGroup(!0)),Dt.push(Ai?Ai.value:null),xn(),dn.push(lh(S)),dt=[],kt.push(dt),mn()}else throw new s("Expected & or \\\\ or \\cr or \\end",S.nextToken)}return S.gullet.endGroup(),S.gullet.endGroup(),{type:"array",mode:S.mode,addJot:I,arraystretch:q,body:kt,cols:H,rowGaps:Dt,hskipBeforeAndAfter:C,hLinesBeforeRow:dn,colSeparationType:ee,tags:nn,leqno:Ge}}function Eo(S){return S.slice(0,1)==="d"?"display":"text"}const Yr=function(S,v){let w,C;const I=S.body.length,H=S.hLinesBeforeRow;let q=0,ee=new Array(I);const ce=[],_e=Math.max(v.fontMetrics().arrayRuleWidth,v.minRuleThickness),Ae=1/v.fontMetrics().ptPerEm;let Le=5*Ae;S.colSeparationType&&S.colSeparationType==="small"&&(Le=.2778*(v.havingStyle(j.SCRIPT).sizeMultiplier/v.sizeMultiplier));const Ge=S.colSeparationType==="CD"?ct({number:3,unit:"ex"},v):12*Ae,dt=3*Ae,kt=S.arraystretch*Ge,Dt=.7*kt,dn=.3*kt;let nn=0;function mn(yn){for(let An=0;An<yn.length;++An)An>0&&(nn+=.25),ce.push({pos:nn,isDashed:yn[An]})}for(mn(H[0]),w=0;w<S.body.length;++w){const yn=S.body[w];let An=Dt,Un=dn;q<yn.length&&(q=yn.length);const Hn=new Array(yn.length);for(C=0;C<yn.length;++C){const gr=Zt(yn[C],v);Un<gr.depth&&(Un=gr.depth),An<gr.height&&(An=gr.height),Hn[C]=gr}const Yn=S.rowGaps[w];let qn=0;Yn&&(qn=ct(Yn,v),qn>0&&(qn+=dn,Un<qn&&(Un=qn),qn=0)),S.addJot&&(Un+=dt),Hn.height=An,Hn.depth=Un,nn+=An,Hn.pos=nn,nn+=Un+qn,ee[w]=Hn,mn(H[w+1])}const xn=nn/2+v.fontMetrics().axisHeight,Nn=S.cols||[],mr=[];let Ai,Kr;const Na=[];if(S.tags&&S.tags.some(yn=>yn))for(w=0;w<I;++w){const yn=ee[w],An=yn.pos-xn,Un=S.tags[w];let Hn;Un===!0?Hn=Oe.makeSpan(["eqn-num"],[],v):Un===!1?Hn=Oe.makeSpan([],[],v):Hn=Oe.makeSpan([],bn(Un,v,!0),v),Hn.depth=yn.depth,Hn.height=yn.height,Na.push({type:"elem",elem:Hn,shift:An})}for(C=0,Kr=0;C<q||Kr<Nn.length;++C,++Kr){let yn=Nn[Kr]||{},An=!0;for(;yn.type==="separator";){if(An||(Ai=Oe.makeSpan(["arraycolsep"],[]),Ai.style.width=be(v.fontMetrics().doubleRuleSep),mr.push(Ai)),yn.separator==="|"||yn.separator===":"){const Yn=yn.separator==="|"?"solid":"dashed",qn=Oe.makeSpan(["vertical-separator"],[],v);qn.style.height=be(nn),qn.style.borderRightWidth=be(_e),qn.style.borderRightStyle=Yn,qn.style.margin="0 "+be(-_e/2);const gr=nn-xn;gr&&(qn.style.verticalAlign=be(-gr)),mr.push(qn)}else throw new s("Invalid separator type: "+yn.separator);Kr++,yn=Nn[Kr]||{},An=!1}if(C>=q)continue;let Un;(C>0||S.hskipBeforeAndAfter)&&(Un=y.deflt(yn.pregap,Le),Un!==0&&(Ai=Oe.makeSpan(["arraycolsep"],[]),Ai.style.width=be(Un),mr.push(Ai)));let Hn=[];for(w=0;w<I;++w){const Yn=ee[w],qn=Yn[C];if(!qn)continue;const gr=Yn.pos-xn;qn.depth=Yn.depth,qn.height=Yn.height,Hn.push({type:"elem",elem:qn,shift:gr})}Hn=Oe.makeVList({positionType:"individualShift",children:Hn},v),Hn=Oe.makeSpan(["col-align-"+(yn.align||"c")],[Hn]),mr.push(Hn),(C<q-1||S.hskipBeforeAndAfter)&&(Un=y.deflt(yn.postgap,Le),Un!==0&&(Ai=Oe.makeSpan(["arraycolsep"],[]),Ai.style.width=be(Un),mr.push(Ai)))}if(ee=Oe.makeSpan(["mtable"],mr),ce.length>0){const yn=Oe.makeLineSpan("hline",v,_e),An=Oe.makeLineSpan("hdashline",v,_e),Un=[{type:"elem",elem:ee,shift:0}];for(;ce.length>0;){const Hn=ce.pop(),Yn=Hn.pos-xn;Hn.isDashed?Un.push({type:"elem",elem:An,shift:Yn}):Un.push({type:"elem",elem:yn,shift:Yn})}ee=Oe.makeVList({positionType:"individualShift",children:Un},v)}if(Na.length===0)return Oe.makeSpan(["mord"],[ee],v);{let yn=Oe.makeVList({positionType:"individualShift",children:Na},v);return yn=Oe.makeSpan(["tag"],[yn],v),Oe.makeFragment([ee,yn])}},ch={c:"center ",l:"left ",r:"right "},Ls=function(S,v){const w=[],C=new at.MathNode("mtd",[],["mtr-glue"]),I=new at.MathNode("mtd",[],["mml-eqn-num"]);for(let Le=0;Le<S.body.length;Le++){const Ge=S.body[Le],dt=[];for(let kt=0;kt<Ge.length;kt++)dt.push(new at.MathNode("mtd",[Kt(Ge[kt],v)]));S.tags&&S.tags[Le]&&(dt.unshift(C),dt.push(C),S.leqno?dt.unshift(I):dt.push(I)),w.push(new at.MathNode("mtr",dt))}let H=new at.MathNode("mtable",w);const q=S.arraystretch===.5?.1:.16+S.arraystretch-1+(S.addJot?.09:0);H.setAttribute("rowspacing",be(q));let ee="",ce="";if(S.cols&&S.cols.length>0){const Le=S.cols;let Ge="",dt=!1,kt=0,Dt=Le.length;Le[0].type==="separator"&&(ee+="top ",kt=1),Le[Le.length-1].type==="separator"&&(ee+="bottom ",Dt-=1);for(let dn=kt;dn<Dt;dn++)Le[dn].type==="align"?(ce+=ch[Le[dn].align],dt&&(Ge+="none "),dt=!0):Le[dn].type==="separator"&&dt&&(Ge+=Le[dn].separator==="|"?"solid ":"dashed ",dt=!1);H.setAttribute("columnalign",ce.trim()),/[sd]/.test(Ge)&&H.setAttribute("columnlines",Ge.trim())}if(S.colSeparationType==="align"){const Le=S.cols||[];let Ge="";for(let dt=1;dt<Le.length;dt++)Ge+=dt%2?"0em ":"1em ";H.setAttribute("columnspacing",Ge.trim())}else S.colSeparationType==="alignat"||S.colSeparationType==="gather"?H.setAttribute("columnspacing","0em"):S.colSeparationType==="small"?H.setAttribute("columnspacing","0.2778em"):S.colSeparationType==="CD"?H.setAttribute("columnspacing","0.5em"):H.setAttribute("columnspacing","1em");let _e="";const Ae=S.hLinesBeforeRow;ee+=Ae[0].length>0?"left ":"",ee+=Ae[Ae.length-1].length>0?"right ":"";for(let Le=1;Le<Ae.length-1;Le++)_e+=Ae[Le].length===0?"none ":Ae[Le][0]?"dashed ":"solid ";return/[sd]/.test(_e)&&H.setAttribute("rowlines",_e.trim()),ee!==""&&(H=new at.MathNode("menclose",[H]),H.setAttribute("notation",ee.trim())),S.arraystretch&&S.arraystretch<1&&(H=new at.MathNode("mstyle",[H]),H.setAttribute("scriptlevel","1")),H},fd=function(S,v){S.envName.indexOf("ed")===-1&&_l(S);const w=[],C=S.envName.indexOf("at")>-1?"alignat":"align",I=S.envName==="split",H=qi(S.parser,{cols:w,addJot:!0,autoTag:I?void 0:ks(S.envName),emptySingleRow:!0,colSeparationType:C,maxNumCols:I?2:void 0,leqno:S.parser.settings.leqno},"display");let q,ee=0;const ce={type:"ordgroup",mode:S.mode,body:[]};if(v[0]&&v[0].type==="ordgroup"){let Ae="";for(let Le=0;Le<v[0].body.length;Le++){const Ge=Jt(v[0].body[Le],"textord");Ae+=Ge.text}q=Number(Ae),ee=q*2}const _e=!ee;H.body.forEach(function(Ae){for(let Le=1;Le<Ae.length;Le+=2){const Ge=Jt(Ae[Le],"styling");Jt(Ge.body[0],"ordgroup").body.unshift(ce)}if(_e)ee<Ae.length&&(ee=Ae.length);else{const Le=Ae.length/2;if(q<Le)throw new s("Too many math in a row: "+("expected "+q+", but got "+Le),Ae[0])}});for(let Ae=0;Ae<ee;++Ae){let Le="r",Ge=0;Ae%2===1?Le="l":Ae>0&&_e&&(Ge=1),w[Ae]={type:"align",align:Le,pregap:Ge,postgap:0}}return H.colSeparationType=_e?"align":"alignat",H};Ar({type:"array",names:["array","darray"],props:{numArgs:1},handler(S,v){const I=(pl(v[0])?[v[0]]:Jt(v[0],"ordgroup").body).map(function(q){const ce=th(q).text;if("lcr".indexOf(ce)!==-1)return{type:"align",align:ce};if(ce==="|")return{type:"separator",separator:"|"};if(ce===":")return{type:"separator",separator:":"};throw new s("Unknown column alignment: "+ce,q)}),H={cols:I,hskipBeforeAndAfter:!0,maxNumCols:I.length};return qi(S.parser,H,Eo(S.envName))},htmlBuilder:Yr,mathmlBuilder:Ls}),Ar({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(S){const v={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[S.envName.replace("*","")];let w="c";const C={hskipBeforeAndAfter:!1,cols:[{type:"align",align:w}]};if(S.envName.charAt(S.envName.length-1)==="*"){const q=S.parser;if(q.consumeSpaces(),q.fetch().text==="["){if(q.consume(),q.consumeSpaces(),w=q.fetch().text,"lcr".indexOf(w)===-1)throw new s("Expected l or c or r",q.nextToken);q.consume(),q.consumeSpaces(),q.expect("]"),q.consume(),C.cols=[{type:"align",align:w}]}}const I=qi(S.parser,C,Eo(S.envName)),H=Math.max(0,...I.body.map(q=>q.length));return I.cols=new Array(H).fill({type:"align",align:w}),v?{type:"leftright",mode:S.mode,body:[I],left:v[0],right:v[1],rightColor:void 0}:I},htmlBuilder:Yr,mathmlBuilder:Ls}),Ar({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(S){const v={arraystretch:.5},w=qi(S.parser,v,"script");return w.colSeparationType="small",w},htmlBuilder:Yr,mathmlBuilder:Ls}),Ar({type:"array",names:["subarray"],props:{numArgs:1},handler(S,v){const I=(pl(v[0])?[v[0]]:Jt(v[0],"ordgroup").body).map(function(q){const ce=th(q).text;if("lc".indexOf(ce)!==-1)return{type:"align",align:ce};throw new s("Unknown column alignment: "+ce,q)});if(I.length>1)throw new s("{subarray} can contain only one column");let H={cols:I,hskipBeforeAndAfter:!1,arraystretch:.5};if(H=qi(S.parser,H,"script"),H.body.length>0&&H.body[0].length>1)throw new s("{subarray} can contain only one column");return H},htmlBuilder:Yr,mathmlBuilder:Ls}),Ar({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(S){const v={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},w=qi(S.parser,v,Eo(S.envName));return{type:"leftright",mode:S.mode,body:[w],left:S.envName.indexOf("r")>-1?".":"\\{",right:S.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:Yr,mathmlBuilder:Ls}),Ar({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:fd,htmlBuilder:Yr,mathmlBuilder:Ls}),Ar({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(S){y.contains(["gather","gather*"],S.envName)&&_l(S);const v={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:ks(S.envName),emptySingleRow:!0,leqno:S.parser.settings.leqno};return qi(S.parser,v,"display")},htmlBuilder:Yr,mathmlBuilder:Ls}),Ar({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:fd,htmlBuilder:Yr,mathmlBuilder:Ls}),Ar({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(S){_l(S);const v={autoTag:ks(S.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:S.parser.settings.leqno};return qi(S.parser,v,"display")},htmlBuilder:Yr,mathmlBuilder:Ls}),Ar({type:"array",names:["CD"],props:{numArgs:0},handler(S){return _l(S),wo(S.parser)},htmlBuilder:Yr,mathmlBuilder:Ls}),te("\\nonumber","\\gdef\\@eqnsw{0}"),te("\\notag","\\nonumber"),Mt({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(S,v){throw new s(S.funcName+" valid only within array environment")}});var dd=Rc;Mt({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(S,v){let{parser:w,funcName:C}=S;const I=v[0];if(I.type!=="ordgroup")throw new s("Invalid environment name",I);let H="";for(let q=0;q<I.body.length;++q)H+=Jt(I.body[q],"textord").text;if(C==="\\begin"){if(!dd.hasOwnProperty(H))throw new s("No such environment: "+H,I);const q=dd[H],{args:ee,optArgs:ce}=w.parseArguments("\\begin{"+H+"}",q),_e={mode:w.mode,envName:H,parser:w},Ae=q.handler(_e,ee,ce);w.expect("\\end",!1);const Le=w.nextToken,Ge=Jt(w.parseFunction(),"environment");if(Ge.name!==H)throw new s("Mismatch: \\begin{"+H+"} matched by \\end{"+Ge.name+"}",Le);return Ae}return{type:"environment",mode:w.mode,name:H,nameGroup:I}}});const pd=(S,v)=>{const w=S.font,C=v.withFont(w);return Zt(S.body,C)},md=(S,v)=>{const w=S.font,C=v.withFont(w);return Kt(S.body,C)},uh={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};Mt({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(S,v)=>{let{parser:w,funcName:C}=S;const I=_a(v[0]);let H=C;return H in uh&&(H=uh[H]),{type:"font",mode:w.mode,font:H.slice(1),body:I}},htmlBuilder:pd,mathmlBuilder:md}),Mt({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(S,v)=>{let{parser:w}=S;const C=v[0],I=y.isCharacterBox(C);return{type:"mclass",mode:w.mode,mclass:Aa(C),body:[{type:"font",mode:w.mode,font:"boldsymbol",body:C}],isCharacterBox:I}}}),Mt({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(S,v)=>{let{parser:w,funcName:C,breakOnTokenText:I}=S;const{mode:H}=w,q=w.parseExpression(!0,I),ee="math"+C.slice(1);return{type:"font",mode:H,font:ee,body:{type:"ordgroup",mode:w.mode,body:q}}},htmlBuilder:pd,mathmlBuilder:md});const Sl=(S,v)=>{let w=v;return S==="display"?w=w.id>=j.SCRIPT.id?w.text():j.DISPLAY:S==="text"&&w.size===j.DISPLAY.size?w=j.TEXT:S==="script"?w=j.SCRIPT:S==="scriptscript"&&(w=j.SCRIPTSCRIPT),w},hh=(S,v)=>{const w=Sl(S.size,v.style),C=w.fracNum(),I=w.fracDen();let H;H=v.havingStyle(C);const q=Zt(S.numer,H,v);if(S.continued){const mn=8.5/v.fontMetrics().ptPerEm,xn=3.5/v.fontMetrics().ptPerEm;q.height=q.height<mn?mn:q.height,q.depth=q.depth<xn?xn:q.depth}H=v.havingStyle(I);const ee=Zt(S.denom,H,v);let ce,_e,Ae;S.hasBarLine?(S.barSize?(_e=ct(S.barSize,v),ce=Oe.makeLineSpan("frac-line",v,_e)):ce=Oe.makeLineSpan("frac-line",v),_e=ce.height,Ae=ce.height):(ce=null,_e=0,Ae=v.fontMetrics().defaultRuleThickness);let Le,Ge,dt;w.size===j.DISPLAY.size||S.size==="display"?(Le=v.fontMetrics().num1,_e>0?Ge=3*Ae:Ge=7*Ae,dt=v.fontMetrics().denom1):(_e>0?(Le=v.fontMetrics().num2,Ge=Ae):(Le=v.fontMetrics().num3,Ge=3*Ae),dt=v.fontMetrics().denom2);let kt;if(ce){const mn=v.fontMetrics().axisHeight;Le-q.depth-(mn+.5*_e)<Ge&&(Le+=Ge-(Le-q.depth-(mn+.5*_e))),mn-.5*_e-(ee.height-dt)<Ge&&(dt+=Ge-(mn-.5*_e-(ee.height-dt)));const xn=-(mn-.5*_e);kt=Oe.makeVList({positionType:"individualShift",children:[{type:"elem",elem:ee,shift:dt},{type:"elem",elem:ce,shift:xn},{type:"elem",elem:q,shift:-Le}]},v)}else{const mn=Le-q.depth-(ee.height-dt);mn<Ge&&(Le+=.5*(Ge-mn),dt+=.5*(Ge-mn)),kt=Oe.makeVList({positionType:"individualShift",children:[{type:"elem",elem:ee,shift:dt},{type:"elem",elem:q,shift:-Le}]},v)}H=v.havingStyle(w),kt.height*=H.sizeMultiplier/v.sizeMultiplier,kt.depth*=H.sizeMultiplier/v.sizeMultiplier;let Dt;w.size===j.DISPLAY.size?Dt=v.fontMetrics().delim1:w.size===j.SCRIPTSCRIPT.size?Dt=v.havingStyle(j.SCRIPT).fontMetrics().delim2:Dt=v.fontMetrics().delim2;let dn,nn;return S.leftDelim==null?dn=Er(v,["mopen"]):dn=Rs.customSizedDelim(S.leftDelim,Dt,!0,v.havingStyle(w),S.mode,["mopen"]),S.continued?nn=Oe.makeSpan([]):S.rightDelim==null?nn=Er(v,["mclose"]):nn=Rs.customSizedDelim(S.rightDelim,Dt,!0,v.havingStyle(w),S.mode,["mclose"]),Oe.makeSpan(["mord"].concat(H.sizingClasses(v)),[dn,Oe.makeSpan(["mfrac"],[kt]),nn],v)},wl=(S,v)=>{let w=new at.MathNode("mfrac",[Kt(S.numer,v),Kt(S.denom,v)]);if(!S.hasBarLine)w.setAttribute("linethickness","0px");else if(S.barSize){const I=ct(S.barSize,v);w.setAttribute("linethickness",be(I))}const C=Sl(S.size,v.style);if(C.size!==v.style.size){w=new at.MathNode("mstyle",[w]);const I=C.size===j.DISPLAY.size?"true":"false";w.setAttribute("displaystyle",I),w.setAttribute("scriptlevel","0")}if(S.leftDelim!=null||S.rightDelim!=null){const I=[];if(S.leftDelim!=null){const H=new at.MathNode("mo",[new at.TextNode(S.leftDelim.replace("\\",""))]);H.setAttribute("fence","true"),I.push(H)}if(I.push(w),S.rightDelim!=null){const H=new at.MathNode("mo",[new at.TextNode(S.rightDelim.replace("\\",""))]);H.setAttribute("fence","true"),I.push(H)}return Yo(I)}return w};Mt({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(S,v)=>{let{parser:w,funcName:C}=S;const I=v[0],H=v[1];let q,ee=null,ce=null,_e="auto";switch(C){case"\\dfrac":case"\\frac":case"\\tfrac":q=!0;break;case"\\\\atopfrac":q=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":q=!1,ee="(",ce=")";break;case"\\\\bracefrac":q=!1,ee="\\{",ce="\\}";break;case"\\\\brackfrac":q=!1,ee="[",ce="]";break;default:throw new Error("Unrecognized genfrac command")}switch(C){case"\\dfrac":case"\\dbinom":_e="display";break;case"\\tfrac":case"\\tbinom":_e="text";break}return{type:"genfrac",mode:w.mode,continued:!1,numer:I,denom:H,hasBarLine:q,leftDelim:ee,rightDelim:ce,size:_e,barSize:null}},htmlBuilder:hh,mathmlBuilder:wl}),Mt({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(S,v)=>{let{parser:w,funcName:C}=S;const I=v[0],H=v[1];return{type:"genfrac",mode:w.mode,continued:!0,numer:I,denom:H,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}}),Mt({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(S){let{parser:v,funcName:w,token:C}=S,I;switch(w){case"\\over":I="\\frac";break;case"\\choose":I="\\binom";break;case"\\atop":I="\\\\atopfrac";break;case"\\brace":I="\\\\bracefrac";break;case"\\brack":I="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:v.mode,replaceWith:I,token:C}}});const kc=["display","text","script","scriptscript"],fh=function(S){let v=null;return S.length>0&&(v=S,v=v==="."?null:v),v};Mt({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(S,v){let{parser:w}=S;const C=v[4],I=v[5],H=_a(v[0]),q=H.type==="atom"&&H.family==="open"?fh(H.text):null,ee=_a(v[1]),ce=ee.type==="atom"&&ee.family==="close"?fh(ee.text):null,_e=Jt(v[2],"size");let Ae,Le=null;_e.isBlank?Ae=!0:(Le=_e.value,Ae=Le.number>0);let Ge="auto",dt=v[3];if(dt.type==="ordgroup"){if(dt.body.length>0){const kt=Jt(dt.body[0],"textord");Ge=kc[Number(kt.text)]}}else dt=Jt(dt,"textord"),Ge=kc[Number(dt.text)];return{type:"genfrac",mode:w.mode,numer:C,denom:I,continued:!1,hasBarLine:Ae,barSize:Le,leftDelim:q,rightDelim:ce,size:Ge}},htmlBuilder:hh,mathmlBuilder:wl}),Mt({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(S,v){let{parser:w,funcName:C,token:I}=S;return{type:"infix",mode:w.mode,replaceWith:"\\\\abovefrac",size:Jt(v[0],"size").value,token:I}}}),Mt({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(S,v)=>{let{parser:w,funcName:C}=S;const I=v[0],H=_(Jt(v[1],"infix").size),q=v[2],ee=H.number>0;return{type:"genfrac",mode:w.mode,numer:I,denom:q,continued:!1,hasBarLine:ee,barSize:H,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:hh,mathmlBuilder:wl});const bl=(S,v)=>{const w=v.style;let C,I;S.type==="supsub"?(C=S.sup?Zt(S.sup,v.havingStyle(w.sup()),v):Zt(S.sub,v.havingStyle(w.sub()),v),I=Jt(S.base,"horizBrace")):I=Jt(S,"horizBrace");const H=Zt(I.base,v.havingBaseStyle(j.DISPLAY)),q=hs.svgSpan(I,v);let ee;if(I.isOver?(ee=Oe.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:H},{type:"kern",size:.1},{type:"elem",elem:q}]},v),ee.children[0].children[0].children[1].classes.push("svg-align")):(ee=Oe.makeVList({positionType:"bottom",positionData:H.depth+.1+q.height,children:[{type:"elem",elem:q},{type:"kern",size:.1},{type:"elem",elem:H}]},v),ee.children[0].children[0].children[0].classes.push("svg-align")),C){const ce=Oe.makeSpan(["mord",I.isOver?"mover":"munder"],[ee],v);I.isOver?ee=Oe.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:ce},{type:"kern",size:.2},{type:"elem",elem:C}]},v):ee=Oe.makeVList({positionType:"bottom",positionData:ce.depth+.2+C.height+C.depth,children:[{type:"elem",elem:C},{type:"kern",size:.2},{type:"elem",elem:ce}]},v)}return Oe.makeSpan(["mord",I.isOver?"mover":"munder"],[ee],v)};Mt({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(S,v){let{parser:w,funcName:C}=S;return{type:"horizBrace",mode:w.mode,label:C,isOver:/^\\over/.test(C),base:v[0]}},htmlBuilder:bl,mathmlBuilder:(S,v)=>{const w=hs.mathMLnode(S.label);return new at.MathNode(S.isOver?"mover":"munder",[Kt(S.base,v),w])}}),Mt({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(S,v)=>{let{parser:w}=S;const C=v[1],I=Jt(v[0],"url").url;return w.settings.isTrusted({command:"\\href",url:I})?{type:"href",mode:w.mode,href:I,body:Qt(C)}:w.formatUnsupportedCmd("\\href")},htmlBuilder:(S,v)=>{const w=bn(S.body,v,!1);return Oe.makeAnchor(S.href,[],w,v)},mathmlBuilder:(S,v)=>{let w=Ps(S.body,v);return w instanceof Ei||(w=new Ei("mrow",[w])),w.setAttribute("href",S.href),w}}),Mt({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(S,v)=>{let{parser:w}=S;const C=Jt(v[0],"url").url;if(!w.settings.isTrusted({command:"\\url",url:C}))return w.formatUnsupportedCmd("\\url");const I=[];for(let q=0;q<C.length;q++){let ee=C[q];ee==="~"&&(ee="\\textasciitilde"),I.push({type:"textord",mode:"text",text:ee})}const H={type:"text",mode:w.mode,font:"\\texttt",body:I};return{type:"href",mode:w.mode,href:C,body:Qt(H)}}}),Mt({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(S,v){let{parser:w}=S;return{type:"hbox",mode:w.mode,body:Qt(v[0])}},htmlBuilder(S,v){const w=bn(S.body,v,!1);return Oe.makeFragment(w)},mathmlBuilder(S,v){return new at.MathNode("mrow",Ti(S.body,v))}}),Mt({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(S,v)=>{let{parser:w,funcName:C,token:I}=S;const H=Jt(v[0],"raw").string,q=v[1];w.settings.strict&&w.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");let ee;const ce={};switch(C){case"\\htmlClass":ce.class=H,ee={command:"\\htmlClass",class:H};break;case"\\htmlId":ce.id=H,ee={command:"\\htmlId",id:H};break;case"\\htmlStyle":ce.style=H,ee={command:"\\htmlStyle",style:H};break;case"\\htmlData":{const _e=H.split(",");for(let Ae=0;Ae<_e.length;Ae++){const Le=_e[Ae].split("=");if(Le.length!==2)throw new s("Error parsing key-value for \\htmlData");ce["data-"+Le[0].trim()]=Le[1].trim()}ee={command:"\\htmlData",attributes:ce};break}default:throw new Error("Unrecognized html command")}return w.settings.isTrusted(ee)?{type:"html",mode:w.mode,attributes:ce,body:Qt(q)}:w.formatUnsupportedCmd(C)},htmlBuilder:(S,v)=>{const w=bn(S.body,v,!1),C=["enclosing"];S.attributes.class&&C.push(...S.attributes.class.trim().split(/\s+/));const I=Oe.makeSpan(C,w,v);for(const H in S.attributes)H!=="class"&&S.attributes.hasOwnProperty(H)&&I.setAttribute(H,S.attributes[H]);return I},mathmlBuilder:(S,v)=>Ps(S.body,v)}),Mt({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(S,v)=>{let{parser:w}=S;return{type:"htmlmathml",mode:w.mode,html:Qt(v[0]),mathml:Qt(v[1])}},htmlBuilder:(S,v)=>{const w=bn(S.html,v,!1);return Oe.makeFragment(w)},mathmlBuilder:(S,v)=>Ps(S.mathml,v)});const dh=function(S){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(S))return{number:+S,unit:"bp"};{const v=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(S);if(!v)throw new s("Invalid size: '"+S+"' in \\includegraphics");const w={number:+(v[1]+v[2]),unit:v[3]};if(!Lt(w))throw new s("Invalid unit: '"+w.unit+"' in \\includegraphics.");return w}};Mt({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(S,v,w)=>{let{parser:C}=S,I={number:0,unit:"em"},H={number:.9,unit:"em"},q={number:0,unit:"em"},ee="";if(w[0]){const Ae=Jt(w[0],"raw").string.split(",");for(let Le=0;Le<Ae.length;Le++){const Ge=Ae[Le].split("=");if(Ge.length===2){const dt=Ge[1].trim();switch(Ge[0].trim()){case"alt":ee=dt;break;case"width":I=dh(dt);break;case"height":H=dh(dt);break;case"totalheight":q=dh(dt);break;default:throw new s("Invalid key: '"+Ge[0]+"' in \\includegraphics.")}}}}const ce=Jt(v[0],"url").url;return ee===""&&(ee=ce,ee=ee.replace(/^.*[\\/]/,""),ee=ee.substring(0,ee.lastIndexOf("."))),C.settings.isTrusted({command:"\\includegraphics",url:ce})?{type:"includegraphics",mode:C.mode,alt:ee,width:I,height:H,totalheight:q,src:ce}:C.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(S,v)=>{const w=ct(S.height,v);let C=0;S.totalheight.number>0&&(C=ct(S.totalheight,v)-w);let I=0;S.width.number>0&&(I=ct(S.width,v));const H={height:be(w+C)};I>0&&(H.width=be(I)),C>0&&(H.verticalAlign=be(-C));const q=new Re(S.src,S.alt,H);return q.height=w,q.depth=C,q},mathmlBuilder:(S,v)=>{const w=new at.MathNode("mglyph",[]);w.setAttribute("alt",S.alt);const C=ct(S.height,v);let I=0;if(S.totalheight.number>0&&(I=ct(S.totalheight,v)-C,w.setAttribute("valign",be(-I))),w.setAttribute("height",be(C+I)),S.width.number>0){const H=ct(S.width,v);w.setAttribute("width",be(H))}return w.setAttribute("src",S.src),w}}),Mt({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(S,v){let{parser:w,funcName:C}=S;const I=Jt(v[0],"size");if(w.settings.strict){const H=C[1]==="m",q=I.value.unit==="mu";H?(q||w.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+C+" supports only mu units, "+("not "+I.value.unit+" units")),w.mode!=="math"&&w.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+C+" works only in math mode")):q&&w.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+C+" doesn't support mu units")}return{type:"kern",mode:w.mode,dimension:I.value}},htmlBuilder(S,v){return Oe.makeGlue(S.dimension,v)},mathmlBuilder(S,v){const w=ct(S.dimension,v);return new at.SpaceNode(w)}}),Mt({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(S,v)=>{let{parser:w,funcName:C}=S;const I=v[0];return{type:"lap",mode:w.mode,alignment:C.slice(5),body:I}},htmlBuilder:(S,v)=>{let w;S.alignment==="clap"?(w=Oe.makeSpan([],[Zt(S.body,v)]),w=Oe.makeSpan(["inner"],[w],v)):w=Oe.makeSpan(["inner"],[Zt(S.body,v)]);const C=Oe.makeSpan(["fix"],[]);let I=Oe.makeSpan([S.alignment],[w,C],v);const H=Oe.makeSpan(["strut"]);return H.style.height=be(I.height+I.depth),I.depth&&(H.style.verticalAlign=be(-I.depth)),I.children.unshift(H),I=Oe.makeSpan(["thinbox"],[I],v),Oe.makeSpan(["mord","vbox"],[I],v)},mathmlBuilder:(S,v)=>{const w=new at.MathNode("mpadded",[Kt(S.body,v)]);if(S.alignment!=="rlap"){const C=S.alignment==="llap"?"-1":"-0.5";w.setAttribute("lspace",C+"width")}return w.setAttribute("width","0px"),w}}),Mt({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(S,v){let{funcName:w,parser:C}=S;const I=C.mode;C.switchMode("math");const H=w==="\\("?"\\)":"$",q=C.parseExpression(!1,H);return C.expect(H),C.switchMode(I),{type:"styling",mode:C.mode,style:"text",body:q}}}),Mt({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(S,v){throw new s("Mismatched "+S.funcName)}});const gd=(S,v)=>{switch(v.style.size){case j.DISPLAY.size:return S.display;case j.TEXT.size:return S.text;case j.SCRIPT.size:return S.script;case j.SCRIPTSCRIPT.size:return S.scriptscript;default:return S.text}};Mt({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(S,v)=>{let{parser:w}=S;return{type:"mathchoice",mode:w.mode,display:Qt(v[0]),text:Qt(v[1]),script:Qt(v[2]),scriptscript:Qt(v[3])}},htmlBuilder:(S,v)=>{const w=gd(S,v),C=bn(w,v,!1);return Oe.makeFragment(C)},mathmlBuilder:(S,v)=>{const w=gd(S,v);return Ps(w,v)}});const vd=(S,v,w,C,I,H,q)=>{S=Oe.makeSpan([],[S]);const ee=w&&y.isCharacterBox(w);let ce,_e;if(v){const Ge=Zt(v,C.havingStyle(I.sup()),C);_e={elem:Ge,kern:Math.max(C.fontMetrics().bigOpSpacing1,C.fontMetrics().bigOpSpacing3-Ge.depth)}}if(w){const Ge=Zt(w,C.havingStyle(I.sub()),C);ce={elem:Ge,kern:Math.max(C.fontMetrics().bigOpSpacing2,C.fontMetrics().bigOpSpacing4-Ge.height)}}let Ae;if(_e&&ce){const Ge=C.fontMetrics().bigOpSpacing5+ce.elem.height+ce.elem.depth+ce.kern+S.depth+q;Ae=Oe.makeVList({positionType:"bottom",positionData:Ge,children:[{type:"kern",size:C.fontMetrics().bigOpSpacing5},{type:"elem",elem:ce.elem,marginLeft:be(-H)},{type:"kern",size:ce.kern},{type:"elem",elem:S},{type:"kern",size:_e.kern},{type:"elem",elem:_e.elem,marginLeft:be(H)},{type:"kern",size:C.fontMetrics().bigOpSpacing5}]},C)}else if(ce){const Ge=S.height-q;Ae=Oe.makeVList({positionType:"top",positionData:Ge,children:[{type:"kern",size:C.fontMetrics().bigOpSpacing5},{type:"elem",elem:ce.elem,marginLeft:be(-H)},{type:"kern",size:ce.kern},{type:"elem",elem:S}]},C)}else if(_e){const Ge=S.depth+q;Ae=Oe.makeVList({positionType:"bottom",positionData:Ge,children:[{type:"elem",elem:S},{type:"kern",size:_e.kern},{type:"elem",elem:_e.elem,marginLeft:be(H)},{type:"kern",size:C.fontMetrics().bigOpSpacing5}]},C)}else return S;const Le=[Ae];if(ce&&H!==0&&!ee){const Ge=Oe.makeSpan(["mspace"],[],C);Ge.style.marginRight=be(H),Le.unshift(Ge)}return Oe.makeSpan(["mop","op-limits"],Le,C)},ph=["\\smallint"],ka=(S,v)=>{let w,C,I=!1,H;S.type==="supsub"?(w=S.sup,C=S.sub,H=Jt(S.base,"op"),I=!0):H=Jt(S,"op");const q=v.style;let ee=!1;q.size===j.DISPLAY.size&&H.symbol&&!y.contains(ph,H.name)&&(ee=!0);let ce;if(H.symbol){const Le=ee?"Size2-Regular":"Size1-Regular";let Ge="";if((H.name==="\\oiint"||H.name==="\\oiiint")&&(Ge=H.name.slice(1),H.name=Ge==="oiint"?"\\iint":"\\iiint"),ce=Oe.makeSymbol(H.name,Le,"math",v,["mop","op-symbol",ee?"large-op":"small-op"]),Ge.length>0){const dt=ce.italic,kt=Oe.staticSvg(Ge+"Size"+(ee?"2":"1"),v);ce=Oe.makeVList({positionType:"individualShift",children:[{type:"elem",elem:ce,shift:0},{type:"elem",elem:kt,shift:ee?.08:0}]},v),H.name="\\"+Ge,ce.classes.unshift("mop"),ce.italic=dt}}else if(H.body){const Le=bn(H.body,v,!0);Le.length===1&&Le[0]instanceof rt?(ce=Le[0],ce.classes[0]="mop"):ce=Oe.makeSpan(["mop"],Le,v)}else{const Le=[];for(let Ge=1;Ge<H.name.length;Ge++)Le.push(Oe.mathsym(H.name[Ge],H.mode,v));ce=Oe.makeSpan(["mop"],Le,v)}let _e=0,Ae=0;return(ce instanceof rt||H.name==="\\oiint"||H.name==="\\oiiint")&&!H.suppressBaseShift&&(_e=(ce.height-ce.depth)/2-v.fontMetrics().axisHeight,Ae=ce.italic),I?vd(ce,w,C,v,q,Ae,_e):(_e&&(ce.style.position="relative",ce.style.top=be(_e)),ce)},Ml=(S,v)=>{let w;if(S.symbol)w=new Ei("mo",[Ln(S.name,S.mode)]),y.contains(ph,S.name)&&w.setAttribute("largeop","false");else if(S.body)w=new Ei("mo",Ti(S.body,v));else{w=new Ei("mi",[new tr(S.name.slice(1))]);const C=new Ei("mo",[Ln("⁡","text")]);S.parentIsSupSub?w=new Ei("mrow",[w,C]):w=pr([w,C])}return w},hy={"∏":"\\prod","∐":"\\coprod","∑":"\\sum","⋀":"\\bigwedge","⋁":"\\bigvee","⋂":"\\bigcap","⋃":"\\bigcup","⨀":"\\bigodot","⨁":"\\bigoplus","⨂":"\\bigotimes","⨄":"\\biguplus","⨆":"\\bigsqcup"};Mt({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","∏","∐","∑","⋀","⋁","⋂","⋃","⨀","⨁","⨂","⨄","⨆"],props:{numArgs:0},handler:(S,v)=>{let{parser:w,funcName:C}=S,I=C;return I.length===1&&(I=hy[I]),{type:"op",mode:w.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:I}},htmlBuilder:ka,mathmlBuilder:Ml}),Mt({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(S,v)=>{let{parser:w}=S;const C=v[0];return{type:"op",mode:w.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:Qt(C)}},htmlBuilder:ka,mathmlBuilder:Ml});const im={"∫":"\\int","∬":"\\iint","∭":"\\iiint","∮":"\\oint","∯":"\\oiint","∰":"\\oiiint"};Mt({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(S){let{parser:v,funcName:w}=S;return{type:"op",mode:v.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:w}},htmlBuilder:ka,mathmlBuilder:Ml}),Mt({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(S){let{parser:v,funcName:w}=S;return{type:"op",mode:v.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:w}},htmlBuilder:ka,mathmlBuilder:Ml}),Mt({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","∫","∬","∭","∮","∯","∰"],props:{numArgs:0},handler(S){let{parser:v,funcName:w}=S,C=w;return C.length===1&&(C=im[C]),{type:"op",mode:v.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:C}},htmlBuilder:ka,mathmlBuilder:Ml});const rm=(S,v)=>{let w,C,I=!1,H;S.type==="supsub"?(w=S.sup,C=S.sub,H=Jt(S.base,"operatorname"),I=!0):H=Jt(S,"operatorname");let q;if(H.body.length>0){const ee=H.body.map(_e=>{const Ae=_e.text;return typeof Ae=="string"?{type:"textord",mode:_e.mode,text:Ae}:_e}),ce=bn(ee,v.withFont("mathrm"),!0);for(let _e=0;_e<ce.length;_e++){const Ae=ce[_e];Ae instanceof rt&&(Ae.text=Ae.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}q=Oe.makeSpan(["mop"],ce,v)}else q=Oe.makeSpan(["mop"],[],v);return I?vd(q,w,C,v,v.style,0,0):q};Mt({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(S,v)=>{let{parser:w,funcName:C}=S;const I=v[0];return{type:"operatorname",mode:w.mode,body:Qt(I),alwaysHandleSupSub:C==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:rm,mathmlBuilder:(S,v)=>{let w=Ti(S.body,v.withFont("mathrm")),C=!0;for(let q=0;q<w.length;q++){const ee=w[q];if(!(ee instanceof at.SpaceNode))if(ee instanceof at.MathNode)switch(ee.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{const ce=ee.children[0];ee.children.length===1&&ce instanceof at.TextNode?ce.text=ce.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):C=!1;break}default:C=!1}else C=!1}if(C){const q=w.map(ee=>ee.toText()).join("");w=[new at.TextNode(q)]}const I=new at.MathNode("mi",w);I.setAttribute("mathvariant","normal");const H=new at.MathNode("mo",[Ln("⁡","text")]);return S.parentIsSupSub?new at.MathNode("mrow",[I,H]):at.newDocumentFragment([I,H])}}),te("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@"),Cs({type:"ordgroup",htmlBuilder(S,v){return S.semisimple?Oe.makeFragment(bn(S.body,v,!1)):Oe.makeSpan(["mord"],bn(S.body,v,!0),v)},mathmlBuilder(S,v){return Ps(S.body,v,!0)}}),Mt({type:"overline",names:["\\overline"],props:{numArgs:1},handler(S,v){let{parser:w}=S;const C=v[0];return{type:"overline",mode:w.mode,body:C}},htmlBuilder(S,v){const w=Zt(S.body,v.havingCrampedStyle()),C=Oe.makeLineSpan("overline-line",v),I=v.fontMetrics().defaultRuleThickness,H=Oe.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:w},{type:"kern",size:3*I},{type:"elem",elem:C},{type:"kern",size:I}]},v);return Oe.makeSpan(["mord","overline"],[H],v)},mathmlBuilder(S,v){const w=new at.MathNode("mo",[new at.TextNode("‾")]);w.setAttribute("stretchy","true");const C=new at.MathNode("mover",[Kt(S.body,v),w]);return C.setAttribute("accent","true"),C}}),Mt({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(S,v)=>{let{parser:w}=S;const C=v[0];return{type:"phantom",mode:w.mode,body:Qt(C)}},htmlBuilder:(S,v)=>{const w=bn(S.body,v.withPhantom(),!1);return Oe.makeFragment(w)},mathmlBuilder:(S,v)=>{const w=Ti(S.body,v);return new at.MathNode("mphantom",w)}}),Mt({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(S,v)=>{let{parser:w}=S;const C=v[0];return{type:"hphantom",mode:w.mode,body:C}},htmlBuilder:(S,v)=>{let w=Oe.makeSpan([],[Zt(S.body,v.withPhantom())]);if(w.height=0,w.depth=0,w.children)for(let C=0;C<w.children.length;C++)w.children[C].height=0,w.children[C].depth=0;return w=Oe.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:w}]},v),Oe.makeSpan(["mord"],[w],v)},mathmlBuilder:(S,v)=>{const w=Ti(Qt(S.body),v),C=new at.MathNode("mphantom",w),I=new at.MathNode("mpadded",[C]);return I.setAttribute("height","0px"),I.setAttribute("depth","0px"),I}}),Mt({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(S,v)=>{let{parser:w}=S;const C=v[0];return{type:"vphantom",mode:w.mode,body:C}},htmlBuilder:(S,v)=>{const w=Oe.makeSpan(["inner"],[Zt(S.body,v.withPhantom())]),C=Oe.makeSpan(["fix"],[]);return Oe.makeSpan(["mord","rlap"],[w,C],v)},mathmlBuilder:(S,v)=>{const w=Ti(Qt(S.body),v),C=new at.MathNode("mphantom",w),I=new at.MathNode("mpadded",[C]);return I.setAttribute("width","0px"),I}}),Mt({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(S,v){let{parser:w}=S;const C=Jt(v[0],"size").value,I=v[1];return{type:"raisebox",mode:w.mode,dy:C,body:I}},htmlBuilder(S,v){const w=Zt(S.body,v),C=ct(S.dy,v);return Oe.makeVList({positionType:"shift",positionData:-C,children:[{type:"elem",elem:w}]},v)},mathmlBuilder(S,v){const w=new at.MathNode("mpadded",[Kt(S.body,v)]),C=S.dy.number+S.dy.unit;return w.setAttribute("voffset",C),w}}),Mt({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0},handler(S){let{parser:v}=S;return{type:"internal",mode:v.mode}}}),Mt({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(S,v,w){let{parser:C}=S;const I=w[0],H=Jt(v[0],"size"),q=Jt(v[1],"size");return{type:"rule",mode:C.mode,shift:I&&Jt(I,"size").value,width:H.value,height:q.value}},htmlBuilder(S,v){const w=Oe.makeSpan(["mord","rule"],[],v),C=ct(S.width,v),I=ct(S.height,v),H=S.shift?ct(S.shift,v):0;return w.style.borderRightWidth=be(C),w.style.borderTopWidth=be(I),w.style.bottom=be(H),w.width=C,w.height=I+H,w.depth=-H,w.maxFontSize=I*1.125*v.sizeMultiplier,w},mathmlBuilder(S,v){const w=ct(S.width,v),C=ct(S.height,v),I=S.shift?ct(S.shift,v):0,H=v.color&&v.getColor()||"black",q=new at.MathNode("mspace");q.setAttribute("mathbackground",H),q.setAttribute("width",be(w)),q.setAttribute("height",be(C));const ee=new at.MathNode("mpadded",[q]);return I>=0?ee.setAttribute("height",be(I)):(ee.setAttribute("height",be(I)),ee.setAttribute("depth",be(-I))),ee.setAttribute("voffset",be(I)),ee}});function yd(S,v,w){const C=bn(S,v,!1),I=v.sizeMultiplier/w.sizeMultiplier;for(let H=0;H<C.length;H++){const q=C[H].classes.indexOf("sizing");q<0?Array.prototype.push.apply(C[H].classes,v.sizingClasses(w)):C[H].classes[q+1]==="reset-size"+v.size&&(C[H].classes[q+1]="reset-size"+w.size),C[H].height*=I,C[H].depth*=I}return Oe.makeFragment(C)}const xd=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"];Mt({type:"sizing",names:xd,props:{numArgs:0,allowedInText:!0},handler:(S,v)=>{let{breakOnTokenText:w,funcName:C,parser:I}=S;const H=I.parseExpression(!1,w);return{type:"sizing",mode:I.mode,size:xd.indexOf(C)+1,body:H}},htmlBuilder:(S,v)=>{const w=v.havingSize(S.size);return yd(S.body,w,v)},mathmlBuilder:(S,v)=>{const w=v.havingSize(S.size),C=Ti(S.body,w),I=new at.MathNode("mstyle",C);return I.setAttribute("mathsize",be(w.sizeMultiplier)),I}}),Mt({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(S,v,w)=>{let{parser:C}=S,I=!1,H=!1;const q=w[0]&&Jt(w[0],"ordgroup");if(q){let ce="";for(let _e=0;_e<q.body.length;++_e)if(ce=q.body[_e].text,ce==="t")I=!0;else if(ce==="b")H=!0;else{I=!1,H=!1;break}}else I=!0,H=!0;const ee=v[0];return{type:"smash",mode:C.mode,body:ee,smashHeight:I,smashDepth:H}},htmlBuilder:(S,v)=>{const w=Oe.makeSpan([],[Zt(S.body,v)]);if(!S.smashHeight&&!S.smashDepth)return w;if(S.smashHeight&&(w.height=0,w.children))for(let I=0;I<w.children.length;I++)w.children[I].height=0;if(S.smashDepth&&(w.depth=0,w.children))for(let I=0;I<w.children.length;I++)w.children[I].depth=0;const C=Oe.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:w}]},v);return Oe.makeSpan(["mord"],[C],v)},mathmlBuilder:(S,v)=>{const w=new at.MathNode("mpadded",[Kt(S.body,v)]);return S.smashHeight&&w.setAttribute("height","0px"),S.smashDepth&&w.setAttribute("depth","0px"),w}}),Mt({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(S,v,w){let{parser:C}=S;const I=w[0],H=v[0];return{type:"sqrt",mode:C.mode,body:H,index:I}},htmlBuilder(S,v){let w=Zt(S.body,v.havingCrampedStyle());w.height===0&&(w.height=v.fontMetrics().xHeight),w=Oe.wrapFragment(w,v);const I=v.fontMetrics().defaultRuleThickness;let H=I;v.style.id<j.TEXT.id&&(H=v.fontMetrics().xHeight);let q=I+H/4;const ee=w.height+w.depth+q+I,{span:ce,ruleWidth:_e,advanceWidth:Ae}=Rs.sqrtImage(ee,v),Le=ce.height-_e;Le>w.height+w.depth+q&&(q=(q+Le-w.height-w.depth)/2);const Ge=ce.height-w.height-q-_e;w.style.paddingLeft=be(Ae);const dt=Oe.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:w,wrapperClasses:["svg-align"]},{type:"kern",size:-(w.height+Ge)},{type:"elem",elem:ce},{type:"kern",size:_e}]},v);if(S.index){const kt=v.havingStyle(j.SCRIPTSCRIPT),Dt=Zt(S.index,kt,v),dn=.6*(dt.height-dt.depth),nn=Oe.makeVList({positionType:"shift",positionData:-dn,children:[{type:"elem",elem:Dt}]},v),mn=Oe.makeSpan(["root"],[nn]);return Oe.makeSpan(["mord","sqrt"],[mn,dt],v)}else return Oe.makeSpan(["mord","sqrt"],[dt],v)},mathmlBuilder(S,v){const{body:w,index:C}=S;return C?new at.MathNode("mroot",[Kt(w,v),Kt(C,v)]):new at.MathNode("msqrt",[Kt(w,v)])}});const _d={display:j.DISPLAY,text:j.TEXT,script:j.SCRIPT,scriptscript:j.SCRIPTSCRIPT};Mt({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(S,v){let{breakOnTokenText:w,funcName:C,parser:I}=S;const H=I.parseExpression(!0,w),q=C.slice(1,C.length-5);return{type:"styling",mode:I.mode,style:q,body:H}},htmlBuilder(S,v){const w=_d[S.style],C=v.havingStyle(w).withFont("");return yd(S.body,C,v)},mathmlBuilder(S,v){const w=_d[S.style],C=v.havingStyle(w),I=Ti(S.body,C),H=new at.MathNode("mstyle",I),ee={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]}[S.style];return H.setAttribute("scriptlevel",ee[0]),H.setAttribute("displaystyle",ee[1]),H}});const mh=function(S,v){const w=S.base;return w?w.type==="op"?w.limits&&(v.style.size===j.DISPLAY.size||w.alwaysHandleSupSub)?ka:null:w.type==="operatorname"?w.alwaysHandleSupSub&&(v.style.size===j.DISPLAY.size||w.limits)?rm:null:w.type==="accent"?y.isCharacterBox(w.base)?ml:null:w.type==="horizBrace"&&!S.sub===w.isOver?bl:null:null};Cs({type:"supsub",htmlBuilder(S,v){const w=mh(S,v);if(w)return w(S,v);const{base:C,sup:I,sub:H}=S,q=Zt(C,v);let ee,ce;const _e=v.fontMetrics();let Ae=0,Le=0;const Ge=C&&y.isCharacterBox(C);if(I){const xn=v.havingStyle(v.style.sup());ee=Zt(I,xn,v),Ge||(Ae=q.height-xn.fontMetrics().supDrop*xn.sizeMultiplier/v.sizeMultiplier)}if(H){const xn=v.havingStyle(v.style.sub());ce=Zt(H,xn,v),Ge||(Le=q.depth+xn.fontMetrics().subDrop*xn.sizeMultiplier/v.sizeMultiplier)}let dt;v.style===j.DISPLAY?dt=_e.sup1:v.style.cramped?dt=_e.sup3:dt=_e.sup2;const kt=v.sizeMultiplier,Dt=be(.5/_e.ptPerEm/kt);let dn=null;if(ce){const xn=S.base&&S.base.type==="op"&&S.base.name&&(S.base.name==="\\oiint"||S.base.name==="\\oiiint");(q instanceof rt||xn)&&(dn=be(-q.italic))}let nn;if(ee&&ce){Ae=Math.max(Ae,dt,ee.depth+.25*_e.xHeight),Le=Math.max(Le,_e.sub2);const Nn=4*_e.defaultRuleThickness;if(Ae-ee.depth-(ce.height-Le)<Nn){Le=Nn-(Ae-ee.depth)+ce.height;const Ai=.8*_e.xHeight-(Ae-ee.depth);Ai>0&&(Ae+=Ai,Le-=Ai)}const mr=[{type:"elem",elem:ce,shift:Le,marginRight:Dt,marginLeft:dn},{type:"elem",elem:ee,shift:-Ae,marginRight:Dt}];nn=Oe.makeVList({positionType:"individualShift",children:mr},v)}else if(ce){Le=Math.max(Le,_e.sub1,ce.height-.8*_e.xHeight);const xn=[{type:"elem",elem:ce,marginLeft:dn,marginRight:Dt}];nn=Oe.makeVList({positionType:"shift",positionData:Le,children:xn},v)}else if(ee)Ae=Math.max(Ae,dt,ee.depth+.25*_e.xHeight),nn=Oe.makeVList({positionType:"shift",positionData:-Ae,children:[{type:"elem",elem:ee,marginRight:Dt}]},v);else throw new Error("supsub must have either sup or sub.");const mn=ji(q,"right")||"mord";return Oe.makeSpan([mn],[q,Oe.makeSpan(["msupsub"],[nn])],v)},mathmlBuilder(S,v){let w=!1,C,I;S.base&&S.base.type==="horizBrace"&&(I=!!S.sup,I===S.base.isOver&&(w=!0,C=S.base.isOver)),S.base&&(S.base.type==="op"||S.base.type==="operatorname")&&(S.base.parentIsSupSub=!0);const H=[Kt(S.base,v)];S.sub&&H.push(Kt(S.sub,v)),S.sup&&H.push(Kt(S.sup,v));let q;if(w)q=C?"mover":"munder";else if(S.sub)if(S.sup){const ee=S.base;ee&&ee.type==="op"&&ee.limits&&v.style===j.DISPLAY||ee&&ee.type==="operatorname"&&ee.alwaysHandleSupSub&&(v.style===j.DISPLAY||ee.limits)?q="munderover":q="msubsup"}else{const ee=S.base;ee&&ee.type==="op"&&ee.limits&&(v.style===j.DISPLAY||ee.alwaysHandleSupSub)||ee&&ee.type==="operatorname"&&ee.alwaysHandleSupSub&&(ee.limits||v.style===j.DISPLAY)?q="munder":q="msub"}else{const ee=S.base;ee&&ee.type==="op"&&ee.limits&&(v.style===j.DISPLAY||ee.alwaysHandleSupSub)||ee&&ee.type==="operatorname"&&ee.alwaysHandleSupSub&&(ee.limits||v.style===j.DISPLAY)?q="mover":q="msup"}return new at.MathNode(q,H)}}),Cs({type:"atom",htmlBuilder(S,v){return Oe.mathsym(S.text,S.mode,v,["m"+S.family])},mathmlBuilder(S,v){const w=new at.MathNode("mo",[Ln(S.text,S.mode)]);if(S.family==="bin"){const C=Gr(S,v);C==="bold-italic"&&w.setAttribute("mathvariant",C)}else S.family==="punct"?w.setAttribute("separator","true"):(S.family==="open"||S.family==="close")&&w.setAttribute("stretchy","false");return w}});const sm={mi:"italic",mn:"normal",mtext:"normal"};Cs({type:"mathord",htmlBuilder(S,v){return Oe.makeOrd(S,v,"mathord")},mathmlBuilder(S,v){const w=new at.MathNode("mi",[Ln(S.text,S.mode,v)]),C=Gr(S,v)||"italic";return C!==sm[w.type]&&w.setAttribute("mathvariant",C),w}}),Cs({type:"textord",htmlBuilder(S,v){return Oe.makeOrd(S,v,"textord")},mathmlBuilder(S,v){const w=Ln(S.text,S.mode,v),C=Gr(S,v)||"normal";let I;return S.mode==="text"?I=new at.MathNode("mtext",[w]):/[0-9]/.test(S.text)?I=new at.MathNode("mn",[w]):S.text==="\\prime"?I=new at.MathNode("mo",[w]):I=new at.MathNode("mi",[w]),C!==sm[I.type]&&I.setAttribute("mathvariant",C),I}});const Sd={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},wd={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};Cs({type:"spacing",htmlBuilder(S,v){if(wd.hasOwnProperty(S.text)){const w=wd[S.text].className||"";if(S.mode==="text"){const C=Oe.makeOrd(S,v,"textord");return C.classes.push(w),C}else return Oe.makeSpan(["mspace",w],[Oe.mathsym(S.text,S.mode,v)],v)}else{if(Sd.hasOwnProperty(S.text))return Oe.makeSpan(["mspace",Sd[S.text]],[],v);throw new s('Unknown type of space "'+S.text+'"')}},mathmlBuilder(S,v){let w;if(wd.hasOwnProperty(S.text))w=new at.MathNode("mtext",[new at.TextNode(" ")]);else{if(Sd.hasOwnProperty(S.text))return new at.MathNode("mspace");throw new s('Unknown type of space "'+S.text+'"')}return w}});const gh=()=>{const S=new at.MathNode("mtd",[]);return S.setAttribute("width","50%"),S};Cs({type:"tag",mathmlBuilder(S,v){const w=new at.MathNode("mtable",[new at.MathNode("mtr",[gh(),new at.MathNode("mtd",[Ps(S.body,v)]),gh(),new at.MathNode("mtd",[Ps(S.tag,v)])])]);return w.setAttribute("width","100%"),w}});const vh={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},om={"\\textbf":"textbf","\\textmd":"textmd"},am={"\\textit":"textit","\\textup":"textup"},bd=(S,v)=>{const w=S.font;if(w){if(vh[w])return v.withTextFontFamily(vh[w]);if(om[w])return v.withTextFontWeight(om[w]);if(w==="\\emph")return v.fontShape==="textit"?v.withTextFontShape("textup"):v.withTextFontShape("textit")}else return v;return v.withTextFontShape(am[w])};Mt({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(S,v){let{parser:w,funcName:C}=S;const I=v[0];return{type:"text",mode:w.mode,body:Qt(I),font:C}},htmlBuilder(S,v){const w=bd(S,v),C=bn(S.body,w,!0);return Oe.makeSpan(["mord","text"],C,w)},mathmlBuilder(S,v){const w=bd(S,v);return Ps(S.body,w)}}),Mt({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(S,v){let{parser:w}=S;return{type:"underline",mode:w.mode,body:v[0]}},htmlBuilder(S,v){const w=Zt(S.body,v),C=Oe.makeLineSpan("underline-line",v),I=v.fontMetrics().defaultRuleThickness,H=Oe.makeVList({positionType:"top",positionData:w.height,children:[{type:"kern",size:I},{type:"elem",elem:C},{type:"kern",size:3*I},{type:"elem",elem:w}]},v);return Oe.makeSpan(["mord","underline"],[H],v)},mathmlBuilder(S,v){const w=new at.MathNode("mo",[new at.TextNode("‾")]);w.setAttribute("stretchy","true");const C=new at.MathNode("munder",[Kt(S.body,v),w]);return C.setAttribute("accentunder","true"),C}}),Mt({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(S,v){let{parser:w}=S;return{type:"vcenter",mode:w.mode,body:v[0]}},htmlBuilder(S,v){const w=Zt(S.body,v),C=v.fontMetrics().axisHeight,I=.5*(w.height-C-(w.depth+C));return Oe.makeVList({positionType:"shift",positionData:I,children:[{type:"elem",elem:w}]},v)},mathmlBuilder(S,v){return new at.MathNode("mpadded",[Kt(S.body,v)],["vcenter"])}}),Mt({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(S,v,w){throw new s("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(S,v){const w=Md(S),C=[],I=v.havingStyle(v.style.text());for(let H=0;H<w.length;H++){let q=w[H];q==="~"&&(q="\\textasciitilde"),C.push(Oe.makeSymbol(q,"Typewriter-Regular",S.mode,I,["mord","texttt"]))}return Oe.makeSpan(["mord","text"].concat(I.sizingClasses(v)),Oe.tryCombineChars(C),I)},mathmlBuilder(S,v){const w=new at.TextNode(Md(S)),C=new at.MathNode("mtext",[w]);return C.setAttribute("mathvariant","monospace"),C}});const Md=S=>S.body.replace(/ /g,S.star?"␣":" ");var To=on;const Ns=`[ \r
	]`,lm="\\\\[a-zA-Z@]+",Lc="\\\\[^\uD800-\uDFFF]",Nc="("+lm+")"+Ns+"*",yh=`\\\\(
|[ \r	]+
?)[ \r	]*`,El="[̀-ͯ]",cm=new RegExp(El+"+$"),Ic="("+Ns+"+)|"+(yh+"|")+"([!-\\[\\]-‧‪-퟿豈-￿]"+(El+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(El+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+Nc)+("|"+Lc+")");class Xi{constructor(v,w){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=v,this.settings=w,this.tokenRegex=new RegExp(Ic,"g"),this.catcodes={"%":14,"~":13}}setCatcode(v,w){this.catcodes[v]=w}lex(){const v=this.input,w=this.tokenRegex.lastIndex;if(w===v.length)return new Cr("EOF",new Fn(this,w,w));const C=this.tokenRegex.exec(v);if(C===null||C.index!==w)throw new s("Unexpected character: '"+v[w]+"'",new Cr(v[w],new Fn(this,w,w+1)));const I=C[6]||C[3]||(C[2]?"\\ ":" ");if(this.catcodes[I]===14){const H=v.indexOf(`
`,this.tokenRegex.lastIndex);return H===-1?(this.tokenRegex.lastIndex=v.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=H+1,this.lex()}return new Cr(I,new Fn(this,w,this.tokenRegex.lastIndex))}}class py{constructor(v,w){v===void 0&&(v={}),w===void 0&&(w={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=w,this.builtins=v,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new s("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");const v=this.undefStack.pop();for(const w in v)v.hasOwnProperty(w)&&(v[w]==null?delete this.current[w]:this.current[w]=v[w])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(v){return this.current.hasOwnProperty(v)||this.builtins.hasOwnProperty(v)}get(v){return this.current.hasOwnProperty(v)?this.current[v]:this.builtins[v]}set(v,w,C){if(C===void 0&&(C=!1),C){for(let I=0;I<this.undefStack.length;I++)delete this.undefStack[I][v];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][v]=w)}else{const I=this.undefStack[this.undefStack.length-1];I&&!I.hasOwnProperty(v)&&(I[v]=this.current[v])}w==null?delete this.current[v]:this.current[v]=w}}var Zr=xl;te("\\noexpand",function(S){const v=S.popToken();return S.isExpandable(v.text)&&(v.noexpand=!0,v.treatAsRelax=!0),{tokens:[v],numArgs:0}}),te("\\expandafter",function(S){const v=S.popToken();return S.expandOnce(!0),{tokens:[v],numArgs:0}}),te("\\@firstoftwo",function(S){return{tokens:S.consumeArgs(2)[0],numArgs:0}}),te("\\@secondoftwo",function(S){return{tokens:S.consumeArgs(2)[1],numArgs:0}}),te("\\@ifnextchar",function(S){const v=S.consumeArgs(3);S.consumeSpaces();const w=S.future();return v[0].length===1&&v[0][0].text===w.text?{tokens:v[1],numArgs:0}:{tokens:v[2],numArgs:0}}),te("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}"),te("\\TextOrMath",function(S){const v=S.consumeArgs(2);return S.mode==="text"?{tokens:v[0],numArgs:0}:{tokens:v[1],numArgs:0}});const ir={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};te("\\char",function(S){let v=S.popToken(),w,C="";if(v.text==="'")w=8,v=S.popToken();else if(v.text==='"')w=16,v=S.popToken();else if(v.text==="`")if(v=S.popToken(),v.text[0]==="\\")C=v.text.charCodeAt(1);else{if(v.text==="EOF")throw new s("\\char` missing argument");C=v.text.charCodeAt(0)}else w=10;if(w){if(C=ir[v.text],C==null||C>=w)throw new s("Invalid base-"+w+" digit "+v.text);let I;for(;(I=ir[S.future().text])!=null&&I<w;)C*=w,C+=I,S.popToken()}return"\\@char{"+C+"}"});const xh=(S,v,w,C)=>{let I=S.consumeArg().tokens;if(I.length!==1)throw new s("\\newcommand's first argument must be a macro name");const H=I[0].text,q=S.isDefined(H);if(q&&!v)throw new s("\\newcommand{"+H+"} attempting to redefine "+(H+"; use \\renewcommand"));if(!q&&!w)throw new s("\\renewcommand{"+H+"} when command "+H+" does not yet exist; use \\newcommand");let ee=0;if(I=S.consumeArg().tokens,I.length===1&&I[0].text==="["){let ce="",_e=S.expandNextToken();for(;_e.text!=="]"&&_e.text!=="EOF";)ce+=_e.text,_e=S.expandNextToken();if(!ce.match(/^\s*[0-9]+\s*$/))throw new s("Invalid number of arguments: "+ce);ee=parseInt(ce),I=S.consumeArg().tokens}return q&&C||S.macros.set(H,{tokens:I,numArgs:ee}),""};te("\\newcommand",S=>xh(S,!1,!0,!1)),te("\\renewcommand",S=>xh(S,!0,!1,!1)),te("\\providecommand",S=>xh(S,!0,!0,!0)),te("\\message",S=>{const v=S.consumeArgs(1)[0];return console.log(v.reverse().map(w=>w.text).join("")),""}),te("\\errmessage",S=>{const v=S.consumeArgs(1)[0];return console.error(v.reverse().map(w=>w.text).join("")),""}),te("\\show",S=>{const v=S.popToken(),w=v.text;return console.log(v,S.macros.get(w),To[w],fn.math[w],fn.text[w]),""}),te("\\bgroup","{"),te("\\egroup","}"),te("~","\\nobreakspace"),te("\\lq","`"),te("\\rq","'"),te("\\aa","\\r a"),te("\\AA","\\r A"),te("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`©}"),te("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}"),te("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`®}"),te("ℬ","\\mathscr{B}"),te("ℰ","\\mathscr{E}"),te("ℱ","\\mathscr{F}"),te("ℋ","\\mathscr{H}"),te("ℐ","\\mathscr{I}"),te("ℒ","\\mathscr{L}"),te("ℳ","\\mathscr{M}"),te("ℛ","\\mathscr{R}"),te("ℭ","\\mathfrak{C}"),te("ℌ","\\mathfrak{H}"),te("ℨ","\\mathfrak{Z}"),te("\\Bbbk","\\Bbb{k}"),te("·","\\cdotp"),te("\\llap","\\mathllap{\\textrm{#1}}"),te("\\rlap","\\mathrlap{\\textrm{#1}}"),te("\\clap","\\mathclap{\\textrm{#1}}"),te("\\mathstrut","\\vphantom{(}"),te("\\underbar","\\underline{\\text{#1}}"),te("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}'),te("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`≠}}"),te("\\ne","\\neq"),te("≠","\\neq"),te("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`∉}}"),te("∉","\\notin"),te("≘","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`≘}}"),te("≙","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`≘}}"),te("≚","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`≚}}"),te("≛","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`≛}}"),te("≝","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`≝}}"),te("≞","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`≞}}"),te("≟","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`≟}}"),te("⟂","\\perp"),te("‼","\\mathclose{!\\mkern-0.8mu!}"),te("∌","\\notni"),te("⌜","\\ulcorner"),te("⌝","\\urcorner"),te("⌞","\\llcorner"),te("⌟","\\lrcorner"),te("©","\\copyright"),te("®","\\textregistered"),te("️","\\textregistered"),te("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}'),te("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}'),te("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}'),te("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}'),te("\\vdots","{\\varvdots\\rule{0pt}{15pt}}"),te("⋮","\\vdots"),te("\\varGamma","\\mathit{\\Gamma}"),te("\\varDelta","\\mathit{\\Delta}"),te("\\varTheta","\\mathit{\\Theta}"),te("\\varLambda","\\mathit{\\Lambda}"),te("\\varXi","\\mathit{\\Xi}"),te("\\varPi","\\mathit{\\Pi}"),te("\\varSigma","\\mathit{\\Sigma}"),te("\\varUpsilon","\\mathit{\\Upsilon}"),te("\\varPhi","\\mathit{\\Phi}"),te("\\varPsi","\\mathit{\\Psi}"),te("\\varOmega","\\mathit{\\Omega}"),te("\\substack","\\begin{subarray}{c}#1\\end{subarray}"),te("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax"),te("\\boxed","\\fbox{$\\displaystyle{#1}$}"),te("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;"),te("\\implies","\\DOTSB\\;\\Longrightarrow\\;"),te("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;"),te("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}"),te("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");const Ed={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};te("\\dots",function(S){let v="\\dotso";const w=S.expandAfterFuture().text;return w in Ed?v=Ed[w]:(w.slice(0,4)==="\\not"||w in fn.math&&y.contains(["bin","rel"],fn.math[w].group))&&(v="\\dotsb"),v});const _h={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};te("\\dotso",function(S){return S.future().text in _h?"\\ldots\\,":"\\ldots"}),te("\\dotsc",function(S){const v=S.future().text;return v in _h&&v!==","?"\\ldots\\,":"\\ldots"}),te("\\cdots",function(S){return S.future().text in _h?"\\@cdots\\,":"\\@cdots"}),te("\\dotsb","\\cdots"),te("\\dotsm","\\cdots"),te("\\dotsi","\\!\\cdots"),te("\\dotsx","\\ldots\\,"),te("\\DOTSI","\\relax"),te("\\DOTSB","\\relax"),te("\\DOTSX","\\relax"),te("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax"),te("\\,","\\tmspace+{3mu}{.1667em}"),te("\\thinspace","\\,"),te("\\>","\\mskip{4mu}"),te("\\:","\\tmspace+{4mu}{.2222em}"),te("\\medspace","\\:"),te("\\;","\\tmspace+{5mu}{.2777em}"),te("\\thickspace","\\;"),te("\\!","\\tmspace-{3mu}{.1667em}"),te("\\negthinspace","\\!"),te("\\negmedspace","\\tmspace-{4mu}{.2222em}"),te("\\negthickspace","\\tmspace-{5mu}{.277em}"),te("\\enspace","\\kern.5em "),te("\\enskip","\\hskip.5em\\relax"),te("\\quad","\\hskip1em\\relax"),te("\\qquad","\\hskip2em\\relax"),te("\\tag","\\@ifstar\\tag@literal\\tag@paren"),te("\\tag@paren","\\tag@literal{({#1})}"),te("\\tag@literal",S=>{if(S.macros.get("\\df@tag"))throw new s("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"}),te("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}"),te("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)"),te("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}"),te("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1"),te("\\newline","\\\\\\relax"),te("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");const Td=be(Ye["Main-Regular"][84][1]-.7*Ye["Main-Regular"][65][1]);te("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+Td+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}"),te("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+Td+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}"),te("\\hspace","\\@ifstar\\@hspacer\\@hspace"),te("\\@hspace","\\hskip #1\\relax"),te("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax"),te("\\ordinarycolon",":"),te("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}"),te("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}'),te("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}'),te("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}'),te("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}'),te("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}'),te("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}'),te("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}'),te("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}'),te("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}'),te("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}'),te("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}'),te("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}'),te("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}'),te("∷","\\dblcolon"),te("∹","\\eqcolon"),te("≔","\\coloneqq"),te("≕","\\eqqcolon"),te("⩴","\\Coloneqq"),te("\\ratio","\\vcentcolon"),te("\\coloncolon","\\dblcolon"),te("\\colonequals","\\coloneqq"),te("\\coloncolonequals","\\Coloneqq"),te("\\equalscolon","\\eqqcolon"),te("\\equalscoloncolon","\\Eqqcolon"),te("\\colonminus","\\coloneq"),te("\\coloncolonminus","\\Coloneq"),te("\\minuscolon","\\eqcolon"),te("\\minuscoloncolon","\\Eqcolon"),te("\\coloncolonapprox","\\Colonapprox"),te("\\coloncolonsim","\\Colonsim"),te("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),te("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}"),te("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),te("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}"),te("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`∌}}"),te("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}"),te("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}"),te("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}"),te("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}"),te("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}"),te("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}"),te("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}"),te("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}"),te("\\gvertneqq","\\html@mathml{\\@gvertneqq}{≩}"),te("\\lvertneqq","\\html@mathml{\\@lvertneqq}{≨}"),te("\\ngeqq","\\html@mathml{\\@ngeqq}{≱}"),te("\\ngeqslant","\\html@mathml{\\@ngeqslant}{≱}"),te("\\nleqq","\\html@mathml{\\@nleqq}{≰}"),te("\\nleqslant","\\html@mathml{\\@nleqslant}{≰}"),te("\\nshortmid","\\html@mathml{\\@nshortmid}{∤}"),te("\\nshortparallel","\\html@mathml{\\@nshortparallel}{∦}"),te("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{⊈}"),te("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{⊉}"),te("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{⊊}"),te("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{⫋}"),te("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{⊋}"),te("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{⫌}"),te("\\imath","\\html@mathml{\\@imath}{ı}"),te("\\jmath","\\html@mathml{\\@jmath}{ȷ}"),te("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`⟦}}"),te("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`⟧}}"),te("⟦","\\llbracket"),te("⟧","\\rrbracket"),te("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`⦃}}"),te("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`⦄}}"),te("⦃","\\lBrace"),te("⦄","\\rBrace"),te("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`⦵}}"),te("⦵","\\minuso"),te("\\darr","\\downarrow"),te("\\dArr","\\Downarrow"),te("\\Darr","\\Downarrow"),te("\\lang","\\langle"),te("\\rang","\\rangle"),te("\\uarr","\\uparrow"),te("\\uArr","\\Uparrow"),te("\\Uarr","\\Uparrow"),te("\\N","\\mathbb{N}"),te("\\R","\\mathbb{R}"),te("\\Z","\\mathbb{Z}"),te("\\alef","\\aleph"),te("\\alefsym","\\aleph"),te("\\Alpha","\\mathrm{A}"),te("\\Beta","\\mathrm{B}"),te("\\bull","\\bullet"),te("\\Chi","\\mathrm{X}"),te("\\clubs","\\clubsuit"),te("\\cnums","\\mathbb{C}"),te("\\Complex","\\mathbb{C}"),te("\\Dagger","\\ddagger"),te("\\diamonds","\\diamondsuit"),te("\\empty","\\emptyset"),te("\\Epsilon","\\mathrm{E}"),te("\\Eta","\\mathrm{H}"),te("\\exist","\\exists"),te("\\harr","\\leftrightarrow"),te("\\hArr","\\Leftrightarrow"),te("\\Harr","\\Leftrightarrow"),te("\\hearts","\\heartsuit"),te("\\image","\\Im"),te("\\infin","\\infty"),te("\\Iota","\\mathrm{I}"),te("\\isin","\\in"),te("\\Kappa","\\mathrm{K}"),te("\\larr","\\leftarrow"),te("\\lArr","\\Leftarrow"),te("\\Larr","\\Leftarrow"),te("\\lrarr","\\leftrightarrow"),te("\\lrArr","\\Leftrightarrow"),te("\\Lrarr","\\Leftrightarrow"),te("\\Mu","\\mathrm{M}"),te("\\natnums","\\mathbb{N}"),te("\\Nu","\\mathrm{N}"),te("\\Omicron","\\mathrm{O}"),te("\\plusmn","\\pm"),te("\\rarr","\\rightarrow"),te("\\rArr","\\Rightarrow"),te("\\Rarr","\\Rightarrow"),te("\\real","\\Re"),te("\\reals","\\mathbb{R}"),te("\\Reals","\\mathbb{R}"),te("\\Rho","\\mathrm{P}"),te("\\sdot","\\cdot"),te("\\sect","\\S"),te("\\spades","\\spadesuit"),te("\\sub","\\subset"),te("\\sube","\\subseteq"),te("\\supe","\\supseteq"),te("\\Tau","\\mathrm{T}"),te("\\thetasym","\\vartheta"),te("\\weierp","\\wp"),te("\\Zeta","\\mathrm{Z}"),te("\\argmin","\\DOTSB\\operatorname*{arg\\,min}"),te("\\argmax","\\DOTSB\\operatorname*{arg\\,max}"),te("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits"),te("\\bra","\\mathinner{\\langle{#1}|}"),te("\\ket","\\mathinner{|{#1}\\rangle}"),te("\\braket","\\mathinner{\\langle{#1}\\rangle}"),te("\\Bra","\\left\\langle#1\\right|"),te("\\Ket","\\left|#1\\right\\rangle");const Ad=S=>v=>{const w=v.consumeArg().tokens,C=v.consumeArg().tokens,I=v.consumeArg().tokens,H=v.consumeArg().tokens,q=v.macros.get("|"),ee=v.macros.get("\\|");v.macros.beginGroup();const ce=Le=>Ge=>{S&&(Ge.macros.set("|",q),I.length&&Ge.macros.set("\\|",ee));let dt=Le;return!Le&&I.length&&Ge.future().text==="|"&&(Ge.popToken(),dt=!0),{tokens:dt?I:C,numArgs:0}};v.macros.set("|",ce(!1)),I.length&&v.macros.set("\\|",ce(!0));const _e=v.consumeArg().tokens,Ae=v.expandTokens([...H,..._e,...w]);return v.macros.endGroup(),{tokens:Ae.reverse(),numArgs:0}};te("\\bra@ket",Ad(!1)),te("\\bra@set",Ad(!0)),te("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}"),te("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}"),te("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}"),te("\\angln","{\\angl n}"),te("\\blue","\\textcolor{##6495ed}{#1}"),te("\\orange","\\textcolor{##ffa500}{#1}"),te("\\pink","\\textcolor{##ff00af}{#1}"),te("\\red","\\textcolor{##df0030}{#1}"),te("\\green","\\textcolor{##28ae7b}{#1}"),te("\\gray","\\textcolor{gray}{#1}"),te("\\purple","\\textcolor{##9d38bd}{#1}"),te("\\blueA","\\textcolor{##ccfaff}{#1}"),te("\\blueB","\\textcolor{##80f6ff}{#1}"),te("\\blueC","\\textcolor{##63d9ea}{#1}"),te("\\blueD","\\textcolor{##11accd}{#1}"),te("\\blueE","\\textcolor{##0c7f99}{#1}"),te("\\tealA","\\textcolor{##94fff5}{#1}"),te("\\tealB","\\textcolor{##26edd5}{#1}"),te("\\tealC","\\textcolor{##01d1c1}{#1}"),te("\\tealD","\\textcolor{##01a995}{#1}"),te("\\tealE","\\textcolor{##208170}{#1}"),te("\\greenA","\\textcolor{##b6ffb0}{#1}"),te("\\greenB","\\textcolor{##8af281}{#1}"),te("\\greenC","\\textcolor{##74cf70}{#1}"),te("\\greenD","\\textcolor{##1fab54}{#1}"),te("\\greenE","\\textcolor{##0d923f}{#1}"),te("\\goldA","\\textcolor{##ffd0a9}{#1}"),te("\\goldB","\\textcolor{##ffbb71}{#1}"),te("\\goldC","\\textcolor{##ff9c39}{#1}"),te("\\goldD","\\textcolor{##e07d10}{#1}"),te("\\goldE","\\textcolor{##a75a05}{#1}"),te("\\redA","\\textcolor{##fca9a9}{#1}"),te("\\redB","\\textcolor{##ff8482}{#1}"),te("\\redC","\\textcolor{##f9685d}{#1}"),te("\\redD","\\textcolor{##e84d39}{#1}"),te("\\redE","\\textcolor{##bc2612}{#1}"),te("\\maroonA","\\textcolor{##ffbde0}{#1}"),te("\\maroonB","\\textcolor{##ff92c6}{#1}"),te("\\maroonC","\\textcolor{##ed5fa6}{#1}"),te("\\maroonD","\\textcolor{##ca337c}{#1}"),te("\\maroonE","\\textcolor{##9e034e}{#1}"),te("\\purpleA","\\textcolor{##ddd7ff}{#1}"),te("\\purpleB","\\textcolor{##c6b9fc}{#1}"),te("\\purpleC","\\textcolor{##aa87ff}{#1}"),te("\\purpleD","\\textcolor{##7854ab}{#1}"),te("\\purpleE","\\textcolor{##543b78}{#1}"),te("\\mintA","\\textcolor{##f5f9e8}{#1}"),te("\\mintB","\\textcolor{##edf2df}{#1}"),te("\\mintC","\\textcolor{##e0e5cc}{#1}"),te("\\grayA","\\textcolor{##f6f7f7}{#1}"),te("\\grayB","\\textcolor{##f0f1f2}{#1}"),te("\\grayC","\\textcolor{##e3e5e6}{#1}"),te("\\grayD","\\textcolor{##d6d8da}{#1}"),te("\\grayE","\\textcolor{##babec2}{#1}"),te("\\grayF","\\textcolor{##888d93}{#1}"),te("\\grayG","\\textcolor{##626569}{#1}"),te("\\grayH","\\textcolor{##3b3e40}{#1}"),te("\\grayI","\\textcolor{##21242c}{#1}"),te("\\kaBlue","\\textcolor{##314453}{#1}"),te("\\kaGreen","\\textcolor{##71B307}{#1}");const Sh={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class um{constructor(v,w,C){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=w,this.expansionCount=0,this.feed(v),this.macros=new py(Zr,w.macros),this.mode=C,this.stack=[]}feed(v){this.lexer=new Xi(v,this.settings)}switchMode(v){this.mode=v}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(v){this.stack.push(v)}pushTokens(v){this.stack.push(...v)}scanArgument(v){let w,C,I;if(v){if(this.consumeSpaces(),this.future().text!=="[")return null;w=this.popToken(),{tokens:I,end:C}=this.consumeArg(["]"])}else({tokens:I,start:w,end:C}=this.consumeArg());return this.pushToken(new Cr("EOF",C.loc)),this.pushTokens(I),w.range(C,"")}consumeSpaces(){for(;this.future().text===" ";)this.stack.pop()}consumeArg(v){const w=[],C=v&&v.length>0;C||this.consumeSpaces();const I=this.future();let H,q=0,ee=0;do{if(H=this.popToken(),w.push(H),H.text==="{")++q;else if(H.text==="}"){if(--q,q===-1)throw new s("Extra }",H)}else if(H.text==="EOF")throw new s("Unexpected end of input in a macro argument, expected '"+(v&&C?v[ee]:"}")+"'",H);if(v&&C)if((q===0||q===1&&v[ee]==="{")&&H.text===v[ee]){if(++ee,ee===v.length){w.splice(-ee,ee);break}}else ee=0}while(q!==0||C);return I.text==="{"&&w[w.length-1].text==="}"&&(w.pop(),w.shift()),w.reverse(),{tokens:w,start:I,end:H}}consumeArgs(v,w){if(w){if(w.length!==v+1)throw new s("The length of delimiters doesn't match the number of args!");const I=w[0];for(let H=0;H<I.length;H++){const q=this.popToken();if(I[H]!==q.text)throw new s("Use of the macro doesn't match its definition",q)}}const C=[];for(let I=0;I<v;I++)C.push(this.consumeArg(w&&w[I+1]).tokens);return C}countExpansion(v){if(this.expansionCount+=v,this.expansionCount>this.settings.maxExpand)throw new s("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(v){const w=this.popToken(),C=w.text,I=w.noexpand?null:this._getExpansion(C);if(I==null||v&&I.unexpandable){if(v&&I==null&&C[0]==="\\"&&!this.isDefined(C))throw new s("Undefined control sequence: "+C);return this.pushToken(w),!1}this.countExpansion(1);let H=I.tokens;const q=this.consumeArgs(I.numArgs,I.delimiters);if(I.numArgs){H=H.slice();for(let ee=H.length-1;ee>=0;--ee){let ce=H[ee];if(ce.text==="#"){if(ee===0)throw new s("Incomplete placeholder at end of macro body",ce);if(ce=H[--ee],ce.text==="#")H.splice(ee+1,1);else if(/^[1-9]$/.test(ce.text))H.splice(ee,2,...q[+ce.text-1]);else throw new s("Not a valid argument number",ce)}}}return this.pushTokens(H),H.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){const v=this.stack.pop();return v.treatAsRelax&&(v.text="\\relax"),v}throw new Error}expandMacro(v){return this.macros.has(v)?this.expandTokens([new Cr(v)]):void 0}expandTokens(v){const w=[],C=this.stack.length;for(this.pushTokens(v);this.stack.length>C;)if(this.expandOnce(!0)===!1){const I=this.stack.pop();I.treatAsRelax&&(I.noexpand=!1,I.treatAsRelax=!1),w.push(I)}return this.countExpansion(w.length),w}expandMacroAsText(v){const w=this.expandMacro(v);return w&&w.map(C=>C.text).join("")}_getExpansion(v){const w=this.macros.get(v);if(w==null)return w;if(v.length===1){const I=this.lexer.catcodes[v];if(I!=null&&I!==13)return}const C=typeof w=="function"?w(this):w;if(typeof C=="string"){let I=0;if(C.indexOf("#")!==-1){const _e=C.replace(/##/g,"");for(;_e.indexOf("#"+(I+1))!==-1;)++I}const H=new Xi(C,this.settings),q=[];let ee=H.lex();for(;ee.text!=="EOF";)q.push(ee),ee=H.lex();return q.reverse(),{tokens:q,numArgs:I}}return C}isDefined(v){return this.macros.has(v)||To.hasOwnProperty(v)||fn.math.hasOwnProperty(v)||fn.text.hasOwnProperty(v)||Sh.hasOwnProperty(v)}isExpandable(v){const w=this.macros.get(v);return w!=null?typeof w=="string"||typeof w=="function"||!w.unexpandable:To.hasOwnProperty(v)&&!To[v].primitive}}const wh=/^[₊₋₌₍₎₀₁₂₃₄₅₆₇₈₉ₐₑₕᵢⱼₖₗₘₙₒₚᵣₛₜᵤᵥₓᵦᵧᵨᵩᵪ]/,Dc=Object.freeze({"₊":"+","₋":"-","₌":"=","₍":"(","₎":")","₀":"0","₁":"1","₂":"2","₃":"3","₄":"4","₅":"5","₆":"6","₇":"7","₈":"8","₉":"9","ₐ":"a","ₑ":"e","ₕ":"h","ᵢ":"i","ⱼ":"j","ₖ":"k","ₗ":"l","ₘ":"m","ₙ":"n","ₒ":"o","ₚ":"p","ᵣ":"r","ₛ":"s","ₜ":"t","ᵤ":"u","ᵥ":"v","ₓ":"x","ᵦ":"β","ᵧ":"γ","ᵨ":"ρ","ᵩ":"ϕ","ᵪ":"χ","⁺":"+","⁻":"-","⁼":"=","⁽":"(","⁾":")","⁰":"0","¹":"1","²":"2","³":"3","⁴":"4","⁵":"5","⁶":"6","⁷":"7","⁸":"8","⁹":"9","ᴬ":"A","ᴮ":"B","ᴰ":"D","ᴱ":"E","ᴳ":"G","ᴴ":"H","ᴵ":"I","ᴶ":"J","ᴷ":"K","ᴸ":"L","ᴹ":"M","ᴺ":"N","ᴼ":"O","ᴾ":"P","ᴿ":"R","ᵀ":"T","ᵁ":"U","ⱽ":"V","ᵂ":"W","ᵃ":"a","ᵇ":"b","ᶜ":"c","ᵈ":"d","ᵉ":"e","ᶠ":"f","ᵍ":"g",ʰ:"h","ⁱ":"i",ʲ:"j","ᵏ":"k",ˡ:"l","ᵐ":"m",ⁿ:"n","ᵒ":"o","ᵖ":"p",ʳ:"r",ˢ:"s","ᵗ":"t","ᵘ":"u","ᵛ":"v",ʷ:"w",ˣ:"x",ʸ:"y","ᶻ":"z","ᵝ":"β","ᵞ":"γ","ᵟ":"δ","ᵠ":"ϕ","ᵡ":"χ","ᶿ":"θ"}),bh={"́":{text:"\\'",math:"\\acute"},"̀":{text:"\\`",math:"\\grave"},"̈":{text:'\\"',math:"\\ddot"},"̃":{text:"\\~",math:"\\tilde"},"̄":{text:"\\=",math:"\\bar"},"̆":{text:"\\u",math:"\\breve"},"̌":{text:"\\v",math:"\\check"},"̂":{text:"\\^",math:"\\hat"},"̇":{text:"\\.",math:"\\dot"},"̊":{text:"\\r",math:"\\mathring"},"̋":{text:"\\H"},"̧":{text:"\\c"}},Oc={á:"á",à:"à",ä:"ä",ǟ:"ǟ",ã:"ã",ā:"ā",ă:"ă",ắ:"ắ",ằ:"ằ",ẵ:"ẵ",ǎ:"ǎ",â:"â",ấ:"ấ",ầ:"ầ",ẫ:"ẫ",ȧ:"ȧ",ǡ:"ǡ",å:"å",ǻ:"ǻ",ḃ:"ḃ",ć:"ć",ḉ:"ḉ",č:"č",ĉ:"ĉ",ċ:"ċ",ç:"ç",ď:"ď",ḋ:"ḋ",ḑ:"ḑ",é:"é",è:"è",ë:"ë",ẽ:"ẽ",ē:"ē",ḗ:"ḗ",ḕ:"ḕ",ĕ:"ĕ",ḝ:"ḝ",ě:"ě",ê:"ê",ế:"ế",ề:"ề",ễ:"ễ",ė:"ė",ȩ:"ȩ",ḟ:"ḟ",ǵ:"ǵ",ḡ:"ḡ",ğ:"ğ",ǧ:"ǧ",ĝ:"ĝ",ġ:"ġ",ģ:"ģ",ḧ:"ḧ",ȟ:"ȟ",ĥ:"ĥ",ḣ:"ḣ",ḩ:"ḩ",í:"í",ì:"ì",ï:"ï",ḯ:"ḯ",ĩ:"ĩ",ī:"ī",ĭ:"ĭ",ǐ:"ǐ",î:"î",ǰ:"ǰ",ĵ:"ĵ",ḱ:"ḱ",ǩ:"ǩ",ķ:"ķ",ĺ:"ĺ",ľ:"ľ",ļ:"ļ",ḿ:"ḿ",ṁ:"ṁ",ń:"ń",ǹ:"ǹ",ñ:"ñ",ň:"ň",ṅ:"ṅ",ņ:"ņ",ó:"ó",ò:"ò",ö:"ö",ȫ:"ȫ",õ:"õ",ṍ:"ṍ",ṏ:"ṏ",ȭ:"ȭ",ō:"ō",ṓ:"ṓ",ṑ:"ṑ",ŏ:"ŏ",ǒ:"ǒ",ô:"ô",ố:"ố",ồ:"ồ",ỗ:"ỗ",ȯ:"ȯ",ȱ:"ȱ",ő:"ő",ṕ:"ṕ",ṗ:"ṗ",ŕ:"ŕ",ř:"ř",ṙ:"ṙ",ŗ:"ŗ",ś:"ś",ṥ:"ṥ",š:"š",ṧ:"ṧ",ŝ:"ŝ",ṡ:"ṡ",ş:"ş",ẗ:"ẗ",ť:"ť",ṫ:"ṫ",ţ:"ţ",ú:"ú",ù:"ù",ü:"ü",ǘ:"ǘ",ǜ:"ǜ",ǖ:"ǖ",ǚ:"ǚ",ũ:"ũ",ṹ:"ṹ",ū:"ū",ṻ:"ṻ",ŭ:"ŭ",ǔ:"ǔ",û:"û",ů:"ů",ű:"ű",ṽ:"ṽ",ẃ:"ẃ",ẁ:"ẁ",ẅ:"ẅ",ŵ:"ŵ",ẇ:"ẇ",ẘ:"ẘ",ẍ:"ẍ",ẋ:"ẋ",ý:"ý",ỳ:"ỳ",ÿ:"ÿ",ỹ:"ỹ",ȳ:"ȳ",ŷ:"ŷ",ẏ:"ẏ",ẙ:"ẙ",ź:"ź",ž:"ž",ẑ:"ẑ",ż:"ż",Á:"Á",À:"À",Ä:"Ä",Ǟ:"Ǟ",Ã:"Ã",Ā:"Ā",Ă:"Ă",Ắ:"Ắ",Ằ:"Ằ",Ẵ:"Ẵ",Ǎ:"Ǎ",Â:"Â",Ấ:"Ấ",Ầ:"Ầ",Ẫ:"Ẫ",Ȧ:"Ȧ",Ǡ:"Ǡ",Å:"Å",Ǻ:"Ǻ",Ḃ:"Ḃ",Ć:"Ć",Ḉ:"Ḉ",Č:"Č",Ĉ:"Ĉ",Ċ:"Ċ",Ç:"Ç",Ď:"Ď",Ḋ:"Ḋ",Ḑ:"Ḑ",É:"É",È:"È",Ë:"Ë",Ẽ:"Ẽ",Ē:"Ē",Ḗ:"Ḗ",Ḕ:"Ḕ",Ĕ:"Ĕ",Ḝ:"Ḝ",Ě:"Ě",Ê:"Ê",Ế:"Ế",Ề:"Ề",Ễ:"Ễ",Ė:"Ė",Ȩ:"Ȩ",Ḟ:"Ḟ",Ǵ:"Ǵ",Ḡ:"Ḡ",Ğ:"Ğ",Ǧ:"Ǧ",Ĝ:"Ĝ",Ġ:"Ġ",Ģ:"Ģ",Ḧ:"Ḧ",Ȟ:"Ȟ",Ĥ:"Ĥ",Ḣ:"Ḣ",Ḩ:"Ḩ",Í:"Í",Ì:"Ì",Ï:"Ï",Ḯ:"Ḯ",Ĩ:"Ĩ",Ī:"Ī",Ĭ:"Ĭ",Ǐ:"Ǐ",Î:"Î",İ:"İ",Ĵ:"Ĵ",Ḱ:"Ḱ",Ǩ:"Ǩ",Ķ:"Ķ",Ĺ:"Ĺ",Ľ:"Ľ",Ļ:"Ļ",Ḿ:"Ḿ",Ṁ:"Ṁ",Ń:"Ń",Ǹ:"Ǹ",Ñ:"Ñ",Ň:"Ň",Ṅ:"Ṅ",Ņ:"Ņ",Ó:"Ó",Ò:"Ò",Ö:"Ö",Ȫ:"Ȫ",Õ:"Õ",Ṍ:"Ṍ",Ṏ:"Ṏ",Ȭ:"Ȭ",Ō:"Ō",Ṓ:"Ṓ",Ṑ:"Ṑ",Ŏ:"Ŏ",Ǒ:"Ǒ",Ô:"Ô",Ố:"Ố",Ồ:"Ồ",Ỗ:"Ỗ",Ȯ:"Ȯ",Ȱ:"Ȱ",Ő:"Ő",Ṕ:"Ṕ",Ṗ:"Ṗ",Ŕ:"Ŕ",Ř:"Ř",Ṙ:"Ṙ",Ŗ:"Ŗ",Ś:"Ś",Ṥ:"Ṥ",Š:"Š",Ṧ:"Ṧ",Ŝ:"Ŝ",Ṡ:"Ṡ",Ş:"Ş",Ť:"Ť",Ṫ:"Ṫ",Ţ:"Ţ",Ú:"Ú",Ù:"Ù",Ü:"Ü",Ǘ:"Ǘ",Ǜ:"Ǜ",Ǖ:"Ǖ",Ǚ:"Ǚ",Ũ:"Ũ",Ṹ:"Ṹ",Ū:"Ū",Ṻ:"Ṻ",Ŭ:"Ŭ",Ǔ:"Ǔ",Û:"Û",Ů:"Ů",Ű:"Ű",Ṽ:"Ṽ",Ẃ:"Ẃ",Ẁ:"Ẁ",Ẅ:"Ẅ",Ŵ:"Ŵ",Ẇ:"Ẇ",Ẍ:"Ẍ",Ẋ:"Ẋ",Ý:"Ý",Ỳ:"Ỳ",Ÿ:"Ÿ",Ỹ:"Ỹ",Ȳ:"Ȳ",Ŷ:"Ŷ",Ẏ:"Ẏ",Ź:"Ź",Ž:"Ž",Ẑ:"Ẑ",Ż:"Ż",ά:"ά",ὰ:"ὰ",ᾱ:"ᾱ",ᾰ:"ᾰ",έ:"έ",ὲ:"ὲ",ή:"ή",ὴ:"ὴ",ί:"ί",ὶ:"ὶ",ϊ:"ϊ",ΐ:"ΐ",ῒ:"ῒ",ῑ:"ῑ",ῐ:"ῐ",ό:"ό",ὸ:"ὸ",ύ:"ύ",ὺ:"ὺ",ϋ:"ϋ",ΰ:"ΰ",ῢ:"ῢ",ῡ:"ῡ",ῠ:"ῠ",ώ:"ώ",ὼ:"ὼ",Ύ:"Ύ",Ὺ:"Ὺ",Ϋ:"Ϋ",Ῡ:"Ῡ",Ῠ:"Ῠ",Ώ:"Ώ",Ὼ:"Ὼ"};class La{constructor(v,w){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new um(v,w,this.mode),this.settings=w,this.leftrightDepth=0}expect(v,w){if(w===void 0&&(w=!0),this.fetch().text!==v)throw new s("Expected '"+v+"', got '"+this.fetch().text+"'",this.fetch());w&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(v){this.mode=v,this.gullet.switchMode(v)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{const v=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),v}finally{this.gullet.endGroups()}}subparse(v){const w=this.nextToken;this.consume(),this.gullet.pushToken(new Cr("}")),this.gullet.pushTokens(v);const C=this.parseExpression(!1);return this.expect("}"),this.nextToken=w,C}parseExpression(v,w){const C=[];for(;;){this.mode==="math"&&this.consumeSpaces();const I=this.fetch();if(La.endOfExpression.indexOf(I.text)!==-1||w&&I.text===w||v&&To[I.text]&&To[I.text].infix)break;const H=this.parseAtom(w);if(H){if(H.type==="internal")continue}else break;C.push(H)}return this.mode==="text"&&this.formLigatures(C),this.handleInfixNodes(C)}handleInfixNodes(v){let w=-1,C;for(let I=0;I<v.length;I++)if(v[I].type==="infix"){if(w!==-1)throw new s("only one infix operator per group",v[I].token);w=I,C=v[I].replaceWith}if(w!==-1&&C){let I,H;const q=v.slice(0,w),ee=v.slice(w+1);q.length===1&&q[0].type==="ordgroup"?I=q[0]:I={type:"ordgroup",mode:this.mode,body:q},ee.length===1&&ee[0].type==="ordgroup"?H=ee[0]:H={type:"ordgroup",mode:this.mode,body:ee};let ce;return C==="\\\\abovefrac"?ce=this.callFunction(C,[I,v[w],H],[]):ce=this.callFunction(C,[I,H],[]),[ce]}else return v}handleSupSubscript(v){const w=this.fetch(),C=w.text;this.consume(),this.consumeSpaces();const I=this.parseGroup(v);if(!I)throw new s("Expected group after '"+C+"'",w);return I}formatUnsupportedCmd(v){const w=[];for(let H=0;H<v.length;H++)w.push({type:"textord",mode:"text",text:v[H]});const C={type:"text",mode:this.mode,body:w};return{type:"color",mode:this.mode,color:this.settings.errorColor,body:[C]}}parseAtom(v){const w=this.parseGroup("atom",v);if(this.mode==="text")return w;let C,I;for(;;){this.consumeSpaces();const H=this.fetch();if(H.text==="\\limits"||H.text==="\\nolimits"){if(w&&w.type==="op"){const q=H.text==="\\limits";w.limits=q,w.alwaysHandleSupSub=!0}else if(w&&w.type==="operatorname")w.alwaysHandleSupSub&&(w.limits=H.text==="\\limits");else throw new s("Limit controls must follow a math operator",H);this.consume()}else if(H.text==="^"){if(C)throw new s("Double superscript",H);C=this.handleSupSubscript("superscript")}else if(H.text==="_"){if(I)throw new s("Double subscript",H);I=this.handleSupSubscript("subscript")}else if(H.text==="'"){if(C)throw new s("Double superscript",H);const q={type:"textord",mode:this.mode,text:"\\prime"},ee=[q];for(this.consume();this.fetch().text==="'";)ee.push(q),this.consume();this.fetch().text==="^"&&ee.push(this.handleSupSubscript("superscript")),C={type:"ordgroup",mode:this.mode,body:ee}}else if(Dc[H.text]){const q=wh.test(H.text),ee=[];for(ee.push(new Cr(Dc[H.text])),this.consume();;){const _e=this.fetch().text;if(!Dc[_e]||wh.test(_e)!==q)break;ee.unshift(new Cr(Dc[_e])),this.consume()}const ce=this.subparse(ee);q?I={type:"ordgroup",mode:"math",body:ce}:C={type:"ordgroup",mode:"math",body:ce}}else break}return C||I?{type:"supsub",mode:this.mode,base:w,sup:C,sub:I}:w}parseFunction(v,w){const C=this.fetch(),I=C.text,H=To[I];if(!H)return null;if(this.consume(),w&&w!=="atom"&&!H.allowedInArgument)throw new s("Got function '"+I+"' with no arguments"+(w?" as "+w:""),C);if(this.mode==="text"&&!H.allowedInText)throw new s("Can't use function '"+I+"' in text mode",C);if(this.mode==="math"&&H.allowedInMath===!1)throw new s("Can't use function '"+I+"' in math mode",C);const{args:q,optArgs:ee}=this.parseArguments(I,H);return this.callFunction(I,q,ee,C,v)}callFunction(v,w,C,I,H){const q={funcName:v,parser:this,token:I,breakOnTokenText:H},ee=To[v];if(ee&&ee.handler)return ee.handler(q,w,C);throw new s("No function handler for "+v)}parseArguments(v,w){const C=w.numArgs+w.numOptionalArgs;if(C===0)return{args:[],optArgs:[]};const I=[],H=[];for(let q=0;q<C;q++){let ee=w.argTypes&&w.argTypes[q];const ce=q<w.numOptionalArgs;(w.primitive&&ee==null||w.type==="sqrt"&&q===1&&H[0]==null)&&(ee="primitive");const _e=this.parseGroupOfType("argument to '"+v+"'",ee,ce);if(ce)H.push(_e);else if(_e!=null)I.push(_e);else throw new s("Null argument, please report this as a bug")}return{args:I,optArgs:H}}parseGroupOfType(v,w,C){switch(w){case"color":return this.parseColorGroup(C);case"size":return this.parseSizeGroup(C);case"url":return this.parseUrlGroup(C);case"math":case"text":return this.parseArgumentGroup(C,w);case"hbox":{const I=this.parseArgumentGroup(C,"text");return I!=null?{type:"styling",mode:I.mode,body:[I],style:"text"}:null}case"raw":{const I=this.parseStringGroup("raw",C);return I!=null?{type:"raw",mode:"text",string:I.text}:null}case"primitive":{if(C)throw new s("A primitive argument cannot be optional");const I=this.parseGroup(v);if(I==null)throw new s("Expected group as "+v,this.fetch());return I}case"original":case null:case void 0:return this.parseArgumentGroup(C);default:throw new s("Unknown group type as "+v,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(v,w){const C=this.gullet.scanArgument(w);if(C==null)return null;let I="",H;for(;(H=this.fetch()).text!=="EOF";)I+=H.text,this.consume();return this.consume(),C.text=I,C}parseRegexGroup(v,w){const C=this.fetch();let I=C,H="",q;for(;(q=this.fetch()).text!=="EOF"&&v.test(H+q.text);)I=q,H+=I.text,this.consume();if(H==="")throw new s("Invalid "+w+": '"+C.text+"'",C);return C.range(I,H)}parseColorGroup(v){const w=this.parseStringGroup("color",v);if(w==null)return null;const C=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(w.text);if(!C)throw new s("Invalid color: '"+w.text+"'",w);let I=C[0];return/^[0-9a-f]{6}$/i.test(I)&&(I="#"+I),{type:"color-token",mode:this.mode,color:I}}parseSizeGroup(v){let w,C=!1;if(this.gullet.consumeSpaces(),!v&&this.gullet.future().text!=="{"?w=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):w=this.parseStringGroup("size",v),!w)return null;!v&&w.text.length===0&&(w.text="0pt",C=!0);const I=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(w.text);if(!I)throw new s("Invalid size: '"+w.text+"'",w);const H={number:+(I[1]+I[2]),unit:I[3]};if(!Lt(H))throw new s("Invalid unit: '"+H.unit+"'",w);return{type:"size",mode:this.mode,value:H,isBlank:C}}parseUrlGroup(v){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);const w=this.parseStringGroup("url",v);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),w==null)return null;const C=w.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:C}}parseArgumentGroup(v,w){const C=this.gullet.scanArgument(v);if(C==null)return null;const I=this.mode;w&&this.switchMode(w),this.gullet.beginGroup();const H=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();const q={type:"ordgroup",mode:this.mode,loc:C.loc,body:H};return w&&this.switchMode(I),q}parseGroup(v,w){const C=this.fetch(),I=C.text;let H;if(I==="{"||I==="\\begingroup"){this.consume();const q=I==="{"?"}":"\\endgroup";this.gullet.beginGroup();const ee=this.parseExpression(!1,q),ce=this.fetch();this.expect(q),this.gullet.endGroup(),H={type:"ordgroup",mode:this.mode,loc:Fn.range(C,ce),body:ee,semisimple:I==="\\begingroup"||void 0}}else if(H=this.parseFunction(w,v)||this.parseSymbol(),H==null&&I[0]==="\\"&&!Sh.hasOwnProperty(I)){if(this.settings.throwOnError)throw new s("Undefined control sequence: "+I,C);H=this.formatUnsupportedCmd(I),this.consume()}return H}formLigatures(v){let w=v.length-1;for(let C=0;C<w;++C){const I=v[C],H=I.text;H==="-"&&v[C+1].text==="-"&&(C+1<w&&v[C+2].text==="-"?(v.splice(C,3,{type:"textord",mode:"text",loc:Fn.range(I,v[C+2]),text:"---"}),w-=2):(v.splice(C,2,{type:"textord",mode:"text",loc:Fn.range(I,v[C+1]),text:"--"}),w-=1)),(H==="'"||H==="`")&&v[C+1].text===H&&(v.splice(C,2,{type:"textord",mode:"text",loc:Fn.range(I,v[C+1]),text:H+H}),w-=1)}}parseSymbol(){const v=this.fetch();let w=v.text;if(/^\\verb[^a-zA-Z]/.test(w)){this.consume();let H=w.slice(5);const q=H.charAt(0)==="*";if(q&&(H=H.slice(1)),H.length<2||H.charAt(0)!==H.slice(-1))throw new s(`\\verb assertion failed --
                    please report what input caused this bug`);return H=H.slice(1,-1),{type:"verb",mode:"text",body:H,star:q}}Oc.hasOwnProperty(w[0])&&!fn[this.mode][w[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+w[0]+'" used in math mode',v),w=Oc[w[0]]+w.slice(1));const C=cm.exec(w);C&&(w=w.substring(0,C.index),w==="i"?w="ı":w==="j"&&(w="ȷ"));let I;if(fn[this.mode][w]){this.settings.strict&&this.mode==="math"&&li.indexOf(w)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+w[0]+'" used in math mode',v);const H=fn[this.mode][w].group,q=Fn.range(v);let ee;if(hn.hasOwnProperty(H)){const ce=H;ee={type:"atom",mode:this.mode,family:ce,loc:q,text:w}}else ee={type:H,mode:this.mode,loc:q,text:w};I=ee}else if(w.charCodeAt(0)>=128)this.settings.strict&&(he(w.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+w[0]+'" used in math mode',v):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+w[0]+'"'+(" ("+w.charCodeAt(0)+")"),v)),I={type:"textord",mode:"text",loc:Fn.range(v),text:w};else return null;if(this.consume(),C)for(let H=0;H<C[0].length;H++){const q=C[0][H];if(!bh[q])throw new s("Unknown accent ' "+q+"'",v);const ee=bh[q][this.mode]||bh[q].text;if(!ee)throw new s("Accent "+q+" unsupported in "+this.mode+" mode",v);I={type:"accent",mode:this.mode,loc:Fn.range(v),label:ee,isStretchy:!1,isShifty:!0,base:I}}return I}}La.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var Fc=function(S,v){if(!(typeof S=="string"||S instanceof String))throw new TypeError("KaTeX can only parse string typed expression");const w=new La(S,v);delete w.gullet.macros.current["\\df@tag"];let C=w.parse();if(delete w.gullet.macros.current["\\current@color"],delete w.gullet.macros.current["\\color"],w.gullet.macros.get("\\df@tag")){if(!v.displayMode)throw new s("\\tag works only in display equations");C=[{type:"tag",mode:"text",body:C,tag:w.subparse([new Cr("\\df@tag")])}]}return C};let Cd=function(S,v,w){v.textContent="";const C=Uc(S,w).toNode();v.appendChild(C)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),Cd=function(){throw new s("KaTeX doesn't work in quirks mode.")});const hm=function(S,v){return Uc(S,v).toMarkup()},Mh=function(S,v){const w=new A(v);return Fc(S,w)},Pd=function(S,v,w){if(w.throwOnError||!(S instanceof s))throw S;const C=Oe.makeSpan(["katex-error"],[new rt(v)]);return C.setAttribute("title",S.toString()),C.setAttribute("style","color:"+w.errorColor),C},Uc=function(S,v){const w=new A(v);try{const C=Fc(S,w);return Wr(C,S,w)}catch(C){return Pd(C,S,w)}};var vy={version:"0.16.21",render:Cd,renderToString:hm,ParseError:s,SETTINGS_SCHEMA:M,__parse:Mh,__renderToDomTree:Uc,__renderToHTMLTree:function(S,v){const w=new A(v);try{const C=Fc(S,w);return Zo(C,S,w)}catch(C){return Pd(C,S,w)}},__setFontMetrics:Z,__defineSymbol:D,__defineFunction:Mt,__defineMacro:te,__domTree:{Span:xe,Anchor:gt,SymbolNode:rt,SvgNode:wt,PathNode:_t,LineNode:Ht}},Eh=vy;return i=i.default,i}()})}(vx)),vx.exports}(function(n,e){(function(t,i){i(e,Qe,sD(),oD())})(y0,function(t,i,r,s){Object.defineProperty(t,"__esModule",{value:!0});function o(x,y){for(var M in y)Object.defineProperty(x,M,{enumerable:!0,get:y[M]})}o(t,{BlockMath:()=>g,InlineMath:()=>_}),i=c(i),r=a(r),s=a(s);function a(x){return x&&x.__esModule?x:{default:x}}function l(x){if(typeof WeakMap!="function")return null;var y=new WeakMap,M=new WeakMap;return(l=function(b){return b?M:y})(x)}function c(x,y){if(x&&x.__esModule)return x;if(x===null||typeof x!="object"&&typeof x!="function")return{default:x};var M=l(y);if(M&&M.has(x))return M.get(x);var b={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in x)if(T!=="default"&&Object.prototype.hasOwnProperty.call(x,T)){var P=A?Object.getOwnPropertyDescriptor(x,T):null;P&&(P.get||P.set)?Object.defineProperty(b,T,P):b[T]=x[T]}return b.default=x,M&&M.set(x,b),b}const u=(x,{displayMode:y})=>{const M=({children:b,errorColor:A,math:T,renderError:P})=>{const k=T??b,{html:N,error:z}=(0,i.useMemo)(()=>{try{return{html:s.default.renderToString(k,{displayMode:y,errorColor:A,throwOnError:!!P}),error:void 0}}catch(R){if(R instanceof s.default.ParseError||R instanceof TypeError)return{error:R};throw R}},[k,A,P]);return z?P?P(z):i.default.createElement(x,{html:`${z.message}`}):i.default.createElement(x,{html:N})};return M.propTypes={children:r.default.string,errorColor:r.default.string,math:r.default.string,renderError:r.default.func},M},f={html:r.default.string.isRequired},d=({html:x})=>i.default.createElement("div",{"data-testid":"react-katex",dangerouslySetInnerHTML:{__html:x}});d.propTypes=f;const h=({html:x})=>i.default.createElement("span",{"data-testid":"react-katex",dangerouslySetInnerHTML:{__html:x}});h.propTypes=f;const g=u(d,{displayMode:!0}),_=u(h,{displayMode:!1})})})(C4,C4.exports);var Bi=C4.exports;function aD(){const n=Qe.useRef(null),e=Qe.useRef(),t=Qe.useRef(),i=Qe.useRef(),[r,s]=ar.useState(100),[o,a]=ar.useState(5),[l,c]=ar.useState(!1),[u,f]=ar.useState(0),d=Qe.useRef(),h=y=>{const M=r*.8,b=r*.6;return{x:300+M*Math.cos(y),y:200+b*Math.sin(y)}};Qe.useEffect(()=>{if(!n.current)return;const y=Ds.Engine.create({gravity:{x:0,y:0,scale:0}});e.current=y;const M=Ds.Render.create({element:n.current,engine:y,options:{width:600,height:400,wireframes:!1,background:"#1f2937"}});t.current=M;const b=Ds.Bodies.circle(300,200,30,{isStatic:!0,render:{fillStyle:"#fbbf24",strokeStyle:"#f59e0b",lineWidth:3}}),A=h(0),T=Ds.Bodies.circle(A.x,A.y,6,{render:{fillStyle:"#ef4444",strokeStyle:"#dc2626",lineWidth:1},isStatic:!0});i.current=T,Ds.World.add(y.world,[b,T]),Ds.Runner.run(y),Ds.Render.run(M);const P=()=>{if(!M.context||!T)return;const k=M.context;k.fillStyle="#1f2937",k.fillRect(0,0,600,400);const N=k.createRadialGradient(300,200,30,300,200,60);N.addColorStop(0,"rgba(251, 191, 36, 0.3)"),N.addColorStop(1,"rgba(251, 191, 36, 0)"),k.fillStyle=N,k.beginPath(),k.arc(300,200,60,0,Math.PI*2),k.fill(),k.beginPath(),k.arc(300,200,30,0,Math.PI*2),k.fillStyle="#fbbf24",k.strokeStyle="#f59e0b",k.lineWidth=3,k.fill(),k.stroke();const z=r*.8,R=r*.6;k.beginPath(),k.ellipse(300,200,z,R,0,0,Math.PI*2),k.strokeStyle="rgba(96, 165, 250, 0.2)",k.lineWidth=1,k.stroke();const F=h(u);T&&Ds.Body.setPosition(T,F),k.beginPath(),k.arc(F.x,F.y,6,0,Math.PI*2),k.fillStyle="#ef4444",k.strokeStyle="#dc2626",k.lineWidth=1,k.fill(),k.stroke(),l&&f(V=>(V+.02*o)%(Math.PI*2)),d.current=requestAnimationFrame(P)};return d.current=requestAnimationFrame(P),()=>{d.current&&cancelAnimationFrame(d.current),Ds.Render.stop(M),Ds.Runner.stop(y),Ds.Engine.clear(y),M.canvas&&M.canvas.remove()}},[u,l,r,o]);const g=()=>{c(!0)},_=()=>{c(!1)},x=()=>{var y;if(d.current&&cancelAnimationFrame(d.current),c(!1),f(0),i.current){const M=h(0);Ds.Body.setPosition(i.current,M),Ds.Body.setVelocity(i.current,{x:0,y:0})}if((y=t.current)!=null&&y.context){const M=()=>{var N;if(!((N=t.current)!=null&&N.context)||!i.current)return;const b=t.current.context;b.fillStyle="#1f2937",b.fillRect(0,0,600,400);const A=b.createRadialGradient(300,200,30,300,200,60);A.addColorStop(0,"rgba(251, 191, 36, 0.3)"),A.addColorStop(1,"rgba(251, 191, 36, 0)"),b.fillStyle=A,b.beginPath(),b.arc(300,200,60,0,Math.PI*2),b.fill(),b.beginPath(),b.arc(300,200,30,0,Math.PI*2),b.fillStyle="#fbbf24",b.strokeStyle="#f59e0b",b.lineWidth=3,b.fill(),b.stroke();const T=r*.8,P=r*.6;b.beginPath(),b.ellipse(300,200,T,P,0,0,Math.PI*2),b.strokeStyle="rgba(96, 165, 250, 0.2)",b.lineWidth=1,b.stroke();const k=h(0);b.beginPath(),b.arc(k.x,k.y,6,0,Math.PI*2),b.fillStyle="#ef4444",b.strokeStyle="#dc2626",b.lineWidth=1,b.fill(),b.stroke(),d.current=requestAnimationFrame(M)};d.current=requestAnimationFrame(M)}};return O.jsxs("div",{className:"bg-gray-800 rounded-xl p-6",children:[O.jsx("h3",{className:"text-2xl font-bold mb-6",children:"Solar System Orbital Simulation"}),O.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[O.jsxs("div",{className:"space-y-6",children:[O.jsxs("div",{children:[O.jsxs("label",{className:"block text-sm mb-2",children:["Orbit Size: ",r," units"]}),O.jsx("input",{type:"range",min:"60",max:"150",value:r,onChange:y=>{s(Number(y.target.value)),x()},className:"w-full"})]}),O.jsxs("div",{children:[O.jsxs("label",{className:"block text-sm mb-2",children:["Orbital Speed: ",o," units/s"]}),O.jsx("input",{type:"range",min:"1",max:"10",value:o,onChange:y=>a(Number(y.target.value)),className:"w-full"})]}),O.jsxs("div",{className:"flex gap-4",children:[O.jsxs("button",{onClick:l?_:g,className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors flex-1",children:[l?"Stop":"Start"," Simulation"]}),O.jsx("button",{onClick:x,className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:"Reset"})]})]}),O.jsx("div",{ref:n,className:"bg-gray-900 rounded-xl overflow-hidden"})]}),O.jsx("div",{className:"mt-8 space-y-6",children:O.jsxs("div",{className:"bg-gray-700 rounded-xl p-6",children:[O.jsx("h4",{className:"text-xl font-bold mb-4",children:"Kepler's Laws of Planetary Motion"}),O.jsxs("div",{className:"space-y-6",children:[O.jsxs("div",{children:[O.jsx("h5",{className:"text-lg font-semibold mb-2 text-blue-400",children:"First Law: The Law of Orbits"}),O.jsx("p",{className:"text-gray-300 mb-3",children:"Planets orbit the Sun in elliptical paths, with the Sun at one focus of the ellipse. The mathematical equation of this elliptical orbit in polar coordinates is:"}),O.jsx("div",{className:"bg-gray-800 rounded-lg p-4",children:O.jsx(Bi.BlockMath,{children:"r = \\frac{a(1-e^2)}{1 + e\\cos\\theta}"})}),O.jsxs("p",{className:"text-gray-400 mt-2",children:["Where:",O.jsxs("ul",{className:"list-disc list-inside mt-1",children:[O.jsxs("li",{children:[O.jsx(Bi.InlineMath,{children:"r"})," = distance from the Sun to the planet"]}),O.jsxs("li",{children:[O.jsx(Bi.InlineMath,{children:"a"})," = semi-major axis"]}),O.jsxs("li",{children:[O.jsx(Bi.InlineMath,{children:"e"})," = eccentricity of the orbit"]}),O.jsxs("li",{children:[O.jsx(Bi.InlineMath,{children:"\\\\theta"})," = angle from perihelion"]})]})]})]}),O.jsxs("div",{children:[O.jsx("h5",{className:"text-lg font-semibold mb-2 text-blue-400",children:"Second Law: The Law of Equal Areas"}),O.jsx("p",{className:"text-gray-300 mb-3",children:"A line segment joining a planet and the Sun sweeps out equal areas during equal intervals of time. This is mathematically expressed as the conservation of angular momentum:"}),O.jsx("div",{className:"bg-gray-800 rounded-lg p-4",children:O.jsx(Bi.BlockMath,{children:"\\frac{dA}{dt} = \\frac{1}{2}r^2\\frac{d\\theta}{dt} = \\text{constant}"})}),O.jsxs("p",{className:"text-gray-400 mt-2",children:["Where:",O.jsxs("ul",{className:"list-disc list-inside mt-1",children:[O.jsxs("li",{children:[O.jsx(Bi.InlineMath,{children:"A"})," = area swept"]}),O.jsxs("li",{children:[O.jsx(Bi.InlineMath,{children:"t"})," = time"]}),O.jsxs("li",{children:[O.jsx(Bi.InlineMath,{children:"r"})," = orbital radius"]}),O.jsxs("li",{children:[O.jsx(Bi.InlineMath,{children:"\\\\theta"})," = angular position"]})]})]})]}),O.jsxs("div",{children:[O.jsx("h5",{className:"text-lg font-semibold mb-2 text-blue-400",children:"Third Law: The Law of Periods"}),O.jsx("p",{className:"text-gray-300 mb-3",children:"The square of the orbital period of a planet is directly proportional to the cube of the semi-major axis of its orbit."}),O.jsx("div",{className:"bg-gray-800 rounded-lg p-4",children:O.jsx(Bi.BlockMath,{children:"\\frac{T^2}{a^3} = \\frac{4\\pi^2}{GM}"})}),O.jsxs("p",{className:"text-gray-400 mt-2",children:["Where:",O.jsxs("ul",{className:"list-disc list-inside mt-1",children:[O.jsxs("li",{children:[O.jsx(Bi.InlineMath,{children:"T"})," = orbital period"]}),O.jsxs("li",{children:[O.jsx(Bi.InlineMath,{children:"a"})," = semi-major axis"]}),O.jsxs("li",{children:[O.jsx(Bi.InlineMath,{children:"G"})," = gravitational constant"]}),O.jsxs("li",{children:[O.jsx(Bi.InlineMath,{children:"M"})," = mass of the central body"]})]})]})]}),O.jsxs("div",{children:[O.jsx("h5",{className:"text-lg font-semibold mb-2 text-blue-400",children:"Orbital Velocity"}),O.jsx("p",{className:"text-gray-300 mb-3",children:"The velocity of an orbiting body at any point in its orbit is given by the vis-viva equation:"}),O.jsx("div",{className:"bg-gray-800 rounded-lg p-4",children:O.jsx(Bi.BlockMath,{children:"v = \\sqrt{GM\\left(\\frac{2}{r} - \\frac{1}{a}\\right)}"})}),O.jsx("p",{className:"text-gray-400 mt-2",children:"This equation shows that the orbital velocity varies with distance from the central body, being greatest at perihelion (closest approach) and least at aphelion (farthest point)."})]})]})]})})]})}Pv.register(T4,A4,m1,m0,NI,HI,kI);const lD=()=>{const[n,e]=ar.useState(1),[t,i]=ar.useState(1),[r,s]=ar.useState(!1),[o,a]=ar.useState(0),l=ar.useRef(),c=2*Math.PI*Math.sqrt(t/9.81),u=50,f=()=>{const h=Array.from({length:u},(_,x)=>x*(c/u)),g=h.map(_=>n*Math.cos((2*Math.PI*_/c+o)%(2*Math.PI)));return{labels:h.map(_=>_.toFixed(2)),datasets:[{label:"Pendulum Motion",data:g,borderColor:"rgb(59, 130, 246)",tension:.4}]}},d={responsive:!0,plugins:{legend:{position:"top",labels:{color:"white"}},title:{display:!0,text:"Simple Pendulum Motion",color:"white"}},scales:{y:{title:{display:!0,text:"Displacement (m)",color:"white"},grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"white"}},x:{title:{display:!0,text:"Time (s)",color:"white"},grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"white"}}},animation:{duration:0}};return ar.useEffect(()=>{let h=0;const g=_=>{h||(h=_);const x=(_-h)/1e3;h=_,a(y=>(y+x)%c),l.current=requestAnimationFrame(g)};return r?l.current=requestAnimationFrame(g):l.current&&cancelAnimationFrame(l.current),()=>{l.current&&cancelAnimationFrame(l.current)}},[r,c]),O.jsxs("div",{className:"bg-gray-800 rounded-xl p-6",children:[O.jsx("h3",{className:"text-2xl font-bold mb-6",children:"Simple Pendulum"}),O.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[O.jsxs("div",{children:[O.jsxs("div",{className:"mb-4",children:[O.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Amplitude (m): ",n.toFixed(2)]}),O.jsx("input",{type:"range",min:"0.1",max:"2",step:"0.1",value:n,onChange:h=>e(Number(h.target.value)),className:"w-full"})]}),O.jsxs("div",{className:"mb-4",children:[O.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Length (m): ",t.toFixed(2)]}),O.jsx("input",{type:"range",min:"0.1",max:"2",step:"0.1",value:t,onChange:h=>i(Number(h.target.value)),className:"w-full"})]}),O.jsxs("button",{onClick:()=>s(!r),className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors",children:[r?"Stop":"Start"," Animation"]})]}),O.jsx("div",{className:"bg-gray-900 rounded-xl p-4",children:O.jsx(O_,{data:f(),options:d})})]})]})};function yx(){return O.jsxs("div",{className:"space-y-12",children:[O.jsx("h2",{className:"text-3xl font-bold mb-8",children:"Interactive Physics Experiments"}),O.jsx(lD,{}),O.jsx(tD,{}),O.jsx(aD,{})]})}const _5=[{year:"1543",title:"Heliocentric Model",description:"Publication of 'De revolutionibus orbium coelestium', proposing a heliocentric model of the solar system",scientist:{name:"Nicolaus Copernicus",image:"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e2/Nikolaus_Kopernikus_MOT.jpg/1200px-Nikolaus_Kopernikus_MOT.jpg",contribution:"Developed the heliocentric theory of the solar system"}},{year:"1576",title:"Astronomical Observations",description:"Establishment of Uraniborg observatory and systematic astronomical observations",scientist:{name:"Tycho Brahe",image:"https://upload.wikimedia.org/wikipedia/commons/2/2b/Tycho_Brahe.JPG",contribution:"Made precise astronomical observations that later enabled Kepler's laws of planetary motion"}},{year:"1590",title:"Laws of Motion and Free Fall",description:"Discovery of the laws of motion and demonstration of free fall",scientist:{name:"Galileo Galilei",image:"https://upload.wikimedia.org/wikipedia/commons/d/d4/Justus_Sustermans_-_Portrait_of_Galileo_Galilei%2C_1636.jpg",contribution:"Pioneered experimental scientific method and made groundbreaking discoveries in physics and astronomy"}},{year:"1609",title:"Laws of Planetary Motion",description:"Discovery of the three laws of planetary motion",scientist:{name:"Johannes Kepler",image:"https://images.fineartamerica.com/images-medium-large-5/johannes-kepler-royal-astronomical-societyscience-photo-library.jpg",contribution:"Formulated the laws of planetary motion"}},{year:"1687",title:"Newton's Principia",description:"Publication of Principia Mathematica, establishing the laws of motion and universal gravitation",scientist:{name:"Isaac Newton",image:"https://upload.wikimedia.org/wikipedia/commons/3/39/GodfreyKneller-IsaacNewton-1689.jpg",contribution:"Developed classical mechanics and the law of universal gravitation"}},{year:"1865",title:"Maxwell's Equations",description:"Unification of electricity and magnetism through Maxwell's equations",scientist:{name:"James Clerk Maxwell",image:"https://upload.wikimedia.org/wikipedia/commons/5/57/James_Clerk_Maxwell.png",contribution:"Unified electricity and magnetism into electromagnetic theory"}},{year:"1898",title:"Discovery of Radium",description:"Isolation of radium and discovery of radioactivity",scientist:{name:"Marie Curie",image:"https://encrypted-tbn0.gstatic.com/licensed-image?q=tbn:ANd9GcT6Ew_PgesXXnu5MTM1S0oP6xlIqGas2rrTf7Vu4SyePTfIrPkBlDCm2NjkE3Ymd1QnT3mmpulyQPzADDg",contribution:"Pioneered research on radioactivity and discovered radium and polonium"}},{year:"1905",title:"Special Relativity",description:"Publication of the special theory of relativity, revolutionizing our understanding of space and time",scientist:{name:"Albert Einstein",image:"https://upload.wikimedia.org/wikipedia/commons/3/3e/Einstein_1921_by_F_Schmutzer_-_restoration.jpg",contribution:"Developed the theories of special and general relativity"}},{year:"1925",title:"Quantum Mechanics",description:"Development of quantum mechanics and the uncertainty principle",scientist:{name:"Werner Heisenberg",image:"https://upload.wikimedia.org/wikipedia/commons/f/f8/Bundesarchiv_Bild183-R57262%2C_Werner_Heisenberg.jpg",contribution:"Formulated the uncertainty principle and matrix mechanics"}},{year:"1927",title:"Wave Equation",description:"Development of the Schrödinger equation, describing quantum states",scientist:{name:"Erwin Schrödinger",image:"https://upload.wikimedia.org/wikipedia/commons/2/2e/Erwin_Schr%C3%B6dinger_%281933%29.jpg",contribution:"Developed wave mechanics and the Schrödinger equation"}},{year:"1928",title:"Dirac Equation",description:"Formulation of the Dirac equation, predicting antimatter",scientist:{name:"Paul Dirac",image:"https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcRz6-oWFt9y3ps0EKD8D1Faf7LyzkmgC9Ho9XvHfSB9P1O7707XkU15iWP6rJWHsR6Je6HP_EWyG7ehjvmdXMySHA",contribution:"Predicted the existence of antimatter and made fundamental contributions to quantum mechanics"}},{year:"1938",title:"Nuclear Fission",description:"Discovery of nuclear fission in uranium atoms",scientist:{name:"Lise Meitner",image:"https://encrypted-tbn0.gstatic.com/licensed-image?q=tbn:ANd9GcTQj_RUJaGRMWG5boWVBYOfEVL0xW9sagE5luD2HbNpSto8iBrPUL2hY_DPLyBMge1MQN1LoIC3qQoEAnc",contribution:"Provided the first theoretical explanation of nuclear fission and contributed to nuclear physics"}},{year:"1948",title:"Quantum Electrodynamics",description:"Development of quantum electrodynamics (QED)",scientist:{name:"Richard Feynman",image:"https://upload.wikimedia.org/wikipedia/commons/1/1a/RichardFeynman-PaineMansionWoods1984_copyrightTamikoThiel_bw.jpg",contribution:"Developed quantum electrodynamics and Feynman diagrams"}},{year:"1964",title:"Quark Theory",description:"Proposal of the quark model of particle physics",scientist:{name:"Murray Gell-Mann",image:"https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcQAPhLfCSK-wTjn1tqw8TM9kKKEIL_Km1l3D2jWAbgE3pfsbFNGErbR-HN_kHI7LW8mvzJJzB-v_l3LwYGK0w3p1A",contribution:"Proposed the quark model and discovered the eightfold way"}},{year:"2012",title:"Higgs Boson",description:"Discovery of the Higgs boson at CERN's Large Hadron Collider",scientist:{name:"Peter Higgs",image:"https://www.nobelprize.org/images/higgs-15185-portrait-medium.jpg",contribution:"Predicted the existence of the Higgs boson"}}];function cD(){const[n,e]=Qe.useState(null),t=_5.filter(i=>i.scientist).map(i=>i.scientist);return O.jsxs("div",{className:"py-12 px-4",children:[O.jsx("h2",{className:"text-3xl font-bold mb-8 text-center",children:"Timeline of Physics Discoveries"}),O.jsxs("div",{className:"mb-16",children:[O.jsx("h3",{className:"text-2xl font-bold mb-6 text-center",children:"Famous Physicists"}),O.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-6",children:t.map((i,r)=>O.jsxs("div",{className:"bg-gray-800 rounded-xl p-4 cursor-pointer transition-all hover:bg-gray-700",onClick:()=>e(i),children:[O.jsx("div",{className:"aspect-w-1 relative mb-4 overflow-hidden rounded-lg",children:O.jsx("img",{src:i.image,alt:i.name,className:"absolute inset-0 w-full h-full object-cover",loading:"lazy"})}),O.jsx("h4",{className:"text-lg font-semibold text-center",children:i.name})]},r))}),n&&O.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:O.jsx("div",{className:"bg-gray-800 rounded-xl p-6 max-w-2xl w-full",children:O.jsxs("div",{className:"flex gap-6",children:[O.jsx("div",{className:"w-1/3",children:O.jsx("div",{className:"aspect-w-1 relative rounded-lg overflow-hidden",children:O.jsx("img",{src:n.image,alt:n.name,className:"absolute inset-0 w-full h-full object-cover"})})}),O.jsxs("div",{className:"w-2/3",children:[O.jsx("h3",{className:"text-2xl font-bold mb-4",children:n.name}),O.jsx("p",{className:"text-gray-300",children:n.contribution}),O.jsx("button",{onClick:()=>e(null),className:"mt-6 bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg transition-colors",children:"Close"})]})]})})})]}),O.jsxs("div",{className:"relative max-w-6xl mx-auto",children:[O.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2 h-full w-1 bg-blue-500"}),O.jsx("div",{className:"space-y-16",children:_5.map((i,r)=>O.jsxs("div",{className:`relative flex items-center ${r%2===0?"justify-start":"justify-end"}`,children:[O.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center",children:O.jsx(sE,{className:"w-4 h-4 text-white"})}),O.jsxs("div",{className:`bg-gray-800 rounded-xl p-6 shadow-lg max-w-xl ${r%2===0?"mr-[calc(50%+2rem)]":"ml-[calc(50%+2rem)]"}`,children:[O.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[O.jsx(iE,{className:"text-blue-400 w-5 h-5"}),O.jsx("span",{className:"text-blue-400 font-semibold",children:i.year})]}),O.jsx("h3",{className:"text-xl font-bold mb-2",children:i.title}),O.jsx("p",{className:"text-gray-300 mb-4",children:i.description}),i.scientist&&O.jsx("div",{className:"mt-4 bg-gray-700 rounded-lg p-4",children:O.jsx("div",{className:"flex items-start gap-4",children:O.jsxs("div",{children:[O.jsx("h4",{className:"text-lg font-semibold mb-1",children:i.scientist.name}),O.jsx("p",{className:"text-gray-300 text-sm",children:i.scientist.contribution})]})})})]})]},i.year))})]})]})}function uD(){const[n,e]=Qe.useState(1),[t,i]=Qe.useState(1),[r,s]=Qe.useState(!1),o=(u,f,d)=>Math.sqrt(2/f)*Math.sin(u*Math.PI*d/f),a=u=>u*u,l=()=>{const f=Array.from({length:200},(g,_)=>_/200*t),d=f.map(g=>o(n,t,g)),h=d.map(g=>a(g));return{labels:f,datasets:[{label:"Wave Function",data:r?h:d,borderColor:r?"rgba(255, 99, 132, 1)":"rgba(75, 192, 192, 1)",borderWidth:2,fill:!1}]}},c={responsive:!0,plugins:{title:{display:!0,text:r?"Probability Density":"Wave Function",color:"white"},legend:{labels:{color:"white"}}},scales:{y:{min:-2,max:2,title:{display:!0,text:r?"|ψ|²":"ψ(x)",color:"white"},grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"white"}},x:{title:{display:!0,text:"Position (x/L)",color:"white"},grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"white"}}}};return O.jsxs("div",{className:"bg-gray-800 rounded-xl p-6",children:[O.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[O.jsx(C0,{className:"text-blue-400 w-6 h-6"}),O.jsx("h3",{className:"text-2xl font-bold",children:"Quantum Mechanics Visualization"})]}),O.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[O.jsxs("div",{className:"space-y-6",children:[O.jsxs("div",{children:[O.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Particle in a Box"}),O.jsxs("div",{className:"space-y-4",children:[O.jsxs("div",{children:[O.jsxs("label",{className:"block text-sm mb-2",children:["Quantum Number (n): ",n]}),O.jsx("input",{type:"range",min:"1",max:"5",value:n,onChange:u=>e(Number(u.target.value)),className:"w-full"})]}),O.jsxs("div",{children:[O.jsxs("label",{className:"block text-sm mb-2",children:["Box Width (L): ",t.toFixed(1)," nm"]}),O.jsx("input",{type:"range",min:"0.5",max:"2",step:"0.1",value:t,onChange:u=>i(Number(u.target.value)),className:"w-full"})]}),O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx("input",{type:"checkbox",id:"showProbability",checked:r,onChange:u=>s(u.target.checked),className:"rounded"}),O.jsx("label",{htmlFor:"showProbability",className:"text-sm",children:"Show Probability Density"})]})]})]}),O.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[O.jsx("h4",{className:"text-lg font-semibold mb-2",children:"Wave Function:"}),O.jsx(Bi.BlockMath,{children:`\\psi_${n}(x) = \\sqrt{\\frac{2}{L}}\\sin\\left(\\frac{${n}\\pi x}{L}\\right)`}),O.jsx("h4",{className:"text-lg font-semibold mt-4 mb-2",children:"Energy Level:"}),O.jsx(Bi.BlockMath,{children:`E_${n} = \\frac{${n}^2h^2}{8mL^2}`})]})]}),O.jsx("div",{className:"bg-gray-900 rounded-xl p-4",children:O.jsx(O_,{data:l(),options:c})})]}),O.jsxs("div",{className:"mt-6 bg-gray-700 rounded-lg p-4",children:[O.jsx("h4",{className:"text-lg font-semibold mb-2",children:"Key Concepts:"}),O.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-300",children:[O.jsx("li",{children:"Wave functions represent the quantum state of a particle"}),O.jsx("li",{children:"The probability of finding the particle at a position is |ψ|²"}),O.jsx("li",{children:"Energy levels are quantized (discrete)"}),O.jsx("li",{children:"Higher quantum numbers mean higher energy states"})]})]})]})}const xx=[{id:1,title:"Projectile Motion",category:"Mechanics",difficulty:"Intermediate",question:"A ball is thrown from a height of 20m with an initial velocity of 15 m/s at an angle of 30° above the horizontal. Calculate the maximum height reached by the ball relative to the ground.",equation:"h_{max} = h_0 + \\frac{v_0^2\\sin^2\\theta}{2g}",steps:[{explanation:"First, identify the initial height (h₀) and velocity components",equation:"h_0 = 20\\text{ m}, v_0 = 15\\text{ m/s}, \\theta = 30°"},{explanation:"Calculate the vertical component of initial velocity",equation:"v_{0y} = v_0\\sin\\theta = 15\\sin(30°) = 7.5\\text{ m/s}"},{explanation:"Use the maximum height formula",equation:"h_{max} = 20 + \\frac{(7.5\\text{ m/s})^2}{2(9.81\\text{ m/s}^2)}"}],solution:{value:22.86,unit:"meters"}},{id:2,title:"Simple Harmonic Motion",category:"Waves",difficulty:"Advanced",question:"A mass of 0.5 kg is attached to a spring with spring constant k = 200 N/m. If the mass is displaced 0.1 m from equilibrium and released, calculate its maximum velocity.",equation:"v_{max} = A\\omega = A\\sqrt{\\frac{k}{m}}",steps:[{explanation:"Identify the amplitude (A) and system parameters",equation:"A = 0.1\\text{ m}, k = 200\\text{ N/m}, m = 0.5\\text{ kg}"},{explanation:"Calculate the angular frequency ω",equation:"\\omega = \\sqrt{\\frac{k}{m}} = \\sqrt{\\frac{200}{0.5}} = 20\\text{ rad/s}"},{explanation:"Calculate maximum velocity",equation:"v_{max} = (0.1\\text{ m})(20\\text{ rad/s})"}],solution:{value:2,unit:"m/s"}},{id:3,title:"Electric Field",category:"Electromagnetism",difficulty:"Beginner",question:"Calculate the electric field strength at a distance of 0.3 meters from a point charge of 2μC.",equation:"E = \\frac{kq}{r^2}",steps:[{explanation:"Identify Coulomb's constant and convert units",equation:"k = 8.99 × 10^9\\text{ N⋅m²/C²}, q = 2 × 10^{-6}\\text{ C}"},{explanation:"Apply the electric field formula",equation:"E = \\frac{(8.99 × 10^9)(2 × 10^{-6})}{(0.3)^2}"}],solution:{value:199800,unit:"N/C"}}];function S5(){const[n,e]=Qe.useState(null),[t,i]=Qe.useState(!1),[r,s]=Qe.useState([]),[o,a]=Qe.useState([]),l=f=>{e(f),i(!1),s(new Array(f.steps.length).fill(!1))},c=f=>{o.includes(f)||a([...o,f])},u=()=>{a([]),i(!1),s([])};return O.jsxs("div",{className:"bg-gray-800 rounded-xl p-6",children:[O.jsxs("div",{className:"flex items-center justify-between mb-6",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx(__,{className:"text-blue-400 w-6 h-6"}),O.jsx("h3",{className:"text-2xl font-bold",children:"Advanced Physics Problems"})]}),O.jsxs("button",{onClick:u,className:"flex items-center gap-2 text-sm text-gray-400 hover:text-white transition-colors",children:[O.jsx(rE,{className:"w-4 h-4"}),"Reset Progress"]})]}),O.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[O.jsx("div",{className:"lg:col-span-1 space-y-4",children:xx.map(f=>O.jsxs("div",{onClick:()=>l(f),className:`bg-gray-700 rounded-lg p-4 cursor-pointer transition-all ${(n==null?void 0:n.id)===f.id?"ring-2 ring-blue-400":""}`,children:[O.jsxs("div",{className:"flex items-center justify-between mb-2",children:[O.jsx("h4",{className:"font-semibold",children:f.title}),o.includes(f.id)&&O.jsx(OR,{className:"text-green-400 w-5 h-5"})]}),O.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400 mb-2",children:[O.jsx(sE,{className:"w-4 h-4"}),O.jsx("span",{children:f.difficulty})]}),O.jsx("div",{className:"text-sm text-gray-300",children:f.category})]},f.id))}),O.jsx("div",{className:"lg:col-span-2",children:n?O.jsxs("div",{className:"space-y-6",children:[O.jsxs("div",{className:"bg-gray-700 rounded-lg p-6",children:[O.jsx("h4",{className:"text-xl font-semibold mb-4",children:n.title}),O.jsx("p",{className:"text-gray-300 mb-4",children:n.question}),O.jsx("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:O.jsx(Bi.BlockMath,{children:n.equation})})]}),O.jsx("div",{className:"space-y-4",children:n.steps.map((f,d)=>O.jsxs("div",{className:`bg-gray-700 rounded-lg p-4 transition-all ${r[d]?"":"opacity-50"}`,children:[O.jsxs("button",{onClick:()=>{const h=[...r];h[d]=!0,s(h)},className:"flex items-center gap-2 text-blue-400 hover:text-blue-300 transition-colors",children:[O.jsx(FR,{className:`w-4 h-4 transition-transform ${r[d]?"rotate-90":""}`}),"Step ",d+1]}),r[d]&&O.jsxs("div",{className:"mt-2",children:[O.jsx("p",{className:"text-gray-300 mb-2",children:f.explanation}),f.equation&&O.jsx("div",{className:"bg-gray-800 rounded-lg p-3",children:O.jsx(Bi.BlockMath,{children:f.equation})})]})]},d))}),O.jsxs("div",{className:"bg-gray-700 rounded-lg p-6",children:[O.jsxs("button",{onClick:()=>{i(!0),c(n.id)},className:"w-full bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg transition-colors flex items-center justify-center gap-2",children:[O.jsx(tE,{className:"w-5 h-5"}),"Show Solution"]}),t&&O.jsx("div",{className:"mt-4",children:O.jsxs("div",{className:"flex items-center gap-2 text-xl",children:[O.jsx("span",{children:"Solution:"}),O.jsxs("span",{className:"font-bold text-blue-400",children:[n.solution.value," ",n.solution.unit]})]})})]})]}):O.jsx("div",{className:"bg-gray-700 rounded-lg p-6 flex items-center justify-center",children:O.jsx("p",{className:"text-gray-400",children:"Select a problem to begin"})})})]}),O.jsxs("div",{className:"mt-6 bg-gray-700 rounded-lg p-4",children:[O.jsxs("div",{className:"flex items-center justify-between mb-2",children:[O.jsx("h4",{className:"text-lg font-semibold",children:"Your Progress"}),O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx(LR,{className:"text-blue-400 w-5 h-5"}),O.jsxs("span",{children:[o.length," of ",xx.length," completed"]})]})]}),O.jsx("div",{className:"w-full bg-gray-800 rounded-full h-2",children:O.jsx("div",{className:"bg-blue-400 h-2 rounded-full transition-all",style:{width:`${o.length/xx.length*100}%`}})})]})]})}const hD=[{id:"1",title:"New Observations Challenge Dark Matter Theory",summary:"Recent observations of distant galaxies suggest unexpected distributions of dark matter, challenging current theoretical models.",date:"2025-03-15",source:"Physics Today",url:"https://physicstoday.scitation.org/topic/collections/dark-matter",category:"discovery"},{id:"2",title:"Quantum Entanglement Achieved at Room Temperature",summary:"Scientists have successfully maintained quantum entanglement in a macroscopic system at room temperature, a breakthrough for quantum computing.",date:"2025-03-14",source:"Nature Physics",url:"https://www.nature.com/nphys/",category:"research"},{id:"3",title:"International Physics Conference 2025",summary:"Leading physicists gather to discuss latest developments in quantum mechanics, cosmology, and particle physics.",date:"2025-04-01",source:"Physics Conference Board",url:"https://www.aps.org/meetings/",category:"event"}];function w5(){return O.jsxs("div",{className:"bg-gray-800 rounded-xl p-6",children:[O.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[O.jsx(GR,{className:"text-blue-400 w-6 h-6"}),O.jsx("h3",{className:"text-2xl font-bold",children:"Latest in Physics"})]}),O.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:hD.map(n=>O.jsx("div",{className:"bg-gray-700 rounded-lg overflow-hidden",children:O.jsxs("div",{className:"p-6",children:[O.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400 mb-3",children:[O.jsx(iE,{className:"w-4 h-4"}),O.jsx("span",{children:n.date})]}),O.jsx("h4",{className:"text-xl font-semibold mb-3",children:n.title}),O.jsx("p",{className:"text-gray-300 mb-4",children:n.summary}),O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsx("span",{className:"text-sm text-gray-400",children:n.source}),O.jsxs("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-blue-400 hover:text-blue-300 transition-colors group",children:["Read more",O.jsx(zR,{className:"w-4 h-4 transform transition-transform group-hover:translate-x-1"})]})]})]})},n.id))})]})}const fD=[{id:"1",title:"Introduction to Quantum Mechanics",type:"pdf",description:"Comprehensive lecture notes covering quantum mechanics fundamentals",url:"#",difficulty:"intermediate",preview:{beginner:"Start with basic concepts like wave-particle duality and the double-slit experiment. Focus on understanding the fundamental principles before diving deeper.",intermediate:"Explore Schrödinger's equation, quantum states, and probability distributions. Practice solving simple quantum mechanical systems.",advanced:"Delve into advanced topics like quantum entanglement, density matrices, and perturbation theory."}},{id:"2",title:"Special Relativity Video Series",type:"video",description:"Visual explanations of Einstein's special relativity theory",url:"#",difficulty:"beginner",preview:{beginner:"Learn about time dilation and length contraction through simple thought experiments and real-world examples.",intermediate:"Study Lorentz transformations and relativistic momentum/energy relationships.",advanced:"Explore spacetime diagrams, four-vectors, and advanced relativistic phenomena."}},{id:"3",title:"Advanced Electromagnetism Problems",type:"practice",description:"Collection of challenging problems with detailed solutions",url:"#",difficulty:"advanced",preview:{beginner:"Review fundamental concepts of electric and magnetic fields, and Coulomb's law.",intermediate:"Work through problems involving Maxwell's equations and electromagnetic waves.",advanced:"Tackle complex boundary value problems and electromagnetic radiation calculations."}}],dD=n=>{switch(n){case"pdf":return ib;case"video":return XR;case"notes":return __;case"practice":return IR;default:return ib}};function Xd(){const[n,e]=Qe.useState(null);return O.jsxs("div",{className:"bg-gray-800 rounded-xl p-6",children:[O.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[O.jsx(__,{className:"text-blue-400 w-6 h-6"}),O.jsx("h3",{className:"text-2xl font-bold",children:"Study Resources"})]}),O.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:fD.map(t=>{const i=dD(t.type);return O.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 flex flex-col",children:[O.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[O.jsx(i,{className:"text-blue-400 w-5 h-5"}),O.jsx("h4",{className:"text-lg font-semibold",children:t.title})]}),O.jsx("p",{className:"text-gray-300 flex-grow",children:t.description}),O.jsxs("div",{className:"flex items-center justify-between mt-4 h-8",children:[O.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${t.difficulty==="beginner"?"bg-green-900 text-green-300":t.difficulty==="intermediate"?"bg-yellow-900 text-yellow-300":"bg-red-900 text-red-300"}`,children:t.difficulty}),O.jsxs("button",{onClick:()=>e(t),className:"inline-flex items-center gap-2 px-3 py-1 text-sm font-medium text-blue-400 hover:text-blue-300 transition-colors",children:[O.jsx(VR,{className:"w-4 h-4"}),"Preview Content"]})]})]},t.id)})}),n&&O.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:O.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 max-w-2xl w-full",children:[O.jsxs("div",{className:"flex items-center justify-between mb-4",children:[O.jsx("h4",{className:"text-xl font-semibold",children:n.title}),O.jsx("button",{onClick:()=>e(null),className:"text-gray-400 hover:text-white transition-colors",children:O.jsx(ZR,{className:"w-6 h-6"})})]}),O.jsxs("div",{className:"space-y-6",children:[O.jsxs("div",{children:[O.jsx("h5",{className:"text-lg font-semibold mb-2 text-blue-400",children:"Recommended Learning Path"}),O.jsx("p",{className:"text-gray-300",children:n.preview[n.difficulty]})]}),O.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[O.jsx("h5",{className:"font-semibold mb-2",children:"Learning Tips:"}),O.jsxs("ul",{className:"list-disc list-inside text-gray-300 space-y-2",children:[O.jsx("li",{children:"Start with the fundamentals before advancing"}),O.jsx("li",{children:"Practice regularly with example problems"}),O.jsx("li",{children:"Connect concepts to real-world applications"}),O.jsx("li",{children:"Join study groups for collaborative learning"})]})]}),O.jsx("button",{onClick:()=>e(null),className:"w-full bg-blue-500 hover:bg-blue-600 text-white py-2 rounded-lg transition-colors",children:"Got it!"})]})]})})]})}const _x=[{name:"Kinetic Energy",formula:"KE = ½mv²",calculate:n=>{if(typeof n.m!="number"||typeof n.v!="number")throw new Error("Invalid parameters");return .5*n.m*Math.pow(n.v,2)},parameters:[{name:"Mass",symbol:"m",unit:"kg"},{name:"Velocity",symbol:"v",unit:"m/s"}],description:"Calculate the kinetic energy of a moving object"},{name:"Gravitational Force",formula:"F = G(m₁m₂)/r²",calculate:n=>{if(typeof n.mass1!="number"||typeof n.mass2!="number"||typeof n.distance!="number")throw new Error("Invalid parameters");const e=66743e-15;if(n.distance===0)throw new Error("Distance cannot be zero");return e*n.mass1*n.mass2/Math.pow(n.distance,2)},parameters:[{name:"Mass 1",symbol:"mass1",unit:"kg"},{name:"Mass 2",symbol:"mass2",unit:"kg"},{name:"Distance",symbol:"distance",unit:"m"}],description:"Calculate the gravitational force between two objects"},{name:"Wave Frequency",formula:"f = v/λ",calculate:n=>{if(typeof n.velocity!="number"||typeof n.wavelength!="number")throw new Error("Invalid parameters");if(n.wavelength===0)throw new Error("Wavelength cannot be zero");return n.velocity/n.wavelength},parameters:[{name:"Wave Speed",symbol:"velocity",unit:"m/s"},{name:"Wavelength",symbol:"wavelength",unit:"m"}],description:"Calculate the frequency of a wave"},{name:"Electrical Power",formula:"P = VI",calculate:n=>{if(typeof n.voltage!="number"||typeof n.current!="number")throw new Error("Invalid parameters");return n.voltage*n.current},parameters:[{name:"Voltage",symbol:"voltage",unit:"V"},{name:"Current",symbol:"current",unit:"A"}],description:"Calculate electrical power"},{name:"Momentum",formula:"p = mv",calculate:n=>{if(typeof n.mass!="number"||typeof n.velocity!="number")throw new Error("Invalid parameters");return n.mass*n.velocity},parameters:[{name:"Mass",symbol:"mass",unit:"kg"},{name:"Velocity",symbol:"velocity",unit:"m/s"}],description:"Calculate linear momentum"}];function pD(){const[n,e]=Qe.useState(_x[0]),[t,i]=Qe.useState({}),[r,s]=Qe.useState(null),[o,a]=Qe.useState(null),[l,c]=Qe.useState(!0),u=_=>{for(const x of n.parameters){const y=_[x.symbol];if(y===void 0||isNaN(y))return a(`Please enter a valid number for ${x.name}`),!1;if(x.symbol.includes("distance")&&y<=0)return a("Distance must be greater than zero"),!1;if(x.symbol.includes("wavelength")&&y<=0)return a("Wavelength must be greater than zero"),!1;if((x.symbol==="m"||x.symbol==="mass"||x.symbol==="mass1"||x.symbol==="mass2")&&y<0)return a("Mass cannot be negative"),!1}return!0},f=()=>{if(a(null),s(null),!!u(t))try{const _=n.calculate(t);if(!isFinite(_)){a("Calculation resulted in an invalid value. Please check your inputs.");return}s(_)}catch(_){_ instanceof Error?a(_.message):a("An error occurred during calculation. Please check your inputs.")}},d=(_,x)=>{const y=x===""?void 0:Number(x);i(M=>({...M,[_]:y})),a(null),s(null)},h=_=>{switch(_){case"Kinetic Energy":return"J";case"Gravitational Force":return"N";case"Wave Frequency":return"Hz";case"Electrical Power":return"W";case"Momentum":return"kg⋅m/s";default:return""}},g=_=>l?_.toExponential(4):_>=1e3||_<.01?_.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):_.toFixed(4);return O.jsxs("div",{className:"bg-gray-800 rounded-xl p-6",children:[O.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[O.jsx(nE,{className:"text-blue-400 w-6 h-6"}),O.jsx("h3",{className:"text-2xl font-bold",children:"Physics Formula Calculator"})]}),O.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium mb-2",children:"Select Formula"}),O.jsx("select",{className:"w-full bg-gray-700 rounded-lg p-3 text-white",onChange:_=>{e(_x[Number(_.target.value)]),i({}),s(null),a(null)},children:_x.map((_,x)=>O.jsx("option",{value:x,children:_.name},_.name))}),O.jsxs("div",{className:"mt-4",children:[O.jsx("h4",{className:"text-lg font-semibold mb-2",children:"Formula:"}),O.jsx("div",{className:"bg-gray-700 rounded-lg p-4",children:O.jsx("p",{className:"text-xl font-mono",children:n.formula})}),O.jsx("p",{className:"text-gray-400 mt-2",children:n.description})]})]}),O.jsxs("div",{children:[O.jsx("div",{className:"space-y-4",children:n.parameters.map(_=>O.jsxs("div",{children:[O.jsxs("label",{className:"block text-sm font-medium mb-2",children:[_.name," (",_.symbol,") [",_.unit,"]"]}),O.jsx("input",{type:"number",className:"w-full bg-gray-700 rounded-lg p-3 text-white",placeholder:`Enter ${_.name.toLowerCase()}`,value:t[_.symbol]||"",onChange:x=>d(_.symbol,x.target.value)})]},_.symbol))}),O.jsxs("button",{onClick:f,className:"mt-6 w-full bg-blue-500 hover:bg-blue-600 text-white py-3 px-6 rounded-lg flex items-center justify-center gap-2",children:["Calculate",O.jsx(kR,{className:"w-4 h-4"})]}),o&&O.jsx("div",{className:"mt-4 p-3 bg-red-900/50 text-red-300 rounded-lg",children:o}),r!==null&&!o&&O.jsxs("div",{className:"mt-6 bg-gray-700 rounded-lg p-4",children:[O.jsxs("div",{className:"flex items-center justify-between mb-4",children:[O.jsx("h4",{className:"text-lg font-semibold",children:"Result:"}),O.jsxs("button",{onClick:()=>c(!l),className:"text-sm text-blue-400 hover:text-blue-300 transition-colors",children:["Show ",l?"Standard":"Scientific"," Notation"]})]}),O.jsxs("p",{className:"text-2xl font-mono text-blue-400",children:[g(r)," ",h(n.name)]}),l&&O.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:["Standard: ",r.toLocaleString()," ",h(n.name)]})]})]})]})]})}const b5=[{id:1,question:"What is the SI unit of force?",options:["Joule","Newton","Pascal","Watt"],correctAnswer:1,explanation:"The Newton (N) is the SI unit of force, defined as the force needed to accelerate 1 kilogram of mass at 1 meter per second squared.",category:"classical",difficulty:"easy"},{id:2,question:"In a perfectly elastic collision between two objects, what is conserved?",options:["Only momentum","Only kinetic energy","Both momentum and kinetic energy","Neither momentum nor kinetic energy"],correctAnswer:2,explanation:"In a perfectly elastic collision, both linear momentum and kinetic energy are conserved. This is what distinguishes elastic from inelastic collisions.",category:"classical",difficulty:"medium"},{id:3,question:"What is the period of a simple pendulum that is 2 meters long on Earth (g = 9.81 m/s²)?",options:["1.42 seconds","2.84 seconds","4.26 seconds","5.68 seconds"],correctAnswer:1,explanation:"The period of a simple pendulum is T = 2π√(L/g). With L = 2m and g = 9.81 m/s², T = 2.84 seconds.",category:"classical",difficulty:"hard"},{id:4,question:"Which of Newton's laws states that for every action, there is an equal and opposite reaction?",options:["First Law","Second Law","Third Law","Fourth Law"],correctAnswer:2,explanation:"Newton's Third Law states that for every action force, there is an equal and opposite reaction force.",category:"classical",difficulty:"easy"},{id:5,question:"What is angular momentum?",options:["Mass times velocity","Mass times acceleration","Moment of inertia times angular velocity","Force times radius"],correctAnswer:2,explanation:"Angular momentum is defined as the moment of inertia (I) multiplied by the angular velocity (ω).",category:"classical",difficulty:"medium"},{id:6,question:"What is the uncertainty principle?",options:["You can't measure anything perfectly","Position and momentum cannot be simultaneously known with arbitrary precision","Energy is always uncertain","Time is uncertain"],correctAnswer:1,explanation:"Heisenberg's uncertainty principle states that position and momentum of a particle cannot be simultaneously known with arbitrary precision.",category:"quantum",difficulty:"medium"},{id:7,question:"What is the wave function (ψ) in quantum mechanics?",options:["The actual path of a particle","A mathematical description of the quantum state","The energy of a particle","The speed of a particle"],correctAnswer:1,explanation:"The wave function is a mathematical description of the quantum state of an isolated quantum system.",category:"quantum",difficulty:"hard"},{id:8,question:"What is quantum entanglement?",options:["When particles get stuck together","When particles share the same energy","When the quantum states of particles cannot be described independently","When particles have the same wavelength"],correctAnswer:2,explanation:"Quantum entanglement occurs when particles become correlated in such a way that the quantum state of each particle cannot be described independently.",category:"quantum",difficulty:"hard"},{id:9,question:"What is the zeroth law of thermodynamics about?",options:["Energy conservation","Entropy","Thermal equilibrium","Heat transfer"],correctAnswer:2,explanation:"The zeroth law of thermodynamics states that if two systems are in thermal equilibrium with a third system, they are in thermal equilibrium with each other.",category:"thermodynamics",difficulty:"medium"},{id:10,question:"What happens to entropy in an isolated system?",options:["It decreases","It stays the same","It increases","It oscillates"],correctAnswer:2,explanation:"According to the second law of thermodynamics, the entropy of an isolated system always increases over time.",category:"thermodynamics",difficulty:"medium"},{id:11,question:"What is Coulomb's law about?",options:["Magnetic fields","Electric current","Electrostatic force between charges","Electromagnetic induction"],correctAnswer:2,explanation:"Coulomb's law describes the electrostatic force between electrically charged particles.",category:"electromagnetism",difficulty:"medium"},{id:12,question:"What is Faraday's law of induction?",options:["Current induces magnetic field","Changing magnetic field induces EMF","Charges create electric fields","Magnetic fields affect charges"],correctAnswer:1,explanation:"Faraday's law states that a changing magnetic field induces an electromotive force (EMF) in a conductor.",category:"electromagnetism",difficulty:"hard"},{id:13,question:"What is time dilation?",options:["Time moving backwards","Time moving faster","Time moving slower for moving objects","Time stopping completely"],correctAnswer:2,explanation:"Time dilation is the phenomenon where time passes slower for objects moving at high velocities relative to a stationary observer.",category:"relativity",difficulty:"hard"},{id:14,question:"What is the famous equation E = mc²?",options:["Energy equals mass times speed","Energy equals mass times the speed of light squared","Energy equals momentum times speed","Energy equals mass times acceleration"],correctAnswer:1,explanation:"Einstein's famous equation E = mc² shows that mass and energy are equivalent and interchangeable.",category:"relativity",difficulty:"medium"},{id:15,question:"What is the Higgs boson?",options:["A type of atom","A particle that gives other particles mass","A type of wave","A form of energy"],correctAnswer:1,explanation:"The Higgs boson is a particle that gives mass to other fundamental particles through the Higgs mechanism.",category:"modern",difficulty:"hard"},{id:16,question:"What is dark matter?",options:["Matter in black holes","Matter that doesn't emit light but has gravitational effects","Anti-matter","Matter in distant galaxies"],correctAnswer:1,explanation:"Dark matter is a hypothetical form of matter that doesn't interact with electromagnetic radiation but exerts gravitational effects.",category:"modern",difficulty:"hard"},{id:17,question:"What is the principle of wave-particle duality?",options:["Waves can become particles","Particles can become waves","Matter can exhibit both wave and particle properties","Light can only be a wave"],correctAnswer:2,explanation:"Wave-particle duality states that all matter and radiation exhibits both wave and particle characteristics.",category:"quantum",difficulty:"medium"},{id:18,question:"What is the first law of thermodynamics?",options:["Energy cannot be created or destroyed","Entropy always increases","Heat flows from hot to cold","Temperature is constant in equilibrium"],correctAnswer:0,explanation:"The first law of thermodynamics is a statement of conservation of energy.",category:"thermodynamics",difficulty:"medium"},{id:19,question:"What is the strong nuclear force?",options:["The force between electrons","The force of gravity","The force holding nuclei together","The force between molecules"],correctAnswer:2,explanation:"The strong nuclear force is the force that holds quarks together to form protons and neutrons, and holds protons and neutrons together in atomic nuclei.",category:"modern",difficulty:"medium"},{id:20,question:"What is the photoelectric effect?",options:["Light creating shadows","Light producing electricity","Electrons emitting light","Light bending around objects"],correctAnswer:1,explanation:"The photoelectric effect is the emission of electrons when light hits a material, demonstrating light's particle nature.",category:"quantum",difficulty:"medium"},{id:21,question:"What is Ohm's law?",options:["P = VI","V = IR","F = ma","E = mc²"],correctAnswer:1,explanation:"Ohm's law states that the current through a conductor is directly proportional to the voltage and inversely proportional to the resistance (V = IR).",category:"electromagnetism",difficulty:"easy"},{id:22,question:"What is the principle of conservation of momentum?",options:["Energy is always conserved","Mass is always conserved","Total momentum remains constant in an isolated system","Force is always conserved"],correctAnswer:2,explanation:"The principle of conservation of momentum states that the total momentum of an isolated system remains constant if no external forces act on it.",category:"classical",difficulty:"medium"},{id:23,question:"What is the speed of sound in air at room temperature (approximately)?",options:["343 m/s","300,000 km/s","100 m/s","1000 m/s"],correctAnswer:0,explanation:"The speed of sound in air at room temperature (20°C) is approximately 343 meters per second.",category:"classical",difficulty:"easy"},{id:24,question:"What is the Doppler effect?",options:["Change in wave frequency due to relative motion","Change in wave amplitude","Change in wave speed","Change in wave direction"],correctAnswer:0,explanation:"The Doppler effect is the change in frequency of a wave in relation to an observer moving relative to its source.",category:"classical",difficulty:"medium"},{id:25,question:"What is the principle of superposition?",options:["Waves cancel each other","Waves combine additively","Waves multiply together","Waves divide each other"],correctAnswer:1,explanation:"The principle of superposition states that when two or more waves overlap, the resultant displacement at any point is the sum of the displacements of the individual waves.",category:"classical",difficulty:"medium"},{id:26,question:"What is the law of universal gravitation?",options:["Objects fall at the same rate","Gravity is constant everywhere","Force is proportional to mass product and inversely proportional to distance squared","Gravity only affects heavy objects"],correctAnswer:2,explanation:"Newton's law of universal gravitation states that the gravitational force between two masses is proportional to their product and inversely proportional to the square of the distance between them.",category:"classical",difficulty:"medium"},{id:27,question:"What is the principle of equivalence in general relativity?",options:["Mass and energy are equivalent","Gravitational and inertial mass are equivalent","Space and time are equivalent","Force and acceleration are equivalent"],correctAnswer:1,explanation:"The principle of equivalence states that gravitational and inertial mass are equivalent, and that the effects of gravity are indistinguishable from the effects of acceleration.",category:"relativity",difficulty:"hard"},{id:28,question:"What is quantum tunneling?",options:["Digging through matter","Particles passing through classical barriers","Creating wormholes","Quantum teleportation"],correctAnswer:1,explanation:"Quantum tunneling is a quantum mechanical phenomenon where a particle passes through a potential barrier that it classically could not surmount.",category:"quantum",difficulty:"hard"},{id:29,question:"What is the concept of entropy?",options:["Total energy of a system","Measure of disorder in a system","Temperature of a system","Pressure of a system"],correctAnswer:1,explanation:"Entropy is a measure of the disorder or randomness in a system, and it tends to increase over time in isolated systems.",category:"thermodynamics",difficulty:"hard"},{id:30,question:"What is the relationship between electric and magnetic fields in electromagnetic waves?",options:["They are parallel","They are perpendicular","They are opposite","They are unrelated"],correctAnswer:1,explanation:"In electromagnetic waves, the electric and magnetic fields are perpendicular to each other and to the direction of wave propagation.",category:"electromagnetism",difficulty:"hard"}];function mD(){const[n,e]=Qe.useState(0),[t,i]=Qe.useState(null),[r,s]=Qe.useState(!1),[o,a]=Qe.useState(0),[l,c]=Qe.useState(!1),[u,f]=Qe.useState("all"),[d,h]=Qe.useState("all"),[g,_]=Qe.useState(b5),x=()=>{let T=[...b5];u!=="all"&&(T=T.filter(P=>P.category===u)),d!=="all"&&(T=T.filter(P=>P.difficulty===d)),_(T),A()},y=()=>{const T=[...g].sort(()=>Math.random()-.5);_(T),A()},M=T=>{i(T),s(!0),T===g[n].correctAnswer&&a(o+1)},b=()=>{n<g.length-1?(e(n+1),i(null),s(!1)):c(!0)},A=()=>{e(0),i(null),s(!1),a(0),c(!1)};return O.jsxs("div",{className:"bg-gray-800 rounded-xl p-6",children:[O.jsxs("div",{className:"flex items-center justify-between mb-6",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx(tE,{className:"text-blue-400 w-6 h-6"}),O.jsx("h3",{className:"text-2xl font-bold",children:"Physics Quiz Challenge"})]}),O.jsxs("div",{className:"flex gap-4",children:[O.jsxs("select",{className:"bg-gray-700 rounded-lg px-3 py-1 text-sm",value:u,onChange:T=>f(T.target.value),children:[O.jsx("option",{value:"all",children:"All Categories"}),O.jsx("option",{value:"classical",children:"Classical Mechanics"}),O.jsx("option",{value:"quantum",children:"Quantum Mechanics"}),O.jsx("option",{value:"thermodynamics",children:"Thermodynamics"}),O.jsx("option",{value:"electromagnetism",children:"Electromagnetism"}),O.jsx("option",{value:"relativity",children:"Relativity"}),O.jsx("option",{value:"modern",children:"Modern Physics"})]}),O.jsxs("select",{className:"bg-gray-700 rounded-lg px-3 py-1 text-sm",value:d,onChange:T=>h(T.target.value),children:[O.jsx("option",{value:"all",children:"All Difficulties"}),O.jsx("option",{value:"easy",children:"Easy"}),O.jsx("option",{value:"medium",children:"Medium"}),O.jsx("option",{value:"hard",children:"Hard"})]}),O.jsxs("button",{onClick:x,className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded-lg text-sm flex items-center gap-2",children:[O.jsx(BR,{className:"w-4 h-4"}),"Filter"]}),O.jsxs("button",{onClick:y,className:"bg-purple-500 hover:bg-purple-600 text-white px-3 py-1 rounded-lg text-sm flex items-center gap-2",children:[O.jsx(jR,{className:"w-4 h-4"}),"Shuffle"]})]})]}),l?O.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 text-center",children:[O.jsx("h4",{className:"text-2xl font-bold mb-4",children:"Quiz Complete!"}),O.jsxs("p",{className:"text-xl mb-6",children:["Your score: ",o," out of ",g.length," (",(o/g.length*100).toFixed(1),"%)"]}),O.jsxs("button",{onClick:A,className:"inline-flex items-center gap-2 bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg transition-colors",children:[O.jsx(WR,{className:"w-5 h-5"}),"Try Again"]})]}):O.jsxs("div",{className:"space-y-6",children:[O.jsxs("div",{className:"flex justify-between items-center",children:[O.jsxs("span",{className:"text-sm text-gray-400",children:["Question ",n+1," of ",g.length]}),O.jsxs("span",{className:"text-sm text-gray-400",children:["Score: ",o,"/",g.length]})]}),O.jsxs("div",{className:"bg-gray-700 rounded-lg p-6",children:[O.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[O.jsx("span",{className:`px-2 py-1 rounded text-sm ${g[n].difficulty==="easy"?"bg-green-900 text-green-300":g[n].difficulty==="medium"?"bg-yellow-900 text-yellow-300":"bg-red-900 text-red-300"}`,children:g[n].difficulty}),O.jsx("span",{className:"px-2 py-1 bg-blue-900 text-blue-300 rounded text-sm",children:g[n].category})]}),O.jsx("h4",{className:"text-xl font-semibold mb-4",children:g[n].question}),O.jsx("div",{className:"space-y-3",children:g[n].options.map((T,P)=>O.jsx("button",{onClick:()=>M(P),disabled:t!==null,className:`w-full text-left p-4 rounded-lg transition-colors ${t===null?"bg-gray-600 hover:bg-gray-500":P===g[n].correctAnswer?"bg-green-600":t===P?"bg-red-600":"bg-gray-600"}`,children:T},P))})]}),r&&O.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[O.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t===g[n].correctAnswer?O.jsx(DR,{className:"text-green-400 w-5 h-5"}):O.jsx(YR,{className:"text-red-400 w-5 h-5"}),O.jsx("h5",{className:"font-semibold",children:"Explanation:"})]}),O.jsx("p",{className:"text-gray-300",children:g[n].explanation}),O.jsx("button",{onClick:b,className:"mt-4 bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg transition-colors",children:n<g.length-1?"Next Question":"Complete Quiz"})]})]})]})}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Bp="162",hu={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},fu={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},YE=0,P4=1,ZE=2,gD=3,KE=0,kv=1,D0=2,Lo=3,ol=0,rs=1,Oo=2,el=0,Pu=1,R4=2,k4=3,L4=4,QE=5,Xl=100,JE=101,$E=102,N4=103,I4=104,eT=200,tT=201,nT=202,iT=203,rv=204,sv=205,rT=206,sT=207,oT=208,aT=209,lT=210,cT=211,uT=212,hT=213,fT=214,dT=0,pT=1,mT=2,up=3,gT=4,vT=5,yT=6,xT=7,Hp=0,_T=1,ST=2,ma=0,wT=1,bT=2,MT=3,F_=4,ET=5,TT=6,AT=7,D4="attached",CT="detached",Lv=300,al=301,dc=302,hp=303,fp=304,Qf=306,dp=1e3,Fr=1001,pp=1002,Ri=1003,ov=1004,vD=1004,mu=1005,yD=1005,oi=1006,O0=1007,xD=1007,ua=1008,_D=1008,ga=1009,PT=1010,RT=1011,Nv=1012,U_=1013,Qa=1014,zs=1015,Gf=1016,z_=1017,B_=1018,oc=1020,kT=1021,ts=1023,LT=1024,NT=1025,ac=1026,Hu=1027,H_=1028,V_=1029,IT=1030,G_=1031,W_=1033,g1=33776,v1=33777,y1=33778,x1=33779,O4=35840,F4=35841,U4=35842,z4=35843,j_=36196,B4=37492,H4=37496,V4=37808,G4=37809,W4=37810,j4=37811,q4=37812,X4=37813,Y4=37814,Z4=37815,K4=37816,Q4=37817,J4=37818,$4=37819,e3=37820,t3=37821,_1=36492,n3=36494,i3=36495,DT=36283,r3=36284,s3=36285,o3=36286,OT=2200,FT=2201,UT=2202,mp=2300,gp=2301,S1=2302,wu=2400,bu=2401,vp=2402,Iv=2500,q_=2501,SD=0,wD=1,bD=2,zT=3200,X_=3201,yc=0,BT=1,Xa="",so="srgb",ul="srgb-linear",Dv="display-p3",Vp="display-p3-linear",yp="linear",$n="srgb",xp="rec709",_p="p3",MD=0,du=7680,ED=7681,TD=7682,AD=7683,CD=34055,PD=34056,RD=5386,kD=512,LD=513,ND=514,ID=515,DD=516,OD=517,FD=518,a3=519,HT=512,VT=513,GT=514,Y_=515,WT=516,jT=517,qT=518,XT=519,Sp=35044,UD=35048,zD=35040,BD=35045,HD=35049,VD=35041,GD=35046,WD=35050,jD=35042,qD="100",l3="300 es",av=1035,ha=2e3,wp=2001;let hl=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}};const Lr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let M5=1234567;const Ru=Math.PI/180,Wf=180/Math.PI;function Ws(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Lr[n&255]+Lr[n>>8&255]+Lr[n>>16&255]+Lr[n>>24&255]+"-"+Lr[e&255]+Lr[e>>8&255]+"-"+Lr[e>>16&15|64]+Lr[e>>24&255]+"-"+Lr[t&63|128]+Lr[t>>8&255]+"-"+Lr[t>>16&255]+Lr[t>>24&255]+Lr[i&255]+Lr[i>>8&255]+Lr[i>>16&255]+Lr[i>>24&255]).toLowerCase()}function bi(n,e,t){return Math.max(e,Math.min(t,n))}function Z_(n,e){return(n%e+e)%e}function XD(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function YD(n,e,t){return n!==e?(t-n)/(e-n):0}function F0(n,e,t){return(1-t)*n+t*e}function ZD(n,e,t,i){return F0(n,e,1-Math.exp(-t*i))}function KD(n,e=1){return e-Math.abs(Z_(n,e*2)-e)}function QD(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function JD(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function $D(n,e){return n+Math.floor(Math.random()*(e-n+1))}function eO(n,e){return n+Math.random()*(e-n)}function tO(n){return n*(.5-Math.random())}function nO(n){n!==void 0&&(M5=n);let e=M5+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function iO(n){return n*Ru}function rO(n){return n*Wf}function c3(n){return(n&n-1)===0&&n!==0}function sO(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function lv(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function oO(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+i)/2),u=o((e+i)/2),f=s((e-i)/2),d=o((e-i)/2),h=s((i-e)/2),g=o((i-e)/2);switch(r){case"XYX":n.set(a*u,l*f,l*d,a*c);break;case"YZY":n.set(l*d,a*u,l*f,a*c);break;case"ZXZ":n.set(l*f,l*d,a*u,a*c);break;case"XZX":n.set(a*u,l*g,l*h,a*c);break;case"YXY":n.set(l*h,a*u,l*g,a*c);break;case"ZYZ":n.set(l*g,l*h,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function ns(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function sn(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const YT={DEG2RAD:Ru,RAD2DEG:Wf,generateUUID:Ws,clamp:bi,euclideanModulo:Z_,mapLinear:XD,inverseLerp:YD,lerp:F0,damp:ZD,pingpong:KD,smoothstep:QD,smootherstep:JD,randInt:$D,randFloat:eO,randFloatSpread:tO,seededRandom:nO,degToRad:iO,radToDeg:rO,isPowerOfTwo:c3,ceilPowerOfTwo:sO,floorPowerOfTwo:lv,setQuaternionFromProperEuler:oO,normalize:sn,denormalize:ns};class $e{constructor(e=0,t=0){$e.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(bi(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class tn{constructor(e,t,i,r,s,o,a,l,c){tn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c)}set(e,t,i,r,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],f=i[7],d=i[2],h=i[5],g=i[8],_=r[0],x=r[3],y=r[6],M=r[1],b=r[4],A=r[7],T=r[2],P=r[5],k=r[8];return s[0]=o*_+a*M+l*T,s[3]=o*x+a*b+l*P,s[6]=o*y+a*A+l*k,s[1]=c*_+u*M+f*T,s[4]=c*x+u*b+f*P,s[7]=c*y+u*A+f*k,s[2]=d*_+h*M+g*T,s[5]=d*x+h*b+g*P,s[8]=d*y+h*A+g*k,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-i*s*u+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=u*o-a*c,d=a*l-u*s,h=c*s-o*l,g=t*f+i*d+r*h;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const _=1/g;return e[0]=f*_,e[1]=(r*c-u*i)*_,e[2]=(a*i-r*o)*_,e[3]=d*_,e[4]=(u*t-r*l)*_,e[5]=(r*s-a*t)*_,e[6]=h*_,e[7]=(i*l-c*t)*_,e[8]=(o*t-i*s)*_,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(Sx.makeScale(e,t)),this}rotate(e){return this.premultiply(Sx.makeRotation(-e)),this}translate(e,t){return this.premultiply(Sx.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Sx=new tn;function ZT(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const aO={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function xf(n,e){return new aO[n](e)}function bp(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function KT(){const n=bp("canvas");return n.style.display="block",n}const E5={};function QT(n){n in E5||(E5[n]=!0,console.warn(n))}const T5=new tn().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),A5=new tn().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),eg={[ul]:{transfer:yp,primaries:xp,toReference:n=>n,fromReference:n=>n},[so]:{transfer:$n,primaries:xp,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[Vp]:{transfer:yp,primaries:_p,toReference:n=>n.applyMatrix3(A5),fromReference:n=>n.applyMatrix3(T5)},[Dv]:{transfer:$n,primaries:_p,toReference:n=>n.convertSRGBToLinear().applyMatrix3(A5),fromReference:n=>n.applyMatrix3(T5).convertLinearToSRGB()}},lO=new Set([ul,Vp]),Gn={enabled:!0,_workingColorSpace:ul,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!lO.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=eg[e].toReference,r=eg[t].fromReference;return r(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return eg[n].primaries},getTransfer:function(n){return n===Xa?yp:eg[n].transfer}};function Lf(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function wx(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Nh;class K_{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Nh===void 0&&(Nh=bp("canvas")),Nh.width=e.width,Nh.height=e.height;const i=Nh.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Nh}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=bp("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Lf(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Lf(t[i]/255)*255):t[i]=Lf(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let cO=0;class Mu{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:cO++}),this.uuid=Ws(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(bx(r[o].image)):s.push(bx(r[o]))}else s=bx(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function bx(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?K_.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let uO=0;class yi extends hl{constructor(e=yi.DEFAULT_IMAGE,t=yi.DEFAULT_MAPPING,i=Fr,r=Fr,s=oi,o=ua,a=ts,l=ga,c=yi.DEFAULT_ANISOTROPY,u=Xa){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:uO++}),this.uuid=Ws(),this.name="",this.source=new Mu(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new $e(0,0),this.repeat=new $e(1,1),this.center=new $e(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new tn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Lv)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case dp:e.x=e.x-Math.floor(e.x);break;case Fr:e.x=e.x<0?0:1;break;case pp:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case dp:e.y=e.y-Math.floor(e.y);break;case Fr:e.y=e.y<0?0:1;break;case pp:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}yi.DEFAULT_IMAGE=null;yi.DEFAULT_MAPPING=Lv;yi.DEFAULT_ANISOTROPY=1;class gn{constructor(e=0,t=0,i=0,r=1){gn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],u=l[4],f=l[8],d=l[1],h=l[5],g=l[9],_=l[2],x=l[6],y=l[10];if(Math.abs(u-d)<.01&&Math.abs(f-_)<.01&&Math.abs(g-x)<.01){if(Math.abs(u+d)<.1&&Math.abs(f+_)<.1&&Math.abs(g+x)<.1&&Math.abs(c+h+y-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const b=(c+1)/2,A=(h+1)/2,T=(y+1)/2,P=(u+d)/4,k=(f+_)/4,N=(g+x)/4;return b>A&&b>T?b<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(b),r=P/i,s=k/i):A>T?A<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(A),i=P/r,s=N/r):T<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(T),i=k/s,r=N/s),this.set(i,r,s,t),this}let M=Math.sqrt((x-g)*(x-g)+(f-_)*(f-_)+(d-u)*(d-u));return Math.abs(M)<.001&&(M=1),this.x=(x-g)/M,this.y=(f-_)/M,this.z=(d-u)/M,this.w=Math.acos((c+h+y-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class JT extends hl{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new gn(0,0,e,t),this.scissorTest=!1,this.viewport=new gn(0,0,e,t);const r={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:oi,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0,count:1},i);const s=new yi(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,r=e.textures.length;i<r;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Mu(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ho extends JT{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class Ov extends yi{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ri,this.minFilter=Ri,this.wrapR=Fr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class hO extends Ho{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Ov(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Q_ extends yi{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ri,this.minFilter=Ri,this.wrapR=Fr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class fO extends Ho{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new Q_(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class zr{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],c=i[r+1],u=i[r+2],f=i[r+3];const d=s[o+0],h=s[o+1],g=s[o+2],_=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=f;return}if(a===1){e[t+0]=d,e[t+1]=h,e[t+2]=g,e[t+3]=_;return}if(f!==_||l!==d||c!==h||u!==g){let x=1-a;const y=l*d+c*h+u*g+f*_,M=y>=0?1:-1,b=1-y*y;if(b>Number.EPSILON){const T=Math.sqrt(b),P=Math.atan2(T,y*M);x=Math.sin(x*P)/T,a=Math.sin(a*P)/T}const A=a*M;if(l=l*x+d*A,c=c*x+h*A,u=u*x+g*A,f=f*x+_*A,x===1-a){const T=1/Math.sqrt(l*l+c*c+u*u+f*f);l*=T,c*=T,u*=T,f*=T}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=f}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],u=i[r+3],f=s[o],d=s[o+1],h=s[o+2],g=s[o+3];return e[t]=a*g+u*f+l*h-c*d,e[t+1]=l*g+u*d+c*f-a*h,e[t+2]=c*g+u*h+a*d-l*f,e[t+3]=u*g-a*f-l*d-c*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(r/2),f=a(s/2),d=l(i/2),h=l(r/2),g=l(s/2);switch(o){case"XYZ":this._x=d*u*f+c*h*g,this._y=c*h*f-d*u*g,this._z=c*u*g+d*h*f,this._w=c*u*f-d*h*g;break;case"YXZ":this._x=d*u*f+c*h*g,this._y=c*h*f-d*u*g,this._z=c*u*g-d*h*f,this._w=c*u*f+d*h*g;break;case"ZXY":this._x=d*u*f-c*h*g,this._y=c*h*f+d*u*g,this._z=c*u*g+d*h*f,this._w=c*u*f-d*h*g;break;case"ZYX":this._x=d*u*f-c*h*g,this._y=c*h*f+d*u*g,this._z=c*u*g-d*h*f,this._w=c*u*f+d*h*g;break;case"YZX":this._x=d*u*f+c*h*g,this._y=c*h*f+d*u*g,this._z=c*u*g-d*h*f,this._w=c*u*f-d*h*g;break;case"XZY":this._x=d*u*f-c*h*g,this._y=c*h*f-d*u*g,this._z=c*u*g+d*h*f,this._w=c*u*f+d*h*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],f=t[10],d=i+a+f;if(d>0){const h=.5/Math.sqrt(d+1);this._w=.25/h,this._x=(u-l)*h,this._y=(s-c)*h,this._z=(o-r)*h}else if(i>a&&i>f){const h=2*Math.sqrt(1+i-a-f);this._w=(u-l)/h,this._x=.25*h,this._y=(r+o)/h,this._z=(s+c)/h}else if(a>f){const h=2*Math.sqrt(1+a-i-f);this._w=(s-c)/h,this._x=(r+o)/h,this._y=.25*h,this._z=(l+u)/h}else{const h=2*Math.sqrt(1+f-i-a);this._w=(o-r)/h,this._x=(s+c)/h,this._y=(l+u)/h,this._z=.25*h}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(bi(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+o*a+r*c-s*l,this._y=r*u+o*l+s*a-i*c,this._z=s*u+o*c+i*l-r*a,this._w=o*u-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const h=1-t;return this._w=h*o+t*this._w,this._x=h*i+t*this._x,this._y=h*r+t*this._y,this._z=h*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),f=Math.sin((1-t)*u)/c,d=Math.sin(t*u)/c;return this._w=o*f+this._w*d,this._x=i*f+this._x*d,this._y=r*f+this._y*d,this._z=s*f+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ue{constructor(e=0,t=0,i=0){ue.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(C5.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(C5.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*r-a*i),u=2*(a*t-s*r),f=2*(s*i-o*t);return this.x=t+l*c+o*f-a*u,this.y=i+l*u+a*c-s*f,this.z=r+l*f+s*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Mx.copy(this).projectOnVector(e),this.sub(Mx)}reflect(e){return this.sub(Mx.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(bi(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Mx=new ue,C5=new zr;class Vi{constructor(e=new ue(1/0,1/0,1/0),t=new ue(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Co.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Co.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Co.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,Co):Co.fromBufferAttribute(s,o),Co.applyMatrix4(e.matrixWorld),this.expandByPoint(Co);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),tg.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),tg.copy(i.boundingBox)),tg.applyMatrix4(e.matrixWorld),this.union(tg)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Co),Co.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Yd),ng.subVectors(this.max,Yd),Ih.subVectors(e.a,Yd),Dh.subVectors(e.b,Yd),Oh.subVectors(e.c,Yd),Nl.subVectors(Dh,Ih),Il.subVectors(Oh,Dh),Yc.subVectors(Ih,Oh);let t=[0,-Nl.z,Nl.y,0,-Il.z,Il.y,0,-Yc.z,Yc.y,Nl.z,0,-Nl.x,Il.z,0,-Il.x,Yc.z,0,-Yc.x,-Nl.y,Nl.x,0,-Il.y,Il.x,0,-Yc.y,Yc.x,0];return!Ex(t,Ih,Dh,Oh,ng)||(t=[1,0,0,0,1,0,0,0,1],!Ex(t,Ih,Dh,Oh,ng))?!1:(ig.crossVectors(Nl,Il),t=[ig.x,ig.y,ig.z],Ex(t,Ih,Dh,Oh,ng))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Co).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Co).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Da[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Da[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Da[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Da[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Da[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Da[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Da[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Da[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Da),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Da=[new ue,new ue,new ue,new ue,new ue,new ue,new ue,new ue],Co=new ue,tg=new Vi,Ih=new ue,Dh=new ue,Oh=new ue,Nl=new ue,Il=new ue,Yc=new ue,Yd=new ue,ng=new ue,ig=new ue,Zc=new ue;function Ex(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){Zc.fromArray(n,s);const a=r.x*Math.abs(Zc.x)+r.y*Math.abs(Zc.y)+r.z*Math.abs(Zc.z),l=e.dot(Zc),c=t.dot(Zc),u=i.dot(Zc);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const dO=new Vi,Zd=new ue,Tx=new ue;let Qi=class{constructor(e=new ue,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):dO.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Zd.subVectors(e,this.center);const t=Zd.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Zd,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Tx.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Zd.copy(e.center).add(Tx)),this.expandByPoint(Zd.copy(e.center).sub(Tx))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}};const Oa=new ue,Ax=new ue,rg=new ue,Dl=new ue,Cx=new ue,sg=new ue,Px=new ue;class Yu{constructor(e=new ue,t=new ue(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Oa)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Oa.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Oa.copy(this.origin).addScaledVector(this.direction,t),Oa.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){Ax.copy(e).add(t).multiplyScalar(.5),rg.copy(t).sub(e).normalize(),Dl.copy(this.origin).sub(Ax);const s=e.distanceTo(t)*.5,o=-this.direction.dot(rg),a=Dl.dot(this.direction),l=-Dl.dot(rg),c=Dl.lengthSq(),u=Math.abs(1-o*o);let f,d,h,g;if(u>0)if(f=o*l-a,d=o*a-l,g=s*u,f>=0)if(d>=-g)if(d<=g){const _=1/u;f*=_,d*=_,h=f*(f+o*d+2*a)+d*(o*f+d+2*l)+c}else d=s,f=Math.max(0,-(o*d+a)),h=-f*f+d*(d+2*l)+c;else d=-s,f=Math.max(0,-(o*d+a)),h=-f*f+d*(d+2*l)+c;else d<=-g?(f=Math.max(0,-(-o*s+a)),d=f>0?-s:Math.min(Math.max(-s,-l),s),h=-f*f+d*(d+2*l)+c):d<=g?(f=0,d=Math.min(Math.max(-s,-l),s),h=d*(d+2*l)+c):(f=Math.max(0,-(o*s+a)),d=f>0?s:Math.min(Math.max(-s,-l),s),h=-f*f+d*(d+2*l)+c);else d=o>0?-s:s,f=Math.max(0,-(o*d+a)),h=-f*f+d*(d+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,f),r&&r.copy(Ax).addScaledVector(rg,d),h}intersectSphere(e,t){Oa.subVectors(e.center,this.origin);const i=Oa.dot(this.direction),r=Oa.dot(Oa)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,f=1/this.direction.z,d=this.origin;return c>=0?(i=(e.min.x-d.x)*c,r=(e.max.x-d.x)*c):(i=(e.max.x-d.x)*c,r=(e.min.x-d.x)*c),u>=0?(s=(e.min.y-d.y)*u,o=(e.max.y-d.y)*u):(s=(e.max.y-d.y)*u,o=(e.min.y-d.y)*u),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),f>=0?(a=(e.min.z-d.z)*f,l=(e.max.z-d.z)*f):(a=(e.max.z-d.z)*f,l=(e.min.z-d.z)*f),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Oa)!==null}intersectTriangle(e,t,i,r,s){Cx.subVectors(t,e),sg.subVectors(i,e),Px.crossVectors(Cx,sg);let o=this.direction.dot(Px),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Dl.subVectors(this.origin,e);const l=a*this.direction.dot(sg.crossVectors(Dl,sg));if(l<0)return null;const c=a*this.direction.dot(Cx.cross(Dl));if(c<0||l+c>o)return null;const u=-a*Dl.dot(Px);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class qt{constructor(e,t,i,r,s,o,a,l,c,u,f,d,h,g,_,x){qt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c,u,f,d,h,g,_,x)}set(e,t,i,r,s,o,a,l,c,u,f,d,h,g,_,x){const y=this.elements;return y[0]=e,y[4]=t,y[8]=i,y[12]=r,y[1]=s,y[5]=o,y[9]=a,y[13]=l,y[2]=c,y[6]=u,y[10]=f,y[14]=d,y[3]=h,y[7]=g,y[11]=_,y[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new qt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Fh.setFromMatrixColumn(e,0).length(),s=1/Fh.setFromMatrixColumn(e,1).length(),o=1/Fh.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const d=o*u,h=o*f,g=a*u,_=a*f;t[0]=l*u,t[4]=-l*f,t[8]=c,t[1]=h+g*c,t[5]=d-_*c,t[9]=-a*l,t[2]=_-d*c,t[6]=g+h*c,t[10]=o*l}else if(e.order==="YXZ"){const d=l*u,h=l*f,g=c*u,_=c*f;t[0]=d+_*a,t[4]=g*a-h,t[8]=o*c,t[1]=o*f,t[5]=o*u,t[9]=-a,t[2]=h*a-g,t[6]=_+d*a,t[10]=o*l}else if(e.order==="ZXY"){const d=l*u,h=l*f,g=c*u,_=c*f;t[0]=d-_*a,t[4]=-o*f,t[8]=g+h*a,t[1]=h+g*a,t[5]=o*u,t[9]=_-d*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const d=o*u,h=o*f,g=a*u,_=a*f;t[0]=l*u,t[4]=g*c-h,t[8]=d*c+_,t[1]=l*f,t[5]=_*c+d,t[9]=h*c-g,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const d=o*l,h=o*c,g=a*l,_=a*c;t[0]=l*u,t[4]=_-d*f,t[8]=g*f+h,t[1]=f,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=h*f+g,t[10]=d-_*f}else if(e.order==="XZY"){const d=o*l,h=o*c,g=a*l,_=a*c;t[0]=l*u,t[4]=-f,t[8]=c*u,t[1]=d*f+_,t[5]=o*u,t[9]=h*f-g,t[2]=g*f-h,t[6]=a*u,t[10]=_*f+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(pO,e,mO)}lookAt(e,t,i){const r=this.elements;return Os.subVectors(e,t),Os.lengthSq()===0&&(Os.z=1),Os.normalize(),Ol.crossVectors(i,Os),Ol.lengthSq()===0&&(Math.abs(i.z)===1?Os.x+=1e-4:Os.z+=1e-4,Os.normalize(),Ol.crossVectors(i,Os)),Ol.normalize(),og.crossVectors(Os,Ol),r[0]=Ol.x,r[4]=og.x,r[8]=Os.x,r[1]=Ol.y,r[5]=og.y,r[9]=Os.y,r[2]=Ol.z,r[6]=og.z,r[10]=Os.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],f=i[5],d=i[9],h=i[13],g=i[2],_=i[6],x=i[10],y=i[14],M=i[3],b=i[7],A=i[11],T=i[15],P=r[0],k=r[4],N=r[8],z=r[12],R=r[1],F=r[5],V=r[9],K=r[13],W=r[2],ne=r[6],re=r[10],de=r[14],X=r[3],$=r[7],J=r[11],j=r[15];return s[0]=o*P+a*R+l*W+c*X,s[4]=o*k+a*F+l*ne+c*$,s[8]=o*N+a*V+l*re+c*J,s[12]=o*z+a*K+l*de+c*j,s[1]=u*P+f*R+d*W+h*X,s[5]=u*k+f*F+d*ne+h*$,s[9]=u*N+f*V+d*re+h*J,s[13]=u*z+f*K+d*de+h*j,s[2]=g*P+_*R+x*W+y*X,s[6]=g*k+_*F+x*ne+y*$,s[10]=g*N+_*V+x*re+y*J,s[14]=g*z+_*K+x*de+y*j,s[3]=M*P+b*R+A*W+T*X,s[7]=M*k+b*F+A*ne+T*$,s[11]=M*N+b*V+A*re+T*J,s[15]=M*z+b*K+A*de+T*j,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],f=e[6],d=e[10],h=e[14],g=e[3],_=e[7],x=e[11],y=e[15];return g*(+s*l*f-r*c*f-s*a*d+i*c*d+r*a*h-i*l*h)+_*(+t*l*h-t*c*d+s*o*d-r*o*h+r*c*u-s*l*u)+x*(+t*c*f-t*a*h-s*o*f+i*o*h+s*a*u-i*c*u)+y*(-r*a*u-t*l*f+t*a*d+r*o*f-i*o*d+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=e[9],d=e[10],h=e[11],g=e[12],_=e[13],x=e[14],y=e[15],M=f*x*c-_*d*c+_*l*h-a*x*h-f*l*y+a*d*y,b=g*d*c-u*x*c-g*l*h+o*x*h+u*l*y-o*d*y,A=u*_*c-g*f*c+g*a*h-o*_*h-u*a*y+o*f*y,T=g*f*l-u*_*l-g*a*d+o*_*d+u*a*x-o*f*x,P=t*M+i*b+r*A+s*T;if(P===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const k=1/P;return e[0]=M*k,e[1]=(_*d*s-f*x*s-_*r*h+i*x*h+f*r*y-i*d*y)*k,e[2]=(a*x*s-_*l*s+_*r*c-i*x*c-a*r*y+i*l*y)*k,e[3]=(f*l*s-a*d*s-f*r*c+i*d*c+a*r*h-i*l*h)*k,e[4]=b*k,e[5]=(u*x*s-g*d*s+g*r*h-t*x*h-u*r*y+t*d*y)*k,e[6]=(g*l*s-o*x*s-g*r*c+t*x*c+o*r*y-t*l*y)*k,e[7]=(o*d*s-u*l*s+u*r*c-t*d*c-o*r*h+t*l*h)*k,e[8]=A*k,e[9]=(g*f*s-u*_*s-g*i*h+t*_*h+u*i*y-t*f*y)*k,e[10]=(o*_*s-g*a*s+g*i*c-t*_*c-o*i*y+t*a*y)*k,e[11]=(u*a*s-o*f*s-u*i*c+t*f*c+o*i*h-t*a*h)*k,e[12]=T*k,e[13]=(u*_*r-g*f*r+g*i*d-t*_*d-u*i*x+t*f*x)*k,e[14]=(g*a*r-o*_*r-g*i*l+t*_*l+o*i*x-t*a*x)*k,e[15]=(o*f*r-u*a*r+u*i*l-t*f*l-o*i*d+t*a*d)*k,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+i,u*l-r*o,0,c*l-r*a,u*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,f=a+a,d=s*c,h=s*u,g=s*f,_=o*u,x=o*f,y=a*f,M=l*c,b=l*u,A=l*f,T=i.x,P=i.y,k=i.z;return r[0]=(1-(_+y))*T,r[1]=(h+A)*T,r[2]=(g-b)*T,r[3]=0,r[4]=(h-A)*P,r[5]=(1-(d+y))*P,r[6]=(x+M)*P,r[7]=0,r[8]=(g+b)*k,r[9]=(x-M)*k,r[10]=(1-(d+_))*k,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Fh.set(r[0],r[1],r[2]).length();const o=Fh.set(r[4],r[5],r[6]).length(),a=Fh.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Po.copy(this);const c=1/s,u=1/o,f=1/a;return Po.elements[0]*=c,Po.elements[1]*=c,Po.elements[2]*=c,Po.elements[4]*=u,Po.elements[5]*=u,Po.elements[6]*=u,Po.elements[8]*=f,Po.elements[9]*=f,Po.elements[10]*=f,t.setFromRotationMatrix(Po),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=ha){const l=this.elements,c=2*s/(t-e),u=2*s/(i-r),f=(t+e)/(t-e),d=(i+r)/(i-r);let h,g;if(a===ha)h=-(o+s)/(o-s),g=-2*o*s/(o-s);else if(a===wp)h=-o/(o-s),g=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=u,l[9]=d,l[13]=0,l[2]=0,l[6]=0,l[10]=h,l[14]=g,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=ha){const l=this.elements,c=1/(t-e),u=1/(i-r),f=1/(o-s),d=(t+e)*c,h=(i+r)*u;let g,_;if(a===ha)g=(o+s)*f,_=-2*f;else if(a===wp)g=s*f,_=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-d,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-h,l[2]=0,l[6]=0,l[10]=_,l[14]=-g,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Fh=new ue,Po=new qt,pO=new ue(0,0,0),mO=new ue(1,1,1),Ol=new ue,og=new ue,Os=new ue,P5=new qt,R5=new zr;class qs{constructor(e=0,t=0,i=0,r=qs.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],u=r[9],f=r[2],d=r[6],h=r[10];switch(t){case"XYZ":this._y=Math.asin(bi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,h),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-bi(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,h),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(bi(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-f,h),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-bi(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(bi(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(a,h));break;case"XZY":this._z=Math.asin(-bi(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return P5.makeRotationFromQuaternion(e),this.setFromRotationMatrix(P5,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return R5.setFromEuler(this),this.setFromQuaternion(R5,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}qs.DEFAULT_ORDER="XYZ";class ku{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let gO=0;const k5=new ue,Uh=new zr,Fa=new qt,ag=new ue,Kd=new ue,vO=new ue,yO=new zr,L5=new ue(1,0,0),N5=new ue(0,1,0),I5=new ue(0,0,1),xO={type:"added"},_O={type:"removed"},Rx={type:"childadded",child:null},kx={type:"childremoved",child:null};class Rn extends hl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:gO++}),this.uuid=Ws(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Rn.DEFAULT_UP.clone();const e=new ue,t=new qs,i=new zr,r=new ue(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new qt},normalMatrix:{value:new tn}}),this.matrix=new qt,this.matrixWorld=new qt,this.matrixAutoUpdate=Rn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Rn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new ku,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Uh.setFromAxisAngle(e,t),this.quaternion.multiply(Uh),this}rotateOnWorldAxis(e,t){return Uh.setFromAxisAngle(e,t),this.quaternion.premultiply(Uh),this}rotateX(e){return this.rotateOnAxis(L5,e)}rotateY(e){return this.rotateOnAxis(N5,e)}rotateZ(e){return this.rotateOnAxis(I5,e)}translateOnAxis(e,t){return k5.copy(e).applyQuaternion(this.quaternion),this.position.add(k5.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(L5,e)}translateY(e){return this.translateOnAxis(N5,e)}translateZ(e){return this.translateOnAxis(I5,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Fa.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?ag.copy(e):ag.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Kd.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Fa.lookAt(Kd,ag,this.up):Fa.lookAt(ag,Kd,this.up),this.quaternion.setFromRotationMatrix(Fa),r&&(Fa.extractRotation(r.matrixWorld),Uh.setFromRotationMatrix(Fa),this.quaternion.premultiply(Uh.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(xO),Rx.child=e,this.dispatchEvent(Rx),Rx.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(_O),kx.child=e,this.dispatchEvent(kx),kx.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Fa.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Fa.multiply(e.parent.matrixWorld)),e.applyMatrix4(Fa),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Kd,e,vO),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Kd,yO,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++){const s=t[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++){const a=r[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),r.maxGeometryCount=this._maxGeometryCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const f=l[c];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),f=o(e.shapes),d=o(e.skeletons),h=o(e.animations),g=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),f.length>0&&(i.shapes=f),d.length>0&&(i.skeletons=d),h.length>0&&(i.animations=h),g.length>0&&(i.nodes=g)}return i.object=r,i;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Rn.DEFAULT_UP=new ue(0,1,0);Rn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Rn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ro=new ue,Ua=new ue,Lx=new ue,za=new ue,zh=new ue,Bh=new ue,D5=new ue,Nx=new ue,Ix=new ue,Dx=new ue;class Bs{constructor(e=new ue,t=new ue,i=new ue){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Ro.subVectors(e,t),r.cross(Ro);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Ro.subVectors(r,t),Ua.subVectors(i,t),Lx.subVectors(e,t);const o=Ro.dot(Ro),a=Ro.dot(Ua),l=Ro.dot(Lx),c=Ua.dot(Ua),u=Ua.dot(Lx),f=o*c-a*a;if(f===0)return s.set(0,0,0),null;const d=1/f,h=(c*l-a*u)*d,g=(o*u-a*l)*d;return s.set(1-h-g,g,h)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,za)===null?!1:za.x>=0&&za.y>=0&&za.x+za.y<=1}static getInterpolation(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,za)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,za.x),l.addScaledVector(o,za.y),l.addScaledVector(a,za.z),l)}static isFrontFacing(e,t,i,r){return Ro.subVectors(i,t),Ua.subVectors(e,t),Ro.cross(Ua).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ro.subVectors(this.c,this.b),Ua.subVectors(this.a,this.b),Ro.cross(Ua).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Bs.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Bs.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return Bs.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return Bs.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Bs.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;zh.subVectors(r,i),Bh.subVectors(s,i),Nx.subVectors(e,i);const l=zh.dot(Nx),c=Bh.dot(Nx);if(l<=0&&c<=0)return t.copy(i);Ix.subVectors(e,r);const u=zh.dot(Ix),f=Bh.dot(Ix);if(u>=0&&f<=u)return t.copy(r);const d=l*f-u*c;if(d<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(i).addScaledVector(zh,o);Dx.subVectors(e,s);const h=zh.dot(Dx),g=Bh.dot(Dx);if(g>=0&&h<=g)return t.copy(s);const _=h*c-l*g;if(_<=0&&c>=0&&g<=0)return a=c/(c-g),t.copy(i).addScaledVector(Bh,a);const x=u*g-h*f;if(x<=0&&f-u>=0&&h-g>=0)return D5.subVectors(s,r),a=(f-u)/(f-u+(h-g)),t.copy(r).addScaledVector(D5,a);const y=1/(x+_+d);return o=_*y,a=d*y,t.copy(i).addScaledVector(zh,o).addScaledVector(Bh,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const $T={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Fl={h:0,s:0,l:0},lg={h:0,s:0,l:0};function Ox(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Ct{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=so){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Gn.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=Gn.workingColorSpace){return this.r=e,this.g=t,this.b=i,Gn.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=Gn.workingColorSpace){if(e=Z_(e,1),t=bi(t,0,1),i=bi(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=Ox(o,s,e+1/3),this.g=Ox(o,s,e),this.b=Ox(o,s,e-1/3)}return Gn.toWorkingColorSpace(this,r),this}setStyle(e,t=so){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=so){const i=$T[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Lf(e.r),this.g=Lf(e.g),this.b=Lf(e.b),this}copyLinearToSRGB(e){return this.r=wx(e.r),this.g=wx(e.g),this.b=wx(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=so){return Gn.fromWorkingColorSpace(Nr.copy(this),e),Math.round(bi(Nr.r*255,0,255))*65536+Math.round(bi(Nr.g*255,0,255))*256+Math.round(bi(Nr.b*255,0,255))}getHexString(e=so){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Gn.workingColorSpace){Gn.fromWorkingColorSpace(Nr.copy(this),t);const i=Nr.r,r=Nr.g,s=Nr.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const f=o-a;switch(c=u<=.5?f/(o+a):f/(2-o-a),o){case i:l=(r-s)/f+(r<s?6:0);break;case r:l=(s-i)/f+2;break;case s:l=(i-r)/f+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=Gn.workingColorSpace){return Gn.fromWorkingColorSpace(Nr.copy(this),t),e.r=Nr.r,e.g=Nr.g,e.b=Nr.b,e}getStyle(e=so){Gn.fromWorkingColorSpace(Nr.copy(this),e);const t=Nr.r,i=Nr.g,r=Nr.b;return e!==so?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Fl),this.setHSL(Fl.h+e,Fl.s+t,Fl.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Fl),e.getHSL(lg);const i=F0(Fl.h,lg.h,t),r=F0(Fl.s,lg.s,t),s=F0(Fl.l,lg.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Nr=new Ct;Ct.NAMES=$T;let SO=0;class Hr extends hl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:SO++}),this.uuid=Ws(),this.name="",this.type="Material",this.blending=Pu,this.side=ol,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=rv,this.blendDst=sv,this.blendEquation=Xl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ct(0,0,0),this.blendAlpha=0,this.depthFunc=up,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=a3,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=du,this.stencilZFail=du,this.stencilZPass=du,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Pu&&(i.blending=this.blending),this.side!==ol&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==rv&&(i.blendSrc=this.blendSrc),this.blendDst!==sv&&(i.blendDst=this.blendDst),this.blendEquation!==Xl&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==up&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==a3&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==du&&(i.stencilFail=this.stencilFail),this.stencilZFail!==du&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==du&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class fl extends Hr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ct(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new qs,this.combine=Hp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ya=wO();function wO(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function xs(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=bi(n,-65504,65504),Ya.floatView[0]=n;const e=Ya.uint32View[0],t=e>>23&511;return Ya.baseTable[t]+((e&8388607)>>Ya.shiftTable[t])}function v0(n){const e=n>>10;return Ya.uint32View[0]=Ya.mantissaTable[Ya.offsetTable[e]+(n&1023)]+Ya.exponentTable[e],Ya.floatView[0]}const bO={toHalfFloat:xs,fromHalfFloat:v0},zi=new ue,cg=new $e;class Xn{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Sp,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=zs,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return QT("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)cg.fromBufferAttribute(this,t),cg.applyMatrix3(e),this.setXY(t,cg.x,cg.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)zi.fromBufferAttribute(this,t),zi.applyMatrix3(e),this.setXYZ(t,zi.x,zi.y,zi.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)zi.fromBufferAttribute(this,t),zi.applyMatrix4(e),this.setXYZ(t,zi.x,zi.y,zi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)zi.fromBufferAttribute(this,t),zi.applyNormalMatrix(e),this.setXYZ(t,zi.x,zi.y,zi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)zi.fromBufferAttribute(this,t),zi.transformDirection(e),this.setXYZ(t,zi.x,zi.y,zi.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=ns(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=sn(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ns(t,this.array)),t}setX(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ns(t,this.array)),t}setY(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ns(t,this.array)),t}setZ(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ns(t,this.array)),t}setW(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=sn(t,this.array),i=sn(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=sn(t,this.array),i=sn(i,this.array),r=sn(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=sn(t,this.array),i=sn(i,this.array),r=sn(r,this.array),s=sn(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Sp&&(e.usage=this.usage),e}}class MO extends Xn{constructor(e,t,i){super(new Int8Array(e),t,i)}}class EO extends Xn{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class TO extends Xn{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class AO extends Xn{constructor(e,t,i){super(new Int16Array(e),t,i)}}class J_ extends Xn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class CO extends Xn{constructor(e,t,i){super(new Int32Array(e),t,i)}}class $_ extends Xn{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class PO extends Xn{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=v0(this.array[e*this.itemSize]);return this.normalized&&(t=ns(t,this.array)),t}setX(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize]=xs(t),this}getY(e){let t=v0(this.array[e*this.itemSize+1]);return this.normalized&&(t=ns(t,this.array)),t}setY(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize+1]=xs(t),this}getZ(e){let t=v0(this.array[e*this.itemSize+2]);return this.normalized&&(t=ns(t,this.array)),t}setZ(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize+2]=xs(t),this}getW(e){let t=v0(this.array[e*this.itemSize+3]);return this.normalized&&(t=ns(t,this.array)),t}setW(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize+3]=xs(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=sn(t,this.array),i=sn(i,this.array)),this.array[e+0]=xs(t),this.array[e+1]=xs(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=sn(t,this.array),i=sn(i,this.array),r=sn(r,this.array)),this.array[e+0]=xs(t),this.array[e+1]=xs(i),this.array[e+2]=xs(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=sn(t,this.array),i=sn(i,this.array),r=sn(r,this.array),s=sn(s,this.array)),this.array[e+0]=xs(t),this.array[e+1]=xs(i),this.array[e+2]=xs(r),this.array[e+3]=xs(s),this}}class Ot extends Xn{constructor(e,t,i){super(new Float32Array(e),t,i)}}let RO=0;const ro=new qt,Fx=new Rn,Hh=new ue,Fs=new Vi,Qd=new Vi,sr=new ue;class un extends hl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:RO++}),this.uuid=Ws(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(ZT(e)?$_:J_)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new tn().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ro.makeRotationFromQuaternion(e),this.applyMatrix4(ro),this}rotateX(e){return ro.makeRotationX(e),this.applyMatrix4(ro),this}rotateY(e){return ro.makeRotationY(e),this.applyMatrix4(ro),this}rotateZ(e){return ro.makeRotationZ(e),this.applyMatrix4(ro),this}translate(e,t,i){return ro.makeTranslation(e,t,i),this.applyMatrix4(ro),this}scale(e,t,i){return ro.makeScale(e,t,i),this.applyMatrix4(ro),this}lookAt(e){return Fx.lookAt(e),Fx.updateMatrix(),this.applyMatrix4(Fx.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Hh).negate(),this.translate(Hh.x,Hh.y,Hh.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Ot(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Vi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ue(-1/0,-1/0,-1/0),new ue(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];Fs.setFromBufferAttribute(s),this.morphTargetsRelative?(sr.addVectors(this.boundingBox.min,Fs.min),this.boundingBox.expandByPoint(sr),sr.addVectors(this.boundingBox.max,Fs.max),this.boundingBox.expandByPoint(sr)):(this.boundingBox.expandByPoint(Fs.min),this.boundingBox.expandByPoint(Fs.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Qi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ue,1/0);return}if(e){const i=this.boundingSphere.center;if(Fs.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Qd.setFromBufferAttribute(a),this.morphTargetsRelative?(sr.addVectors(Fs.min,Qd.min),Fs.expandByPoint(sr),sr.addVectors(Fs.max,Qd.max),Fs.expandByPoint(sr)):(Fs.expandByPoint(Qd.min),Fs.expandByPoint(Qd.max))}Fs.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)sr.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(sr));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)sr.fromBufferAttribute(a,c),l&&(Hh.fromBufferAttribute(e,c),sr.add(Hh)),r=Math.max(r,i.distanceToSquared(sr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Xn(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let N=0;N<i.count;N++)a[N]=new ue,l[N]=new ue;const c=new ue,u=new ue,f=new ue,d=new $e,h=new $e,g=new $e,_=new ue,x=new ue;function y(N,z,R){c.fromBufferAttribute(i,N),u.fromBufferAttribute(i,z),f.fromBufferAttribute(i,R),d.fromBufferAttribute(s,N),h.fromBufferAttribute(s,z),g.fromBufferAttribute(s,R),u.sub(c),f.sub(c),h.sub(d),g.sub(d);const F=1/(h.x*g.y-g.x*h.y);isFinite(F)&&(_.copy(u).multiplyScalar(g.y).addScaledVector(f,-h.y).multiplyScalar(F),x.copy(f).multiplyScalar(h.x).addScaledVector(u,-g.x).multiplyScalar(F),a[N].add(_),a[z].add(_),a[R].add(_),l[N].add(x),l[z].add(x),l[R].add(x))}let M=this.groups;M.length===0&&(M=[{start:0,count:e.count}]);for(let N=0,z=M.length;N<z;++N){const R=M[N],F=R.start,V=R.count;for(let K=F,W=F+V;K<W;K+=3)y(e.getX(K+0),e.getX(K+1),e.getX(K+2))}const b=new ue,A=new ue,T=new ue,P=new ue;function k(N){T.fromBufferAttribute(r,N),P.copy(T);const z=a[N];b.copy(z),b.sub(T.multiplyScalar(T.dot(z))).normalize(),A.crossVectors(P,z);const F=A.dot(l[N])<0?-1:1;o.setXYZW(N,b.x,b.y,b.z,F)}for(let N=0,z=M.length;N<z;++N){const R=M[N],F=R.start,V=R.count;for(let K=F,W=F+V;K<W;K+=3)k(e.getX(K+0)),k(e.getX(K+1)),k(e.getX(K+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Xn(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let d=0,h=i.count;d<h;d++)i.setXYZ(d,0,0,0);const r=new ue,s=new ue,o=new ue,a=new ue,l=new ue,c=new ue,u=new ue,f=new ue;if(e)for(let d=0,h=e.count;d<h;d+=3){const g=e.getX(d+0),_=e.getX(d+1),x=e.getX(d+2);r.fromBufferAttribute(t,g),s.fromBufferAttribute(t,_),o.fromBufferAttribute(t,x),u.subVectors(o,s),f.subVectors(r,s),u.cross(f),a.fromBufferAttribute(i,g),l.fromBufferAttribute(i,_),c.fromBufferAttribute(i,x),a.add(u),l.add(u),c.add(u),i.setXYZ(g,a.x,a.y,a.z),i.setXYZ(_,l.x,l.y,l.z),i.setXYZ(x,c.x,c.y,c.z)}else for(let d=0,h=t.count;d<h;d+=3)r.fromBufferAttribute(t,d+0),s.fromBufferAttribute(t,d+1),o.fromBufferAttribute(t,d+2),u.subVectors(o,s),f.subVectors(r,s),u.cross(f),i.setXYZ(d+0,u.x,u.y,u.z),i.setXYZ(d+1,u.x,u.y,u.z),i.setXYZ(d+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)sr.fromBufferAttribute(e,t),sr.normalize(),e.setXYZ(t,sr.x,sr.y,sr.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,f=a.normalized,d=new c.constructor(l.length*u);let h=0,g=0;for(let _=0,x=l.length;_<x;_++){a.isInterleavedBufferAttribute?h=l[_]*a.data.stride+a.offset:h=l[_]*u;for(let y=0;y<u;y++)d[g++]=c[h++]}return new Xn(d,u,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new un,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],c=e(l,i);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,f=c.length;u<f;u++){const d=c[u],h=e(d,i);l.push(h)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let f=0,d=c.length;f<d;f++){const h=c[f];u.push(h.toJSON(e.data))}u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r){const u=r[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],f=s[c];for(let d=0,h=f.length;d<h;d++)u.push(f[d].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const f=o[c];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const O5=new qt,Kc=new Yu,ug=new Qi,F5=new ue,Vh=new ue,Gh=new ue,Wh=new ue,Ux=new ue,hg=new ue,fg=new $e,dg=new $e,pg=new $e,U5=new ue,z5=new ue,B5=new ue,mg=new ue,gg=new ue;class di extends Rn{constructor(e=new un,t=new fl){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){hg.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],f=s[l];u!==0&&(Ux.fromBufferAttribute(f,e),o?hg.addScaledVector(Ux,u):hg.addScaledVector(Ux.sub(t),u))}t.add(hg)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),ug.copy(i.boundingSphere),ug.applyMatrix4(s),Kc.copy(e.ray).recast(e.near),!(ug.containsPoint(Kc.origin)===!1&&(Kc.intersectSphere(ug,F5)===null||Kc.origin.distanceToSquared(F5)>(e.far-e.near)**2))&&(O5.copy(s).invert(),Kc.copy(e.ray).applyMatrix4(O5),!(i.boundingBox!==null&&Kc.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Kc)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,f=s.attributes.normal,d=s.groups,h=s.drawRange;if(a!==null)if(Array.isArray(o))for(let g=0,_=d.length;g<_;g++){const x=d[g],y=o[x.materialIndex],M=Math.max(x.start,h.start),b=Math.min(a.count,Math.min(x.start+x.count,h.start+h.count));for(let A=M,T=b;A<T;A+=3){const P=a.getX(A),k=a.getX(A+1),N=a.getX(A+2);r=vg(this,y,e,i,c,u,f,P,k,N),r&&(r.faceIndex=Math.floor(A/3),r.face.materialIndex=x.materialIndex,t.push(r))}}else{const g=Math.max(0,h.start),_=Math.min(a.count,h.start+h.count);for(let x=g,y=_;x<y;x+=3){const M=a.getX(x),b=a.getX(x+1),A=a.getX(x+2);r=vg(this,o,e,i,c,u,f,M,b,A),r&&(r.faceIndex=Math.floor(x/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let g=0,_=d.length;g<_;g++){const x=d[g],y=o[x.materialIndex],M=Math.max(x.start,h.start),b=Math.min(l.count,Math.min(x.start+x.count,h.start+h.count));for(let A=M,T=b;A<T;A+=3){const P=A,k=A+1,N=A+2;r=vg(this,y,e,i,c,u,f,P,k,N),r&&(r.faceIndex=Math.floor(A/3),r.face.materialIndex=x.materialIndex,t.push(r))}}else{const g=Math.max(0,h.start),_=Math.min(l.count,h.start+h.count);for(let x=g,y=_;x<y;x+=3){const M=x,b=x+1,A=x+2;r=vg(this,o,e,i,c,u,f,M,b,A),r&&(r.faceIndex=Math.floor(x/3),t.push(r))}}}}function kO(n,e,t,i,r,s,o,a){let l;if(e.side===rs?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===ol,a),l===null)return null;gg.copy(a),gg.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(gg);return c<t.near||c>t.far?null:{distance:c,point:gg.clone(),object:n}}function vg(n,e,t,i,r,s,o,a,l,c){n.getVertexPosition(a,Vh),n.getVertexPosition(l,Gh),n.getVertexPosition(c,Wh);const u=kO(n,e,t,i,Vh,Gh,Wh,mg);if(u){r&&(fg.fromBufferAttribute(r,a),dg.fromBufferAttribute(r,l),pg.fromBufferAttribute(r,c),u.uv=Bs.getInterpolation(mg,Vh,Gh,Wh,fg,dg,pg,new $e)),s&&(fg.fromBufferAttribute(s,a),dg.fromBufferAttribute(s,l),pg.fromBufferAttribute(s,c),u.uv1=Bs.getInterpolation(mg,Vh,Gh,Wh,fg,dg,pg,new $e)),o&&(U5.fromBufferAttribute(o,a),z5.fromBufferAttribute(o,l),B5.fromBufferAttribute(o,c),u.normal=Bs.getInterpolation(mg,Vh,Gh,Wh,U5,z5,B5,new ue),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const f={a,b:l,c,normal:new ue,materialIndex:0};Bs.getNormal(Vh,Gh,Wh,f.normal),u.face=f}return u}class Zu extends un{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],f=[];let d=0,h=0;g("z","y","x",-1,-1,i,t,e,o,s,0),g("z","y","x",1,-1,i,t,-e,o,s,1),g("x","z","y",1,1,e,i,t,r,o,2),g("x","z","y",1,-1,e,i,-t,r,o,3),g("x","y","z",1,-1,e,t,i,r,s,4),g("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new Ot(c,3)),this.setAttribute("normal",new Ot(u,3)),this.setAttribute("uv",new Ot(f,2));function g(_,x,y,M,b,A,T,P,k,N,z){const R=A/k,F=T/N,V=A/2,K=T/2,W=P/2,ne=k+1,re=N+1;let de=0,X=0;const $=new ue;for(let J=0;J<re;J++){const j=J*F-K;for(let se=0;se<ne;se++){const ve=se*R-V;$[_]=ve*M,$[x]=j*b,$[y]=W,c.push($.x,$.y,$.z),$[_]=0,$[x]=0,$[y]=P>0?1:-1,u.push($.x,$.y,$.z),f.push(se/k),f.push(1-J/N),de+=1}}for(let J=0;J<N;J++)for(let j=0;j<k;j++){const se=d+j+ne*J,ve=d+j+ne*(J+1),oe=d+(j+1)+ne*(J+1),he=d+(j+1)+ne*J;l.push(se,ve,he),l.push(ve,oe,he),X+=6}a.addGroup(h,X,z),h+=X,d+=de}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Zu(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function jf(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function $r(n){const e={};for(let t=0;t<n.length;t++){const i=jf(n[t]);for(const r in i)e[r]=i[r]}return e}function LO(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function eA(n){return n.getRenderTarget()===null?n.outputColorSpace:Gn.workingColorSpace}const Mp={clone:jf,merge:$r};var NO=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,IO=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class vo extends Hr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=NO,this.fragmentShader=IO,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=jf(e.uniforms),this.uniformsGroups=LO(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class Gp extends Rn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new qt,this.projectionMatrix=new qt,this.projectionMatrixInverse=new qt,this.coordinateSystem=ha}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Ul=new ue,H5=new $e,V5=new $e;class Li extends Gp{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Wf*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Ru*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Wf*2*Math.atan(Math.tan(Ru*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Ul.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Ul.x,Ul.y).multiplyScalar(-e/Ul.z),Ul.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Ul.x,Ul.y).multiplyScalar(-e/Ul.z)}getViewSize(e,t){return this.getViewBounds(e,H5,V5),t.subVectors(V5,H5)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Ru*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const jh=-90,qh=1;class tA extends Rn{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Li(jh,qh,e,t);r.layers=this.layers,this.add(r);const s=new Li(jh,qh,e,t);s.layers=this.layers,this.add(s);const o=new Li(jh,qh,e,t);o.layers=this.layers,this.add(o);const a=new Li(jh,qh,e,t);a.layers=this.layers,this.add(a);const l=new Li(jh,qh,e,t);l.layers=this.layers,this.add(l);const c=new Li(jh,qh,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===ha)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===wp)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,u]=this.children,f=e.getRenderTarget(),d=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),g=e.xr.enabled;e.xr.enabled=!1;const _=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,c),i.texture.generateMipmaps=_,e.setRenderTarget(i,5,r),e.render(t,u),e.setRenderTarget(f,d,h),e.xr.enabled=g,i.texture.needsPMREMUpdate=!0}}class Wp extends yi{constructor(e,t,i,r,s,o,a,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:al,super(e,t,i,r,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class nA extends Ho{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Wp(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:oi}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Zu(5,5,5),s=new vo({name:"CubemapFromEquirect",uniforms:jf(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:rs,blending:el});s.uniforms.tEquirect.value=t;const o=new di(r,s),a=t.minFilter;return t.minFilter===ua&&(t.minFilter=oi),new tA(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const zx=new ue,DO=new ue,OO=new tn;class qa{constructor(e=new ue(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=zx.subVectors(i,t).cross(DO.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(zx),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||OO.getNormalMatrix(e),r=this.coplanarPoint(zx).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Qc=new Qi,yg=new ue;class jp{constructor(e=new qa,t=new qa,i=new qa,r=new qa,s=new qa,o=new qa){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=ha){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],u=r[5],f=r[6],d=r[7],h=r[8],g=r[9],_=r[10],x=r[11],y=r[12],M=r[13],b=r[14],A=r[15];if(i[0].setComponents(l-s,d-c,x-h,A-y).normalize(),i[1].setComponents(l+s,d+c,x+h,A+y).normalize(),i[2].setComponents(l+o,d+u,x+g,A+M).normalize(),i[3].setComponents(l-o,d-u,x-g,A-M).normalize(),i[4].setComponents(l-a,d-f,x-_,A-b).normalize(),t===ha)i[5].setComponents(l+a,d+f,x+_,A+b).normalize();else if(t===wp)i[5].setComponents(a,f,_,b).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Qc.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Qc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Qc)}intersectsSprite(e){return Qc.center.set(0,0,0),Qc.radius=.7071067811865476,Qc.applyMatrix4(e.matrixWorld),this.intersectsSphere(Qc)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(yg.x=r.normal.x>0?e.max.x:e.min.x,yg.y=r.normal.y>0?e.max.y:e.min.y,yg.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(yg)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function iA(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function FO(n,e){const t=e.isWebGL2,i=new WeakMap;function r(c,u){const f=c.array,d=c.usage,h=f.byteLength,g=n.createBuffer();n.bindBuffer(u,g),n.bufferData(u,f,d),c.onUploadCallback();let _;if(f instanceof Float32Array)_=n.FLOAT;else if(f instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(t)_=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else _=n.UNSIGNED_SHORT;else if(f instanceof Int16Array)_=n.SHORT;else if(f instanceof Uint32Array)_=n.UNSIGNED_INT;else if(f instanceof Int32Array)_=n.INT;else if(f instanceof Int8Array)_=n.BYTE;else if(f instanceof Uint8Array)_=n.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)_=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:g,type:_,bytesPerElement:f.BYTES_PER_ELEMENT,version:c.version,size:h}}function s(c,u,f){const d=u.array,h=u._updateRange,g=u.updateRanges;if(n.bindBuffer(f,c),h.count===-1&&g.length===0&&n.bufferSubData(f,0,d),g.length!==0){for(let _=0,x=g.length;_<x;_++){const y=g[_];t?n.bufferSubData(f,y.start*d.BYTES_PER_ELEMENT,d,y.start,y.count):n.bufferSubData(f,y.start*d.BYTES_PER_ELEMENT,d.subarray(y.start,y.start+y.count))}u.clearUpdateRanges()}h.count!==-1&&(t?n.bufferSubData(f,h.offset*d.BYTES_PER_ELEMENT,d,h.offset,h.count):n.bufferSubData(f,h.offset*d.BYTES_PER_ELEMENT,d.subarray(h.offset,h.offset+h.count)),h.count=-1),u.onUploadCallback()}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=i.get(c);u&&(n.deleteBuffer(u.buffer),i.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const d=i.get(c);(!d||d.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const f=i.get(c);if(f===void 0)i.set(c,r(c,u));else if(f.version<c.version){if(f.size!==c.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");s(f.buffer,c,u),f.version=c.version}}return{get:o,remove:a,update:l}}class dl extends un{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,u=l+1,f=e/a,d=t/l,h=[],g=[],_=[],x=[];for(let y=0;y<u;y++){const M=y*d-o;for(let b=0;b<c;b++){const A=b*f-s;g.push(A,-M,0),_.push(0,0,1),x.push(b/a),x.push(1-y/l)}}for(let y=0;y<l;y++)for(let M=0;M<a;M++){const b=M+c*y,A=M+c*(y+1),T=M+1+c*(y+1),P=M+1+c*y;h.push(b,A,P),h.push(A,T,P)}this.setIndex(h),this.setAttribute("position",new Ot(g,3)),this.setAttribute("normal",new Ot(_,3)),this.setAttribute("uv",new Ot(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dl(e.width,e.height,e.widthSegments,e.heightSegments)}}var UO=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,zO=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,BO=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,HO=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,VO=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,GO=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,WO=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,jO=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,qO=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,XO=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,YO=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,ZO=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,KO=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,QO=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,JO=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,$O=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,eF=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,tF=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,nF=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,iF=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,rF=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,sF=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,oF=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,aF=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,lF=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,cF=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,uF=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,hF=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,fF=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,dF=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,pF="gl_FragColor = linearToOutputTexel( gl_FragColor );",mF=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,gF=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,vF=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,yF=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,xF=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,_F=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,SF=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,wF=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,bF=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,MF=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,EF=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,TF=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,AF=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,CF=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,PF=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,RF=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,kF=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,LF=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,NF=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,IF=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,DF=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,OF=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,FF=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,UF=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,zF=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,BF=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,HF=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,VF=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,GF=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,WF=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,jF=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,qF=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,XF=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,YF=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,ZF=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,KF=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,QF=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[MORPHTARGETS_COUNT];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,JF=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,$F=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,eU=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
	#endif
	#ifdef MORPHTARGETS_TEXTURE
		#ifndef USE_INSTANCING_MORPH
			uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		#endif
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,tU=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,nU=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,iU=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,rU=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,sU=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,oU=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,aU=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,lU=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,cU=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,uU=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,hU=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,fU=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,dU=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,pU=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,mU=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,gU=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,vU=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,yU=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,xU=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,_U=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,SU=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,wU=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,bU=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,MU=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,EU=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,TU=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,AU=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,CU=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,PU=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,RU=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,kU=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	float startCompression = 0.8 - 0.04;
	float desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min(color.r, min(color.g, color.b));
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max(color.r, max(color.g, color.b));
	if (peak < startCompression) return color;
	float d = 1. - startCompression;
	float newPeak = 1. - d * d / (peak + d - startCompression);
	color *= newPeak / peak;
	float g = 1. - 1. / (desaturation * (peak - newPeak) + 1.);
	return mix(color, vec3(1, 1, 1), g);
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,LU=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,NU=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,IU=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,DU=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,OU=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,FU=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const UU=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,zU=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,BU=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,HU=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,VU=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,GU=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,WU=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,jU=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,qU=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,XU=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,YU=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,ZU=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,KU=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,QU=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,JU=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,$U=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ez=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,tz=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,nz=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,iz=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,rz=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,sz=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,oz=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,az=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,lz=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,cz=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,uz=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,hz=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fz=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,dz=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,pz=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,mz=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,gz=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,vz=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,rn={alphahash_fragment:UO,alphahash_pars_fragment:zO,alphamap_fragment:BO,alphamap_pars_fragment:HO,alphatest_fragment:VO,alphatest_pars_fragment:GO,aomap_fragment:WO,aomap_pars_fragment:jO,batching_pars_vertex:qO,batching_vertex:XO,begin_vertex:YO,beginnormal_vertex:ZO,bsdfs:KO,iridescence_fragment:QO,bumpmap_pars_fragment:JO,clipping_planes_fragment:$O,clipping_planes_pars_fragment:eF,clipping_planes_pars_vertex:tF,clipping_planes_vertex:nF,color_fragment:iF,color_pars_fragment:rF,color_pars_vertex:sF,color_vertex:oF,common:aF,cube_uv_reflection_fragment:lF,defaultnormal_vertex:cF,displacementmap_pars_vertex:uF,displacementmap_vertex:hF,emissivemap_fragment:fF,emissivemap_pars_fragment:dF,colorspace_fragment:pF,colorspace_pars_fragment:mF,envmap_fragment:gF,envmap_common_pars_fragment:vF,envmap_pars_fragment:yF,envmap_pars_vertex:xF,envmap_physical_pars_fragment:kF,envmap_vertex:_F,fog_vertex:SF,fog_pars_vertex:wF,fog_fragment:bF,fog_pars_fragment:MF,gradientmap_pars_fragment:EF,lightmap_fragment:TF,lightmap_pars_fragment:AF,lights_lambert_fragment:CF,lights_lambert_pars_fragment:PF,lights_pars_begin:RF,lights_toon_fragment:LF,lights_toon_pars_fragment:NF,lights_phong_fragment:IF,lights_phong_pars_fragment:DF,lights_physical_fragment:OF,lights_physical_pars_fragment:FF,lights_fragment_begin:UF,lights_fragment_maps:zF,lights_fragment_end:BF,logdepthbuf_fragment:HF,logdepthbuf_pars_fragment:VF,logdepthbuf_pars_vertex:GF,logdepthbuf_vertex:WF,map_fragment:jF,map_pars_fragment:qF,map_particle_fragment:XF,map_particle_pars_fragment:YF,metalnessmap_fragment:ZF,metalnessmap_pars_fragment:KF,morphinstance_vertex:QF,morphcolor_vertex:JF,morphnormal_vertex:$F,morphtarget_pars_vertex:eU,morphtarget_vertex:tU,normal_fragment_begin:nU,normal_fragment_maps:iU,normal_pars_fragment:rU,normal_pars_vertex:sU,normal_vertex:oU,normalmap_pars_fragment:aU,clearcoat_normal_fragment_begin:lU,clearcoat_normal_fragment_maps:cU,clearcoat_pars_fragment:uU,iridescence_pars_fragment:hU,opaque_fragment:fU,packing:dU,premultiplied_alpha_fragment:pU,project_vertex:mU,dithering_fragment:gU,dithering_pars_fragment:vU,roughnessmap_fragment:yU,roughnessmap_pars_fragment:xU,shadowmap_pars_fragment:_U,shadowmap_pars_vertex:SU,shadowmap_vertex:wU,shadowmask_pars_fragment:bU,skinbase_vertex:MU,skinning_pars_vertex:EU,skinning_vertex:TU,skinnormal_vertex:AU,specularmap_fragment:CU,specularmap_pars_fragment:PU,tonemapping_fragment:RU,tonemapping_pars_fragment:kU,transmission_fragment:LU,transmission_pars_fragment:NU,uv_pars_fragment:IU,uv_pars_vertex:DU,uv_vertex:OU,worldpos_vertex:FU,background_vert:UU,background_frag:zU,backgroundCube_vert:BU,backgroundCube_frag:HU,cube_vert:VU,cube_frag:GU,depth_vert:WU,depth_frag:jU,distanceRGBA_vert:qU,distanceRGBA_frag:XU,equirect_vert:YU,equirect_frag:ZU,linedashed_vert:KU,linedashed_frag:QU,meshbasic_vert:JU,meshbasic_frag:$U,meshlambert_vert:ez,meshlambert_frag:tz,meshmatcap_vert:nz,meshmatcap_frag:iz,meshnormal_vert:rz,meshnormal_frag:sz,meshphong_vert:oz,meshphong_frag:az,meshphysical_vert:lz,meshphysical_frag:cz,meshtoon_vert:uz,meshtoon_frag:hz,points_vert:fz,points_frag:dz,shadow_vert:pz,shadow_frag:mz,sprite_vert:gz,sprite_frag:vz},bt={common:{diffuse:{value:new Ct(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new tn},alphaMap:{value:null},alphaMapTransform:{value:new tn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new tn}},envmap:{envMap:{value:null},envMapRotation:{value:new tn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new tn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new tn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new tn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new tn},normalScale:{value:new $e(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new tn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new tn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new tn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new tn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ct(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ct(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new tn},alphaTest:{value:0},uvTransform:{value:new tn}},sprite:{diffuse:{value:new Ct(16777215)},opacity:{value:1},center:{value:new $e(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new tn},alphaMap:{value:null},alphaMapTransform:{value:new tn},alphaTest:{value:0}}},Do={basic:{uniforms:$r([bt.common,bt.specularmap,bt.envmap,bt.aomap,bt.lightmap,bt.fog]),vertexShader:rn.meshbasic_vert,fragmentShader:rn.meshbasic_frag},lambert:{uniforms:$r([bt.common,bt.specularmap,bt.envmap,bt.aomap,bt.lightmap,bt.emissivemap,bt.bumpmap,bt.normalmap,bt.displacementmap,bt.fog,bt.lights,{emissive:{value:new Ct(0)}}]),vertexShader:rn.meshlambert_vert,fragmentShader:rn.meshlambert_frag},phong:{uniforms:$r([bt.common,bt.specularmap,bt.envmap,bt.aomap,bt.lightmap,bt.emissivemap,bt.bumpmap,bt.normalmap,bt.displacementmap,bt.fog,bt.lights,{emissive:{value:new Ct(0)},specular:{value:new Ct(1118481)},shininess:{value:30}}]),vertexShader:rn.meshphong_vert,fragmentShader:rn.meshphong_frag},standard:{uniforms:$r([bt.common,bt.envmap,bt.aomap,bt.lightmap,bt.emissivemap,bt.bumpmap,bt.normalmap,bt.displacementmap,bt.roughnessmap,bt.metalnessmap,bt.fog,bt.lights,{emissive:{value:new Ct(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:rn.meshphysical_vert,fragmentShader:rn.meshphysical_frag},toon:{uniforms:$r([bt.common,bt.aomap,bt.lightmap,bt.emissivemap,bt.bumpmap,bt.normalmap,bt.displacementmap,bt.gradientmap,bt.fog,bt.lights,{emissive:{value:new Ct(0)}}]),vertexShader:rn.meshtoon_vert,fragmentShader:rn.meshtoon_frag},matcap:{uniforms:$r([bt.common,bt.bumpmap,bt.normalmap,bt.displacementmap,bt.fog,{matcap:{value:null}}]),vertexShader:rn.meshmatcap_vert,fragmentShader:rn.meshmatcap_frag},points:{uniforms:$r([bt.points,bt.fog]),vertexShader:rn.points_vert,fragmentShader:rn.points_frag},dashed:{uniforms:$r([bt.common,bt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:rn.linedashed_vert,fragmentShader:rn.linedashed_frag},depth:{uniforms:$r([bt.common,bt.displacementmap]),vertexShader:rn.depth_vert,fragmentShader:rn.depth_frag},normal:{uniforms:$r([bt.common,bt.bumpmap,bt.normalmap,bt.displacementmap,{opacity:{value:1}}]),vertexShader:rn.meshnormal_vert,fragmentShader:rn.meshnormal_frag},sprite:{uniforms:$r([bt.sprite,bt.fog]),vertexShader:rn.sprite_vert,fragmentShader:rn.sprite_frag},background:{uniforms:{uvTransform:{value:new tn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:rn.background_vert,fragmentShader:rn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new tn}},vertexShader:rn.backgroundCube_vert,fragmentShader:rn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:rn.cube_vert,fragmentShader:rn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:rn.equirect_vert,fragmentShader:rn.equirect_frag},distanceRGBA:{uniforms:$r([bt.common,bt.displacementmap,{referencePosition:{value:new ue},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:rn.distanceRGBA_vert,fragmentShader:rn.distanceRGBA_frag},shadow:{uniforms:$r([bt.lights,bt.fog,{color:{value:new Ct(0)},opacity:{value:1}}]),vertexShader:rn.shadow_vert,fragmentShader:rn.shadow_frag}};Do.physical={uniforms:$r([Do.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new tn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new tn},clearcoatNormalScale:{value:new $e(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new tn},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new tn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new tn},sheen:{value:0},sheenColor:{value:new Ct(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new tn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new tn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new tn},transmissionSamplerSize:{value:new $e},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new tn},attenuationDistance:{value:0},attenuationColor:{value:new Ct(0)},specularColor:{value:new Ct(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new tn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new tn},anisotropyVector:{value:new $e},anisotropyMap:{value:null},anisotropyMapTransform:{value:new tn}}]),vertexShader:rn.meshphysical_vert,fragmentShader:rn.meshphysical_frag};const xg={r:0,b:0,g:0},Jc=new qs,yz=new qt;function xz(n,e,t,i,r,s,o){const a=new Ct(0);let l=s===!0?0:1,c,u,f=null,d=0,h=null;function g(x,y){let M=!1,b=y.isScene===!0?y.background:null;b&&b.isTexture&&(b=(y.backgroundBlurriness>0?t:e).get(b)),b===null?_(a,l):b&&b.isColor&&(_(b,1),M=!0);const A=n.xr.getEnvironmentBlendMode();A==="additive"?i.buffers.color.setClear(0,0,0,1,o):A==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||M)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),b&&(b.isCubeTexture||b.mapping===Qf)?(u===void 0&&(u=new di(new Zu(1,1,1),new vo({name:"BackgroundCubeMaterial",uniforms:jf(Do.backgroundCube.uniforms),vertexShader:Do.backgroundCube.vertexShader,fragmentShader:Do.backgroundCube.fragmentShader,side:rs,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(T,P,k){this.matrixWorld.copyPosition(k.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),Jc.copy(y.backgroundRotation),Jc.x*=-1,Jc.y*=-1,Jc.z*=-1,b.isCubeTexture&&b.isRenderTargetTexture===!1&&(Jc.y*=-1,Jc.z*=-1),u.material.uniforms.envMap.value=b,u.material.uniforms.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=y.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=y.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(yz.makeRotationFromEuler(Jc)),u.material.toneMapped=Gn.getTransfer(b.colorSpace)!==$n,(f!==b||d!==b.version||h!==n.toneMapping)&&(u.material.needsUpdate=!0,f=b,d=b.version,h=n.toneMapping),u.layers.enableAll(),x.unshift(u,u.geometry,u.material,0,0,null)):b&&b.isTexture&&(c===void 0&&(c=new di(new dl(2,2),new vo({name:"BackgroundMaterial",uniforms:jf(Do.background.uniforms),vertexShader:Do.background.vertexShader,fragmentShader:Do.background.fragmentShader,side:ol,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=b,c.material.uniforms.backgroundIntensity.value=y.backgroundIntensity,c.material.toneMapped=Gn.getTransfer(b.colorSpace)!==$n,b.matrixAutoUpdate===!0&&b.updateMatrix(),c.material.uniforms.uvTransform.value.copy(b.matrix),(f!==b||d!==b.version||h!==n.toneMapping)&&(c.material.needsUpdate=!0,f=b,d=b.version,h=n.toneMapping),c.layers.enableAll(),x.unshift(c,c.geometry,c.material,0,0,null))}function _(x,y){x.getRGB(xg,eA(n)),i.buffers.color.setClear(xg.r,xg.g,xg.b,y,o)}return{getClearColor:function(){return a},setClearColor:function(x,y=1){a.set(x),l=y,_(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(x){l=x,_(a,l)},render:g}}function _z(n,e,t,i){const r=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,a={},l=x(null);let c=l,u=!1;function f(W,ne,re,de,X){let $=!1;if(o){const J=_(de,re,ne);c!==J&&(c=J,h(c.object)),$=y(W,de,re,X),$&&M(W,de,re,X)}else{const J=ne.wireframe===!0;(c.geometry!==de.id||c.program!==re.id||c.wireframe!==J)&&(c.geometry=de.id,c.program=re.id,c.wireframe=J,$=!0)}X!==null&&t.update(X,n.ELEMENT_ARRAY_BUFFER),($||u)&&(u=!1,N(W,ne,re,de),X!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(X).buffer))}function d(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function h(W){return i.isWebGL2?n.bindVertexArray(W):s.bindVertexArrayOES(W)}function g(W){return i.isWebGL2?n.deleteVertexArray(W):s.deleteVertexArrayOES(W)}function _(W,ne,re){const de=re.wireframe===!0;let X=a[W.id];X===void 0&&(X={},a[W.id]=X);let $=X[ne.id];$===void 0&&($={},X[ne.id]=$);let J=$[de];return J===void 0&&(J=x(d()),$[de]=J),J}function x(W){const ne=[],re=[],de=[];for(let X=0;X<r;X++)ne[X]=0,re[X]=0,de[X]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:ne,enabledAttributes:re,attributeDivisors:de,object:W,attributes:{},index:null}}function y(W,ne,re,de){const X=c.attributes,$=ne.attributes;let J=0;const j=re.getAttributes();for(const se in j)if(j[se].location>=0){const oe=X[se];let he=$[se];if(he===void 0&&(se==="instanceMatrix"&&W.instanceMatrix&&(he=W.instanceMatrix),se==="instanceColor"&&W.instanceColor&&(he=W.instanceColor)),oe===void 0||oe.attribute!==he||he&&oe.data!==he.data)return!0;J++}return c.attributesNum!==J||c.index!==de}function M(W,ne,re,de){const X={},$=ne.attributes;let J=0;const j=re.getAttributes();for(const se in j)if(j[se].location>=0){let oe=$[se];oe===void 0&&(se==="instanceMatrix"&&W.instanceMatrix&&(oe=W.instanceMatrix),se==="instanceColor"&&W.instanceColor&&(oe=W.instanceColor));const he={};he.attribute=oe,oe&&oe.data&&(he.data=oe.data),X[se]=he,J++}c.attributes=X,c.attributesNum=J,c.index=de}function b(){const W=c.newAttributes;for(let ne=0,re=W.length;ne<re;ne++)W[ne]=0}function A(W){T(W,0)}function T(W,ne){const re=c.newAttributes,de=c.enabledAttributes,X=c.attributeDivisors;re[W]=1,de[W]===0&&(n.enableVertexAttribArray(W),de[W]=1),X[W]!==ne&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](W,ne),X[W]=ne)}function P(){const W=c.newAttributes,ne=c.enabledAttributes;for(let re=0,de=ne.length;re<de;re++)ne[re]!==W[re]&&(n.disableVertexAttribArray(re),ne[re]=0)}function k(W,ne,re,de,X,$,J){J===!0?n.vertexAttribIPointer(W,ne,re,X,$):n.vertexAttribPointer(W,ne,re,de,X,$)}function N(W,ne,re,de){if(i.isWebGL2===!1&&(W.isInstancedMesh||de.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;b();const X=de.attributes,$=re.getAttributes(),J=ne.defaultAttributeValues;for(const j in $){const se=$[j];if(se.location>=0){let ve=X[j];if(ve===void 0&&(j==="instanceMatrix"&&W.instanceMatrix&&(ve=W.instanceMatrix),j==="instanceColor"&&W.instanceColor&&(ve=W.instanceColor)),ve!==void 0){const oe=ve.normalized,he=ve.itemSize,ye=t.get(ve);if(ye===void 0)continue;const Me=ye.buffer,Pe=ye.type,Xe=ye.bytesPerElement,ht=i.isWebGL2===!0&&(Pe===n.INT||Pe===n.UNSIGNED_INT||ve.gpuType===U_);if(ve.isInterleavedBufferAttribute){const He=ve.data,ie=He.stride,je=ve.offset;if(He.isInstancedInterleavedBuffer){for(let ke=0;ke<se.locationSize;ke++)T(se.location+ke,He.meshPerAttribute);W.isInstancedMesh!==!0&&de._maxInstanceCount===void 0&&(de._maxInstanceCount=He.meshPerAttribute*He.count)}else for(let ke=0;ke<se.locationSize;ke++)A(se.location+ke);n.bindBuffer(n.ARRAY_BUFFER,Me);for(let ke=0;ke<se.locationSize;ke++)k(se.location+ke,he/se.locationSize,Pe,oe,ie*Xe,(je+he/se.locationSize*ke)*Xe,ht)}else{if(ve.isInstancedBufferAttribute){for(let He=0;He<se.locationSize;He++)T(se.location+He,ve.meshPerAttribute);W.isInstancedMesh!==!0&&de._maxInstanceCount===void 0&&(de._maxInstanceCount=ve.meshPerAttribute*ve.count)}else for(let He=0;He<se.locationSize;He++)A(se.location+He);n.bindBuffer(n.ARRAY_BUFFER,Me);for(let He=0;He<se.locationSize;He++)k(se.location+He,he/se.locationSize,Pe,oe,he*Xe,he/se.locationSize*He*Xe,ht)}}else if(J!==void 0){const oe=J[j];if(oe!==void 0)switch(oe.length){case 2:n.vertexAttrib2fv(se.location,oe);break;case 3:n.vertexAttrib3fv(se.location,oe);break;case 4:n.vertexAttrib4fv(se.location,oe);break;default:n.vertexAttrib1fv(se.location,oe)}}}}P()}function z(){V();for(const W in a){const ne=a[W];for(const re in ne){const de=ne[re];for(const X in de)g(de[X].object),delete de[X];delete ne[re]}delete a[W]}}function R(W){if(a[W.id]===void 0)return;const ne=a[W.id];for(const re in ne){const de=ne[re];for(const X in de)g(de[X].object),delete de[X];delete ne[re]}delete a[W.id]}function F(W){for(const ne in a){const re=a[ne];if(re[W.id]===void 0)continue;const de=re[W.id];for(const X in de)g(de[X].object),delete de[X];delete re[W.id]}}function V(){K(),u=!0,c!==l&&(c=l,h(c.object))}function K(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:f,reset:V,resetDefaultState:K,dispose:z,releaseStatesOfGeometry:R,releaseStatesOfProgram:F,initAttributes:b,enableAttribute:A,disableUnusedAttributes:P}}function Sz(n,e,t,i){const r=i.isWebGL2;let s;function o(u){s=u}function a(u,f){n.drawArrays(s,u,f),t.update(f,s,1)}function l(u,f,d){if(d===0)return;let h,g;if(r)h=n,g="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),g="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[g](s,u,f,d),t.update(f,s,d)}function c(u,f,d){if(d===0)return;const h=e.get("WEBGL_multi_draw");if(h===null)for(let g=0;g<d;g++)this.render(u[g],f[g]);else{h.multiDrawArraysWEBGL(s,u,0,f,0,d);let g=0;for(let _=0;_<d;_++)g+=f[_];t.update(g,s,1)}}this.setMode=o,this.render=a,this.renderInstances=l,this.renderMultiDraw=c}function wz(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const k=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(k.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(k){if(k==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";k="mediump"}return k==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=t.logarithmicDepthBuffer===!0,f=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),d=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=n.getParameter(n.MAX_TEXTURE_SIZE),g=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),_=n.getParameter(n.MAX_VERTEX_ATTRIBS),x=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),y=n.getParameter(n.MAX_VARYING_VECTORS),M=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),b=d>0,A=o||e.has("OES_texture_float"),T=b&&A,P=o?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:r,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:f,maxVertexTextures:d,maxTextureSize:h,maxCubemapSize:g,maxAttributes:_,maxVertexUniforms:x,maxVaryings:y,maxFragmentUniforms:M,vertexTextures:b,floatFragmentTextures:A,floatVertexTextures:T,maxSamples:P}}function bz(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new qa,a=new tn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,d){const h=f.length!==0||d||i!==0||r;return r=d,i=f.length,h},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,d){t=u(f,d,0)},this.setState=function(f,d,h){const g=f.clippingPlanes,_=f.clipIntersection,x=f.clipShadows,y=n.get(f);if(!r||g===null||g.length===0||s&&!x)s?u(null):c();else{const M=s?0:i,b=M*4;let A=y.clippingState||null;l.value=A,A=u(g,d,b,h);for(let T=0;T!==b;++T)A[T]=t[T];y.clippingState=A,this.numIntersection=_?this.numPlanes:0,this.numPlanes+=M}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(f,d,h,g){const _=f!==null?f.length:0;let x=null;if(_!==0){if(x=l.value,g!==!0||x===null){const y=h+_*4,M=d.matrixWorldInverse;a.getNormalMatrix(M),(x===null||x.length<y)&&(x=new Float32Array(y));for(let b=0,A=h;b!==_;++b,A+=4)o.copy(f[b]).applyMatrix4(M,a),o.normal.toArray(x,A),x[A+3]=o.constant}l.value=x,l.needsUpdate=!0}return e.numPlanes=_,e.numIntersection=0,x}}function Mz(n){let e=new WeakMap;function t(o,a){return a===hp?o.mapping=al:a===fp&&(o.mapping=dc),o}function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===hp||a===fp)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new nA(l.height);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class lc extends Gp{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const _f=4,G5=[.125,.215,.35,.446,.526,.582],gu=20,Bx=new lc,W5=new Ct;let Hx=null,Vx=0,Gx=0;const pu=(1+Math.sqrt(5))/2,Xh=1/pu,j5=[new ue(1,1,1),new ue(-1,1,1),new ue(1,1,-1),new ue(-1,1,-1),new ue(0,pu,Xh),new ue(0,pu,-Xh),new ue(Xh,0,pu),new ue(-Xh,0,pu),new ue(pu,Xh,0),new ue(-pu,Xh,0)];class u3{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){Hx=this._renderer.getRenderTarget(),Vx=this._renderer.getActiveCubeFace(),Gx=this._renderer.getActiveMipmapLevel(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Y5(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=X5(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Hx,Vx,Gx),e.scissorTest=!1,_g(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===al||e.mapping===dc?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Hx=this._renderer.getRenderTarget(),Vx=this._renderer.getActiveCubeFace(),Gx=this._renderer.getActiveMipmapLevel();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:oi,minFilter:oi,generateMipmaps:!1,type:Gf,format:ts,colorSpace:ul,depthBuffer:!1},r=q5(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=q5(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Ez(s)),this._blurMaterial=Tz(s,e,t)}return r}_compileMaterial(e){const t=new di(this._lodPlanes[0],e);this._renderer.compile(t,Bx)}_sceneToCubeUV(e,t,i,r){const a=new Li(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,f=u.autoClear,d=u.toneMapping;u.getClearColor(W5),u.toneMapping=ma,u.autoClear=!1;const h=new fl({name:"PMREM.Background",side:rs,depthWrite:!1,depthTest:!1}),g=new di(new Zu,h);let _=!1;const x=e.background;x?x.isColor&&(h.color.copy(x),e.background=null,_=!0):(h.color.copy(W5),_=!0);for(let y=0;y<6;y++){const M=y%3;M===0?(a.up.set(0,l[y],0),a.lookAt(c[y],0,0)):M===1?(a.up.set(0,0,l[y]),a.lookAt(0,c[y],0)):(a.up.set(0,l[y],0),a.lookAt(0,0,c[y]));const b=this._cubeSize;_g(r,M*b,y>2?b:0,b,b),u.setRenderTarget(r),_&&u.render(g,a),u.render(e,a)}g.geometry.dispose(),g.material.dispose(),u.toneMapping=d,u.autoClear=f,e.background=x}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===al||e.mapping===dc;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=Y5()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=X5());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new di(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;_g(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,Bx)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=j5[(r-1)%j5.length];this._blur(e,r-1,r,s,o)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,f=new di(this._lodPlanes[r],c),d=c.uniforms,h=this._sizeLods[i]-1,g=isFinite(s)?Math.PI/(2*h):2*Math.PI/(2*gu-1),_=s/g,x=isFinite(s)?1+Math.floor(u*_):gu;x>gu&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${gu}`);const y=[];let M=0;for(let k=0;k<gu;++k){const N=k/_,z=Math.exp(-N*N/2);y.push(z),k===0?M+=z:k<x&&(M+=2*z)}for(let k=0;k<y.length;k++)y[k]=y[k]/M;d.envMap.value=e.texture,d.samples.value=x,d.weights.value=y,d.latitudinal.value=o==="latitudinal",a&&(d.poleAxis.value=a);const{_lodMax:b}=this;d.dTheta.value=g,d.mipInt.value=b-i;const A=this._sizeLods[r],T=3*A*(r>b-_f?r-b+_f:0),P=4*(this._cubeSize-A);_g(t,T,P,3*A,2*A),l.setRenderTarget(t),l.render(f,Bx)}}function Ez(n){const e=[],t=[],i=[];let r=n;const s=n-_f+1+G5.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-_f?l=G5[o-n+_f-1]:o===0&&(l=0),i.push(l);const c=1/(a-2),u=-c,f=1+c,d=[u,u,f,u,f,f,u,u,f,f,u,f],h=6,g=6,_=3,x=2,y=1,M=new Float32Array(_*g*h),b=new Float32Array(x*g*h),A=new Float32Array(y*g*h);for(let P=0;P<h;P++){const k=P%3*2/3-1,N=P>2?0:-1,z=[k,N,0,k+2/3,N,0,k+2/3,N+1,0,k,N,0,k+2/3,N+1,0,k,N+1,0];M.set(z,_*g*P),b.set(d,x*g*P);const R=[P,P,P,P,P,P];A.set(R,y*g*P)}const T=new un;T.setAttribute("position",new Xn(M,_)),T.setAttribute("uv",new Xn(b,x)),T.setAttribute("faceIndex",new Xn(A,y)),e.push(T),r>_f&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function q5(n,e,t){const i=new Ho(n,e,t);return i.texture.mapping=Qf,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function _g(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function Tz(n,e,t){const i=new Float32Array(gu),r=new ue(0,1,0);return new vo({name:"SphericalGaussianBlur",defines:{n:gu,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:eS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:el,depthTest:!1,depthWrite:!1})}function X5(){return new vo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:eS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:el,depthTest:!1,depthWrite:!1})}function Y5(){return new vo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:eS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:el,depthTest:!1,depthWrite:!1})}function eS(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Az(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===hp||l===fp,u=l===al||l===dc;if(c||u)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let f=e.get(a);return t===null&&(t=new u3(n)),f=c?t.fromEquirectangular(a,f):t.fromCubemap(a,f),e.set(a,f),f.texture}else{if(e.has(a))return e.get(a).texture;{const f=a.image;if(c&&f&&f.height>0||u&&f&&r(f)){t===null&&(t=new u3(n));const d=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,d),a.addEventListener("dispose",s),d.texture}else return null}}}return a}function r(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function Cz(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?(t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance")):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function Pz(n,e,t,i){const r={},s=new WeakMap;function o(f){const d=f.target;d.index!==null&&e.remove(d.index);for(const g in d.attributes)e.remove(d.attributes[g]);for(const g in d.morphAttributes){const _=d.morphAttributes[g];for(let x=0,y=_.length;x<y;x++)e.remove(_[x])}d.removeEventListener("dispose",o),delete r[d.id];const h=s.get(d);h&&(e.remove(h),s.delete(d)),i.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function a(f,d){return r[d.id]===!0||(d.addEventListener("dispose",o),r[d.id]=!0,t.memory.geometries++),d}function l(f){const d=f.attributes;for(const g in d)e.update(d[g],n.ARRAY_BUFFER);const h=f.morphAttributes;for(const g in h){const _=h[g];for(let x=0,y=_.length;x<y;x++)e.update(_[x],n.ARRAY_BUFFER)}}function c(f){const d=[],h=f.index,g=f.attributes.position;let _=0;if(h!==null){const M=h.array;_=h.version;for(let b=0,A=M.length;b<A;b+=3){const T=M[b+0],P=M[b+1],k=M[b+2];d.push(T,P,P,k,k,T)}}else if(g!==void 0){const M=g.array;_=g.version;for(let b=0,A=M.length/3-1;b<A;b+=3){const T=b+0,P=b+1,k=b+2;d.push(T,P,P,k,k,T)}}else return;const x=new(ZT(d)?$_:J_)(d,1);x.version=_;const y=s.get(f);y&&e.remove(y),s.set(f,x)}function u(f){const d=s.get(f);if(d){const h=f.index;h!==null&&d.version<h.version&&c(f)}else c(f);return s.get(f)}return{get:a,update:l,getWireframeAttribute:u}}function Rz(n,e,t,i){const r=i.isWebGL2;let s;function o(h){s=h}let a,l;function c(h){a=h.type,l=h.bytesPerElement}function u(h,g){n.drawElements(s,g,a,h*l),t.update(g,s,1)}function f(h,g,_){if(_===0)return;let x,y;if(r)x=n,y="drawElementsInstanced";else if(x=e.get("ANGLE_instanced_arrays"),y="drawElementsInstancedANGLE",x===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}x[y](s,g,a,h*l,_),t.update(g,s,_)}function d(h,g,_){if(_===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let y=0;y<_;y++)this.render(h[y]/l,g[y]);else{x.multiDrawElementsWEBGL(s,g,0,a,h,0,_);let y=0;for(let M=0;M<_;M++)y+=g[M];t.update(y,s,1)}}this.setMode=o,this.setIndex=c,this.render=u,this.renderInstances=f,this.renderMultiDraw=d}function kz(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function Lz(n,e){return n[0]-e[0]}function Nz(n,e){return Math.abs(e[1])-Math.abs(n[1])}function Iz(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new gn,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,u,f){const d=c.morphTargetInfluences;if(e.isWebGL2===!0){const g=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,_=g!==void 0?g.length:0;let x=s.get(u);if(x===void 0||x.count!==_){let K=function(){F.dispose(),s.delete(u),u.removeEventListener("dispose",K)};var h=K;x!==void 0&&x.texture.dispose();const y=u.morphAttributes.position!==void 0,M=u.morphAttributes.normal!==void 0,b=u.morphAttributes.color!==void 0,A=u.morphAttributes.position||[],T=u.morphAttributes.normal||[],P=u.morphAttributes.color||[];let k=0;y===!0&&(k=1),M===!0&&(k=2),b===!0&&(k=3);let N=u.attributes.position.count*k,z=1;N>e.maxTextureSize&&(z=Math.ceil(N/e.maxTextureSize),N=e.maxTextureSize);const R=new Float32Array(N*z*4*_),F=new Ov(R,N,z,_);F.type=zs,F.needsUpdate=!0;const V=k*4;for(let W=0;W<_;W++){const ne=A[W],re=T[W],de=P[W],X=N*z*4*W;for(let $=0;$<ne.count;$++){const J=$*V;y===!0&&(o.fromBufferAttribute(ne,$),R[X+J+0]=o.x,R[X+J+1]=o.y,R[X+J+2]=o.z,R[X+J+3]=0),M===!0&&(o.fromBufferAttribute(re,$),R[X+J+4]=o.x,R[X+J+5]=o.y,R[X+J+6]=o.z,R[X+J+7]=0),b===!0&&(o.fromBufferAttribute(de,$),R[X+J+8]=o.x,R[X+J+9]=o.y,R[X+J+10]=o.z,R[X+J+11]=de.itemSize===4?o.w:1)}}x={count:_,texture:F,size:new $e(N,z)},s.set(u,x),u.addEventListener("dispose",K)}if(c.isInstancedMesh===!0&&c.morphTexture!==null)f.getUniforms().setValue(n,"morphTexture",c.morphTexture,t);else{let y=0;for(let b=0;b<d.length;b++)y+=d[b];const M=u.morphTargetsRelative?1:1-y;f.getUniforms().setValue(n,"morphTargetBaseInfluence",M),f.getUniforms().setValue(n,"morphTargetInfluences",d)}f.getUniforms().setValue(n,"morphTargetsTexture",x.texture,t),f.getUniforms().setValue(n,"morphTargetsTextureSize",x.size)}else{const g=d===void 0?0:d.length;let _=i[u.id];if(_===void 0||_.length!==g){_=[];for(let A=0;A<g;A++)_[A]=[A,0];i[u.id]=_}for(let A=0;A<g;A++){const T=_[A];T[0]=A,T[1]=d[A]}_.sort(Nz);for(let A=0;A<8;A++)A<g&&_[A][1]?(a[A][0]=_[A][0],a[A][1]=_[A][1]):(a[A][0]=Number.MAX_SAFE_INTEGER,a[A][1]=0);a.sort(Lz);const x=u.morphAttributes.position,y=u.morphAttributes.normal;let M=0;for(let A=0;A<8;A++){const T=a[A],P=T[0],k=T[1];P!==Number.MAX_SAFE_INTEGER&&k?(x&&u.getAttribute("morphTarget"+A)!==x[P]&&u.setAttribute("morphTarget"+A,x[P]),y&&u.getAttribute("morphNormal"+A)!==y[P]&&u.setAttribute("morphNormal"+A,y[P]),r[A]=k,M+=k):(x&&u.hasAttribute("morphTarget"+A)===!0&&u.deleteAttribute("morphTarget"+A),y&&u.hasAttribute("morphNormal"+A)===!0&&u.deleteAttribute("morphNormal"+A),r[A]=0)}const b=u.morphTargetsRelative?1:1-M;f.getUniforms().setValue(n,"morphTargetBaseInfluence",b),f.getUniforms().setValue(n,"morphTargetInfluences",r)}}return{update:l}}function Dz(n,e,t,i){let r=new WeakMap;function s(l){const c=i.render.frame,u=l.geometry,f=e.get(l,u);if(r.get(f)!==c&&(e.update(f),r.set(f,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const d=l.skeleton;r.get(d)!==c&&(d.update(),r.set(d,c))}return f}function o(){r=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}class tS extends yi{constructor(e,t,i,r,s,o,a,l,c,u){if(u=u!==void 0?u:ac,u!==ac&&u!==Hu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&u===ac&&(i=Qa),i===void 0&&u===Hu&&(i=oc),super(null,r,s,o,a,l,u,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Ri,this.minFilter=l!==void 0?l:Ri,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const rA=new yi,sA=new tS(1,1);sA.compareFunction=Y_;const oA=new Ov,aA=new Q_,lA=new Wp,Z5=[],K5=[],Q5=new Float32Array(16),J5=new Float32Array(9),$5=new Float32Array(4);function Jf(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=Z5[r];if(s===void 0&&(s=new Float32Array(r),Z5[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Ji(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function $i(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Fv(n,e){let t=K5[e];t===void 0&&(t=new Int32Array(e),K5[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function Oz(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Fz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ji(t,e))return;n.uniform2fv(this.addr,e),$i(t,e)}}function Uz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Ji(t,e))return;n.uniform3fv(this.addr,e),$i(t,e)}}function zz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ji(t,e))return;n.uniform4fv(this.addr,e),$i(t,e)}}function Bz(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Ji(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),$i(t,e)}else{if(Ji(t,i))return;$5.set(i),n.uniformMatrix2fv(this.addr,!1,$5),$i(t,i)}}function Hz(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Ji(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),$i(t,e)}else{if(Ji(t,i))return;J5.set(i),n.uniformMatrix3fv(this.addr,!1,J5),$i(t,i)}}function Vz(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Ji(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),$i(t,e)}else{if(Ji(t,i))return;Q5.set(i),n.uniformMatrix4fv(this.addr,!1,Q5),$i(t,i)}}function Gz(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Wz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ji(t,e))return;n.uniform2iv(this.addr,e),$i(t,e)}}function jz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ji(t,e))return;n.uniform3iv(this.addr,e),$i(t,e)}}function qz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ji(t,e))return;n.uniform4iv(this.addr,e),$i(t,e)}}function Xz(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Yz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ji(t,e))return;n.uniform2uiv(this.addr,e),$i(t,e)}}function Zz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ji(t,e))return;n.uniform3uiv(this.addr,e),$i(t,e)}}function Kz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ji(t,e))return;n.uniform4uiv(this.addr,e),$i(t,e)}}function Qz(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);const s=this.type===n.SAMPLER_2D_SHADOW?sA:rA;t.setTexture2D(e||s,r)}function Jz(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||aA,r)}function $z(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||lA,r)}function eB(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||oA,r)}function tB(n){switch(n){case 5126:return Oz;case 35664:return Fz;case 35665:return Uz;case 35666:return zz;case 35674:return Bz;case 35675:return Hz;case 35676:return Vz;case 5124:case 35670:return Gz;case 35667:case 35671:return Wz;case 35668:case 35672:return jz;case 35669:case 35673:return qz;case 5125:return Xz;case 36294:return Yz;case 36295:return Zz;case 36296:return Kz;case 35678:case 36198:case 36298:case 36306:case 35682:return Qz;case 35679:case 36299:case 36307:return Jz;case 35680:case 36300:case 36308:case 36293:return $z;case 36289:case 36303:case 36311:case 36292:return eB}}function nB(n,e){n.uniform1fv(this.addr,e)}function iB(n,e){const t=Jf(e,this.size,2);n.uniform2fv(this.addr,t)}function rB(n,e){const t=Jf(e,this.size,3);n.uniform3fv(this.addr,t)}function sB(n,e){const t=Jf(e,this.size,4);n.uniform4fv(this.addr,t)}function oB(n,e){const t=Jf(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function aB(n,e){const t=Jf(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function lB(n,e){const t=Jf(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function cB(n,e){n.uniform1iv(this.addr,e)}function uB(n,e){n.uniform2iv(this.addr,e)}function hB(n,e){n.uniform3iv(this.addr,e)}function fB(n,e){n.uniform4iv(this.addr,e)}function dB(n,e){n.uniform1uiv(this.addr,e)}function pB(n,e){n.uniform2uiv(this.addr,e)}function mB(n,e){n.uniform3uiv(this.addr,e)}function gB(n,e){n.uniform4uiv(this.addr,e)}function vB(n,e,t){const i=this.cache,r=e.length,s=Fv(t,r);Ji(i,s)||(n.uniform1iv(this.addr,s),$i(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||rA,s[o])}function yB(n,e,t){const i=this.cache,r=e.length,s=Fv(t,r);Ji(i,s)||(n.uniform1iv(this.addr,s),$i(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||aA,s[o])}function xB(n,e,t){const i=this.cache,r=e.length,s=Fv(t,r);Ji(i,s)||(n.uniform1iv(this.addr,s),$i(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||lA,s[o])}function _B(n,e,t){const i=this.cache,r=e.length,s=Fv(t,r);Ji(i,s)||(n.uniform1iv(this.addr,s),$i(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||oA,s[o])}function SB(n){switch(n){case 5126:return nB;case 35664:return iB;case 35665:return rB;case 35666:return sB;case 35674:return oB;case 35675:return aB;case 35676:return lB;case 5124:case 35670:return cB;case 35667:case 35671:return uB;case 35668:case 35672:return hB;case 35669:case 35673:return fB;case 5125:return dB;case 36294:return pB;case 36295:return mB;case 36296:return gB;case 35678:case 36198:case 36298:case 36306:case 35682:return vB;case 35679:case 36299:case 36307:return yB;case 35680:case 36300:case 36308:case 36293:return xB;case 36289:case 36303:case 36311:case 36292:return _B}}class wB{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=tB(t.type)}}class bB{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=SB(t.type)}}class MB{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const Wx=/(\w+)(\])?(\[|\.)?/g;function eM(n,e){n.seq.push(e),n.map[e.id]=e}function EB(n,e,t){const i=n.name,r=i.length;for(Wx.lastIndex=0;;){const s=Wx.exec(i),o=Wx.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){eM(t,c===void 0?new wB(a,n,e):new bB(a,n,e));break}else{let f=t.map[a];f===void 0&&(f=new MB(a),eM(t,f)),t=f}}}class w1{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);EB(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function tM(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const TB=37297;let AB=0;function CB(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}function PB(n){const e=Gn.getPrimaries(Gn.workingColorSpace),t=Gn.getPrimaries(n);let i;switch(e===t?i="":e===_p&&t===xp?i="LinearDisplayP3ToLinearSRGB":e===xp&&t===_p&&(i="LinearSRGBToLinearDisplayP3"),n){case ul:case Vp:return[i,"LinearTransferOETF"];case so:case Dv:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[i,"LinearTransferOETF"]}}function nM(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+CB(n.getShaderSource(e),o)}else return r}function RB(n,e){const t=PB(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function kB(n,e){let t;switch(e){case wT:t="Linear";break;case bT:t="Reinhard";break;case MT:t="OptimizedCineon";break;case F_:t="ACESFilmic";break;case TT:t="AgX";break;case AT:t="Neutral";break;case ET:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function LB(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.alphaToCoverage||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Sf).join(`
`)}function NB(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Sf).join(`
`)}function IB(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function DB(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function Sf(n){return n!==""}function iM(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function rM(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const OB=/^[ \t]*#include +<([\w\d./]+)>/gm;function h3(n){return n.replace(OB,UB)}const FB=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function UB(n,e){let t=rn[e];if(t===void 0){const i=FB.get(e);if(i!==void 0)t=rn[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return h3(t)}const zB=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function sM(n){return n.replace(zB,BB)}function BB(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function oM(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	`;return n.isWebGL2&&(e+=`precision ${n.precision} sampler3D;
		precision ${n.precision} sampler2DArray;
		precision ${n.precision} sampler2DShadow;
		precision ${n.precision} samplerCubeShadow;
		precision ${n.precision} sampler2DArrayShadow;
		precision ${n.precision} isampler2D;
		precision ${n.precision} isampler3D;
		precision ${n.precision} isamplerCube;
		precision ${n.precision} isampler2DArray;
		precision ${n.precision} usampler2D;
		precision ${n.precision} usampler3D;
		precision ${n.precision} usamplerCube;
		precision ${n.precision} usampler2DArray;
		`),n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function HB(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===kv?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===D0?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Lo&&(e="SHADOWMAP_TYPE_VSM"),e}function VB(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case al:case dc:e="ENVMAP_TYPE_CUBE";break;case Qf:e="ENVMAP_TYPE_CUBE_UV";break}return e}function GB(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case dc:e="ENVMAP_MODE_REFRACTION";break}return e}function WB(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Hp:e="ENVMAP_BLENDING_MULTIPLY";break;case _T:e="ENVMAP_BLENDING_MIX";break;case ST:e="ENVMAP_BLENDING_ADD";break}return e}function jB(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function qB(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=HB(t),c=VB(t),u=GB(t),f=WB(t),d=jB(t),h=t.isWebGL2?"":LB(t),g=NB(t),_=IB(s),x=r.createProgram();let y,M,b=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(y=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(Sf).join(`
`),y.length>0&&(y+=`
`),M=[h,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(Sf).join(`
`),M.length>0&&(M+=`
`)):(y=[oM(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Sf).join(`
`),M=[h,oM(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+f:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==ma?"#define TONE_MAPPING":"",t.toneMapping!==ma?rn.tonemapping_pars_fragment:"",t.toneMapping!==ma?kB("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",rn.colorspace_pars_fragment,RB("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Sf).join(`
`)),o=h3(o),o=iM(o,t),o=rM(o,t),a=h3(a),a=iM(a,t),a=rM(a,t),o=sM(o),a=sM(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(b=`#version 300 es
`,y=[g,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+y,M=["precision mediump sampler2DArray;","#define varying in",t.glslVersion===l3?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===l3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+M);const A=b+y+o,T=b+M+a,P=tM(r,r.VERTEX_SHADER,A),k=tM(r,r.FRAGMENT_SHADER,T);r.attachShader(x,P),r.attachShader(x,k),t.index0AttributeName!==void 0?r.bindAttribLocation(x,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(x,0,"position"),r.linkProgram(x);function N(V){if(n.debug.checkShaderErrors){const K=r.getProgramInfoLog(x).trim(),W=r.getShaderInfoLog(P).trim(),ne=r.getShaderInfoLog(k).trim();let re=!0,de=!0;if(r.getProgramParameter(x,r.LINK_STATUS)===!1)if(re=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,x,P,k);else{const X=nM(r,P,"vertex"),$=nM(r,k,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(x,r.VALIDATE_STATUS)+`

Material Name: `+V.name+`
Material Type: `+V.type+`

Program Info Log: `+K+`
`+X+`
`+$)}else K!==""?console.warn("THREE.WebGLProgram: Program Info Log:",K):(W===""||ne==="")&&(de=!1);de&&(V.diagnostics={runnable:re,programLog:K,vertexShader:{log:W,prefix:y},fragmentShader:{log:ne,prefix:M}})}r.deleteShader(P),r.deleteShader(k),z=new w1(r,x),R=DB(r,x)}let z;this.getUniforms=function(){return z===void 0&&N(this),z};let R;this.getAttributes=function(){return R===void 0&&N(this),R};let F=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return F===!1&&(F=r.getProgramParameter(x,TB)),F},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(x),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=AB++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=P,this.fragmentShader=k,this}let XB=0;class YB{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new ZB(e),t.set(e,i)),i}}class ZB{constructor(e){this.id=XB++,this.code=e,this.usedTimes=0}}function KB(n,e,t,i,r,s,o){const a=new ku,l=new YB,c=new Set,u=[],f=r.isWebGL2,d=r.logarithmicDepthBuffer,h=r.vertexTextures;let g=r.precision;const _={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(R){return c.add(R),R===0?"uv":`uv${R}`}function y(R,F,V,K,W){const ne=K.fog,re=W.geometry,de=R.isMeshStandardMaterial?K.environment:null,X=(R.isMeshStandardMaterial?t:e).get(R.envMap||de),$=X&&X.mapping===Qf?X.image.height:null,J=_[R.type];R.precision!==null&&(g=r.getMaxPrecision(R.precision),g!==R.precision&&console.warn("THREE.WebGLProgram.getParameters:",R.precision,"not supported, using",g,"instead."));const j=re.morphAttributes.position||re.morphAttributes.normal||re.morphAttributes.color,se=j!==void 0?j.length:0;let ve=0;re.morphAttributes.position!==void 0&&(ve=1),re.morphAttributes.normal!==void 0&&(ve=2),re.morphAttributes.color!==void 0&&(ve=3);let oe,he,ye,Me;if(J){const _t=Do[J];oe=_t.vertexShader,he=_t.fragmentShader}else oe=R.vertexShader,he=R.fragmentShader,l.update(R),ye=l.getVertexShaderID(R),Me=l.getFragmentShaderID(R);const Pe=n.getRenderTarget(),Xe=W.isInstancedMesh===!0,ht=W.isBatchedMesh===!0,He=!!R.map,ie=!!R.matcap,je=!!X,ke=!!R.aoMap,We=!!R.lightMap,Fe=!!R.bumpMap,it=!!R.normalMap,Ue=!!R.displacementMap,Ye=!!R.emissiveMap,ot=!!R.metalnessMap,Q=!!R.roughnessMap,Z=R.anisotropy>0,we=R.clearcoat>0,Ee=R.iridescence>0,Ne=R.sheen>0,Ze=R.transmission>0,lt=Z&&!!R.anisotropyMap,ft=we&&!!R.clearcoatMap,qe=we&&!!R.clearcoatNormalMap,st=we&&!!R.clearcoatRoughnessMap,St=Ee&&!!R.iridescenceMap,nt=Ee&&!!R.iridescenceThicknessMap,Lt=Ne&&!!R.sheenColorMap,ct=Ne&&!!R.sheenRoughnessMap,be=!!R.specularMap,fe=!!R.specularColorMap,De=!!R.specularIntensityMap,mt=Ze&&!!R.transmissionMap,pt=Ze&&!!R.thicknessMap,vt=!!R.gradientMap,xe=!!R.alphaMap,gt=R.alphaTest>0,Re=!!R.alphaHash,et=!!R.extensions;let rt=ma;R.toneMapped&&(Pe===null||Pe.isXRRenderTarget===!0)&&(rt=n.toneMapping);const wt={isWebGL2:f,shaderID:J,shaderType:R.type,shaderName:R.name,vertexShader:oe,fragmentShader:he,defines:R.defines,customVertexShaderID:ye,customFragmentShaderID:Me,isRawShaderMaterial:R.isRawShaderMaterial===!0,glslVersion:R.glslVersion,precision:g,batching:ht,instancing:Xe,instancingColor:Xe&&W.instanceColor!==null,instancingMorph:Xe&&W.morphTexture!==null,supportsVertexTextures:h,outputColorSpace:Pe===null?n.outputColorSpace:Pe.isXRRenderTarget===!0?Pe.texture.colorSpace:ul,alphaToCoverage:!!R.alphaToCoverage,map:He,matcap:ie,envMap:je,envMapMode:je&&X.mapping,envMapCubeUVHeight:$,aoMap:ke,lightMap:We,bumpMap:Fe,normalMap:it,displacementMap:h&&Ue,emissiveMap:Ye,normalMapObjectSpace:it&&R.normalMapType===BT,normalMapTangentSpace:it&&R.normalMapType===yc,metalnessMap:ot,roughnessMap:Q,anisotropy:Z,anisotropyMap:lt,clearcoat:we,clearcoatMap:ft,clearcoatNormalMap:qe,clearcoatRoughnessMap:st,iridescence:Ee,iridescenceMap:St,iridescenceThicknessMap:nt,sheen:Ne,sheenColorMap:Lt,sheenRoughnessMap:ct,specularMap:be,specularColorMap:fe,specularIntensityMap:De,transmission:Ze,transmissionMap:mt,thicknessMap:pt,gradientMap:vt,opaque:R.transparent===!1&&R.blending===Pu&&R.alphaToCoverage===!1,alphaMap:xe,alphaTest:gt,alphaHash:Re,combine:R.combine,mapUv:He&&x(R.map.channel),aoMapUv:ke&&x(R.aoMap.channel),lightMapUv:We&&x(R.lightMap.channel),bumpMapUv:Fe&&x(R.bumpMap.channel),normalMapUv:it&&x(R.normalMap.channel),displacementMapUv:Ue&&x(R.displacementMap.channel),emissiveMapUv:Ye&&x(R.emissiveMap.channel),metalnessMapUv:ot&&x(R.metalnessMap.channel),roughnessMapUv:Q&&x(R.roughnessMap.channel),anisotropyMapUv:lt&&x(R.anisotropyMap.channel),clearcoatMapUv:ft&&x(R.clearcoatMap.channel),clearcoatNormalMapUv:qe&&x(R.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:st&&x(R.clearcoatRoughnessMap.channel),iridescenceMapUv:St&&x(R.iridescenceMap.channel),iridescenceThicknessMapUv:nt&&x(R.iridescenceThicknessMap.channel),sheenColorMapUv:Lt&&x(R.sheenColorMap.channel),sheenRoughnessMapUv:ct&&x(R.sheenRoughnessMap.channel),specularMapUv:be&&x(R.specularMap.channel),specularColorMapUv:fe&&x(R.specularColorMap.channel),specularIntensityMapUv:De&&x(R.specularIntensityMap.channel),transmissionMapUv:mt&&x(R.transmissionMap.channel),thicknessMapUv:pt&&x(R.thicknessMap.channel),alphaMapUv:xe&&x(R.alphaMap.channel),vertexTangents:!!re.attributes.tangent&&(it||Z),vertexColors:R.vertexColors,vertexAlphas:R.vertexColors===!0&&!!re.attributes.color&&re.attributes.color.itemSize===4,pointsUvs:W.isPoints===!0&&!!re.attributes.uv&&(He||xe),fog:!!ne,useFog:R.fog===!0,fogExp2:!!ne&&ne.isFogExp2,flatShading:R.flatShading===!0,sizeAttenuation:R.sizeAttenuation===!0,logarithmicDepthBuffer:d,skinning:W.isSkinnedMesh===!0,morphTargets:re.morphAttributes.position!==void 0,morphNormals:re.morphAttributes.normal!==void 0,morphColors:re.morphAttributes.color!==void 0,morphTargetsCount:se,morphTextureStride:ve,numDirLights:F.directional.length,numPointLights:F.point.length,numSpotLights:F.spot.length,numSpotLightMaps:F.spotLightMap.length,numRectAreaLights:F.rectArea.length,numHemiLights:F.hemi.length,numDirLightShadows:F.directionalShadowMap.length,numPointLightShadows:F.pointShadowMap.length,numSpotLightShadows:F.spotShadowMap.length,numSpotLightShadowsWithMaps:F.numSpotLightShadowsWithMaps,numLightProbes:F.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:R.dithering,shadowMapEnabled:n.shadowMap.enabled&&V.length>0,shadowMapType:n.shadowMap.type,toneMapping:rt,useLegacyLights:n._useLegacyLights,decodeVideoTexture:He&&R.map.isVideoTexture===!0&&Gn.getTransfer(R.map.colorSpace)===$n,premultipliedAlpha:R.premultipliedAlpha,doubleSided:R.side===Oo,flipSided:R.side===rs,useDepthPacking:R.depthPacking>=0,depthPacking:R.depthPacking||0,index0AttributeName:R.index0AttributeName,extensionDerivatives:et&&R.extensions.derivatives===!0,extensionFragDepth:et&&R.extensions.fragDepth===!0,extensionDrawBuffers:et&&R.extensions.drawBuffers===!0,extensionShaderTextureLOD:et&&R.extensions.shaderTextureLOD===!0,extensionClipCullDistance:et&&R.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:et&&R.extensions.multiDraw===!0&&i.has("WEBGL_multi_draw"),rendererExtensionFragDepth:f||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:f||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:f||i.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:R.customProgramCacheKey()};return wt.vertexUv1s=c.has(1),wt.vertexUv2s=c.has(2),wt.vertexUv3s=c.has(3),c.clear(),wt}function M(R){const F=[];if(R.shaderID?F.push(R.shaderID):(F.push(R.customVertexShaderID),F.push(R.customFragmentShaderID)),R.defines!==void 0)for(const V in R.defines)F.push(V),F.push(R.defines[V]);return R.isRawShaderMaterial===!1&&(b(F,R),A(F,R),F.push(n.outputColorSpace)),F.push(R.customProgramCacheKey),F.join()}function b(R,F){R.push(F.precision),R.push(F.outputColorSpace),R.push(F.envMapMode),R.push(F.envMapCubeUVHeight),R.push(F.mapUv),R.push(F.alphaMapUv),R.push(F.lightMapUv),R.push(F.aoMapUv),R.push(F.bumpMapUv),R.push(F.normalMapUv),R.push(F.displacementMapUv),R.push(F.emissiveMapUv),R.push(F.metalnessMapUv),R.push(F.roughnessMapUv),R.push(F.anisotropyMapUv),R.push(F.clearcoatMapUv),R.push(F.clearcoatNormalMapUv),R.push(F.clearcoatRoughnessMapUv),R.push(F.iridescenceMapUv),R.push(F.iridescenceThicknessMapUv),R.push(F.sheenColorMapUv),R.push(F.sheenRoughnessMapUv),R.push(F.specularMapUv),R.push(F.specularColorMapUv),R.push(F.specularIntensityMapUv),R.push(F.transmissionMapUv),R.push(F.thicknessMapUv),R.push(F.combine),R.push(F.fogExp2),R.push(F.sizeAttenuation),R.push(F.morphTargetsCount),R.push(F.morphAttributeCount),R.push(F.numDirLights),R.push(F.numPointLights),R.push(F.numSpotLights),R.push(F.numSpotLightMaps),R.push(F.numHemiLights),R.push(F.numRectAreaLights),R.push(F.numDirLightShadows),R.push(F.numPointLightShadows),R.push(F.numSpotLightShadows),R.push(F.numSpotLightShadowsWithMaps),R.push(F.numLightProbes),R.push(F.shadowMapType),R.push(F.toneMapping),R.push(F.numClippingPlanes),R.push(F.numClipIntersection),R.push(F.depthPacking)}function A(R,F){a.disableAll(),F.isWebGL2&&a.enable(0),F.supportsVertexTextures&&a.enable(1),F.instancing&&a.enable(2),F.instancingColor&&a.enable(3),F.instancingMorph&&a.enable(4),F.matcap&&a.enable(5),F.envMap&&a.enable(6),F.normalMapObjectSpace&&a.enable(7),F.normalMapTangentSpace&&a.enable(8),F.clearcoat&&a.enable(9),F.iridescence&&a.enable(10),F.alphaTest&&a.enable(11),F.vertexColors&&a.enable(12),F.vertexAlphas&&a.enable(13),F.vertexUv1s&&a.enable(14),F.vertexUv2s&&a.enable(15),F.vertexUv3s&&a.enable(16),F.vertexTangents&&a.enable(17),F.anisotropy&&a.enable(18),F.alphaHash&&a.enable(19),F.batching&&a.enable(20),R.push(a.mask),a.disableAll(),F.fog&&a.enable(0),F.useFog&&a.enable(1),F.flatShading&&a.enable(2),F.logarithmicDepthBuffer&&a.enable(3),F.skinning&&a.enable(4),F.morphTargets&&a.enable(5),F.morphNormals&&a.enable(6),F.morphColors&&a.enable(7),F.premultipliedAlpha&&a.enable(8),F.shadowMapEnabled&&a.enable(9),F.useLegacyLights&&a.enable(10),F.doubleSided&&a.enable(11),F.flipSided&&a.enable(12),F.useDepthPacking&&a.enable(13),F.dithering&&a.enable(14),F.transmission&&a.enable(15),F.sheen&&a.enable(16),F.opaque&&a.enable(17),F.pointsUvs&&a.enable(18),F.decodeVideoTexture&&a.enable(19),F.alphaToCoverage&&a.enable(20),R.push(a.mask)}function T(R){const F=_[R.type];let V;if(F){const K=Do[F];V=Mp.clone(K.uniforms)}else V=R.uniforms;return V}function P(R,F){let V;for(let K=0,W=u.length;K<W;K++){const ne=u[K];if(ne.cacheKey===F){V=ne,++V.usedTimes;break}}return V===void 0&&(V=new qB(n,F,R,s),u.push(V)),V}function k(R){if(--R.usedTimes===0){const F=u.indexOf(R);u[F]=u[u.length-1],u.pop(),R.destroy()}}function N(R){l.remove(R)}function z(){l.dispose()}return{getParameters:y,getProgramCacheKey:M,getUniforms:T,acquireProgram:P,releaseProgram:k,releaseShaderCache:N,programs:u,dispose:z}}function QB(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function i(s,o,a){n.get(s)[o]=a}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function JB(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function aM(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function lM(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(f,d,h,g,_,x){let y=n[e];return y===void 0?(y={id:f.id,object:f,geometry:d,material:h,groupOrder:g,renderOrder:f.renderOrder,z:_,group:x},n[e]=y):(y.id=f.id,y.object=f,y.geometry=d,y.material=h,y.groupOrder=g,y.renderOrder=f.renderOrder,y.z=_,y.group=x),e++,y}function a(f,d,h,g,_,x){const y=o(f,d,h,g,_,x);h.transmission>0?i.push(y):h.transparent===!0?r.push(y):t.push(y)}function l(f,d,h,g,_,x){const y=o(f,d,h,g,_,x);h.transmission>0?i.unshift(y):h.transparent===!0?r.unshift(y):t.unshift(y)}function c(f,d){t.length>1&&t.sort(f||JB),i.length>1&&i.sort(d||aM),r.length>1&&r.sort(d||aM)}function u(){for(let f=e,d=n.length;f<d;f++){const h=n[f];if(h.id===null)break;h.id=null,h.object=null,h.geometry=null,h.material=null,h.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:u,sort:c}}function $B(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new lM,n.set(i,[o])):r>=s.length?(o=new lM,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function eH(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ue,color:new Ct};break;case"SpotLight":t={position:new ue,direction:new ue,color:new Ct,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ue,color:new Ct,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ue,skyColor:new Ct,groundColor:new Ct};break;case"RectAreaLight":t={color:new Ct,position:new ue,halfWidth:new ue,halfHeight:new ue};break}return n[e.id]=t,t}}}function tH(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new $e};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new $e};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new $e,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let nH=0;function iH(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function rH(n,e){const t=new eH,i=tH(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)r.probe.push(new ue);const s=new ue,o=new qt,a=new qt;function l(u,f){let d=0,h=0,g=0;for(let V=0;V<9;V++)r.probe[V].set(0,0,0);let _=0,x=0,y=0,M=0,b=0,A=0,T=0,P=0,k=0,N=0,z=0;u.sort(iH);const R=f===!0?Math.PI:1;for(let V=0,K=u.length;V<K;V++){const W=u[V],ne=W.color,re=W.intensity,de=W.distance,X=W.shadow&&W.shadow.map?W.shadow.map.texture:null;if(W.isAmbientLight)d+=ne.r*re*R,h+=ne.g*re*R,g+=ne.b*re*R;else if(W.isLightProbe){for(let $=0;$<9;$++)r.probe[$].addScaledVector(W.sh.coefficients[$],re);z++}else if(W.isDirectionalLight){const $=t.get(W);if($.color.copy(W.color).multiplyScalar(W.intensity*R),W.castShadow){const J=W.shadow,j=i.get(W);j.shadowBias=J.bias,j.shadowNormalBias=J.normalBias,j.shadowRadius=J.radius,j.shadowMapSize=J.mapSize,r.directionalShadow[_]=j,r.directionalShadowMap[_]=X,r.directionalShadowMatrix[_]=W.shadow.matrix,A++}r.directional[_]=$,_++}else if(W.isSpotLight){const $=t.get(W);$.position.setFromMatrixPosition(W.matrixWorld),$.color.copy(ne).multiplyScalar(re*R),$.distance=de,$.coneCos=Math.cos(W.angle),$.penumbraCos=Math.cos(W.angle*(1-W.penumbra)),$.decay=W.decay,r.spot[y]=$;const J=W.shadow;if(W.map&&(r.spotLightMap[k]=W.map,k++,J.updateMatrices(W),W.castShadow&&N++),r.spotLightMatrix[y]=J.matrix,W.castShadow){const j=i.get(W);j.shadowBias=J.bias,j.shadowNormalBias=J.normalBias,j.shadowRadius=J.radius,j.shadowMapSize=J.mapSize,r.spotShadow[y]=j,r.spotShadowMap[y]=X,P++}y++}else if(W.isRectAreaLight){const $=t.get(W);$.color.copy(ne).multiplyScalar(re),$.halfWidth.set(W.width*.5,0,0),$.halfHeight.set(0,W.height*.5,0),r.rectArea[M]=$,M++}else if(W.isPointLight){const $=t.get(W);if($.color.copy(W.color).multiplyScalar(W.intensity*R),$.distance=W.distance,$.decay=W.decay,W.castShadow){const J=W.shadow,j=i.get(W);j.shadowBias=J.bias,j.shadowNormalBias=J.normalBias,j.shadowRadius=J.radius,j.shadowMapSize=J.mapSize,j.shadowCameraNear=J.camera.near,j.shadowCameraFar=J.camera.far,r.pointShadow[x]=j,r.pointShadowMap[x]=X,r.pointShadowMatrix[x]=W.shadow.matrix,T++}r.point[x]=$,x++}else if(W.isHemisphereLight){const $=t.get(W);$.skyColor.copy(W.color).multiplyScalar(re*R),$.groundColor.copy(W.groundColor).multiplyScalar(re*R),r.hemi[b]=$,b++}}M>0&&(e.isWebGL2?n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=bt.LTC_FLOAT_1,r.rectAreaLTC2=bt.LTC_FLOAT_2):(r.rectAreaLTC1=bt.LTC_HALF_1,r.rectAreaLTC2=bt.LTC_HALF_2):n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=bt.LTC_FLOAT_1,r.rectAreaLTC2=bt.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=bt.LTC_HALF_1,r.rectAreaLTC2=bt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=d,r.ambient[1]=h,r.ambient[2]=g;const F=r.hash;(F.directionalLength!==_||F.pointLength!==x||F.spotLength!==y||F.rectAreaLength!==M||F.hemiLength!==b||F.numDirectionalShadows!==A||F.numPointShadows!==T||F.numSpotShadows!==P||F.numSpotMaps!==k||F.numLightProbes!==z)&&(r.directional.length=_,r.spot.length=y,r.rectArea.length=M,r.point.length=x,r.hemi.length=b,r.directionalShadow.length=A,r.directionalShadowMap.length=A,r.pointShadow.length=T,r.pointShadowMap.length=T,r.spotShadow.length=P,r.spotShadowMap.length=P,r.directionalShadowMatrix.length=A,r.pointShadowMatrix.length=T,r.spotLightMatrix.length=P+k-N,r.spotLightMap.length=k,r.numSpotLightShadowsWithMaps=N,r.numLightProbes=z,F.directionalLength=_,F.pointLength=x,F.spotLength=y,F.rectAreaLength=M,F.hemiLength=b,F.numDirectionalShadows=A,F.numPointShadows=T,F.numSpotShadows=P,F.numSpotMaps=k,F.numLightProbes=z,r.version=nH++)}function c(u,f){let d=0,h=0,g=0,_=0,x=0;const y=f.matrixWorldInverse;for(let M=0,b=u.length;M<b;M++){const A=u[M];if(A.isDirectionalLight){const T=r.directional[d];T.direction.setFromMatrixPosition(A.matrixWorld),s.setFromMatrixPosition(A.target.matrixWorld),T.direction.sub(s),T.direction.transformDirection(y),d++}else if(A.isSpotLight){const T=r.spot[g];T.position.setFromMatrixPosition(A.matrixWorld),T.position.applyMatrix4(y),T.direction.setFromMatrixPosition(A.matrixWorld),s.setFromMatrixPosition(A.target.matrixWorld),T.direction.sub(s),T.direction.transformDirection(y),g++}else if(A.isRectAreaLight){const T=r.rectArea[_];T.position.setFromMatrixPosition(A.matrixWorld),T.position.applyMatrix4(y),a.identity(),o.copy(A.matrixWorld),o.premultiply(y),a.extractRotation(o),T.halfWidth.set(A.width*.5,0,0),T.halfHeight.set(0,A.height*.5,0),T.halfWidth.applyMatrix4(a),T.halfHeight.applyMatrix4(a),_++}else if(A.isPointLight){const T=r.point[h];T.position.setFromMatrixPosition(A.matrixWorld),T.position.applyMatrix4(y),h++}else if(A.isHemisphereLight){const T=r.hemi[x];T.direction.setFromMatrixPosition(A.matrixWorld),T.direction.transformDirection(y),x++}}}return{setup:l,setupView:c,state:r}}function cM(n,e){const t=new rH(n,e),i=[],r=[];function s(){i.length=0,r.length=0}function o(f){i.push(f)}function a(f){r.push(f)}function l(f){t.setup(i,f)}function c(f){t.setupView(i,f)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function sH(n,e){let t=new WeakMap;function i(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new cM(n,e),t.set(s,[l])):o>=a.length?(l=new cM(n,e),a.push(l)):l=a[o],l}function r(){t=new WeakMap}return{get:i,dispose:r}}class Uv extends Hr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=zT,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class zv extends Hr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const oH=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,aH=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function lH(n,e,t){let i=new jp;const r=new $e,s=new $e,o=new gn,a=new Uv({depthPacking:X_}),l=new zv,c={},u=t.maxTextureSize,f={[ol]:rs,[rs]:ol,[Oo]:Oo},d=new vo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new $e},radius:{value:4}},vertexShader:oH,fragmentShader:aH}),h=d.clone();h.defines.HORIZONTAL_PASS=1;const g=new un;g.setAttribute("position",new Xn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const _=new di(g,d),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=kv;let y=this.type;this.render=function(P,k,N){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||P.length===0)return;const z=n.getRenderTarget(),R=n.getActiveCubeFace(),F=n.getActiveMipmapLevel(),V=n.state;V.setBlending(el),V.buffers.color.setClear(1,1,1,1),V.buffers.depth.setTest(!0),V.setScissorTest(!1);const K=y!==Lo&&this.type===Lo,W=y===Lo&&this.type!==Lo;for(let ne=0,re=P.length;ne<re;ne++){const de=P[ne],X=de.shadow;if(X===void 0){console.warn("THREE.WebGLShadowMap:",de,"has no shadow.");continue}if(X.autoUpdate===!1&&X.needsUpdate===!1)continue;r.copy(X.mapSize);const $=X.getFrameExtents();if(r.multiply($),s.copy(X.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/$.x),r.x=s.x*$.x,X.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/$.y),r.y=s.y*$.y,X.mapSize.y=s.y)),X.map===null||K===!0||W===!0){const j=this.type!==Lo?{minFilter:Ri,magFilter:Ri}:{};X.map!==null&&X.map.dispose(),X.map=new Ho(r.x,r.y,j),X.map.texture.name=de.name+".shadowMap",X.camera.updateProjectionMatrix()}n.setRenderTarget(X.map),n.clear();const J=X.getViewportCount();for(let j=0;j<J;j++){const se=X.getViewport(j);o.set(s.x*se.x,s.y*se.y,s.x*se.z,s.y*se.w),V.viewport(o),X.updateMatrices(de,j),i=X.getFrustum(),A(k,N,X.camera,de,this.type)}X.isPointLightShadow!==!0&&this.type===Lo&&M(X,N),X.needsUpdate=!1}y=this.type,x.needsUpdate=!1,n.setRenderTarget(z,R,F)};function M(P,k){const N=e.update(_);d.defines.VSM_SAMPLES!==P.blurSamples&&(d.defines.VSM_SAMPLES=P.blurSamples,h.defines.VSM_SAMPLES=P.blurSamples,d.needsUpdate=!0,h.needsUpdate=!0),P.mapPass===null&&(P.mapPass=new Ho(r.x,r.y)),d.uniforms.shadow_pass.value=P.map.texture,d.uniforms.resolution.value=P.mapSize,d.uniforms.radius.value=P.radius,n.setRenderTarget(P.mapPass),n.clear(),n.renderBufferDirect(k,null,N,d,_,null),h.uniforms.shadow_pass.value=P.mapPass.texture,h.uniforms.resolution.value=P.mapSize,h.uniforms.radius.value=P.radius,n.setRenderTarget(P.map),n.clear(),n.renderBufferDirect(k,null,N,h,_,null)}function b(P,k,N,z){let R=null;const F=N.isPointLight===!0?P.customDistanceMaterial:P.customDepthMaterial;if(F!==void 0)R=F;else if(R=N.isPointLight===!0?l:a,n.localClippingEnabled&&k.clipShadows===!0&&Array.isArray(k.clippingPlanes)&&k.clippingPlanes.length!==0||k.displacementMap&&k.displacementScale!==0||k.alphaMap&&k.alphaTest>0||k.map&&k.alphaTest>0){const V=R.uuid,K=k.uuid;let W=c[V];W===void 0&&(W={},c[V]=W);let ne=W[K];ne===void 0&&(ne=R.clone(),W[K]=ne,k.addEventListener("dispose",T)),R=ne}if(R.visible=k.visible,R.wireframe=k.wireframe,z===Lo?R.side=k.shadowSide!==null?k.shadowSide:k.side:R.side=k.shadowSide!==null?k.shadowSide:f[k.side],R.alphaMap=k.alphaMap,R.alphaTest=k.alphaTest,R.map=k.map,R.clipShadows=k.clipShadows,R.clippingPlanes=k.clippingPlanes,R.clipIntersection=k.clipIntersection,R.displacementMap=k.displacementMap,R.displacementScale=k.displacementScale,R.displacementBias=k.displacementBias,R.wireframeLinewidth=k.wireframeLinewidth,R.linewidth=k.linewidth,N.isPointLight===!0&&R.isMeshDistanceMaterial===!0){const V=n.properties.get(R);V.light=N}return R}function A(P,k,N,z,R){if(P.visible===!1)return;if(P.layers.test(k.layers)&&(P.isMesh||P.isLine||P.isPoints)&&(P.castShadow||P.receiveShadow&&R===Lo)&&(!P.frustumCulled||i.intersectsObject(P))){P.modelViewMatrix.multiplyMatrices(N.matrixWorldInverse,P.matrixWorld);const K=e.update(P),W=P.material;if(Array.isArray(W)){const ne=K.groups;for(let re=0,de=ne.length;re<de;re++){const X=ne[re],$=W[X.materialIndex];if($&&$.visible){const J=b(P,$,z,R);P.onBeforeShadow(n,P,k,N,K,J,X),n.renderBufferDirect(N,null,K,J,P,X),P.onAfterShadow(n,P,k,N,K,J,X)}}}else if(W.visible){const ne=b(P,W,z,R);P.onBeforeShadow(n,P,k,N,K,ne,null),n.renderBufferDirect(N,null,K,ne,P,null),P.onAfterShadow(n,P,k,N,K,ne,null)}}const V=P.children;for(let K=0,W=V.length;K<W;K++)A(V[K],k,N,z,R)}function T(P){P.target.removeEventListener("dispose",T);for(const N in c){const z=c[N],R=P.target.uuid;R in z&&(z[R].dispose(),delete z[R])}}}function cH(n,e,t){const i=t.isWebGL2;function r(){let xe=!1;const gt=new gn;let Re=null;const et=new gn(0,0,0,0);return{setMask:function(rt){Re!==rt&&!xe&&(n.colorMask(rt,rt,rt,rt),Re=rt)},setLocked:function(rt){xe=rt},setClear:function(rt,wt,_t,Ht,an){an===!0&&(rt*=Ht,wt*=Ht,_t*=Ht),gt.set(rt,wt,_t,Ht),et.equals(gt)===!1&&(n.clearColor(rt,wt,_t,Ht),et.copy(gt))},reset:function(){xe=!1,Re=null,et.set(-1,0,0,0)}}}function s(){let xe=!1,gt=null,Re=null,et=null;return{setTest:function(rt){rt?Xe(n.DEPTH_TEST):ht(n.DEPTH_TEST)},setMask:function(rt){gt!==rt&&!xe&&(n.depthMask(rt),gt=rt)},setFunc:function(rt){if(Re!==rt){switch(rt){case dT:n.depthFunc(n.NEVER);break;case pT:n.depthFunc(n.ALWAYS);break;case mT:n.depthFunc(n.LESS);break;case up:n.depthFunc(n.LEQUAL);break;case gT:n.depthFunc(n.EQUAL);break;case vT:n.depthFunc(n.GEQUAL);break;case yT:n.depthFunc(n.GREATER);break;case xT:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Re=rt}},setLocked:function(rt){xe=rt},setClear:function(rt){et!==rt&&(n.clearDepth(rt),et=rt)},reset:function(){xe=!1,gt=null,Re=null,et=null}}}function o(){let xe=!1,gt=null,Re=null,et=null,rt=null,wt=null,_t=null,Ht=null,an=null;return{setTest:function(Gt){xe||(Gt?Xe(n.STENCIL_TEST):ht(n.STENCIL_TEST))},setMask:function(Gt){gt!==Gt&&!xe&&(n.stencilMask(Gt),gt=Gt)},setFunc:function(Gt,hn,Kn){(Re!==Gt||et!==hn||rt!==Kn)&&(n.stencilFunc(Gt,hn,Kn),Re=Gt,et=hn,rt=Kn)},setOp:function(Gt,hn,Kn){(wt!==Gt||_t!==hn||Ht!==Kn)&&(n.stencilOp(Gt,hn,Kn),wt=Gt,_t=hn,Ht=Kn)},setLocked:function(Gt){xe=Gt},setClear:function(Gt){an!==Gt&&(n.clearStencil(Gt),an=Gt)},reset:function(){xe=!1,gt=null,Re=null,et=null,rt=null,wt=null,_t=null,Ht=null,an=null}}}const a=new r,l=new s,c=new o,u=new WeakMap,f=new WeakMap;let d={},h={},g=new WeakMap,_=[],x=null,y=!1,M=null,b=null,A=null,T=null,P=null,k=null,N=null,z=new Ct(0,0,0),R=0,F=!1,V=null,K=null,W=null,ne=null,re=null;const de=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let X=!1,$=0;const J=n.getParameter(n.VERSION);J.indexOf("WebGL")!==-1?($=parseFloat(/^WebGL (\d)/.exec(J)[1]),X=$>=1):J.indexOf("OpenGL ES")!==-1&&($=parseFloat(/^OpenGL ES (\d)/.exec(J)[1]),X=$>=2);let j=null,se={};const ve=n.getParameter(n.SCISSOR_BOX),oe=n.getParameter(n.VIEWPORT),he=new gn().fromArray(ve),ye=new gn().fromArray(oe);function Me(xe,gt,Re,et){const rt=new Uint8Array(4),wt=n.createTexture();n.bindTexture(xe,wt),n.texParameteri(xe,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(xe,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let _t=0;_t<Re;_t++)i&&(xe===n.TEXTURE_3D||xe===n.TEXTURE_2D_ARRAY)?n.texImage3D(gt,0,n.RGBA,1,1,et,0,n.RGBA,n.UNSIGNED_BYTE,rt):n.texImage2D(gt+_t,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,rt);return wt}const Pe={};Pe[n.TEXTURE_2D]=Me(n.TEXTURE_2D,n.TEXTURE_2D,1),Pe[n.TEXTURE_CUBE_MAP]=Me(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(Pe[n.TEXTURE_2D_ARRAY]=Me(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Pe[n.TEXTURE_3D]=Me(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),Xe(n.DEPTH_TEST),l.setFunc(up),Ue(!1),Ye(P4),Xe(n.CULL_FACE),Fe(el);function Xe(xe){d[xe]!==!0&&(n.enable(xe),d[xe]=!0)}function ht(xe){d[xe]!==!1&&(n.disable(xe),d[xe]=!1)}function He(xe,gt){return h[xe]!==gt?(n.bindFramebuffer(xe,gt),h[xe]=gt,i&&(xe===n.DRAW_FRAMEBUFFER&&(h[n.FRAMEBUFFER]=gt),xe===n.FRAMEBUFFER&&(h[n.DRAW_FRAMEBUFFER]=gt)),!0):!1}function ie(xe,gt){let Re=_,et=!1;if(xe){Re=g.get(gt),Re===void 0&&(Re=[],g.set(gt,Re));const rt=xe.textures;if(Re.length!==rt.length||Re[0]!==n.COLOR_ATTACHMENT0){for(let wt=0,_t=rt.length;wt<_t;wt++)Re[wt]=n.COLOR_ATTACHMENT0+wt;Re.length=rt.length,et=!0}}else Re[0]!==n.BACK&&(Re[0]=n.BACK,et=!0);if(et)if(t.isWebGL2)n.drawBuffers(Re);else if(e.has("WEBGL_draw_buffers")===!0)e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Re);else throw new Error("THREE.WebGLState: Usage of gl.drawBuffers() require WebGL2 or WEBGL_draw_buffers extension")}function je(xe){return x!==xe?(n.useProgram(xe),x=xe,!0):!1}const ke={[Xl]:n.FUNC_ADD,[JE]:n.FUNC_SUBTRACT,[$E]:n.FUNC_REVERSE_SUBTRACT};if(i)ke[N4]=n.MIN,ke[I4]=n.MAX;else{const xe=e.get("EXT_blend_minmax");xe!==null&&(ke[N4]=xe.MIN_EXT,ke[I4]=xe.MAX_EXT)}const We={[eT]:n.ZERO,[tT]:n.ONE,[nT]:n.SRC_COLOR,[rv]:n.SRC_ALPHA,[lT]:n.SRC_ALPHA_SATURATE,[oT]:n.DST_COLOR,[rT]:n.DST_ALPHA,[iT]:n.ONE_MINUS_SRC_COLOR,[sv]:n.ONE_MINUS_SRC_ALPHA,[aT]:n.ONE_MINUS_DST_COLOR,[sT]:n.ONE_MINUS_DST_ALPHA,[cT]:n.CONSTANT_COLOR,[uT]:n.ONE_MINUS_CONSTANT_COLOR,[hT]:n.CONSTANT_ALPHA,[fT]:n.ONE_MINUS_CONSTANT_ALPHA};function Fe(xe,gt,Re,et,rt,wt,_t,Ht,an,Gt){if(xe===el){y===!0&&(ht(n.BLEND),y=!1);return}if(y===!1&&(Xe(n.BLEND),y=!0),xe!==QE){if(xe!==M||Gt!==F){if((b!==Xl||P!==Xl)&&(n.blendEquation(n.FUNC_ADD),b=Xl,P=Xl),Gt)switch(xe){case Pu:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case R4:n.blendFunc(n.ONE,n.ONE);break;case k4:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case L4:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",xe);break}else switch(xe){case Pu:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case R4:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case k4:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case L4:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",xe);break}A=null,T=null,k=null,N=null,z.set(0,0,0),R=0,M=xe,F=Gt}return}rt=rt||gt,wt=wt||Re,_t=_t||et,(gt!==b||rt!==P)&&(n.blendEquationSeparate(ke[gt],ke[rt]),b=gt,P=rt),(Re!==A||et!==T||wt!==k||_t!==N)&&(n.blendFuncSeparate(We[Re],We[et],We[wt],We[_t]),A=Re,T=et,k=wt,N=_t),(Ht.equals(z)===!1||an!==R)&&(n.blendColor(Ht.r,Ht.g,Ht.b,an),z.copy(Ht),R=an),M=xe,F=!1}function it(xe,gt){xe.side===Oo?ht(n.CULL_FACE):Xe(n.CULL_FACE);let Re=xe.side===rs;gt&&(Re=!Re),Ue(Re),xe.blending===Pu&&xe.transparent===!1?Fe(el):Fe(xe.blending,xe.blendEquation,xe.blendSrc,xe.blendDst,xe.blendEquationAlpha,xe.blendSrcAlpha,xe.blendDstAlpha,xe.blendColor,xe.blendAlpha,xe.premultipliedAlpha),l.setFunc(xe.depthFunc),l.setTest(xe.depthTest),l.setMask(xe.depthWrite),a.setMask(xe.colorWrite);const et=xe.stencilWrite;c.setTest(et),et&&(c.setMask(xe.stencilWriteMask),c.setFunc(xe.stencilFunc,xe.stencilRef,xe.stencilFuncMask),c.setOp(xe.stencilFail,xe.stencilZFail,xe.stencilZPass)),Q(xe.polygonOffset,xe.polygonOffsetFactor,xe.polygonOffsetUnits),xe.alphaToCoverage===!0?Xe(n.SAMPLE_ALPHA_TO_COVERAGE):ht(n.SAMPLE_ALPHA_TO_COVERAGE)}function Ue(xe){V!==xe&&(xe?n.frontFace(n.CW):n.frontFace(n.CCW),V=xe)}function Ye(xe){xe!==YE?(Xe(n.CULL_FACE),xe!==K&&(xe===P4?n.cullFace(n.BACK):xe===ZE?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):ht(n.CULL_FACE),K=xe}function ot(xe){xe!==W&&(X&&n.lineWidth(xe),W=xe)}function Q(xe,gt,Re){xe?(Xe(n.POLYGON_OFFSET_FILL),(ne!==gt||re!==Re)&&(n.polygonOffset(gt,Re),ne=gt,re=Re)):ht(n.POLYGON_OFFSET_FILL)}function Z(xe){xe?Xe(n.SCISSOR_TEST):ht(n.SCISSOR_TEST)}function we(xe){xe===void 0&&(xe=n.TEXTURE0+de-1),j!==xe&&(n.activeTexture(xe),j=xe)}function Ee(xe,gt,Re){Re===void 0&&(j===null?Re=n.TEXTURE0+de-1:Re=j);let et=se[Re];et===void 0&&(et={type:void 0,texture:void 0},se[Re]=et),(et.type!==xe||et.texture!==gt)&&(j!==Re&&(n.activeTexture(Re),j=Re),n.bindTexture(xe,gt||Pe[xe]),et.type=xe,et.texture=gt)}function Ne(){const xe=se[j];xe!==void 0&&xe.type!==void 0&&(n.bindTexture(xe.type,null),xe.type=void 0,xe.texture=void 0)}function Ze(){try{n.compressedTexImage2D.apply(n,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function lt(){try{n.compressedTexImage3D.apply(n,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function ft(){try{n.texSubImage2D.apply(n,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function qe(){try{n.texSubImage3D.apply(n,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function st(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function St(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function nt(){try{n.texStorage2D.apply(n,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function Lt(){try{n.texStorage3D.apply(n,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function ct(){try{n.texImage2D.apply(n,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function be(){try{n.texImage3D.apply(n,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function fe(xe){he.equals(xe)===!1&&(n.scissor(xe.x,xe.y,xe.z,xe.w),he.copy(xe))}function De(xe){ye.equals(xe)===!1&&(n.viewport(xe.x,xe.y,xe.z,xe.w),ye.copy(xe))}function mt(xe,gt){let Re=f.get(gt);Re===void 0&&(Re=new WeakMap,f.set(gt,Re));let et=Re.get(xe);et===void 0&&(et=n.getUniformBlockIndex(gt,xe.name),Re.set(xe,et))}function pt(xe,gt){const et=f.get(gt).get(xe);u.get(gt)!==et&&(n.uniformBlockBinding(gt,et,xe.__bindingPointIndex),u.set(gt,et))}function vt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),i===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),d={},j=null,se={},h={},g=new WeakMap,_=[],x=null,y=!1,M=null,b=null,A=null,T=null,P=null,k=null,N=null,z=new Ct(0,0,0),R=0,F=!1,V=null,K=null,W=null,ne=null,re=null,he.set(0,0,n.canvas.width,n.canvas.height),ye.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:Xe,disable:ht,bindFramebuffer:He,drawBuffers:ie,useProgram:je,setBlending:Fe,setMaterial:it,setFlipSided:Ue,setCullFace:Ye,setLineWidth:ot,setPolygonOffset:Q,setScissorTest:Z,activeTexture:we,bindTexture:Ee,unbindTexture:Ne,compressedTexImage2D:Ze,compressedTexImage3D:lt,texImage2D:ct,texImage3D:be,updateUBOMapping:mt,uniformBlockBinding:pt,texStorage2D:nt,texStorage3D:Lt,texSubImage2D:ft,texSubImage3D:qe,compressedTexSubImage2D:st,compressedTexSubImage3D:St,scissor:fe,viewport:De,reset:vt}}function uH(n,e,t,i,r,s,o){const a=r.isWebGL2,l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new $e,f=new WeakMap;let d;const h=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _(Q,Z){return g?new OffscreenCanvas(Q,Z):bp("canvas")}function x(Q,Z,we,Ee){let Ne=1;const Ze=ot(Q);if((Ze.width>Ee||Ze.height>Ee)&&(Ne=Ee/Math.max(Ze.width,Ze.height)),Ne<1||Z===!0)if(typeof HTMLImageElement<"u"&&Q instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Q instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Q instanceof ImageBitmap||typeof VideoFrame<"u"&&Q instanceof VideoFrame){const lt=Z?lv:Math.floor,ft=lt(Ne*Ze.width),qe=lt(Ne*Ze.height);d===void 0&&(d=_(ft,qe));const st=we?_(ft,qe):d;return st.width=ft,st.height=qe,st.getContext("2d").drawImage(Q,0,0,ft,qe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ze.width+"x"+Ze.height+") to ("+ft+"x"+qe+")."),st}else return"data"in Q&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ze.width+"x"+Ze.height+")."),Q;return Q}function y(Q){const Z=ot(Q);return c3(Z.width)&&c3(Z.height)}function M(Q){return a?!1:Q.wrapS!==Fr||Q.wrapT!==Fr||Q.minFilter!==Ri&&Q.minFilter!==oi}function b(Q,Z){return Q.generateMipmaps&&Z&&Q.minFilter!==Ri&&Q.minFilter!==oi}function A(Q){n.generateMipmap(Q)}function T(Q,Z,we,Ee,Ne=!1){if(a===!1)return Z;if(Q!==null){if(n[Q]!==void 0)return n[Q];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Q+"'")}let Ze=Z;if(Z===n.RED&&(we===n.FLOAT&&(Ze=n.R32F),we===n.HALF_FLOAT&&(Ze=n.R16F),we===n.UNSIGNED_BYTE&&(Ze=n.R8)),Z===n.RED_INTEGER&&(we===n.UNSIGNED_BYTE&&(Ze=n.R8UI),we===n.UNSIGNED_SHORT&&(Ze=n.R16UI),we===n.UNSIGNED_INT&&(Ze=n.R32UI),we===n.BYTE&&(Ze=n.R8I),we===n.SHORT&&(Ze=n.R16I),we===n.INT&&(Ze=n.R32I)),Z===n.RG&&(we===n.FLOAT&&(Ze=n.RG32F),we===n.HALF_FLOAT&&(Ze=n.RG16F),we===n.UNSIGNED_BYTE&&(Ze=n.RG8)),Z===n.RG_INTEGER&&(we===n.UNSIGNED_BYTE&&(Ze=n.RG8UI),we===n.UNSIGNED_SHORT&&(Ze=n.RG16UI),we===n.UNSIGNED_INT&&(Ze=n.RG32UI),we===n.BYTE&&(Ze=n.RG8I),we===n.SHORT&&(Ze=n.RG16I),we===n.INT&&(Ze=n.RG32I)),Z===n.RGBA){const lt=Ne?yp:Gn.getTransfer(Ee);we===n.FLOAT&&(Ze=n.RGBA32F),we===n.HALF_FLOAT&&(Ze=n.RGBA16F),we===n.UNSIGNED_BYTE&&(Ze=lt===$n?n.SRGB8_ALPHA8:n.RGBA8),we===n.UNSIGNED_SHORT_4_4_4_4&&(Ze=n.RGBA4),we===n.UNSIGNED_SHORT_5_5_5_1&&(Ze=n.RGB5_A1)}return(Ze===n.R16F||Ze===n.R32F||Ze===n.RG16F||Ze===n.RG32F||Ze===n.RGBA16F||Ze===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Ze}function P(Q,Z,we){return b(Q,we)===!0||Q.isFramebufferTexture&&Q.minFilter!==Ri&&Q.minFilter!==oi?Math.log2(Math.max(Z.width,Z.height))+1:Q.mipmaps!==void 0&&Q.mipmaps.length>0?Q.mipmaps.length:Q.isCompressedTexture&&Array.isArray(Q.image)?Z.mipmaps.length:1}function k(Q){return Q===Ri||Q===ov||Q===mu?n.NEAREST:n.LINEAR}function N(Q){const Z=Q.target;Z.removeEventListener("dispose",N),R(Z),Z.isVideoTexture&&f.delete(Z)}function z(Q){const Z=Q.target;Z.removeEventListener("dispose",z),V(Z)}function R(Q){const Z=i.get(Q);if(Z.__webglInit===void 0)return;const we=Q.source,Ee=h.get(we);if(Ee){const Ne=Ee[Z.__cacheKey];Ne.usedTimes--,Ne.usedTimes===0&&F(Q),Object.keys(Ee).length===0&&h.delete(we)}i.remove(Q)}function F(Q){const Z=i.get(Q);n.deleteTexture(Z.__webglTexture);const we=Q.source,Ee=h.get(we);delete Ee[Z.__cacheKey],o.memory.textures--}function V(Q){const Z=i.get(Q);if(Q.depthTexture&&Q.depthTexture.dispose(),Q.isWebGLCubeRenderTarget)for(let Ee=0;Ee<6;Ee++){if(Array.isArray(Z.__webglFramebuffer[Ee]))for(let Ne=0;Ne<Z.__webglFramebuffer[Ee].length;Ne++)n.deleteFramebuffer(Z.__webglFramebuffer[Ee][Ne]);else n.deleteFramebuffer(Z.__webglFramebuffer[Ee]);Z.__webglDepthbuffer&&n.deleteRenderbuffer(Z.__webglDepthbuffer[Ee])}else{if(Array.isArray(Z.__webglFramebuffer))for(let Ee=0;Ee<Z.__webglFramebuffer.length;Ee++)n.deleteFramebuffer(Z.__webglFramebuffer[Ee]);else n.deleteFramebuffer(Z.__webglFramebuffer);if(Z.__webglDepthbuffer&&n.deleteRenderbuffer(Z.__webglDepthbuffer),Z.__webglMultisampledFramebuffer&&n.deleteFramebuffer(Z.__webglMultisampledFramebuffer),Z.__webglColorRenderbuffer)for(let Ee=0;Ee<Z.__webglColorRenderbuffer.length;Ee++)Z.__webglColorRenderbuffer[Ee]&&n.deleteRenderbuffer(Z.__webglColorRenderbuffer[Ee]);Z.__webglDepthRenderbuffer&&n.deleteRenderbuffer(Z.__webglDepthRenderbuffer)}const we=Q.textures;for(let Ee=0,Ne=we.length;Ee<Ne;Ee++){const Ze=i.get(we[Ee]);Ze.__webglTexture&&(n.deleteTexture(Ze.__webglTexture),o.memory.textures--),i.remove(we[Ee])}i.remove(Q)}let K=0;function W(){K=0}function ne(){const Q=K;return Q>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+Q+" texture units while this GPU supports only "+r.maxTextures),K+=1,Q}function re(Q){const Z=[];return Z.push(Q.wrapS),Z.push(Q.wrapT),Z.push(Q.wrapR||0),Z.push(Q.magFilter),Z.push(Q.minFilter),Z.push(Q.anisotropy),Z.push(Q.internalFormat),Z.push(Q.format),Z.push(Q.type),Z.push(Q.generateMipmaps),Z.push(Q.premultiplyAlpha),Z.push(Q.flipY),Z.push(Q.unpackAlignment),Z.push(Q.colorSpace),Z.join()}function de(Q,Z){const we=i.get(Q);if(Q.isVideoTexture&&Ue(Q),Q.isRenderTargetTexture===!1&&Q.version>0&&we.__version!==Q.version){const Ee=Q.image;if(Ee===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ee.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ye(we,Q,Z);return}}t.bindTexture(n.TEXTURE_2D,we.__webglTexture,n.TEXTURE0+Z)}function X(Q,Z){const we=i.get(Q);if(Q.version>0&&we.__version!==Q.version){ye(we,Q,Z);return}t.bindTexture(n.TEXTURE_2D_ARRAY,we.__webglTexture,n.TEXTURE0+Z)}function $(Q,Z){const we=i.get(Q);if(Q.version>0&&we.__version!==Q.version){ye(we,Q,Z);return}t.bindTexture(n.TEXTURE_3D,we.__webglTexture,n.TEXTURE0+Z)}function J(Q,Z){const we=i.get(Q);if(Q.version>0&&we.__version!==Q.version){Me(we,Q,Z);return}t.bindTexture(n.TEXTURE_CUBE_MAP,we.__webglTexture,n.TEXTURE0+Z)}const j={[dp]:n.REPEAT,[Fr]:n.CLAMP_TO_EDGE,[pp]:n.MIRRORED_REPEAT},se={[Ri]:n.NEAREST,[ov]:n.NEAREST_MIPMAP_NEAREST,[mu]:n.NEAREST_MIPMAP_LINEAR,[oi]:n.LINEAR,[O0]:n.LINEAR_MIPMAP_NEAREST,[ua]:n.LINEAR_MIPMAP_LINEAR},ve={[HT]:n.NEVER,[XT]:n.ALWAYS,[VT]:n.LESS,[Y_]:n.LEQUAL,[GT]:n.EQUAL,[qT]:n.GEQUAL,[WT]:n.GREATER,[jT]:n.NOTEQUAL};function oe(Q,Z,we){if(Z.type===zs&&e.has("OES_texture_float_linear")===!1&&(Z.magFilter===oi||Z.magFilter===O0||Z.magFilter===mu||Z.magFilter===ua||Z.minFilter===oi||Z.minFilter===O0||Z.minFilter===mu||Z.minFilter===ua)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),we?(n.texParameteri(Q,n.TEXTURE_WRAP_S,j[Z.wrapS]),n.texParameteri(Q,n.TEXTURE_WRAP_T,j[Z.wrapT]),(Q===n.TEXTURE_3D||Q===n.TEXTURE_2D_ARRAY)&&n.texParameteri(Q,n.TEXTURE_WRAP_R,j[Z.wrapR]),n.texParameteri(Q,n.TEXTURE_MAG_FILTER,se[Z.magFilter]),n.texParameteri(Q,n.TEXTURE_MIN_FILTER,se[Z.minFilter])):(n.texParameteri(Q,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(Q,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(Q===n.TEXTURE_3D||Q===n.TEXTURE_2D_ARRAY)&&n.texParameteri(Q,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(Z.wrapS!==Fr||Z.wrapT!==Fr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(Q,n.TEXTURE_MAG_FILTER,k(Z.magFilter)),n.texParameteri(Q,n.TEXTURE_MIN_FILTER,k(Z.minFilter)),Z.minFilter!==Ri&&Z.minFilter!==oi&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),Z.compareFunction&&(n.texParameteri(Q,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(Q,n.TEXTURE_COMPARE_FUNC,ve[Z.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(Z.magFilter===Ri||Z.minFilter!==mu&&Z.minFilter!==ua||Z.type===zs&&e.has("OES_texture_float_linear")===!1||a===!1&&Z.type===Gf&&e.has("OES_texture_half_float_linear")===!1)return;if(Z.anisotropy>1||i.get(Z).__currentAnisotropy){const Ee=e.get("EXT_texture_filter_anisotropic");n.texParameterf(Q,Ee.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Z.anisotropy,r.getMaxAnisotropy())),i.get(Z).__currentAnisotropy=Z.anisotropy}}}function he(Q,Z){let we=!1;Q.__webglInit===void 0&&(Q.__webglInit=!0,Z.addEventListener("dispose",N));const Ee=Z.source;let Ne=h.get(Ee);Ne===void 0&&(Ne={},h.set(Ee,Ne));const Ze=re(Z);if(Ze!==Q.__cacheKey){Ne[Ze]===void 0&&(Ne[Ze]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,we=!0),Ne[Ze].usedTimes++;const lt=Ne[Q.__cacheKey];lt!==void 0&&(Ne[Q.__cacheKey].usedTimes--,lt.usedTimes===0&&F(Z)),Q.__cacheKey=Ze,Q.__webglTexture=Ne[Ze].texture}return we}function ye(Q,Z,we){let Ee=n.TEXTURE_2D;(Z.isDataArrayTexture||Z.isCompressedArrayTexture)&&(Ee=n.TEXTURE_2D_ARRAY),Z.isData3DTexture&&(Ee=n.TEXTURE_3D);const Ne=he(Q,Z),Ze=Z.source;t.bindTexture(Ee,Q.__webglTexture,n.TEXTURE0+we);const lt=i.get(Ze);if(Ze.version!==lt.__version||Ne===!0){t.activeTexture(n.TEXTURE0+we);const ft=Gn.getPrimaries(Gn.workingColorSpace),qe=Z.colorSpace===Xa?null:Gn.getPrimaries(Z.colorSpace),st=Z.colorSpace===Xa||ft===qe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,Z.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Z.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,Z.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,st);const St=M(Z)&&y(Z.image)===!1;let nt=x(Z.image,St,!1,r.maxTextureSize);nt=Ye(Z,nt);const Lt=y(nt)||a,ct=s.convert(Z.format,Z.colorSpace);let be=s.convert(Z.type),fe=T(Z.internalFormat,ct,be,Z.colorSpace,Z.isVideoTexture);oe(Ee,Z,Lt);let De;const mt=Z.mipmaps,pt=a&&Z.isVideoTexture!==!0&&fe!==j_,vt=lt.__version===void 0||Ne===!0,xe=Ze.dataReady,gt=P(Z,nt,Lt);if(Z.isDepthTexture)fe=n.DEPTH_COMPONENT,a?Z.type===zs?fe=n.DEPTH_COMPONENT32F:Z.type===Qa?fe=n.DEPTH_COMPONENT24:Z.type===oc?fe=n.DEPTH24_STENCIL8:fe=n.DEPTH_COMPONENT16:Z.type===zs&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Z.format===ac&&fe===n.DEPTH_COMPONENT&&Z.type!==Nv&&Z.type!==Qa&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Z.type=Qa,be=s.convert(Z.type)),Z.format===Hu&&fe===n.DEPTH_COMPONENT&&(fe=n.DEPTH_STENCIL,Z.type!==oc&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Z.type=oc,be=s.convert(Z.type))),vt&&(pt?t.texStorage2D(n.TEXTURE_2D,1,fe,nt.width,nt.height):t.texImage2D(n.TEXTURE_2D,0,fe,nt.width,nt.height,0,ct,be,null));else if(Z.isDataTexture)if(mt.length>0&&Lt){pt&&vt&&t.texStorage2D(n.TEXTURE_2D,gt,fe,mt[0].width,mt[0].height);for(let Re=0,et=mt.length;Re<et;Re++)De=mt[Re],pt?xe&&t.texSubImage2D(n.TEXTURE_2D,Re,0,0,De.width,De.height,ct,be,De.data):t.texImage2D(n.TEXTURE_2D,Re,fe,De.width,De.height,0,ct,be,De.data);Z.generateMipmaps=!1}else pt?(vt&&t.texStorage2D(n.TEXTURE_2D,gt,fe,nt.width,nt.height),xe&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,nt.width,nt.height,ct,be,nt.data)):t.texImage2D(n.TEXTURE_2D,0,fe,nt.width,nt.height,0,ct,be,nt.data);else if(Z.isCompressedTexture)if(Z.isCompressedArrayTexture){pt&&vt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,gt,fe,mt[0].width,mt[0].height,nt.depth);for(let Re=0,et=mt.length;Re<et;Re++)De=mt[Re],Z.format!==ts?ct!==null?pt?xe&&t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Re,0,0,0,De.width,De.height,nt.depth,ct,De.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Re,fe,De.width,De.height,nt.depth,0,De.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):pt?xe&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,Re,0,0,0,De.width,De.height,nt.depth,ct,be,De.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Re,fe,De.width,De.height,nt.depth,0,ct,be,De.data)}else{pt&&vt&&t.texStorage2D(n.TEXTURE_2D,gt,fe,mt[0].width,mt[0].height);for(let Re=0,et=mt.length;Re<et;Re++)De=mt[Re],Z.format!==ts?ct!==null?pt?xe&&t.compressedTexSubImage2D(n.TEXTURE_2D,Re,0,0,De.width,De.height,ct,De.data):t.compressedTexImage2D(n.TEXTURE_2D,Re,fe,De.width,De.height,0,De.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):pt?xe&&t.texSubImage2D(n.TEXTURE_2D,Re,0,0,De.width,De.height,ct,be,De.data):t.texImage2D(n.TEXTURE_2D,Re,fe,De.width,De.height,0,ct,be,De.data)}else if(Z.isDataArrayTexture)pt?(vt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,gt,fe,nt.width,nt.height,nt.depth),xe&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,nt.width,nt.height,nt.depth,ct,be,nt.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,fe,nt.width,nt.height,nt.depth,0,ct,be,nt.data);else if(Z.isData3DTexture)pt?(vt&&t.texStorage3D(n.TEXTURE_3D,gt,fe,nt.width,nt.height,nt.depth),xe&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,nt.width,nt.height,nt.depth,ct,be,nt.data)):t.texImage3D(n.TEXTURE_3D,0,fe,nt.width,nt.height,nt.depth,0,ct,be,nt.data);else if(Z.isFramebufferTexture){if(vt)if(pt)t.texStorage2D(n.TEXTURE_2D,gt,fe,nt.width,nt.height);else{let Re=nt.width,et=nt.height;for(let rt=0;rt<gt;rt++)t.texImage2D(n.TEXTURE_2D,rt,fe,Re,et,0,ct,be,null),Re>>=1,et>>=1}}else if(mt.length>0&&Lt){if(pt&&vt){const Re=ot(mt[0]);t.texStorage2D(n.TEXTURE_2D,gt,fe,Re.width,Re.height)}for(let Re=0,et=mt.length;Re<et;Re++)De=mt[Re],pt?xe&&t.texSubImage2D(n.TEXTURE_2D,Re,0,0,ct,be,De):t.texImage2D(n.TEXTURE_2D,Re,fe,ct,be,De);Z.generateMipmaps=!1}else if(pt){if(vt){const Re=ot(nt);t.texStorage2D(n.TEXTURE_2D,gt,fe,Re.width,Re.height)}xe&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,ct,be,nt)}else t.texImage2D(n.TEXTURE_2D,0,fe,ct,be,nt);b(Z,Lt)&&A(Ee),lt.__version=Ze.version,Z.onUpdate&&Z.onUpdate(Z)}Q.__version=Z.version}function Me(Q,Z,we){if(Z.image.length!==6)return;const Ee=he(Q,Z),Ne=Z.source;t.bindTexture(n.TEXTURE_CUBE_MAP,Q.__webglTexture,n.TEXTURE0+we);const Ze=i.get(Ne);if(Ne.version!==Ze.__version||Ee===!0){t.activeTexture(n.TEXTURE0+we);const lt=Gn.getPrimaries(Gn.workingColorSpace),ft=Z.colorSpace===Xa?null:Gn.getPrimaries(Z.colorSpace),qe=Z.colorSpace===Xa||lt===ft?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,Z.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Z.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,Z.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,qe);const st=Z.isCompressedTexture||Z.image[0].isCompressedTexture,St=Z.image[0]&&Z.image[0].isDataTexture,nt=[];for(let Re=0;Re<6;Re++)!st&&!St?nt[Re]=x(Z.image[Re],!1,!0,r.maxCubemapSize):nt[Re]=St?Z.image[Re].image:Z.image[Re],nt[Re]=Ye(Z,nt[Re]);const Lt=nt[0],ct=y(Lt)||a,be=s.convert(Z.format,Z.colorSpace),fe=s.convert(Z.type),De=T(Z.internalFormat,be,fe,Z.colorSpace),mt=a&&Z.isVideoTexture!==!0,pt=Ze.__version===void 0||Ee===!0,vt=Ne.dataReady;let xe=P(Z,Lt,ct);oe(n.TEXTURE_CUBE_MAP,Z,ct);let gt;if(st){mt&&pt&&t.texStorage2D(n.TEXTURE_CUBE_MAP,xe,De,Lt.width,Lt.height);for(let Re=0;Re<6;Re++){gt=nt[Re].mipmaps;for(let et=0;et<gt.length;et++){const rt=gt[et];Z.format!==ts?be!==null?mt?vt&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Re,et,0,0,rt.width,rt.height,be,rt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Re,et,De,rt.width,rt.height,0,rt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):mt?vt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Re,et,0,0,rt.width,rt.height,be,fe,rt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Re,et,De,rt.width,rt.height,0,be,fe,rt.data)}}}else{if(gt=Z.mipmaps,mt&&pt){gt.length>0&&xe++;const Re=ot(nt[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,xe,De,Re.width,Re.height)}for(let Re=0;Re<6;Re++)if(St){mt?vt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Re,0,0,0,nt[Re].width,nt[Re].height,be,fe,nt[Re].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Re,0,De,nt[Re].width,nt[Re].height,0,be,fe,nt[Re].data);for(let et=0;et<gt.length;et++){const wt=gt[et].image[Re].image;mt?vt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Re,et+1,0,0,wt.width,wt.height,be,fe,wt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Re,et+1,De,wt.width,wt.height,0,be,fe,wt.data)}}else{mt?vt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Re,0,0,0,be,fe,nt[Re]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Re,0,De,be,fe,nt[Re]);for(let et=0;et<gt.length;et++){const rt=gt[et];mt?vt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Re,et+1,0,0,be,fe,rt.image[Re]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Re,et+1,De,be,fe,rt.image[Re])}}}b(Z,ct)&&A(n.TEXTURE_CUBE_MAP),Ze.__version=Ne.version,Z.onUpdate&&Z.onUpdate(Z)}Q.__version=Z.version}function Pe(Q,Z,we,Ee,Ne,Ze){const lt=s.convert(we.format,we.colorSpace),ft=s.convert(we.type),qe=T(we.internalFormat,lt,ft,we.colorSpace);if(!i.get(Z).__hasExternalTextures){const St=Math.max(1,Z.width>>Ze),nt=Math.max(1,Z.height>>Ze);Ne===n.TEXTURE_3D||Ne===n.TEXTURE_2D_ARRAY?t.texImage3D(Ne,Ze,qe,St,nt,Z.depth,0,lt,ft,null):t.texImage2D(Ne,Ze,qe,St,nt,0,lt,ft,null)}t.bindFramebuffer(n.FRAMEBUFFER,Q),it(Z)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Ee,Ne,i.get(we).__webglTexture,0,Fe(Z)):(Ne===n.TEXTURE_2D||Ne>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Ne<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Ee,Ne,i.get(we).__webglTexture,Ze),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Xe(Q,Z,we){if(n.bindRenderbuffer(n.RENDERBUFFER,Q),Z.depthBuffer&&!Z.stencilBuffer){let Ee=a===!0?n.DEPTH_COMPONENT24:n.DEPTH_COMPONENT16;if(we||it(Z)){const Ne=Z.depthTexture;Ne&&Ne.isDepthTexture&&(Ne.type===zs?Ee=n.DEPTH_COMPONENT32F:Ne.type===Qa&&(Ee=n.DEPTH_COMPONENT24));const Ze=Fe(Z);it(Z)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ze,Ee,Z.width,Z.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,Ze,Ee,Z.width,Z.height)}else n.renderbufferStorage(n.RENDERBUFFER,Ee,Z.width,Z.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,Q)}else if(Z.depthBuffer&&Z.stencilBuffer){const Ee=Fe(Z);we&&it(Z)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ee,n.DEPTH24_STENCIL8,Z.width,Z.height):it(Z)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ee,n.DEPTH24_STENCIL8,Z.width,Z.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,Z.width,Z.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,Q)}else{const Ee=Z.textures;for(let Ne=0;Ne<Ee.length;Ne++){const Ze=Ee[Ne],lt=s.convert(Ze.format,Ze.colorSpace),ft=s.convert(Ze.type),qe=T(Ze.internalFormat,lt,ft,Ze.colorSpace),st=Fe(Z);we&&it(Z)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,st,qe,Z.width,Z.height):it(Z)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,st,qe,Z.width,Z.height):n.renderbufferStorage(n.RENDERBUFFER,qe,Z.width,Z.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function ht(Q,Z){if(Z&&Z.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,Q),!(Z.depthTexture&&Z.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(Z.depthTexture).__webglTexture||Z.depthTexture.image.width!==Z.width||Z.depthTexture.image.height!==Z.height)&&(Z.depthTexture.image.width=Z.width,Z.depthTexture.image.height=Z.height,Z.depthTexture.needsUpdate=!0),de(Z.depthTexture,0);const Ee=i.get(Z.depthTexture).__webglTexture,Ne=Fe(Z);if(Z.depthTexture.format===ac)it(Z)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ee,0,Ne):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ee,0);else if(Z.depthTexture.format===Hu)it(Z)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ee,0,Ne):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ee,0);else throw new Error("Unknown depthTexture format")}function He(Q){const Z=i.get(Q),we=Q.isWebGLCubeRenderTarget===!0;if(Q.depthTexture&&!Z.__autoAllocateDepthBuffer){if(we)throw new Error("target.depthTexture not supported in Cube render targets");ht(Z.__webglFramebuffer,Q)}else if(we){Z.__webglDepthbuffer=[];for(let Ee=0;Ee<6;Ee++)t.bindFramebuffer(n.FRAMEBUFFER,Z.__webglFramebuffer[Ee]),Z.__webglDepthbuffer[Ee]=n.createRenderbuffer(),Xe(Z.__webglDepthbuffer[Ee],Q,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,Z.__webglFramebuffer),Z.__webglDepthbuffer=n.createRenderbuffer(),Xe(Z.__webglDepthbuffer,Q,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function ie(Q,Z,we){const Ee=i.get(Q);Z!==void 0&&Pe(Ee.__webglFramebuffer,Q,Q.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),we!==void 0&&He(Q)}function je(Q){const Z=Q.texture,we=i.get(Q),Ee=i.get(Z);Q.addEventListener("dispose",z);const Ne=Q.textures,Ze=Q.isWebGLCubeRenderTarget===!0,lt=Ne.length>1,ft=y(Q)||a;if(lt||(Ee.__webglTexture===void 0&&(Ee.__webglTexture=n.createTexture()),Ee.__version=Z.version,o.memory.textures++),Ze){we.__webglFramebuffer=[];for(let qe=0;qe<6;qe++)if(a&&Z.mipmaps&&Z.mipmaps.length>0){we.__webglFramebuffer[qe]=[];for(let st=0;st<Z.mipmaps.length;st++)we.__webglFramebuffer[qe][st]=n.createFramebuffer()}else we.__webglFramebuffer[qe]=n.createFramebuffer()}else{if(a&&Z.mipmaps&&Z.mipmaps.length>0){we.__webglFramebuffer=[];for(let qe=0;qe<Z.mipmaps.length;qe++)we.__webglFramebuffer[qe]=n.createFramebuffer()}else we.__webglFramebuffer=n.createFramebuffer();if(lt)if(r.drawBuffers)for(let qe=0,st=Ne.length;qe<st;qe++){const St=i.get(Ne[qe]);St.__webglTexture===void 0&&(St.__webglTexture=n.createTexture(),o.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&Q.samples>0&&it(Q)===!1){we.__webglMultisampledFramebuffer=n.createFramebuffer(),we.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,we.__webglMultisampledFramebuffer);for(let qe=0;qe<Ne.length;qe++){const st=Ne[qe];we.__webglColorRenderbuffer[qe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,we.__webglColorRenderbuffer[qe]);const St=s.convert(st.format,st.colorSpace),nt=s.convert(st.type),Lt=T(st.internalFormat,St,nt,st.colorSpace,Q.isXRRenderTarget===!0),ct=Fe(Q);n.renderbufferStorageMultisample(n.RENDERBUFFER,ct,Lt,Q.width,Q.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+qe,n.RENDERBUFFER,we.__webglColorRenderbuffer[qe])}n.bindRenderbuffer(n.RENDERBUFFER,null),Q.depthBuffer&&(we.__webglDepthRenderbuffer=n.createRenderbuffer(),Xe(we.__webglDepthRenderbuffer,Q,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Ze){t.bindTexture(n.TEXTURE_CUBE_MAP,Ee.__webglTexture),oe(n.TEXTURE_CUBE_MAP,Z,ft);for(let qe=0;qe<6;qe++)if(a&&Z.mipmaps&&Z.mipmaps.length>0)for(let st=0;st<Z.mipmaps.length;st++)Pe(we.__webglFramebuffer[qe][st],Q,Z,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,st);else Pe(we.__webglFramebuffer[qe],Q,Z,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,0);b(Z,ft)&&A(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(lt){for(let qe=0,st=Ne.length;qe<st;qe++){const St=Ne[qe],nt=i.get(St);t.bindTexture(n.TEXTURE_2D,nt.__webglTexture),oe(n.TEXTURE_2D,St,ft),Pe(we.__webglFramebuffer,Q,St,n.COLOR_ATTACHMENT0+qe,n.TEXTURE_2D,0),b(St,ft)&&A(n.TEXTURE_2D)}t.unbindTexture()}else{let qe=n.TEXTURE_2D;if((Q.isWebGL3DRenderTarget||Q.isWebGLArrayRenderTarget)&&(a?qe=Q.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(qe,Ee.__webglTexture),oe(qe,Z,ft),a&&Z.mipmaps&&Z.mipmaps.length>0)for(let st=0;st<Z.mipmaps.length;st++)Pe(we.__webglFramebuffer[st],Q,Z,n.COLOR_ATTACHMENT0,qe,st);else Pe(we.__webglFramebuffer,Q,Z,n.COLOR_ATTACHMENT0,qe,0);b(Z,ft)&&A(qe),t.unbindTexture()}Q.depthBuffer&&He(Q)}function ke(Q){const Z=y(Q)||a,we=Q.textures;for(let Ee=0,Ne=we.length;Ee<Ne;Ee++){const Ze=we[Ee];if(b(Ze,Z)){const lt=Q.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,ft=i.get(Ze).__webglTexture;t.bindTexture(lt,ft),A(lt),t.unbindTexture()}}}function We(Q){if(a&&Q.samples>0&&it(Q)===!1){const Z=Q.textures,we=Q.width,Ee=Q.height;let Ne=n.COLOR_BUFFER_BIT;const Ze=[],lt=Q.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ft=i.get(Q),qe=Z.length>1;if(qe)for(let st=0;st<Z.length;st++)t.bindFramebuffer(n.FRAMEBUFFER,ft.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+st,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,ft.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+st,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,ft.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,ft.__webglFramebuffer);for(let st=0;st<Z.length;st++){Ze.push(n.COLOR_ATTACHMENT0+st),Q.depthBuffer&&Ze.push(lt);const St=ft.__ignoreDepthValues!==void 0?ft.__ignoreDepthValues:!1;if(St===!1&&(Q.depthBuffer&&(Ne|=n.DEPTH_BUFFER_BIT),Q.stencilBuffer&&(Ne|=n.STENCIL_BUFFER_BIT)),qe&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,ft.__webglColorRenderbuffer[st]),St===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[lt]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[lt])),qe){const nt=i.get(Z[st]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,nt,0)}n.blitFramebuffer(0,0,we,Ee,0,0,we,Ee,Ne,n.NEAREST),c&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Ze)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),qe)for(let st=0;st<Z.length;st++){t.bindFramebuffer(n.FRAMEBUFFER,ft.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+st,n.RENDERBUFFER,ft.__webglColorRenderbuffer[st]);const St=i.get(Z[st]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,ft.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+st,n.TEXTURE_2D,St,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,ft.__webglMultisampledFramebuffer)}}function Fe(Q){return Math.min(r.maxSamples,Q.samples)}function it(Q){const Z=i.get(Q);return a&&Q.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Z.__useRenderToTexture!==!1}function Ue(Q){const Z=o.render.frame;f.get(Q)!==Z&&(f.set(Q,Z),Q.update())}function Ye(Q,Z){const we=Q.colorSpace,Ee=Q.format,Ne=Q.type;return Q.isCompressedTexture===!0||Q.isVideoTexture===!0||Q.format===av||we!==ul&&we!==Xa&&(Gn.getTransfer(we)===$n?a===!1?e.has("EXT_sRGB")===!0&&Ee===ts?(Q.format=av,Q.minFilter=oi,Q.generateMipmaps=!1):Z=K_.sRGBToLinear(Z):(Ee!==ts||Ne!==ga)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",we)),Z}function ot(Q){return typeof HTMLImageElement<"u"&&Q instanceof HTMLImageElement?(u.width=Q.naturalWidth||Q.width,u.height=Q.naturalHeight||Q.height):typeof VideoFrame<"u"&&Q instanceof VideoFrame?(u.width=Q.displayWidth,u.height=Q.displayHeight):(u.width=Q.width,u.height=Q.height),u}this.allocateTextureUnit=ne,this.resetTextureUnits=W,this.setTexture2D=de,this.setTexture2DArray=X,this.setTexture3D=$,this.setTextureCube=J,this.rebindTextures=ie,this.setupRenderTarget=je,this.updateRenderTargetMipmap=ke,this.updateMultisampleRenderTarget=We,this.setupDepthRenderbuffer=He,this.setupFrameBufferTexture=Pe,this.useMultisampledRTT=it}function cA(n,e,t){const i=t.isWebGL2;function r(s,o=Xa){let a;const l=Gn.getTransfer(o);if(s===ga)return n.UNSIGNED_BYTE;if(s===z_)return n.UNSIGNED_SHORT_4_4_4_4;if(s===B_)return n.UNSIGNED_SHORT_5_5_5_1;if(s===PT)return n.BYTE;if(s===RT)return n.SHORT;if(s===Nv)return n.UNSIGNED_SHORT;if(s===U_)return n.INT;if(s===Qa)return n.UNSIGNED_INT;if(s===zs)return n.FLOAT;if(s===Gf)return i?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===kT)return n.ALPHA;if(s===ts)return n.RGBA;if(s===LT)return n.LUMINANCE;if(s===NT)return n.LUMINANCE_ALPHA;if(s===ac)return n.DEPTH_COMPONENT;if(s===Hu)return n.DEPTH_STENCIL;if(s===av)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===H_)return n.RED;if(s===V_)return n.RED_INTEGER;if(s===IT)return n.RG;if(s===G_)return n.RG_INTEGER;if(s===W_)return n.RGBA_INTEGER;if(s===g1||s===v1||s===y1||s===x1)if(l===$n)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===g1)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===v1)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===y1)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===x1)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===g1)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===v1)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===y1)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===x1)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===O4||s===F4||s===U4||s===z4)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===O4)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===F4)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===U4)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===z4)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===j_)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===B4||s===H4)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===B4)return l===$n?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===H4)return l===$n?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===V4||s===G4||s===W4||s===j4||s===q4||s===X4||s===Y4||s===Z4||s===K4||s===Q4||s===J4||s===$4||s===e3||s===t3)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===V4)return l===$n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===G4)return l===$n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===W4)return l===$n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===j4)return l===$n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===q4)return l===$n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===X4)return l===$n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===Y4)return l===$n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===Z4)return l===$n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===K4)return l===$n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===Q4)return l===$n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===J4)return l===$n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===$4)return l===$n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===e3)return l===$n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===t3)return l===$n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===_1||s===n3||s===i3)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===_1)return l===$n?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===n3)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===i3)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(s===DT||s===r3||s===s3||s===o3)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===_1)return a.COMPRESSED_RED_RGTC1_EXT;if(s===r3)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===s3)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===o3)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===oc?i?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:r}}class uA extends Li{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class wf extends Rn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const hH={type:"move"};class jx{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new wf,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new wf,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ue,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ue),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new wf,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ue,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ue),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const _ of e.hand.values()){const x=t.getJointPose(_,i),y=this._getHandJoint(c,_);x!==null&&(y.matrix.fromArray(x.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),y.matrixWorldNeedsUpdate=!0,y.jointRadius=x.radius),y.visible=x!==null}const u=c.joints["index-finger-tip"],f=c.joints["thumb-tip"],d=u.position.distanceTo(f.position),h=.02,g=.005;c.inputState.pinching&&d>h+g?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&d<=h-g&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(hH)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new wf;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}const fH=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,dH=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class pH{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const r=new yi,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!=i.depthNear||t.depthFar!=i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}render(e,t){if(this.texture!==null){if(this.mesh===null){const i=t.cameras[0].viewport,r=new vo({extensions:{fragDepth:!0},vertexShader:fH,fragmentShader:dH,uniforms:{depthColor:{value:this.texture},depthWidth:{value:i.z},depthHeight:{value:i.w}}});this.mesh=new di(new dl(20,20),r)}e.render(this.mesh,t)}}reset(){this.texture=null,this.mesh=null}}class mH extends hl{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,f=null,d=null,h=null,g=null;const _=new pH,x=t.getContextAttributes();let y=null,M=null;const b=[],A=[],T=new $e;let P=null;const k=new Li;k.layers.enable(1),k.viewport=new gn;const N=new Li;N.layers.enable(2),N.viewport=new gn;const z=[k,N],R=new uA;R.layers.enable(1),R.layers.enable(2);let F=null,V=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(oe){let he=b[oe];return he===void 0&&(he=new jx,b[oe]=he),he.getTargetRaySpace()},this.getControllerGrip=function(oe){let he=b[oe];return he===void 0&&(he=new jx,b[oe]=he),he.getGripSpace()},this.getHand=function(oe){let he=b[oe];return he===void 0&&(he=new jx,b[oe]=he),he.getHandSpace()};function K(oe){const he=A.indexOf(oe.inputSource);if(he===-1)return;const ye=b[he];ye!==void 0&&(ye.update(oe.inputSource,oe.frame,c||o),ye.dispatchEvent({type:oe.type,data:oe.inputSource}))}function W(){r.removeEventListener("select",K),r.removeEventListener("selectstart",K),r.removeEventListener("selectend",K),r.removeEventListener("squeeze",K),r.removeEventListener("squeezestart",K),r.removeEventListener("squeezeend",K),r.removeEventListener("end",W),r.removeEventListener("inputsourceschange",ne);for(let oe=0;oe<b.length;oe++){const he=A[oe];he!==null&&(A[oe]=null,b[oe].disconnect(he))}F=null,V=null,_.reset(),e.setRenderTarget(y),h=null,d=null,f=null,r=null,M=null,ve.stop(),i.isPresenting=!1,e.setPixelRatio(P),e.setSize(T.width,T.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(oe){s=oe,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(oe){a=oe,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(oe){c=oe},this.getBaseLayer=function(){return d!==null?d:h},this.getBinding=function(){return f},this.getFrame=function(){return g},this.getSession=function(){return r},this.setSession=async function(oe){if(r=oe,r!==null){if(y=e.getRenderTarget(),r.addEventListener("select",K),r.addEventListener("selectstart",K),r.addEventListener("selectend",K),r.addEventListener("squeeze",K),r.addEventListener("squeezestart",K),r.addEventListener("squeezeend",K),r.addEventListener("end",W),r.addEventListener("inputsourceschange",ne),x.xrCompatible!==!0&&await t.makeXRCompatible(),P=e.getPixelRatio(),e.getSize(T),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const he={antialias:r.renderState.layers===void 0?x.antialias:!0,alpha:!0,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:s};h=new XRWebGLLayer(r,t,he),r.updateRenderState({baseLayer:h}),e.setPixelRatio(1),e.setSize(h.framebufferWidth,h.framebufferHeight,!1),M=new Ho(h.framebufferWidth,h.framebufferHeight,{format:ts,type:ga,colorSpace:e.outputColorSpace,stencilBuffer:x.stencil})}else{let he=null,ye=null,Me=null;x.depth&&(Me=x.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,he=x.stencil?Hu:ac,ye=x.stencil?oc:Qa);const Pe={colorFormat:t.RGBA8,depthFormat:Me,scaleFactor:s};f=new XRWebGLBinding(r,t),d=f.createProjectionLayer(Pe),r.updateRenderState({layers:[d]}),e.setPixelRatio(1),e.setSize(d.textureWidth,d.textureHeight,!1),M=new Ho(d.textureWidth,d.textureHeight,{format:ts,type:ga,depthTexture:new tS(d.textureWidth,d.textureHeight,ye,void 0,void 0,void 0,void 0,void 0,void 0,he),stencilBuffer:x.stencil,colorSpace:e.outputColorSpace,samples:x.antialias?4:0});const Xe=e.properties.get(M);Xe.__ignoreDepthValues=d.ignoreDepthValues}M.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await r.requestReferenceSpace(a),ve.setContext(r),ve.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function ne(oe){for(let he=0;he<oe.removed.length;he++){const ye=oe.removed[he],Me=A.indexOf(ye);Me>=0&&(A[Me]=null,b[Me].disconnect(ye))}for(let he=0;he<oe.added.length;he++){const ye=oe.added[he];let Me=A.indexOf(ye);if(Me===-1){for(let Xe=0;Xe<b.length;Xe++)if(Xe>=A.length){A.push(ye),Me=Xe;break}else if(A[Xe]===null){A[Xe]=ye,Me=Xe;break}if(Me===-1)break}const Pe=b[Me];Pe&&Pe.connect(ye)}}const re=new ue,de=new ue;function X(oe,he,ye){re.setFromMatrixPosition(he.matrixWorld),de.setFromMatrixPosition(ye.matrixWorld);const Me=re.distanceTo(de),Pe=he.projectionMatrix.elements,Xe=ye.projectionMatrix.elements,ht=Pe[14]/(Pe[10]-1),He=Pe[14]/(Pe[10]+1),ie=(Pe[9]+1)/Pe[5],je=(Pe[9]-1)/Pe[5],ke=(Pe[8]-1)/Pe[0],We=(Xe[8]+1)/Xe[0],Fe=ht*ke,it=ht*We,Ue=Me/(-ke+We),Ye=Ue*-ke;he.matrixWorld.decompose(oe.position,oe.quaternion,oe.scale),oe.translateX(Ye),oe.translateZ(Ue),oe.matrixWorld.compose(oe.position,oe.quaternion,oe.scale),oe.matrixWorldInverse.copy(oe.matrixWorld).invert();const ot=ht+Ue,Q=He+Ue,Z=Fe-Ye,we=it+(Me-Ye),Ee=ie*He/Q*ot,Ne=je*He/Q*ot;oe.projectionMatrix.makePerspective(Z,we,Ee,Ne,ot,Q),oe.projectionMatrixInverse.copy(oe.projectionMatrix).invert()}function $(oe,he){he===null?oe.matrixWorld.copy(oe.matrix):oe.matrixWorld.multiplyMatrices(he.matrixWorld,oe.matrix),oe.matrixWorldInverse.copy(oe.matrixWorld).invert()}this.updateCamera=function(oe){if(r===null)return;_.texture!==null&&(oe.near=_.depthNear,oe.far=_.depthFar),R.near=N.near=k.near=oe.near,R.far=N.far=k.far=oe.far,(F!==R.near||V!==R.far)&&(r.updateRenderState({depthNear:R.near,depthFar:R.far}),F=R.near,V=R.far,k.near=F,k.far=V,N.near=F,N.far=V,k.updateProjectionMatrix(),N.updateProjectionMatrix(),oe.updateProjectionMatrix());const he=oe.parent,ye=R.cameras;$(R,he);for(let Me=0;Me<ye.length;Me++)$(ye[Me],he);ye.length===2?X(R,k,N):R.projectionMatrix.copy(k.projectionMatrix),J(oe,R,he)};function J(oe,he,ye){ye===null?oe.matrix.copy(he.matrixWorld):(oe.matrix.copy(ye.matrixWorld),oe.matrix.invert(),oe.matrix.multiply(he.matrixWorld)),oe.matrix.decompose(oe.position,oe.quaternion,oe.scale),oe.updateMatrixWorld(!0),oe.projectionMatrix.copy(he.projectionMatrix),oe.projectionMatrixInverse.copy(he.projectionMatrixInverse),oe.isPerspectiveCamera&&(oe.fov=Wf*2*Math.atan(1/oe.projectionMatrix.elements[5]),oe.zoom=1)}this.getCamera=function(){return R},this.getFoveation=function(){if(!(d===null&&h===null))return l},this.setFoveation=function(oe){l=oe,d!==null&&(d.fixedFoveation=oe),h!==null&&h.fixedFoveation!==void 0&&(h.fixedFoveation=oe)},this.hasDepthSensing=function(){return _.texture!==null};let j=null;function se(oe,he){if(u=he.getViewerPose(c||o),g=he,u!==null){const ye=u.views;h!==null&&(e.setRenderTargetFramebuffer(M,h.framebuffer),e.setRenderTarget(M));let Me=!1;ye.length!==R.cameras.length&&(R.cameras.length=0,Me=!0);for(let Xe=0;Xe<ye.length;Xe++){const ht=ye[Xe];let He=null;if(h!==null)He=h.getViewport(ht);else{const je=f.getViewSubImage(d,ht);He=je.viewport,Xe===0&&(e.setRenderTargetTextures(M,je.colorTexture,d.ignoreDepthValues?void 0:je.depthStencilTexture),e.setRenderTarget(M))}let ie=z[Xe];ie===void 0&&(ie=new Li,ie.layers.enable(Xe),ie.viewport=new gn,z[Xe]=ie),ie.matrix.fromArray(ht.transform.matrix),ie.matrix.decompose(ie.position,ie.quaternion,ie.scale),ie.projectionMatrix.fromArray(ht.projectionMatrix),ie.projectionMatrixInverse.copy(ie.projectionMatrix).invert(),ie.viewport.set(He.x,He.y,He.width,He.height),Xe===0&&(R.matrix.copy(ie.matrix),R.matrix.decompose(R.position,R.quaternion,R.scale)),Me===!0&&R.cameras.push(ie)}const Pe=r.enabledFeatures;if(Pe&&Pe.includes("depth-sensing")){const Xe=f.getDepthInformation(ye[0]);Xe&&Xe.isValid&&Xe.texture&&_.init(e,Xe,r.renderState)}}for(let ye=0;ye<b.length;ye++){const Me=A[ye],Pe=b[ye];Me!==null&&Pe!==void 0&&Pe.update(Me,he,c||o)}_.render(e,R),j&&j(oe,he),he.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:he}),g=null}const ve=new iA;ve.setAnimationLoop(se),this.setAnimationLoop=function(oe){j=oe},this.dispose=function(){}}}const $c=new qs,gH=new qt;function vH(n,e){function t(x,y){x.matrixAutoUpdate===!0&&x.updateMatrix(),y.value.copy(x.matrix)}function i(x,y){y.color.getRGB(x.fogColor.value,eA(n)),y.isFog?(x.fogNear.value=y.near,x.fogFar.value=y.far):y.isFogExp2&&(x.fogDensity.value=y.density)}function r(x,y,M,b,A){y.isMeshBasicMaterial||y.isMeshLambertMaterial?s(x,y):y.isMeshToonMaterial?(s(x,y),f(x,y)):y.isMeshPhongMaterial?(s(x,y),u(x,y)):y.isMeshStandardMaterial?(s(x,y),d(x,y),y.isMeshPhysicalMaterial&&h(x,y,A)):y.isMeshMatcapMaterial?(s(x,y),g(x,y)):y.isMeshDepthMaterial?s(x,y):y.isMeshDistanceMaterial?(s(x,y),_(x,y)):y.isMeshNormalMaterial?s(x,y):y.isLineBasicMaterial?(o(x,y),y.isLineDashedMaterial&&a(x,y)):y.isPointsMaterial?l(x,y,M,b):y.isSpriteMaterial?c(x,y):y.isShadowMaterial?(x.color.value.copy(y.color),x.opacity.value=y.opacity):y.isShaderMaterial&&(y.uniformsNeedUpdate=!1)}function s(x,y){x.opacity.value=y.opacity,y.color&&x.diffuse.value.copy(y.color),y.emissive&&x.emissive.value.copy(y.emissive).multiplyScalar(y.emissiveIntensity),y.map&&(x.map.value=y.map,t(y.map,x.mapTransform)),y.alphaMap&&(x.alphaMap.value=y.alphaMap,t(y.alphaMap,x.alphaMapTransform)),y.bumpMap&&(x.bumpMap.value=y.bumpMap,t(y.bumpMap,x.bumpMapTransform),x.bumpScale.value=y.bumpScale,y.side===rs&&(x.bumpScale.value*=-1)),y.normalMap&&(x.normalMap.value=y.normalMap,t(y.normalMap,x.normalMapTransform),x.normalScale.value.copy(y.normalScale),y.side===rs&&x.normalScale.value.negate()),y.displacementMap&&(x.displacementMap.value=y.displacementMap,t(y.displacementMap,x.displacementMapTransform),x.displacementScale.value=y.displacementScale,x.displacementBias.value=y.displacementBias),y.emissiveMap&&(x.emissiveMap.value=y.emissiveMap,t(y.emissiveMap,x.emissiveMapTransform)),y.specularMap&&(x.specularMap.value=y.specularMap,t(y.specularMap,x.specularMapTransform)),y.alphaTest>0&&(x.alphaTest.value=y.alphaTest);const M=e.get(y),b=M.envMap,A=M.envMapRotation;if(b&&(x.envMap.value=b,$c.copy(A),$c.x*=-1,$c.y*=-1,$c.z*=-1,b.isCubeTexture&&b.isRenderTargetTexture===!1&&($c.y*=-1,$c.z*=-1),x.envMapRotation.value.setFromMatrix4(gH.makeRotationFromEuler($c)),x.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=y.reflectivity,x.ior.value=y.ior,x.refractionRatio.value=y.refractionRatio),y.lightMap){x.lightMap.value=y.lightMap;const T=n._useLegacyLights===!0?Math.PI:1;x.lightMapIntensity.value=y.lightMapIntensity*T,t(y.lightMap,x.lightMapTransform)}y.aoMap&&(x.aoMap.value=y.aoMap,x.aoMapIntensity.value=y.aoMapIntensity,t(y.aoMap,x.aoMapTransform))}function o(x,y){x.diffuse.value.copy(y.color),x.opacity.value=y.opacity,y.map&&(x.map.value=y.map,t(y.map,x.mapTransform))}function a(x,y){x.dashSize.value=y.dashSize,x.totalSize.value=y.dashSize+y.gapSize,x.scale.value=y.scale}function l(x,y,M,b){x.diffuse.value.copy(y.color),x.opacity.value=y.opacity,x.size.value=y.size*M,x.scale.value=b*.5,y.map&&(x.map.value=y.map,t(y.map,x.uvTransform)),y.alphaMap&&(x.alphaMap.value=y.alphaMap,t(y.alphaMap,x.alphaMapTransform)),y.alphaTest>0&&(x.alphaTest.value=y.alphaTest)}function c(x,y){x.diffuse.value.copy(y.color),x.opacity.value=y.opacity,x.rotation.value=y.rotation,y.map&&(x.map.value=y.map,t(y.map,x.mapTransform)),y.alphaMap&&(x.alphaMap.value=y.alphaMap,t(y.alphaMap,x.alphaMapTransform)),y.alphaTest>0&&(x.alphaTest.value=y.alphaTest)}function u(x,y){x.specular.value.copy(y.specular),x.shininess.value=Math.max(y.shininess,1e-4)}function f(x,y){y.gradientMap&&(x.gradientMap.value=y.gradientMap)}function d(x,y){x.metalness.value=y.metalness,y.metalnessMap&&(x.metalnessMap.value=y.metalnessMap,t(y.metalnessMap,x.metalnessMapTransform)),x.roughness.value=y.roughness,y.roughnessMap&&(x.roughnessMap.value=y.roughnessMap,t(y.roughnessMap,x.roughnessMapTransform)),e.get(y).envMap&&(x.envMapIntensity.value=y.envMapIntensity)}function h(x,y,M){x.ior.value=y.ior,y.sheen>0&&(x.sheenColor.value.copy(y.sheenColor).multiplyScalar(y.sheen),x.sheenRoughness.value=y.sheenRoughness,y.sheenColorMap&&(x.sheenColorMap.value=y.sheenColorMap,t(y.sheenColorMap,x.sheenColorMapTransform)),y.sheenRoughnessMap&&(x.sheenRoughnessMap.value=y.sheenRoughnessMap,t(y.sheenRoughnessMap,x.sheenRoughnessMapTransform))),y.clearcoat>0&&(x.clearcoat.value=y.clearcoat,x.clearcoatRoughness.value=y.clearcoatRoughness,y.clearcoatMap&&(x.clearcoatMap.value=y.clearcoatMap,t(y.clearcoatMap,x.clearcoatMapTransform)),y.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=y.clearcoatRoughnessMap,t(y.clearcoatRoughnessMap,x.clearcoatRoughnessMapTransform)),y.clearcoatNormalMap&&(x.clearcoatNormalMap.value=y.clearcoatNormalMap,t(y.clearcoatNormalMap,x.clearcoatNormalMapTransform),x.clearcoatNormalScale.value.copy(y.clearcoatNormalScale),y.side===rs&&x.clearcoatNormalScale.value.negate())),y.iridescence>0&&(x.iridescence.value=y.iridescence,x.iridescenceIOR.value=y.iridescenceIOR,x.iridescenceThicknessMinimum.value=y.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=y.iridescenceThicknessRange[1],y.iridescenceMap&&(x.iridescenceMap.value=y.iridescenceMap,t(y.iridescenceMap,x.iridescenceMapTransform)),y.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=y.iridescenceThicknessMap,t(y.iridescenceThicknessMap,x.iridescenceThicknessMapTransform))),y.transmission>0&&(x.transmission.value=y.transmission,x.transmissionSamplerMap.value=M.texture,x.transmissionSamplerSize.value.set(M.width,M.height),y.transmissionMap&&(x.transmissionMap.value=y.transmissionMap,t(y.transmissionMap,x.transmissionMapTransform)),x.thickness.value=y.thickness,y.thicknessMap&&(x.thicknessMap.value=y.thicknessMap,t(y.thicknessMap,x.thicknessMapTransform)),x.attenuationDistance.value=y.attenuationDistance,x.attenuationColor.value.copy(y.attenuationColor)),y.anisotropy>0&&(x.anisotropyVector.value.set(y.anisotropy*Math.cos(y.anisotropyRotation),y.anisotropy*Math.sin(y.anisotropyRotation)),y.anisotropyMap&&(x.anisotropyMap.value=y.anisotropyMap,t(y.anisotropyMap,x.anisotropyMapTransform))),x.specularIntensity.value=y.specularIntensity,x.specularColor.value.copy(y.specularColor),y.specularColorMap&&(x.specularColorMap.value=y.specularColorMap,t(y.specularColorMap,x.specularColorMapTransform)),y.specularIntensityMap&&(x.specularIntensityMap.value=y.specularIntensityMap,t(y.specularIntensityMap,x.specularIntensityMapTransform))}function g(x,y){y.matcap&&(x.matcap.value=y.matcap)}function _(x,y){const M=e.get(y).light;x.referencePosition.value.setFromMatrixPosition(M.matrixWorld),x.nearDistance.value=M.shadow.camera.near,x.farDistance.value=M.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function yH(n,e,t,i){let r={},s={},o=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(M,b){const A=b.program;i.uniformBlockBinding(M,A)}function c(M,b){let A=r[M.id];A===void 0&&(g(M),A=u(M),r[M.id]=A,M.addEventListener("dispose",x));const T=b.program;i.updateUBOMapping(M,T);const P=e.render.frame;s[M.id]!==P&&(d(M),s[M.id]=P)}function u(M){const b=f();M.__bindingPointIndex=b;const A=n.createBuffer(),T=M.__size,P=M.usage;return n.bindBuffer(n.UNIFORM_BUFFER,A),n.bufferData(n.UNIFORM_BUFFER,T,P),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,b,A),A}function f(){for(let M=0;M<a;M++)if(o.indexOf(M)===-1)return o.push(M),M;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(M){const b=r[M.id],A=M.uniforms,T=M.__cache;n.bindBuffer(n.UNIFORM_BUFFER,b);for(let P=0,k=A.length;P<k;P++){const N=Array.isArray(A[P])?A[P]:[A[P]];for(let z=0,R=N.length;z<R;z++){const F=N[z];if(h(F,P,z,T)===!0){const V=F.__offset,K=Array.isArray(F.value)?F.value:[F.value];let W=0;for(let ne=0;ne<K.length;ne++){const re=K[ne],de=_(re);typeof re=="number"||typeof re=="boolean"?(F.__data[0]=re,n.bufferSubData(n.UNIFORM_BUFFER,V+W,F.__data)):re.isMatrix3?(F.__data[0]=re.elements[0],F.__data[1]=re.elements[1],F.__data[2]=re.elements[2],F.__data[3]=0,F.__data[4]=re.elements[3],F.__data[5]=re.elements[4],F.__data[6]=re.elements[5],F.__data[7]=0,F.__data[8]=re.elements[6],F.__data[9]=re.elements[7],F.__data[10]=re.elements[8],F.__data[11]=0):(re.toArray(F.__data,W),W+=de.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,V,F.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function h(M,b,A,T){const P=M.value,k=b+"_"+A;if(T[k]===void 0)return typeof P=="number"||typeof P=="boolean"?T[k]=P:T[k]=P.clone(),!0;{const N=T[k];if(typeof P=="number"||typeof P=="boolean"){if(N!==P)return T[k]=P,!0}else if(N.equals(P)===!1)return N.copy(P),!0}return!1}function g(M){const b=M.uniforms;let A=0;const T=16;for(let k=0,N=b.length;k<N;k++){const z=Array.isArray(b[k])?b[k]:[b[k]];for(let R=0,F=z.length;R<F;R++){const V=z[R],K=Array.isArray(V.value)?V.value:[V.value];for(let W=0,ne=K.length;W<ne;W++){const re=K[W],de=_(re),X=A%T;X!==0&&T-X<de.boundary&&(A+=T-X),V.__data=new Float32Array(de.storage/Float32Array.BYTES_PER_ELEMENT),V.__offset=A,A+=de.storage}}}const P=A%T;return P>0&&(A+=T-P),M.__size=A,M.__cache={},this}function _(M){const b={boundary:0,storage:0};return typeof M=="number"||typeof M=="boolean"?(b.boundary=4,b.storage=4):M.isVector2?(b.boundary=8,b.storage=8):M.isVector3||M.isColor?(b.boundary=16,b.storage=12):M.isVector4?(b.boundary=16,b.storage=16):M.isMatrix3?(b.boundary=48,b.storage=48):M.isMatrix4?(b.boundary=64,b.storage=64):M.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",M),b}function x(M){const b=M.target;b.removeEventListener("dispose",x);const A=o.indexOf(b.__bindingPointIndex);o.splice(A,1),n.deleteBuffer(r[b.id]),delete r[b.id],delete s[b.id]}function y(){for(const M in r)n.deleteBuffer(r[M]);o=[],r={},s={}}return{bind:l,update:c,dispose:y}}class nS{constructor(e={}){const{canvas:t=KT(),context:i=null,depth:r=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:f=!1}=e;this.isWebGLRenderer=!0;let d;i!==null?d=i.getContextAttributes().alpha:d=o;const h=new Uint32Array(4),g=new Int32Array(4);let _=null,x=null;const y=[],M=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=so,this._useLegacyLights=!1,this.toneMapping=ma,this.toneMappingExposure=1;const b=this;let A=!1,T=0,P=0,k=null,N=-1,z=null;const R=new gn,F=new gn;let V=null;const K=new Ct(0);let W=0,ne=t.width,re=t.height,de=1,X=null,$=null;const J=new gn(0,0,ne,re),j=new gn(0,0,ne,re);let se=!1;const ve=new jp;let oe=!1,he=!1,ye=null;const Me=new qt,Pe=new $e,Xe=new ue,ht={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function He(){return k===null?de:1}let ie=i;function je(le,Se){for(let Ie=0;Ie<le.length;Ie++){const Be=le[Ie],ze=t.getContext(Be,Se);if(ze!==null)return ze}return null}try{const le={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Bp}`),t.addEventListener("webglcontextlost",vt,!1),t.addEventListener("webglcontextrestored",xe,!1),t.addEventListener("webglcontextcreationerror",gt,!1),ie===null){const Se=["webgl2","webgl","experimental-webgl"];if(b.isWebGL1Renderer===!0&&Se.shift(),ie=je(Se,le),ie===null)throw je(Se)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&ie instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),ie.getShaderPrecisionFormat===void 0&&(ie.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(le){throw console.error("THREE.WebGLRenderer: "+le.message),le}let ke,We,Fe,it,Ue,Ye,ot,Q,Z,we,Ee,Ne,Ze,lt,ft,qe,st,St,nt,Lt,ct,be,fe,De;function mt(){ke=new Cz(ie),We=new wz(ie,ke,e),ke.init(We),be=new cA(ie,ke,We),Fe=new cH(ie,ke,We),it=new kz(ie),Ue=new QB,Ye=new uH(ie,ke,Fe,Ue,We,be,it),ot=new Mz(b),Q=new Az(b),Z=new FO(ie,We),fe=new _z(ie,ke,Z,We),we=new Pz(ie,Z,it,fe),Ee=new Dz(ie,we,Z,it),nt=new Iz(ie,We,Ye),qe=new bz(Ue),Ne=new KB(b,ot,Q,ke,We,fe,qe),Ze=new vH(b,Ue),lt=new $B,ft=new sH(ke,We),St=new xz(b,ot,Q,Fe,Ee,d,l),st=new lH(b,Ee,We),De=new yH(ie,it,We,Fe),Lt=new Sz(ie,ke,it,We),ct=new Rz(ie,ke,it,We),it.programs=Ne.programs,b.capabilities=We,b.extensions=ke,b.properties=Ue,b.renderLists=lt,b.shadowMap=st,b.state=Fe,b.info=it}mt();const pt=new mH(b,ie);this.xr=pt,this.getContext=function(){return ie},this.getContextAttributes=function(){return ie.getContextAttributes()},this.forceContextLoss=function(){const le=ke.get("WEBGL_lose_context");le&&le.loseContext()},this.forceContextRestore=function(){const le=ke.get("WEBGL_lose_context");le&&le.restoreContext()},this.getPixelRatio=function(){return de},this.setPixelRatio=function(le){le!==void 0&&(de=le,this.setSize(ne,re,!1))},this.getSize=function(le){return le.set(ne,re)},this.setSize=function(le,Se,Ie=!0){if(pt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ne=le,re=Se,t.width=Math.floor(le*de),t.height=Math.floor(Se*de),Ie===!0&&(t.style.width=le+"px",t.style.height=Se+"px"),this.setViewport(0,0,le,Se)},this.getDrawingBufferSize=function(le){return le.set(ne*de,re*de).floor()},this.setDrawingBufferSize=function(le,Se,Ie){ne=le,re=Se,de=Ie,t.width=Math.floor(le*Ie),t.height=Math.floor(Se*Ie),this.setViewport(0,0,le,Se)},this.getCurrentViewport=function(le){return le.copy(R)},this.getViewport=function(le){return le.copy(J)},this.setViewport=function(le,Se,Ie,Be){le.isVector4?J.set(le.x,le.y,le.z,le.w):J.set(le,Se,Ie,Be),Fe.viewport(R.copy(J).multiplyScalar(de).round())},this.getScissor=function(le){return le.copy(j)},this.setScissor=function(le,Se,Ie,Be){le.isVector4?j.set(le.x,le.y,le.z,le.w):j.set(le,Se,Ie,Be),Fe.scissor(F.copy(j).multiplyScalar(de).round())},this.getScissorTest=function(){return se},this.setScissorTest=function(le){Fe.setScissorTest(se=le)},this.setOpaqueSort=function(le){X=le},this.setTransparentSort=function(le){$=le},this.getClearColor=function(le){return le.copy(St.getClearColor())},this.setClearColor=function(){St.setClearColor.apply(St,arguments)},this.getClearAlpha=function(){return St.getClearAlpha()},this.setClearAlpha=function(){St.setClearAlpha.apply(St,arguments)},this.clear=function(le=!0,Se=!0,Ie=!0){let Be=0;if(le){let ze=!1;if(k!==null){const ae=k.texture.format;ze=ae===W_||ae===G_||ae===V_}if(ze){const ae=k.texture.type,Rt=ae===ga||ae===Qa||ae===Nv||ae===oc||ae===z_||ae===B_,ge=St.getClearColor(),ut=St.getClearAlpha(),Vt=ge.r,Xt=ge.g,Ut=ge.b;Rt?(h[0]=Vt,h[1]=Xt,h[2]=Ut,h[3]=ut,ie.clearBufferuiv(ie.COLOR,0,h)):(g[0]=Vt,g[1]=Xt,g[2]=Ut,g[3]=ut,ie.clearBufferiv(ie.COLOR,0,g))}else Be|=ie.COLOR_BUFFER_BIT}Se&&(Be|=ie.DEPTH_BUFFER_BIT),Ie&&(Be|=ie.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ie.clear(Be)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",vt,!1),t.removeEventListener("webglcontextrestored",xe,!1),t.removeEventListener("webglcontextcreationerror",gt,!1),lt.dispose(),ft.dispose(),Ue.dispose(),ot.dispose(),Q.dispose(),Ee.dispose(),fe.dispose(),De.dispose(),Ne.dispose(),pt.dispose(),pt.removeEventListener("sessionstart",an),pt.removeEventListener("sessionend",Gt),ye&&(ye.dispose(),ye=null),hn.stop()};function vt(le){le.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),A=!0}function xe(){console.log("THREE.WebGLRenderer: Context Restored."),A=!1;const le=it.autoReset,Se=st.enabled,Ie=st.autoUpdate,Be=st.needsUpdate,ze=st.type;mt(),it.autoReset=le,st.enabled=Se,st.autoUpdate=Ie,st.needsUpdate=Be,st.type=ze}function gt(le){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",le.statusMessage)}function Re(le){const Se=le.target;Se.removeEventListener("dispose",Re),et(Se)}function et(le){rt(le),Ue.remove(le)}function rt(le){const Se=Ue.get(le).programs;Se!==void 0&&(Se.forEach(function(Ie){Ne.releaseProgram(Ie)}),le.isShaderMaterial&&Ne.releaseShaderCache(le))}this.renderBufferDirect=function(le,Se,Ie,Be,ze,ae){Se===null&&(Se=ht);const Rt=ze.isMesh&&ze.matrixWorld.determinant()<0,ge=kn(le,Se,Ie,Be,ze);Fe.setMaterial(Be,Rt);let ut=Ie.index,Vt=1;if(Be.wireframe===!0){if(ut=we.getWireframeAttribute(Ie),ut===void 0)return;Vt=2}const Xt=Ie.drawRange,Ut=Ie.attributes.position;let Tt=Xt.start*Vt,li=(Xt.start+Xt.count)*Vt;ae!==null&&(Tt=Math.max(Tt,ae.start*Vt),li=Math.min(li,(ae.start+ae.count)*Vt)),ut!==null?(Tt=Math.max(Tt,0),li=Math.min(li,ut.count)):Ut!=null&&(Tt=Math.max(Tt,0),li=Math.min(li,Ut.count));const _n=li-Tt;if(_n<0||_n===1/0)return;fe.setup(ze,Be,ge,Ie,ut);let Qn,Bt=Lt;if(ut!==null&&(Qn=Z.get(ut),Bt=ct,Bt.setIndex(Qn)),ze.isMesh)Be.wireframe===!0?(Fe.setLineWidth(Be.wireframeLinewidth*He()),Bt.setMode(ie.LINES)):Bt.setMode(ie.TRIANGLES);else if(ze.isLine){let At=Be.linewidth;At===void 0&&(At=1),Fe.setLineWidth(At*He()),ze.isLineSegments?Bt.setMode(ie.LINES):ze.isLineLoop?Bt.setMode(ie.LINE_LOOP):Bt.setMode(ie.LINE_STRIP)}else ze.isPoints?Bt.setMode(ie.POINTS):ze.isSprite&&Bt.setMode(ie.TRIANGLES);if(ze.isBatchedMesh)Bt.renderMultiDraw(ze._multiDrawStarts,ze._multiDrawCounts,ze._multiDrawCount);else if(ze.isInstancedMesh)Bt.renderInstances(Tt,_n,ze.count);else if(Ie.isInstancedBufferGeometry){const At=Ie._maxInstanceCount!==void 0?Ie._maxInstanceCount:1/0,zn=Math.min(Ie.instanceCount,At);Bt.renderInstances(Tt,_n,zn)}else Bt.render(Tt,_n)};function wt(le,Se,Ie){le.transparent===!0&&le.side===Oo&&le.forceSinglePass===!1?(le.side=rs,le.needsUpdate=!0,tt(le,Se,Ie),le.side=ol,le.needsUpdate=!0,tt(le,Se,Ie),le.side=Oo):tt(le,Se,Ie)}this.compile=function(le,Se,Ie=null){Ie===null&&(Ie=le),x=ft.get(Ie),x.init(),M.push(x),Ie.traverseVisible(function(ze){ze.isLight&&ze.layers.test(Se.layers)&&(x.pushLight(ze),ze.castShadow&&x.pushShadow(ze))}),le!==Ie&&le.traverseVisible(function(ze){ze.isLight&&ze.layers.test(Se.layers)&&(x.pushLight(ze),ze.castShadow&&x.pushShadow(ze))}),x.setupLights(b._useLegacyLights);const Be=new Set;return le.traverse(function(ze){const ae=ze.material;if(ae)if(Array.isArray(ae))for(let Rt=0;Rt<ae.length;Rt++){const ge=ae[Rt];wt(ge,Ie,ze),Be.add(ge)}else wt(ae,Ie,ze),Be.add(ae)}),M.pop(),x=null,Be},this.compileAsync=function(le,Se,Ie=null){const Be=this.compile(le,Se,Ie);return new Promise(ze=>{function ae(){if(Be.forEach(function(Rt){Ue.get(Rt).currentProgram.isReady()&&Be.delete(Rt)}),Be.size===0){ze(le);return}setTimeout(ae,10)}ke.get("KHR_parallel_shader_compile")!==null?ae():setTimeout(ae,10)})};let _t=null;function Ht(le){_t&&_t(le)}function an(){hn.stop()}function Gt(){hn.start()}const hn=new iA;hn.setAnimationLoop(Ht),typeof self<"u"&&hn.setContext(self),this.setAnimationLoop=function(le){_t=le,pt.setAnimationLoop(le),le===null?hn.stop():hn.start()},pt.addEventListener("sessionstart",an),pt.addEventListener("sessionend",Gt),this.render=function(le,Se){if(Se!==void 0&&Se.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(A===!0)return;le.matrixWorldAutoUpdate===!0&&le.updateMatrixWorld(),Se.parent===null&&Se.matrixWorldAutoUpdate===!0&&Se.updateMatrixWorld(),pt.enabled===!0&&pt.isPresenting===!0&&(pt.cameraAutoUpdate===!0&&pt.updateCamera(Se),Se=pt.getCamera()),le.isScene===!0&&le.onBeforeRender(b,le,Se,k),x=ft.get(le,M.length),x.init(),M.push(x),Me.multiplyMatrices(Se.projectionMatrix,Se.matrixWorldInverse),ve.setFromProjectionMatrix(Me),he=this.localClippingEnabled,oe=qe.init(this.clippingPlanes,he),_=lt.get(le,y.length),_.init(),y.push(_),Kn(le,Se,0,b.sortObjects),_.finish(),b.sortObjects===!0&&_.sort(X,$),this.info.render.frame++,oe===!0&&qe.beginShadows();const Ie=x.state.shadowsArray;if(st.render(Ie,le,Se),oe===!0&&qe.endShadows(),this.info.autoReset===!0&&this.info.reset(),(pt.enabled===!1||pt.isPresenting===!1||pt.hasDepthSensing()===!1)&&St.render(_,le),x.setupLights(b._useLegacyLights),Se.isArrayCamera){const Be=Se.cameras;for(let ze=0,ae=Be.length;ze<ae;ze++){const Rt=Be[ze];Gi(_,le,Rt,Rt.viewport)}}else Gi(_,le,Se);k!==null&&(Ye.updateMultisampleRenderTarget(k),Ye.updateRenderTargetMipmap(k)),le.isScene===!0&&le.onAfterRender(b,le,Se),fe.resetDefaultState(),N=-1,z=null,M.pop(),M.length>0?x=M[M.length-1]:x=null,y.pop(),y.length>0?_=y[y.length-1]:_=null};function Kn(le,Se,Ie,Be){if(le.visible===!1)return;if(le.layers.test(Se.layers)){if(le.isGroup)Ie=le.renderOrder;else if(le.isLOD)le.autoUpdate===!0&&le.update(Se);else if(le.isLight)x.pushLight(le),le.castShadow&&x.pushShadow(le);else if(le.isSprite){if(!le.frustumCulled||ve.intersectsSprite(le)){Be&&Xe.setFromMatrixPosition(le.matrixWorld).applyMatrix4(Me);const Rt=Ee.update(le),ge=le.material;ge.visible&&_.push(le,Rt,ge,Ie,Xe.z,null)}}else if((le.isMesh||le.isLine||le.isPoints)&&(!le.frustumCulled||ve.intersectsObject(le))){const Rt=Ee.update(le),ge=le.material;if(Be&&(le.boundingSphere!==void 0?(le.boundingSphere===null&&le.computeBoundingSphere(),Xe.copy(le.boundingSphere.center)):(Rt.boundingSphere===null&&Rt.computeBoundingSphere(),Xe.copy(Rt.boundingSphere.center)),Xe.applyMatrix4(le.matrixWorld).applyMatrix4(Me)),Array.isArray(ge)){const ut=Rt.groups;for(let Vt=0,Xt=ut.length;Vt<Xt;Vt++){const Ut=ut[Vt],Tt=ge[Ut.materialIndex];Tt&&Tt.visible&&_.push(le,Rt,Tt,Ie,Xe.z,Ut)}}else ge.visible&&_.push(le,Rt,ge,Ie,Xe.z,null)}}const ae=le.children;for(let Rt=0,ge=ae.length;Rt<ge;Rt++)Kn(ae[Rt],Se,Ie,Be)}function Gi(le,Se,Ie,Be){const ze=le.opaque,ae=le.transmissive,Rt=le.transparent;x.setupLightsView(Ie),oe===!0&&qe.setGlobalState(b.clippingPlanes,Ie),ae.length>0&&fn(ze,ae,Se,Ie),Be&&Fe.viewport(R.copy(Be)),ze.length>0&&D(ze,Se,Ie),ae.length>0&&D(ae,Se,Ie),Rt.length>0&&D(Rt,Se,Ie),Fe.buffers.depth.setTest(!0),Fe.buffers.depth.setMask(!0),Fe.buffers.color.setMask(!0),Fe.setPolygonOffset(!1)}function fn(le,Se,Ie,Be){if((Ie.isScene===!0?Ie.overrideMaterial:null)!==null)return;const ae=We.isWebGL2;ye===null&&(ye=new Ho(1,1,{generateMipmaps:!0,type:ke.has("EXT_color_buffer_half_float")?Gf:ga,minFilter:ua,samples:ae?4:0})),b.getDrawingBufferSize(Pe),ae?ye.setSize(Pe.x,Pe.y):ye.setSize(lv(Pe.x),lv(Pe.y));const Rt=b.getRenderTarget();b.setRenderTarget(ye),b.getClearColor(K),W=b.getClearAlpha(),W<1&&b.setClearColor(16777215,.5),b.clear();const ge=b.toneMapping;b.toneMapping=ma,D(le,Ie,Be),Ye.updateMultisampleRenderTarget(ye),Ye.updateRenderTargetMipmap(ye);let ut=!1;for(let Vt=0,Xt=Se.length;Vt<Xt;Vt++){const Ut=Se[Vt],Tt=Ut.object,li=Ut.geometry,_n=Ut.material,Qn=Ut.group;if(_n.side===Oo&&Tt.layers.test(Be.layers)){const Bt=_n.side;_n.side=rs,_n.needsUpdate=!0,B(Tt,Ie,Be,li,_n,Qn),_n.side=Bt,_n.needsUpdate=!0,ut=!0}}ut===!0&&(Ye.updateMultisampleRenderTarget(ye),Ye.updateRenderTargetMipmap(ye)),b.setRenderTarget(Rt),b.setClearColor(K,W),b.toneMapping=ge}function D(le,Se,Ie){const Be=Se.isScene===!0?Se.overrideMaterial:null;for(let ze=0,ae=le.length;ze<ae;ze++){const Rt=le[ze],ge=Rt.object,ut=Rt.geometry,Vt=Be===null?Rt.material:Be,Xt=Rt.group;ge.layers.test(Ie.layers)&&B(ge,Se,Ie,ut,Vt,Xt)}}function B(le,Se,Ie,Be,ze,ae){le.onBeforeRender(b,Se,Ie,Be,ze,ae),le.modelViewMatrix.multiplyMatrices(Ie.matrixWorldInverse,le.matrixWorld),le.normalMatrix.getNormalMatrix(le.modelViewMatrix),ze.onBeforeRender(b,Se,Ie,Be,le,ae),ze.transparent===!0&&ze.side===Oo&&ze.forceSinglePass===!1?(ze.side=rs,ze.needsUpdate=!0,b.renderBufferDirect(Ie,Se,Be,ze,le,ae),ze.side=ol,ze.needsUpdate=!0,b.renderBufferDirect(Ie,Se,Be,ze,le,ae),ze.side=Oo):b.renderBufferDirect(Ie,Se,Be,ze,le,ae),le.onAfterRender(b,Se,Ie,Be,ze,ae)}function tt(le,Se,Ie){Se.isScene!==!0&&(Se=ht);const Be=Ue.get(le),ze=x.state.lights,ae=x.state.shadowsArray,Rt=ze.state.version,ge=Ne.getParameters(le,ze.state,ae,Se,Ie),ut=Ne.getProgramCacheKey(ge);let Vt=Be.programs;Be.environment=le.isMeshStandardMaterial?Se.environment:null,Be.fog=Se.fog,Be.envMap=(le.isMeshStandardMaterial?Q:ot).get(le.envMap||Be.environment),Be.envMapRotation=Be.environment!==null&&le.envMap===null?Se.environmentRotation:le.envMapRotation,Vt===void 0&&(le.addEventListener("dispose",Re),Vt=new Map,Be.programs=Vt);let Xt=Vt.get(ut);if(Xt!==void 0){if(Be.currentProgram===Xt&&Be.lightsStateVersion===Rt)return me(le,ge),Xt}else ge.uniforms=Ne.getUniforms(le),le.onBuild(Ie,ge,b),le.onBeforeCompile(ge,b),Xt=Ne.acquireProgram(ge,ut),Vt.set(ut,Xt),Be.uniforms=ge.uniforms;const Ut=Be.uniforms;return(!le.isShaderMaterial&&!le.isRawShaderMaterial||le.clipping===!0)&&(Ut.clippingPlanes=qe.uniform),me(le,ge),Be.needsLights=Mi(le),Be.lightsStateVersion=Rt,Be.needsLights&&(Ut.ambientLightColor.value=ze.state.ambient,Ut.lightProbe.value=ze.state.probe,Ut.directionalLights.value=ze.state.directional,Ut.directionalLightShadows.value=ze.state.directionalShadow,Ut.spotLights.value=ze.state.spot,Ut.spotLightShadows.value=ze.state.spotShadow,Ut.rectAreaLights.value=ze.state.rectArea,Ut.ltc_1.value=ze.state.rectAreaLTC1,Ut.ltc_2.value=ze.state.rectAreaLTC2,Ut.pointLights.value=ze.state.point,Ut.pointLightShadows.value=ze.state.pointShadow,Ut.hemisphereLights.value=ze.state.hemi,Ut.directionalShadowMap.value=ze.state.directionalShadowMap,Ut.directionalShadowMatrix.value=ze.state.directionalShadowMatrix,Ut.spotShadowMap.value=ze.state.spotShadowMap,Ut.spotLightMatrix.value=ze.state.spotLightMatrix,Ut.spotLightMap.value=ze.state.spotLightMap,Ut.pointShadowMap.value=ze.state.pointShadowMap,Ut.pointShadowMatrix.value=ze.state.pointShadowMatrix),Be.currentProgram=Xt,Be.uniformsList=null,Xt}function Y(le){if(le.uniformsList===null){const Se=le.currentProgram.getUniforms();le.uniformsList=w1.seqWithValue(Se.seq,le.uniforms)}return le.uniformsList}function me(le,Se){const Ie=Ue.get(le);Ie.outputColorSpace=Se.outputColorSpace,Ie.batching=Se.batching,Ie.instancing=Se.instancing,Ie.instancingColor=Se.instancingColor,Ie.instancingMorph=Se.instancingMorph,Ie.skinning=Se.skinning,Ie.morphTargets=Se.morphTargets,Ie.morphNormals=Se.morphNormals,Ie.morphColors=Se.morphColors,Ie.morphTargetsCount=Se.morphTargetsCount,Ie.numClippingPlanes=Se.numClippingPlanes,Ie.numIntersection=Se.numClipIntersection,Ie.vertexAlphas=Se.vertexAlphas,Ie.vertexTangents=Se.vertexTangents,Ie.toneMapping=Se.toneMapping}function kn(le,Se,Ie,Be,ze){Se.isScene!==!0&&(Se=ht),Ye.resetTextureUnits();const ae=Se.fog,Rt=Be.isMeshStandardMaterial?Se.environment:null,ge=k===null?b.outputColorSpace:k.isXRRenderTarget===!0?k.texture.colorSpace:ul,ut=(Be.isMeshStandardMaterial?Q:ot).get(Be.envMap||Rt),Vt=Be.vertexColors===!0&&!!Ie.attributes.color&&Ie.attributes.color.itemSize===4,Xt=!!Ie.attributes.tangent&&(!!Be.normalMap||Be.anisotropy>0),Ut=!!Ie.morphAttributes.position,Tt=!!Ie.morphAttributes.normal,li=!!Ie.morphAttributes.color;let _n=ma;Be.toneMapped&&(k===null||k.isXRRenderTarget===!0)&&(_n=b.toneMapping);const Qn=Ie.morphAttributes.position||Ie.morphAttributes.normal||Ie.morphAttributes.color,Bt=Qn!==void 0?Qn.length:0,At=Ue.get(Be),zn=x.state.lights;if(oe===!0&&(he===!0||le!==z)){const pi=le===z&&Be.id===N;qe.setState(Be,le,pi)}let Yt=!1;Be.version===At.__version?(At.needsLights&&At.lightsStateVersion!==zn.state.version||At.outputColorSpace!==ge||ze.isBatchedMesh&&At.batching===!1||!ze.isBatchedMesh&&At.batching===!0||ze.isInstancedMesh&&At.instancing===!1||!ze.isInstancedMesh&&At.instancing===!0||ze.isSkinnedMesh&&At.skinning===!1||!ze.isSkinnedMesh&&At.skinning===!0||ze.isInstancedMesh&&At.instancingColor===!0&&ze.instanceColor===null||ze.isInstancedMesh&&At.instancingColor===!1&&ze.instanceColor!==null||ze.isInstancedMesh&&At.instancingMorph===!0&&ze.morphTexture===null||ze.isInstancedMesh&&At.instancingMorph===!1&&ze.morphTexture!==null||At.envMap!==ut||Be.fog===!0&&At.fog!==ae||At.numClippingPlanes!==void 0&&(At.numClippingPlanes!==qe.numPlanes||At.numIntersection!==qe.numIntersection)||At.vertexAlphas!==Vt||At.vertexTangents!==Xt||At.morphTargets!==Ut||At.morphNormals!==Tt||At.morphColors!==li||At.toneMapping!==_n||We.isWebGL2===!0&&At.morphTargetsCount!==Bt)&&(Yt=!0):(Yt=!0,At.__version=Be.version);let jn=At.currentProgram;Yt===!0&&(jn=tt(Be,Se,ze));let Vr=!1,Ii=!1,ci=!1;const Tn=jn.getUniforms(),Bn=At.uniforms;if(Fe.useProgram(jn.program)&&(Vr=!0,Ii=!0,ci=!0),Be.id!==N&&(N=Be.id,Ii=!0),Vr||z!==le){Tn.setValue(ie,"projectionMatrix",le.projectionMatrix),Tn.setValue(ie,"viewMatrix",le.matrixWorldInverse);const pi=Tn.map.cameraPosition;pi!==void 0&&pi.setValue(ie,Xe.setFromMatrixPosition(le.matrixWorld)),We.logarithmicDepthBuffer&&Tn.setValue(ie,"logDepthBufFC",2/(Math.log(le.far+1)/Math.LN2)),(Be.isMeshPhongMaterial||Be.isMeshToonMaterial||Be.isMeshLambertMaterial||Be.isMeshBasicMaterial||Be.isMeshStandardMaterial||Be.isShaderMaterial)&&Tn.setValue(ie,"isOrthographic",le.isOrthographicCamera===!0),z!==le&&(z=le,Ii=!0,ci=!0)}if(ze.isSkinnedMesh){Tn.setOptional(ie,ze,"bindMatrix"),Tn.setOptional(ie,ze,"bindMatrixInverse");const pi=ze.skeleton;pi&&(We.floatVertexTextures?(pi.boneTexture===null&&pi.computeBoneTexture(),Tn.setValue(ie,"boneTexture",pi.boneTexture,Ye)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}ze.isBatchedMesh&&(Tn.setOptional(ie,ze,"batchingTexture"),Tn.setValue(ie,"batchingTexture",ze._matricesTexture,Ye));const As=Ie.morphAttributes;if((As.position!==void 0||As.normal!==void 0||As.color!==void 0&&We.isWebGL2===!0)&&nt.update(ze,Ie,jn),(Ii||At.receiveShadow!==ze.receiveShadow)&&(At.receiveShadow=ze.receiveShadow,Tn.setValue(ie,"receiveShadow",ze.receiveShadow)),Be.isMeshGouraudMaterial&&Be.envMap!==null&&(Bn.envMap.value=ut,Bn.flipEnvMap.value=ut.isCubeTexture&&ut.isRenderTargetTexture===!1?-1:1),Ii&&(Tn.setValue(ie,"toneMappingExposure",b.toneMappingExposure),At.needsLights&&Et(Bn,ci),ae&&Be.fog===!0&&Ze.refreshFogUniforms(Bn,ae),Ze.refreshMaterialUniforms(Bn,Be,de,re,ye),w1.upload(ie,Y(At),Bn,Ye)),Be.isShaderMaterial&&Be.uniformsNeedUpdate===!0&&(w1.upload(ie,Y(At),Bn,Ye),Be.uniformsNeedUpdate=!1),Be.isSpriteMaterial&&Tn.setValue(ie,"center",ze.center),Tn.setValue(ie,"modelViewMatrix",ze.modelViewMatrix),Tn.setValue(ie,"normalMatrix",ze.normalMatrix),Tn.setValue(ie,"modelMatrix",ze.matrixWorld),Be.isShaderMaterial||Be.isRawShaderMaterial){const pi=Be.uniformsGroups;for(let Wi=0,er=pi.length;Wi<er;Wi++)if(We.isWebGL2){const yo=pi[Wi];De.update(yo,jn),De.bind(yo,jn)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return jn}function Et(le,Se){le.ambientLightColor.needsUpdate=Se,le.lightProbe.needsUpdate=Se,le.directionalLights.needsUpdate=Se,le.directionalLightShadows.needsUpdate=Se,le.pointLights.needsUpdate=Se,le.pointLightShadows.needsUpdate=Se,le.spotLights.needsUpdate=Se,le.spotLightShadows.needsUpdate=Se,le.rectAreaLights.needsUpdate=Se,le.hemisphereLights.needsUpdate=Se}function Mi(le){return le.isMeshLambertMaterial||le.isMeshToonMaterial||le.isMeshPhongMaterial||le.isMeshStandardMaterial||le.isShadowMaterial||le.isShaderMaterial&&le.lights===!0}this.getActiveCubeFace=function(){return T},this.getActiveMipmapLevel=function(){return P},this.getRenderTarget=function(){return k},this.setRenderTargetTextures=function(le,Se,Ie){Ue.get(le.texture).__webglTexture=Se,Ue.get(le.depthTexture).__webglTexture=Ie;const Be=Ue.get(le);Be.__hasExternalTextures=!0,Be.__autoAllocateDepthBuffer=Ie===void 0,Be.__autoAllocateDepthBuffer||ke.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Be.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(le,Se){const Ie=Ue.get(le);Ie.__webglFramebuffer=Se,Ie.__useDefaultFramebuffer=Se===void 0},this.setRenderTarget=function(le,Se=0,Ie=0){k=le,T=Se,P=Ie;let Be=!0,ze=null,ae=!1,Rt=!1;if(le){const ut=Ue.get(le);ut.__useDefaultFramebuffer!==void 0?(Fe.bindFramebuffer(ie.FRAMEBUFFER,null),Be=!1):ut.__webglFramebuffer===void 0?Ye.setupRenderTarget(le):ut.__hasExternalTextures&&Ye.rebindTextures(le,Ue.get(le.texture).__webglTexture,Ue.get(le.depthTexture).__webglTexture);const Vt=le.texture;(Vt.isData3DTexture||Vt.isDataArrayTexture||Vt.isCompressedArrayTexture)&&(Rt=!0);const Xt=Ue.get(le).__webglFramebuffer;le.isWebGLCubeRenderTarget?(Array.isArray(Xt[Se])?ze=Xt[Se][Ie]:ze=Xt[Se],ae=!0):We.isWebGL2&&le.samples>0&&Ye.useMultisampledRTT(le)===!1?ze=Ue.get(le).__webglMultisampledFramebuffer:Array.isArray(Xt)?ze=Xt[Ie]:ze=Xt,R.copy(le.viewport),F.copy(le.scissor),V=le.scissorTest}else R.copy(J).multiplyScalar(de).floor(),F.copy(j).multiplyScalar(de).floor(),V=se;if(Fe.bindFramebuffer(ie.FRAMEBUFFER,ze)&&We.drawBuffers&&Be&&Fe.drawBuffers(le,ze),Fe.viewport(R),Fe.scissor(F),Fe.setScissorTest(V),ae){const ut=Ue.get(le.texture);ie.framebufferTexture2D(ie.FRAMEBUFFER,ie.COLOR_ATTACHMENT0,ie.TEXTURE_CUBE_MAP_POSITIVE_X+Se,ut.__webglTexture,Ie)}else if(Rt){const ut=Ue.get(le.texture),Vt=Se||0;ie.framebufferTextureLayer(ie.FRAMEBUFFER,ie.COLOR_ATTACHMENT0,ut.__webglTexture,Ie||0,Vt)}N=-1},this.readRenderTargetPixels=function(le,Se,Ie,Be,ze,ae,Rt){if(!(le&&le.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ge=Ue.get(le).__webglFramebuffer;if(le.isWebGLCubeRenderTarget&&Rt!==void 0&&(ge=ge[Rt]),ge){Fe.bindFramebuffer(ie.FRAMEBUFFER,ge);try{const ut=le.texture,Vt=ut.format,Xt=ut.type;if(Vt!==ts&&be.convert(Vt)!==ie.getParameter(ie.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Ut=Xt===Gf&&(ke.has("EXT_color_buffer_half_float")||We.isWebGL2&&ke.has("EXT_color_buffer_float"));if(Xt!==ga&&be.convert(Xt)!==ie.getParameter(ie.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Xt===zs&&(We.isWebGL2||ke.has("OES_texture_float")||ke.has("WEBGL_color_buffer_float")))&&!Ut){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Se>=0&&Se<=le.width-Be&&Ie>=0&&Ie<=le.height-ze&&ie.readPixels(Se,Ie,Be,ze,be.convert(Vt),be.convert(Xt),ae)}finally{const ut=k!==null?Ue.get(k).__webglFramebuffer:null;Fe.bindFramebuffer(ie.FRAMEBUFFER,ut)}}},this.copyFramebufferToTexture=function(le,Se,Ie=0){const Be=Math.pow(2,-Ie),ze=Math.floor(Se.image.width*Be),ae=Math.floor(Se.image.height*Be);Ye.setTexture2D(Se,0),ie.copyTexSubImage2D(ie.TEXTURE_2D,Ie,0,0,le.x,le.y,ze,ae),Fe.unbindTexture()},this.copyTextureToTexture=function(le,Se,Ie,Be=0){const ze=Se.image.width,ae=Se.image.height,Rt=be.convert(Ie.format),ge=be.convert(Ie.type);Ye.setTexture2D(Ie,0),ie.pixelStorei(ie.UNPACK_FLIP_Y_WEBGL,Ie.flipY),ie.pixelStorei(ie.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ie.premultiplyAlpha),ie.pixelStorei(ie.UNPACK_ALIGNMENT,Ie.unpackAlignment),Se.isDataTexture?ie.texSubImage2D(ie.TEXTURE_2D,Be,le.x,le.y,ze,ae,Rt,ge,Se.image.data):Se.isCompressedTexture?ie.compressedTexSubImage2D(ie.TEXTURE_2D,Be,le.x,le.y,Se.mipmaps[0].width,Se.mipmaps[0].height,Rt,Se.mipmaps[0].data):ie.texSubImage2D(ie.TEXTURE_2D,Be,le.x,le.y,Rt,ge,Se.image),Be===0&&Ie.generateMipmaps&&ie.generateMipmap(ie.TEXTURE_2D),Fe.unbindTexture()},this.copyTextureToTexture3D=function(le,Se,Ie,Be,ze=0){if(b.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const ae=Math.round(le.max.x-le.min.x),Rt=Math.round(le.max.y-le.min.y),ge=le.max.z-le.min.z+1,ut=be.convert(Be.format),Vt=be.convert(Be.type);let Xt;if(Be.isData3DTexture)Ye.setTexture3D(Be,0),Xt=ie.TEXTURE_3D;else if(Be.isDataArrayTexture||Be.isCompressedArrayTexture)Ye.setTexture2DArray(Be,0),Xt=ie.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ie.pixelStorei(ie.UNPACK_FLIP_Y_WEBGL,Be.flipY),ie.pixelStorei(ie.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Be.premultiplyAlpha),ie.pixelStorei(ie.UNPACK_ALIGNMENT,Be.unpackAlignment);const Ut=ie.getParameter(ie.UNPACK_ROW_LENGTH),Tt=ie.getParameter(ie.UNPACK_IMAGE_HEIGHT),li=ie.getParameter(ie.UNPACK_SKIP_PIXELS),_n=ie.getParameter(ie.UNPACK_SKIP_ROWS),Qn=ie.getParameter(ie.UNPACK_SKIP_IMAGES),Bt=Ie.isCompressedTexture?Ie.mipmaps[ze]:Ie.image;ie.pixelStorei(ie.UNPACK_ROW_LENGTH,Bt.width),ie.pixelStorei(ie.UNPACK_IMAGE_HEIGHT,Bt.height),ie.pixelStorei(ie.UNPACK_SKIP_PIXELS,le.min.x),ie.pixelStorei(ie.UNPACK_SKIP_ROWS,le.min.y),ie.pixelStorei(ie.UNPACK_SKIP_IMAGES,le.min.z),Ie.isDataTexture||Ie.isData3DTexture?ie.texSubImage3D(Xt,ze,Se.x,Se.y,Se.z,ae,Rt,ge,ut,Vt,Bt.data):Be.isCompressedArrayTexture?ie.compressedTexSubImage3D(Xt,ze,Se.x,Se.y,Se.z,ae,Rt,ge,ut,Bt.data):ie.texSubImage3D(Xt,ze,Se.x,Se.y,Se.z,ae,Rt,ge,ut,Vt,Bt),ie.pixelStorei(ie.UNPACK_ROW_LENGTH,Ut),ie.pixelStorei(ie.UNPACK_IMAGE_HEIGHT,Tt),ie.pixelStorei(ie.UNPACK_SKIP_PIXELS,li),ie.pixelStorei(ie.UNPACK_SKIP_ROWS,_n),ie.pixelStorei(ie.UNPACK_SKIP_IMAGES,Qn),ze===0&&Be.generateMipmaps&&ie.generateMipmap(Xt),Fe.unbindTexture()},this.initTexture=function(le){le.isCubeTexture?Ye.setTextureCube(le,0):le.isData3DTexture?Ye.setTexture3D(le,0):le.isDataArrayTexture||le.isCompressedArrayTexture?Ye.setTexture2DArray(le,0):Ye.setTexture2D(le,0),Fe.unbindTexture()},this.resetState=function(){T=0,P=0,k=null,Fe.reset(),fe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ha}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===Dv?"display-p3":"srgb",t.unpackColorSpace=Gn.workingColorSpace===Vp?"display-p3":"srgb"}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class hA extends nS{}hA.prototype.isWebGL1Renderer=!0;class Bv{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Ct(e),this.density=t}clone(){return new Bv(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Hv{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Ct(e),this.near=t,this.far=i}clone(){return new Hv(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class iS extends Rn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new qs,this.environmentRotation=new qs,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Vv{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Sp,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Ws()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return QT("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ws()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ws()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Jr=new ue;class Vs{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Jr.fromBufferAttribute(this,t),Jr.applyMatrix4(e),this.setXYZ(t,Jr.x,Jr.y,Jr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Jr.fromBufferAttribute(this,t),Jr.applyNormalMatrix(e),this.setXYZ(t,Jr.x,Jr.y,Jr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Jr.fromBufferAttribute(this,t),Jr.transformDirection(e),this.setXYZ(t,Jr.x,Jr.y,Jr.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=ns(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=sn(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=sn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=sn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=sn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=sn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ns(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ns(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ns(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ns(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=sn(t,this.array),i=sn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=sn(t,this.array),i=sn(i,this.array),r=sn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=sn(t,this.array),i=sn(i,this.array),r=sn(r,this.array),s=sn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Xn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Vs(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class rS extends Hr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ct(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Yh;const Jd=new ue,Zh=new ue,Kh=new ue,Qh=new $e,$d=new $e,fA=new qt,Sg=new ue,e0=new ue,wg=new ue,uM=new $e,qx=new $e,hM=new $e;class dA extends Rn{constructor(e=new rS){if(super(),this.isSprite=!0,this.type="Sprite",Yh===void 0){Yh=new un;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Vv(t,5);Yh.setIndex([0,1,2,0,2,3]),Yh.setAttribute("position",new Vs(i,3,0,!1)),Yh.setAttribute("uv",new Vs(i,2,3,!1))}this.geometry=Yh,this.material=e,this.center=new $e(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Zh.setFromMatrixScale(this.matrixWorld),fA.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Kh.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Zh.multiplyScalar(-Kh.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;bg(Sg.set(-.5,-.5,0),Kh,o,Zh,r,s),bg(e0.set(.5,-.5,0),Kh,o,Zh,r,s),bg(wg.set(.5,.5,0),Kh,o,Zh,r,s),uM.set(0,0),qx.set(1,0),hM.set(1,1);let a=e.ray.intersectTriangle(Sg,e0,wg,!1,Jd);if(a===null&&(bg(e0.set(-.5,.5,0),Kh,o,Zh,r,s),qx.set(0,1),a=e.ray.intersectTriangle(Sg,wg,e0,!1,Jd),a===null))return;const l=e.ray.origin.distanceTo(Jd);l<e.near||l>e.far||t.push({distance:l,point:Jd.clone(),uv:Bs.getInterpolation(Jd,Sg,e0,wg,uM,qx,hM,new $e),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function bg(n,e,t,i,r,s){Qh.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?($d.x=s*Qh.x-r*Qh.y,$d.y=r*Qh.x+s*Qh.y):$d.copy(Qh),n.copy(e),n.x+=$d.x,n.y+=$d.y,n.applyMatrix4(fA)}const Mg=new ue,fM=new ue;class pA extends Rn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){Mg.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(Mg);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Mg.setFromMatrixPosition(e.matrixWorld),fM.setFromMatrixPosition(this.matrixWorld);const i=Mg.distanceTo(fM)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const dM=new ue,pM=new gn,mM=new gn,xH=new ue,gM=new qt,Eg=new ue,Xx=new Qi,vM=new qt,Yx=new Yu;class mA extends di{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=D4,this.bindMatrix=new qt,this.bindMatrixInverse=new qt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Vi),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Eg),this.boundingBox.expandByPoint(Eg)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Qi),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Eg),this.boundingSphere.expandByPoint(Eg)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Xx.copy(this.boundingSphere),Xx.applyMatrix4(r),e.ray.intersectsSphere(Xx)!==!1&&(vM.copy(r).invert(),Yx.copy(e.ray).applyMatrix4(vM),!(this.boundingBox!==null&&Yx.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,Yx)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new gn,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===D4?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===CT?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;pM.fromBufferAttribute(r.attributes.skinIndex,e),mM.fromBufferAttribute(r.attributes.skinWeight,e),dM.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=mM.getComponent(s);if(o!==0){const a=pM.getComponent(s);gM.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(xH.copy(dM).applyMatrix4(gM),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class sS extends Rn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class cc extends yi{constructor(e=null,t=1,i=1,r,s,o,a,l,c=Ri,u=Ri,f,d){super(null,o,a,l,c,u,r,s,f,d),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const yM=new qt,_H=new qt;class Gv{constructor(e=[],t=[]){this.uuid=Ws(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new qt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new qt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:_H;yM.multiplyMatrices(a,t[s]),yM.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Gv(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new cc(t,e,e,ts,zs);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new sS),this.bones.push(o),this.boneInverses.push(new qt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class Vu extends Xn{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Jh=new qt,xM=new qt,Tg=[],_M=new Vi,SH=new qt,t0=new di,n0=new Qi;class gA extends di{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Vu(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,SH)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Vi),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Jh),_M.copy(e.boundingBox).applyMatrix4(Jh),this.boundingBox.union(_M)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Qi),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Jh),n0.copy(e.boundingSphere).applyMatrix4(Jh),this.boundingSphere.union(n0)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,o=e*s+1;for(let a=0;a<i.length;a++)i[a]=r[o+a]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(t0.geometry=this.geometry,t0.material=this.material,t0.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),n0.copy(this.boundingSphere),n0.applyMatrix4(i),e.ray.intersectsSphere(n0)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,Jh),xM.multiplyMatrices(i,Jh),t0.matrixWorld=xM,t0.raycast(e,Tg);for(let o=0,a=Tg.length;o<a;o++){const l=Tg[o];l.instanceId=s,l.object=this,t.push(l)}Tg.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Vu(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new cc(new Float32Array(r*this.count),r,this.count,H_,zs));const s=this.morphTexture.source.data.data;let o=0;for(let c=0;c<i.length;c++)o+=i[c];const a=this.geometry.morphTargetsRelative?1:1-o,l=r*e;s[l]=a,s.set(i,l+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function wH(n,e){return n.z-e.z}function bH(n,e){return e.z-n.z}class MH{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t){const i=this.pool,r=this.list;this.index>=i.length&&i.push({start:-1,count:-1,z:-1});const s=i[this.index];r.push(s),this.index++,s.start=e.start,s.count=e.count,s.z=t}reset(){this.list.length=0,this.index=0}}const $h="batchId",zl=new qt,SM=new qt,EH=new qt,wM=new qt,Zx=new jp,Ag=new Vi,eu=new Qi,i0=new ue,Kx=new MH,Ir=new di,Cg=[];function TH(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let o=0;o<i;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*i);e.needsUpdate=!0}class vA extends di{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,t,i=t*2,r){super(new un,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new cc(t,e,e,ts,zs);this._matricesTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxGeometryCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const l=e.getAttribute(a),{array:c,itemSize:u,normalized:f}=l,d=new c.constructor(i*u),h=new l.constructor(d,u,f);h.setUsage(l.usage),t.setAttribute(a,h)}if(e.getIndex()!==null){const a=i>65536?new Uint32Array(s):new Uint16Array(s);t.setIndex(new Xn(a,1))}const o=r>65536?new Uint32Array(i):new Uint16Array(i);t.setAttribute($h,new Xn(o,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute($h))throw new Error(`BatchedMesh: Geometry cannot use attribute "${$h}"`);const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(i===$h)continue;if(!e.hasAttribute(i))throw new Error(`BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Vi);const e=this._geometryCount,t=this.boundingBox,i=this._active;t.makeEmpty();for(let r=0;r<e;r++)i[r]!==!1&&(this.getMatrixAt(r,zl),this.getBoundingBoxAt(r,Ag).applyMatrix4(zl),t.union(Ag))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Qi);const e=this._geometryCount,t=this.boundingSphere,i=this._active;t.makeEmpty();for(let r=0;r<e;r++)i[r]!==!1&&(this.getMatrixAt(r,zl),this.getBoundingSphereAt(r,eu).applyMatrix4(zl),t.union(eu))}addGeometry(e,t=-1,i=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const r={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),t===-1?r.vertexCount=e.getAttribute("position").count:r.vertexCount=t,s===null?r.vertexStart=0:r.vertexStart=s.vertexStart+s.vertexCount;const c=e.getIndex(),u=c!==null;if(u&&(i===-1?r.indexCount=c.count:r.indexCount=i,s===null?r.indexStart=0:r.indexStart=s.indexStart+s.indexCount),r.indexStart!==-1&&r.indexStart+r.indexCount>this._maxIndexCount||r.vertexStart+r.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const f=this._visibility,d=this._active,h=this._matricesTexture,g=this._matricesTexture.image.data;f.push(!0),d.push(!0);const _=this._geometryCount;this._geometryCount++,EH.toArray(g,_*16),h.needsUpdate=!0,o.push(r),a.push({start:u?r.indexStart:r.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new Vi,sphereInitialized:!1,sphere:new Qi});const x=this.geometry.getAttribute($h);for(let y=0;y<r.vertexCount;y++)x.setX(r.vertexStart+y,_);return x.needsUpdate=!0,this.setGeometryAt(_,e),_}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),o=t.getIndex(),a=this._reservedRanges[e];if(r&&o.count>a.indexCount||t.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.vertexCount;for(const h in i.attributes){if(h===$h)continue;const g=t.getAttribute(h),_=i.getAttribute(h);TH(g,_,l);const x=g.itemSize;for(let y=g.count,M=c;y<M;y++){const b=l+y;for(let A=0;A<x;A++)_.setComponent(b,A,0)}_.needsUpdate=!0}if(r){const h=a.indexStart;for(let g=0;g<o.count;g++)s.setX(h+g,l+o.getX(g));for(let g=o.count,_=a.indexCount;g<_;g++)s.setX(h+g,l);s.needsUpdate=!0}const u=this._bounds[e];t.boundingBox!==null?(u.box.copy(t.boundingBox),u.boxInitialized=!0):u.boxInitialized=!1,t.boundingSphere!==null?(u.sphere.copy(t.boundingSphere),u.sphereInitialized=!0):u.sphereInitialized=!1;const f=this._drawRanges[e],d=t.getAttribute("position");return f.count=r?o.count:d.count,this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._active;return e>=t.length||t[e]===!1?this:(t[e]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(e,t){if(this._active[e]===!1)return null;const r=this._bounds[e],s=r.box,o=this.geometry;if(r.boxInitialized===!1){s.makeEmpty();const a=o.index,l=o.attributes.position,c=this._drawRanges[e];for(let u=c.start,f=c.start+c.count;u<f;u++){let d=u;a&&(d=a.getX(d)),s.expandByPoint(i0.fromBufferAttribute(l,d))}r.boxInitialized=!0}return t.copy(s),t}getBoundingSphereAt(e,t){if(this._active[e]===!1)return null;const r=this._bounds[e],s=r.sphere,o=this.geometry;if(r.sphereInitialized===!1){s.makeEmpty(),this.getBoundingBoxAt(e,Ag),Ag.getCenter(s.center);const a=o.index,l=o.attributes.position,c=this._drawRanges[e];let u=0;for(let f=c.start,d=c.start+c.count;f<d;f++){let h=f;a&&(h=a.getX(h)),i0.fromBufferAttribute(l,h),u=Math.max(u,s.center.distanceToSquared(i0))}s.radius=Math.sqrt(u),r.sphereInitialized=!0}return t.copy(s),t}setMatrixAt(e,t){const i=this._active,r=this._matricesTexture,s=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||i[e]===!1?this:(t.toArray(s,e*16),r.needsUpdate=!0,this)}getMatrixAt(e,t){const i=this._active,r=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||i[e]===!1?null:t.fromArray(r,e*16)}setVisibleAt(e,t){const i=this._visibility,r=this._active,s=this._geometryCount;return e>=s||r[e]===!1||i[e]===t?this:(i[e]=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._visibility,i=this._active,r=this._geometryCount;return e>=r||i[e]===!1?!1:t[e]}raycast(e,t){const i=this._visibility,r=this._active,s=this._drawRanges,o=this._geometryCount,a=this.matrixWorld,l=this.geometry;Ir.material=this.material,Ir.geometry.index=l.index,Ir.geometry.attributes=l.attributes,Ir.geometry.boundingBox===null&&(Ir.geometry.boundingBox=new Vi),Ir.geometry.boundingSphere===null&&(Ir.geometry.boundingSphere=new Qi);for(let c=0;c<o;c++){if(!i[c]||!r[c])continue;const u=s[c];Ir.geometry.setDrawRange(u.start,u.count),this.getMatrixAt(c,Ir.matrixWorld).premultiply(a),this.getBoundingBoxAt(c,Ir.geometry.boundingBox),this.getBoundingSphereAt(c,Ir.geometry.boundingSphere),Ir.raycast(e,Cg);for(let f=0,d=Cg.length;f<d;f++){const h=Cg[f];h.object=this,h.batchId=c,t.push(h)}Cg.length=0}Ir.material=null,Ir.geometry.index=null,Ir.geometry.attributes={},Ir.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._active,c=this._visibility,u=this._multiDrawStarts,f=this._multiDrawCounts,d=this._drawRanges,h=this.perObjectFrustumCulled;h&&(wM.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),Zx.setFromProjectionMatrix(wM,e.coordinateSystem));let g=0;if(this.sortObjects){SM.copy(this.matrixWorld).invert(),i0.setFromMatrixPosition(i.matrixWorld).applyMatrix4(SM);for(let y=0,M=c.length;y<M;y++)if(c[y]&&l[y]){this.getMatrixAt(y,zl),this.getBoundingSphereAt(y,eu).applyMatrix4(zl);let b=!1;if(h&&(b=!Zx.intersectsSphere(eu)),!b){const A=i0.distanceTo(eu.center);Kx.push(d[y],A)}}const _=Kx.list,x=this.customSort;x===null?_.sort(s.transparent?bH:wH):x.call(this,_,i);for(let y=0,M=_.length;y<M;y++){const b=_[y];u[g]=b.start*a,f[g]=b.count,g++}Kx.reset()}else for(let _=0,x=c.length;_<x;_++)if(c[_]&&l[_]){let y=!1;if(h&&(this.getMatrixAt(_,zl),this.getBoundingSphereAt(_,eu).applyMatrix4(zl),y=!Zx.intersectsSphere(eu)),!y){const M=d[_];u[g]=M.start*a,f[g]=M.count,g++}}this._multiDrawCount=g,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class as extends Hr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ct(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const bM=new ue,MM=new ue,EM=new qt,Qx=new Yu,Pg=new Qi;let pc=class extends Rn{constructor(e=new un,t=new as){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)bM.fromBufferAttribute(t,r-1),MM.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=bM.distanceTo(MM);e.setAttribute("lineDistance",new Ot(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Pg.copy(i.boundingSphere),Pg.applyMatrix4(r),Pg.radius+=s,e.ray.intersectsSphere(Pg)===!1)return;EM.copy(r).invert(),Qx.copy(e.ray).applyMatrix4(EM);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new ue,u=new ue,f=new ue,d=new ue,h=this.isLineSegments?2:1,g=i.index,x=i.attributes.position;if(g!==null){const y=Math.max(0,o.start),M=Math.min(g.count,o.start+o.count);for(let b=y,A=M-1;b<A;b+=h){const T=g.getX(b),P=g.getX(b+1);if(c.fromBufferAttribute(x,T),u.fromBufferAttribute(x,P),Qx.distanceSqToSegment(c,u,d,f)>l)continue;d.applyMatrix4(this.matrixWorld);const N=e.ray.origin.distanceTo(d);N<e.near||N>e.far||t.push({distance:N,point:f.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else{const y=Math.max(0,o.start),M=Math.min(x.count,o.start+o.count);for(let b=y,A=M-1;b<A;b+=h){if(c.fromBufferAttribute(x,b),u.fromBufferAttribute(x,b+1),Qx.distanceSqToSegment(c,u,d,f)>l)continue;d.applyMatrix4(this.matrixWorld);const P=e.ray.origin.distanceTo(d);P<e.near||P>e.far||t.push({distance:P,point:f.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};const TM=new ue,AM=new ue;class ya extends pc{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)TM.fromBufferAttribute(t,r),AM.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+TM.distanceTo(AM);e.setAttribute("lineDistance",new Ot(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class yA extends pc{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class oS extends Hr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ct(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const CM=new qt,f3=new Yu,Rg=new Qi,kg=new ue;class xA extends Rn{constructor(e=new un,t=new oS){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Rg.copy(i.boundingSphere),Rg.applyMatrix4(r),Rg.radius+=s,e.ray.intersectsSphere(Rg)===!1)return;CM.copy(r).invert(),f3.copy(e.ray).applyMatrix4(CM);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,f=i.attributes.position;if(c!==null){const d=Math.max(0,o.start),h=Math.min(c.count,o.start+o.count);for(let g=d,_=h;g<_;g++){const x=c.getX(g);kg.fromBufferAttribute(f,x),PM(kg,x,l,r,e,t,this)}}else{const d=Math.max(0,o.start),h=Math.min(f.count,o.start+o.count);for(let g=d,_=h;g<_;g++)kg.fromBufferAttribute(f,g),PM(kg,g,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function PM(n,e,t,i,r,s,o){const a=f3.distanceSqToPoint(n);if(a<t){const l=new ue;f3.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class AH extends yi{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:oi,this.magFilter=s!==void 0?s:oi,this.generateMipmaps=!1;const u=this;function f(){u.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class CH extends yi{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Ri,this.minFilter=Ri,this.generateMipmaps=!1,this.needsUpdate=!0}}class Wv extends yi{constructor(e,t,i,r,s,o,a,l,c,u,f,d){super(null,o,a,l,c,u,r,s,f,d),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class PH extends Wv{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Fr}}class RH extends Wv{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,al),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class kH extends yi{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Vo{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,l=s-1,c;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-o,c<0)a=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const u=i[r],d=i[r+1]-u,h=(o-u)/d;return(r+h)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new $e:new ue);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new ue,r=[],s=[],o=[],a=new ue,l=new qt;for(let h=0;h<=e;h++){const g=h/e;r[h]=this.getTangentAt(g,new ue)}s[0]=new ue,o[0]=new ue;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),f=Math.abs(r[0].y),d=Math.abs(r[0].z);u<=c&&(c=u,i.set(1,0,0)),f<=c&&(c=f,i.set(0,1,0)),d<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let h=1;h<=e;h++){if(s[h]=s[h-1].clone(),o[h]=o[h-1].clone(),a.crossVectors(r[h-1],r[h]),a.length()>Number.EPSILON){a.normalize();const g=Math.acos(bi(r[h-1].dot(r[h]),-1,1));s[h].applyMatrix4(l.makeRotationAxis(a,g))}o[h].crossVectors(r[h],s[h])}if(t===!0){let h=Math.acos(bi(s[0].dot(s[e]),-1,1));h/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(h=-h);for(let g=1;g<=e;g++)s[g].applyMatrix4(l.makeRotationAxis(r[g],h*g)),o[g].crossVectors(r[g],s[g])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class jv extends Vo{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new $e){const i=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),f=Math.sin(this.aRotation),d=l-this.aX,h=c-this.aY;l=d*u-h*f+this.aX,c=d*f+h*u+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class _A extends jv{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function aS(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,f){let d=(o-s)/c-(a-s)/(c+u)+(a-o)/u,h=(a-o)/u-(l-o)/(u+f)+(l-a)/f;d*=u,h*=u,r(o,a,d,h)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const Lg=new ue,Jx=new aS,$x=new aS,e2=new aS;class SA extends Vo{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new ue){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=r[(a-1)%s]:(Lg.subVectors(r[0],r[1]).add(r[0]),c=Lg);const f=r[a%s],d=r[(a+1)%s];if(this.closed||a+2<s?u=r[(a+2)%s]:(Lg.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=Lg),this.curveType==="centripetal"||this.curveType==="chordal"){const h=this.curveType==="chordal"?.5:.25;let g=Math.pow(c.distanceToSquared(f),h),_=Math.pow(f.distanceToSquared(d),h),x=Math.pow(d.distanceToSquared(u),h);_<1e-4&&(_=1),g<1e-4&&(g=_),x<1e-4&&(x=_),Jx.initNonuniformCatmullRom(c.x,f.x,d.x,u.x,g,_,x),$x.initNonuniformCatmullRom(c.y,f.y,d.y,u.y,g,_,x),e2.initNonuniformCatmullRom(c.z,f.z,d.z,u.z,g,_,x)}else this.curveType==="catmullrom"&&(Jx.initCatmullRom(c.x,f.x,d.x,u.x,this.tension),$x.initCatmullRom(c.y,f.y,d.y,u.y,this.tension),e2.initCatmullRom(c.z,f.z,d.z,u.z,this.tension));return i.set(Jx.calc(l),$x.calc(l),e2.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new ue().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function RM(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*n+t}function LH(n,e){const t=1-n;return t*t*e}function NH(n,e){return 2*(1-n)*n*e}function IH(n,e){return n*n*e}function U0(n,e,t,i){return LH(n,e)+NH(n,t)+IH(n,i)}function DH(n,e){const t=1-n;return t*t*t*e}function OH(n,e){const t=1-n;return 3*t*t*n*e}function FH(n,e){return 3*(1-n)*n*n*e}function UH(n,e){return n*n*n*e}function z0(n,e,t,i,r){return DH(n,e)+OH(n,t)+FH(n,i)+UH(n,r)}class lS extends Vo{constructor(e=new $e,t=new $e,i=new $e,r=new $e){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new $e){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(z0(e,r.x,s.x,o.x,a.x),z0(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class wA extends Vo{constructor(e=new ue,t=new ue,i=new ue,r=new ue){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new ue){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(z0(e,r.x,s.x,o.x,a.x),z0(e,r.y,s.y,o.y,a.y),z0(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class cS extends Vo{constructor(e=new $e,t=new $e){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new $e){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new $e){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class bA extends Vo{constructor(e=new ue,t=new ue){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new ue){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ue){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class uS extends Vo{constructor(e=new $e,t=new $e,i=new $e){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new $e){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(U0(e,r.x,s.x,o.x),U0(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class hS extends Vo{constructor(e=new ue,t=new ue,i=new ue){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new ue){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(U0(e,r.x,s.x,o.x),U0(e,r.y,s.y,o.y),U0(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class fS extends Vo{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new $e){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],c=r[o],u=r[o>r.length-2?r.length-1:o+1],f=r[o>r.length-3?r.length-1:o+2];return i.set(RM(a,l.x,c.x,u.x,f.x),RM(a,l.y,c.y,u.y,f.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new $e().fromArray(r))}return this}}var cv=Object.freeze({__proto__:null,ArcCurve:_A,CatmullRomCurve3:SA,CubicBezierCurve:lS,CubicBezierCurve3:wA,EllipseCurve:jv,LineCurve:cS,LineCurve3:bA,QuadraticBezierCurve:uS,QuadraticBezierCurve3:hS,SplineCurve:fS});class MA extends Vo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new cv[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new cv[r.type]().fromJSON(r))}return this}}class Ep extends MA{constructor(e){super(),this.type="Path",this.currentPoint=new $e,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new cS(this.currentPoint.clone(),new $e(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new uS(this.currentPoint.clone(),new $e(e,t),new $e(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new lS(this.currentPoint.clone(),new $e(e,t),new $e(i,r),new $e(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new fS(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const c=new jv(e,t,i,r,s,o,a,l);if(this.curves.length>0){const f=c.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class qp extends un{constructor(e=[new $e(0,-.5),new $e(.5,0),new $e(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=bi(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],u=1/t,f=new ue,d=new $e,h=new ue,g=new ue,_=new ue;let x=0,y=0;for(let M=0;M<=e.length-1;M++)switch(M){case 0:x=e[M+1].x-e[M].x,y=e[M+1].y-e[M].y,h.x=y*1,h.y=-x,h.z=y*0,_.copy(h),h.normalize(),l.push(h.x,h.y,h.z);break;case e.length-1:l.push(_.x,_.y,_.z);break;default:x=e[M+1].x-e[M].x,y=e[M+1].y-e[M].y,h.x=y*1,h.y=-x,h.z=y*0,g.copy(h),h.x+=_.x,h.y+=_.y,h.z+=_.z,h.normalize(),l.push(h.x,h.y,h.z),_.copy(g)}for(let M=0;M<=t;M++){const b=i+M*u*r,A=Math.sin(b),T=Math.cos(b);for(let P=0;P<=e.length-1;P++){f.x=e[P].x*A,f.y=e[P].y,f.z=e[P].x*T,o.push(f.x,f.y,f.z),d.x=M/t,d.y=P/(e.length-1),a.push(d.x,d.y);const k=l[3*P+0]*A,N=l[3*P+1],z=l[3*P+0]*T;c.push(k,N,z)}}for(let M=0;M<t;M++)for(let b=0;b<e.length-1;b++){const A=b+M*e.length,T=A,P=A+e.length,k=A+e.length+1,N=A+1;s.push(T,P,N),s.push(k,N,P)}this.setIndex(s),this.setAttribute("position",new Ot(o,3)),this.setAttribute("uv",new Ot(a,2)),this.setAttribute("normal",new Ot(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new qp(e.points,e.segments,e.phiStart,e.phiLength)}}class qv extends qp{constructor(e=1,t=1,i=4,r=8){const s=new Ep;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new qv(e.radius,e.length,e.capSegments,e.radialSegments)}}class Xv extends un{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new ue,u=new $e;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let f=0,d=3;f<=t;f++,d+=3){const h=i+f/t*r;c.x=e*Math.cos(h),c.y=e*Math.sin(h),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[d]/e+1)/2,u.y=(o[d+1]/e+1)/2,l.push(u.x,u.y)}for(let f=1;f<=t;f++)s.push(f,f+1,0);this.setIndex(s),this.setAttribute("position",new Ot(o,3)),this.setAttribute("normal",new Ot(a,3)),this.setAttribute("uv",new Ot(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xv(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class $f extends un{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const u=[],f=[],d=[],h=[];let g=0;const _=[],x=i/2;let y=0;M(),o===!1&&(e>0&&b(!0),t>0&&b(!1)),this.setIndex(u),this.setAttribute("position",new Ot(f,3)),this.setAttribute("normal",new Ot(d,3)),this.setAttribute("uv",new Ot(h,2));function M(){const A=new ue,T=new ue;let P=0;const k=(t-e)/i;for(let N=0;N<=s;N++){const z=[],R=N/s,F=R*(t-e)+e;for(let V=0;V<=r;V++){const K=V/r,W=K*l+a,ne=Math.sin(W),re=Math.cos(W);T.x=F*ne,T.y=-R*i+x,T.z=F*re,f.push(T.x,T.y,T.z),A.set(ne,k,re).normalize(),d.push(A.x,A.y,A.z),h.push(K,1-R),z.push(g++)}_.push(z)}for(let N=0;N<r;N++)for(let z=0;z<s;z++){const R=_[z][N],F=_[z+1][N],V=_[z+1][N+1],K=_[z][N+1];u.push(R,F,K),u.push(F,V,K),P+=6}c.addGroup(y,P,0),y+=P}function b(A){const T=g,P=new $e,k=new ue;let N=0;const z=A===!0?e:t,R=A===!0?1:-1;for(let V=1;V<=r;V++)f.push(0,x*R,0),d.push(0,R,0),h.push(.5,.5),g++;const F=g;for(let V=0;V<=r;V++){const W=V/r*l+a,ne=Math.cos(W),re=Math.sin(W);k.x=z*re,k.y=x*R,k.z=z*ne,f.push(k.x,k.y,k.z),d.push(0,R,0),P.x=ne*.5+.5,P.y=re*.5*R+.5,h.push(P.x,P.y),g++}for(let V=0;V<r;V++){const K=T+V,W=F+V;A===!0?u.push(W,W+1,K):u.push(W+1,W,K),N+=3}c.addGroup(y,N,A===!0?1:2),y+=N}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $f(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Yv extends $f{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new Yv(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class xc extends un{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),c(i),u(),this.setAttribute("position",new Ot(s,3)),this.setAttribute("normal",new Ot(s.slice(),3)),this.setAttribute("uv",new Ot(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(M){const b=new ue,A=new ue,T=new ue;for(let P=0;P<t.length;P+=3)h(t[P+0],b),h(t[P+1],A),h(t[P+2],T),l(b,A,T,M)}function l(M,b,A,T){const P=T+1,k=[];for(let N=0;N<=P;N++){k[N]=[];const z=M.clone().lerp(A,N/P),R=b.clone().lerp(A,N/P),F=P-N;for(let V=0;V<=F;V++)V===0&&N===P?k[N][V]=z:k[N][V]=z.clone().lerp(R,V/F)}for(let N=0;N<P;N++)for(let z=0;z<2*(P-N)-1;z++){const R=Math.floor(z/2);z%2===0?(d(k[N][R+1]),d(k[N+1][R]),d(k[N][R])):(d(k[N][R+1]),d(k[N+1][R+1]),d(k[N+1][R]))}}function c(M){const b=new ue;for(let A=0;A<s.length;A+=3)b.x=s[A+0],b.y=s[A+1],b.z=s[A+2],b.normalize().multiplyScalar(M),s[A+0]=b.x,s[A+1]=b.y,s[A+2]=b.z}function u(){const M=new ue;for(let b=0;b<s.length;b+=3){M.x=s[b+0],M.y=s[b+1],M.z=s[b+2];const A=x(M)/2/Math.PI+.5,T=y(M)/Math.PI+.5;o.push(A,1-T)}g(),f()}function f(){for(let M=0;M<o.length;M+=6){const b=o[M+0],A=o[M+2],T=o[M+4],P=Math.max(b,A,T),k=Math.min(b,A,T);P>.9&&k<.1&&(b<.2&&(o[M+0]+=1),A<.2&&(o[M+2]+=1),T<.2&&(o[M+4]+=1))}}function d(M){s.push(M.x,M.y,M.z)}function h(M,b){const A=M*3;b.x=e[A+0],b.y=e[A+1],b.z=e[A+2]}function g(){const M=new ue,b=new ue,A=new ue,T=new ue,P=new $e,k=new $e,N=new $e;for(let z=0,R=0;z<s.length;z+=9,R+=6){M.set(s[z+0],s[z+1],s[z+2]),b.set(s[z+3],s[z+4],s[z+5]),A.set(s[z+6],s[z+7],s[z+8]),P.set(o[R+0],o[R+1]),k.set(o[R+2],o[R+3]),N.set(o[R+4],o[R+5]),T.copy(M).add(b).add(A).divideScalar(3);const F=x(T);_(P,R+0,M,F),_(k,R+2,b,F),_(N,R+4,A,F)}}function _(M,b,A,T){T<0&&M.x===1&&(o[b]=M.x-1),A.x===0&&A.z===0&&(o[b]=T/2/Math.PI+.5)}function x(M){return Math.atan2(M.z,-M.x)}function y(M){return Math.atan2(-M.y,Math.sqrt(M.x*M.x+M.z*M.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xc(e.vertices,e.indices,e.radius,e.details)}}class Zv extends xc{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Zv(e.radius,e.detail)}}const Ng=new ue,Ig=new ue,t2=new ue,Dg=new Bs;class EA extends un{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(Ru*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],u=["a","b","c"],f=new Array(3),d={},h=[];for(let g=0;g<l;g+=3){o?(c[0]=o.getX(g),c[1]=o.getX(g+1),c[2]=o.getX(g+2)):(c[0]=g,c[1]=g+1,c[2]=g+2);const{a:_,b:x,c:y}=Dg;if(_.fromBufferAttribute(a,c[0]),x.fromBufferAttribute(a,c[1]),y.fromBufferAttribute(a,c[2]),Dg.getNormal(t2),f[0]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,f[1]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,f[2]=`${Math.round(y.x*r)},${Math.round(y.y*r)},${Math.round(y.z*r)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let M=0;M<3;M++){const b=(M+1)%3,A=f[M],T=f[b],P=Dg[u[M]],k=Dg[u[b]],N=`${A}_${T}`,z=`${T}_${A}`;z in d&&d[z]?(t2.dot(d[z].normal)<=s&&(h.push(P.x,P.y,P.z),h.push(k.x,k.y,k.z)),d[z]=null):N in d||(d[N]={index0:c[M],index1:c[b],normal:t2.clone()})}}for(const g in d)if(d[g]){const{index0:_,index1:x}=d[g];Ng.fromBufferAttribute(a,_),Ig.fromBufferAttribute(a,x),h.push(Ng.x,Ng.y,Ng.z),h.push(Ig.x,Ig.y,Ig.z)}this.setAttribute("position",new Ot(h,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Lu extends Ep{constructor(e){super(e),this.uuid=Ws(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new Ep().fromJSON(r))}return this}}const zH={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=TA(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,f,d,h;if(i&&(s=WH(n,e,s,t)),n.length>80*t){a=c=n[0],l=u=n[1];for(let g=t;g<r;g+=t)f=n[g],d=n[g+1],f<a&&(a=f),d<l&&(l=d),f>c&&(c=f),d>u&&(u=d);h=Math.max(c-a,u-l),h=h!==0?32767/h:0}return Tp(s,o,t,a,l,h,0),o}};function TA(n,e,t,i,r){let s,o;if(r===tV(n,e,t,i)>0)for(s=e;s<t;s+=i)o=kM(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=kM(s,n[s],n[s+1],o);return o&&Kv(o,o.next)&&(Cp(o),o=o.next),o}function Gu(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(Kv(t,t.next)||gi(t.prev,t,t.next)===0)){if(Cp(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Tp(n,e,t,i,r,s,o){if(!n)return;!o&&s&&ZH(n,i,r,s);let a=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,s?HH(n,i,r,s):BH(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),Cp(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=VH(Gu(n),e,t),Tp(n,e,t,i,r,s,2)):o===2&&GH(n,e,t,i,r,s):Tp(Gu(n),e,t,i,r,s,1);break}}}function BH(n){const e=n.prev,t=n,i=n.next;if(gi(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,c=i.y,u=r<s?r<o?r:o:s<o?s:o,f=a<l?a<c?a:c:l<c?l:c,d=r>s?r>o?r:o:s>o?s:o,h=a>l?a>c?a:c:l>c?l:c;let g=i.next;for(;g!==e;){if(g.x>=u&&g.x<=d&&g.y>=f&&g.y<=h&&bf(r,a,s,l,o,c,g.x,g.y)&&gi(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function HH(n,e,t,i){const r=n.prev,s=n,o=n.next;if(gi(r,s,o)>=0)return!1;const a=r.x,l=s.x,c=o.x,u=r.y,f=s.y,d=o.y,h=a<l?a<c?a:c:l<c?l:c,g=u<f?u<d?u:d:f<d?f:d,_=a>l?a>c?a:c:l>c?l:c,x=u>f?u>d?u:d:f>d?f:d,y=d3(h,g,e,t,i),M=d3(_,x,e,t,i);let b=n.prevZ,A=n.nextZ;for(;b&&b.z>=y&&A&&A.z<=M;){if(b.x>=h&&b.x<=_&&b.y>=g&&b.y<=x&&b!==r&&b!==o&&bf(a,u,l,f,c,d,b.x,b.y)&&gi(b.prev,b,b.next)>=0||(b=b.prevZ,A.x>=h&&A.x<=_&&A.y>=g&&A.y<=x&&A!==r&&A!==o&&bf(a,u,l,f,c,d,A.x,A.y)&&gi(A.prev,A,A.next)>=0))return!1;A=A.nextZ}for(;b&&b.z>=y;){if(b.x>=h&&b.x<=_&&b.y>=g&&b.y<=x&&b!==r&&b!==o&&bf(a,u,l,f,c,d,b.x,b.y)&&gi(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;A&&A.z<=M;){if(A.x>=h&&A.x<=_&&A.y>=g&&A.y<=x&&A!==r&&A!==o&&bf(a,u,l,f,c,d,A.x,A.y)&&gi(A.prev,A,A.next)>=0)return!1;A=A.nextZ}return!0}function VH(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!Kv(r,s)&&AA(r,i,i.next,s)&&Ap(r,s)&&Ap(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),Cp(i),Cp(i.next),i=n=s),i=i.next}while(i!==n);return Gu(i)}function GH(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&JH(o,a)){let l=CA(o,a);o=Gu(o,o.next),l=Gu(l,l.next),Tp(o,e,t,i,r,s,0),Tp(l,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function WH(n,e,t,i){const r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,c=TA(n,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(QH(c));for(r.sort(jH),s=0;s<r.length;s++)t=qH(r[s],t);return t}function jH(n,e){return n.x-e.x}function qH(n,e){const t=XH(n,e);if(!t)return e;const i=CA(t,n);return Gu(i,i.next),Gu(t,t.next)}function XH(n,e){let t=e,i=-1/0,r;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const d=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=s&&d>i&&(i=d,r=t.x<t.next.x?t:t.next,d===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,l=r.x,c=r.y;let u=1/0,f;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&bf(o<c?s:i,o,l,c,o<c?i:s,o,t.x,t.y)&&(f=Math.abs(o-t.y)/(s-t.x),Ap(t,n)&&(f<u||f===u&&(t.x>r.x||t.x===r.x&&YH(r,t)))&&(r=t,u=f)),t=t.next;while(t!==a);return r}function YH(n,e){return gi(n.prev,n,e.prev)<0&&gi(e.next,n,n.next)<0}function ZH(n,e,t,i){let r=n;do r.z===0&&(r.z=d3(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,KH(r)}function KH(n){let e,t,i,r,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,c*=2}while(o>1);return n}function d3(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function QH(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function bf(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function JH(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!$H(n,e)&&(Ap(n,e)&&Ap(e,n)&&eV(n,e)&&(gi(n.prev,n,e.prev)||gi(n,e.prev,e))||Kv(n,e)&&gi(n.prev,n,n.next)>0&&gi(e.prev,e,e.next)>0)}function gi(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Kv(n,e){return n.x===e.x&&n.y===e.y}function AA(n,e,t,i){const r=Fg(gi(n,e,t)),s=Fg(gi(n,e,i)),o=Fg(gi(t,i,n)),a=Fg(gi(t,i,e));return!!(r!==s&&o!==a||r===0&&Og(n,t,e)||s===0&&Og(n,i,e)||o===0&&Og(t,n,i)||a===0&&Og(t,e,i))}function Og(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Fg(n){return n>0?1:n<0?-1:0}function $H(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&AA(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Ap(n,e){return gi(n.prev,n,n.next)<0?gi(n,e,n.next)>=0&&gi(n,n.prev,e)>=0:gi(n,e,n.prev)<0||gi(n,n.next,e)<0}function eV(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function CA(n,e){const t=new p3(n.i,n.x,n.y),i=new p3(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function kM(n,e,t,i){const r=new p3(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Cp(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function p3(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function tV(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class va{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return va.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];LM(e),NM(i,e);let o=e.length;t.forEach(LM);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,NM(i,t[l]);const a=zH.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function LM(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function NM(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Qv extends un{constructor(e=new Lu([new $e(.5,.5),new $e(-.5,.5),new $e(-.5,-.5),new $e(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new Ot(r,3)),this.setAttribute("uv",new Ot(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,f=t.depth!==void 0?t.depth:1;let d=t.bevelEnabled!==void 0?t.bevelEnabled:!0,h=t.bevelThickness!==void 0?t.bevelThickness:.2,g=t.bevelSize!==void 0?t.bevelSize:h-.1,_=t.bevelOffset!==void 0?t.bevelOffset:0,x=t.bevelSegments!==void 0?t.bevelSegments:3;const y=t.extrudePath,M=t.UVGenerator!==void 0?t.UVGenerator:nV;let b,A=!1,T,P,k,N;y&&(b=y.getSpacedPoints(u),A=!0,d=!1,T=y.computeFrenetFrames(u,!1),P=new ue,k=new ue,N=new ue),d||(x=0,h=0,g=0,_=0);const z=a.extractPoints(c);let R=z.shape;const F=z.holes;if(!va.isClockWise(R)){R=R.reverse();for(let ie=0,je=F.length;ie<je;ie++){const ke=F[ie];va.isClockWise(ke)&&(F[ie]=ke.reverse())}}const K=va.triangulateShape(R,F),W=R;for(let ie=0,je=F.length;ie<je;ie++){const ke=F[ie];R=R.concat(ke)}function ne(ie,je,ke){return je||console.error("THREE.ExtrudeGeometry: vec does not exist"),ie.clone().addScaledVector(je,ke)}const re=R.length,de=K.length;function X(ie,je,ke){let We,Fe,it;const Ue=ie.x-je.x,Ye=ie.y-je.y,ot=ke.x-ie.x,Q=ke.y-ie.y,Z=Ue*Ue+Ye*Ye,we=Ue*Q-Ye*ot;if(Math.abs(we)>Number.EPSILON){const Ee=Math.sqrt(Z),Ne=Math.sqrt(ot*ot+Q*Q),Ze=je.x-Ye/Ee,lt=je.y+Ue/Ee,ft=ke.x-Q/Ne,qe=ke.y+ot/Ne,st=((ft-Ze)*Q-(qe-lt)*ot)/(Ue*Q-Ye*ot);We=Ze+Ue*st-ie.x,Fe=lt+Ye*st-ie.y;const St=We*We+Fe*Fe;if(St<=2)return new $e(We,Fe);it=Math.sqrt(St/2)}else{let Ee=!1;Ue>Number.EPSILON?ot>Number.EPSILON&&(Ee=!0):Ue<-Number.EPSILON?ot<-Number.EPSILON&&(Ee=!0):Math.sign(Ye)===Math.sign(Q)&&(Ee=!0),Ee?(We=-Ye,Fe=Ue,it=Math.sqrt(Z)):(We=Ue,Fe=Ye,it=Math.sqrt(Z/2))}return new $e(We/it,Fe/it)}const $=[];for(let ie=0,je=W.length,ke=je-1,We=ie+1;ie<je;ie++,ke++,We++)ke===je&&(ke=0),We===je&&(We=0),$[ie]=X(W[ie],W[ke],W[We]);const J=[];let j,se=$.concat();for(let ie=0,je=F.length;ie<je;ie++){const ke=F[ie];j=[];for(let We=0,Fe=ke.length,it=Fe-1,Ue=We+1;We<Fe;We++,it++,Ue++)it===Fe&&(it=0),Ue===Fe&&(Ue=0),j[We]=X(ke[We],ke[it],ke[Ue]);J.push(j),se=se.concat(j)}for(let ie=0;ie<x;ie++){const je=ie/x,ke=h*Math.cos(je*Math.PI/2),We=g*Math.sin(je*Math.PI/2)+_;for(let Fe=0,it=W.length;Fe<it;Fe++){const Ue=ne(W[Fe],$[Fe],We);Me(Ue.x,Ue.y,-ke)}for(let Fe=0,it=F.length;Fe<it;Fe++){const Ue=F[Fe];j=J[Fe];for(let Ye=0,ot=Ue.length;Ye<ot;Ye++){const Q=ne(Ue[Ye],j[Ye],We);Me(Q.x,Q.y,-ke)}}}const ve=g+_;for(let ie=0;ie<re;ie++){const je=d?ne(R[ie],se[ie],ve):R[ie];A?(k.copy(T.normals[0]).multiplyScalar(je.x),P.copy(T.binormals[0]).multiplyScalar(je.y),N.copy(b[0]).add(k).add(P),Me(N.x,N.y,N.z)):Me(je.x,je.y,0)}for(let ie=1;ie<=u;ie++)for(let je=0;je<re;je++){const ke=d?ne(R[je],se[je],ve):R[je];A?(k.copy(T.normals[ie]).multiplyScalar(ke.x),P.copy(T.binormals[ie]).multiplyScalar(ke.y),N.copy(b[ie]).add(k).add(P),Me(N.x,N.y,N.z)):Me(ke.x,ke.y,f/u*ie)}for(let ie=x-1;ie>=0;ie--){const je=ie/x,ke=h*Math.cos(je*Math.PI/2),We=g*Math.sin(je*Math.PI/2)+_;for(let Fe=0,it=W.length;Fe<it;Fe++){const Ue=ne(W[Fe],$[Fe],We);Me(Ue.x,Ue.y,f+ke)}for(let Fe=0,it=F.length;Fe<it;Fe++){const Ue=F[Fe];j=J[Fe];for(let Ye=0,ot=Ue.length;Ye<ot;Ye++){const Q=ne(Ue[Ye],j[Ye],We);A?Me(Q.x,Q.y+b[u-1].y,b[u-1].x+ke):Me(Q.x,Q.y,f+ke)}}}oe(),he();function oe(){const ie=r.length/3;if(d){let je=0,ke=re*je;for(let We=0;We<de;We++){const Fe=K[We];Pe(Fe[2]+ke,Fe[1]+ke,Fe[0]+ke)}je=u+x*2,ke=re*je;for(let We=0;We<de;We++){const Fe=K[We];Pe(Fe[0]+ke,Fe[1]+ke,Fe[2]+ke)}}else{for(let je=0;je<de;je++){const ke=K[je];Pe(ke[2],ke[1],ke[0])}for(let je=0;je<de;je++){const ke=K[je];Pe(ke[0]+re*u,ke[1]+re*u,ke[2]+re*u)}}i.addGroup(ie,r.length/3-ie,0)}function he(){const ie=r.length/3;let je=0;ye(W,je),je+=W.length;for(let ke=0,We=F.length;ke<We;ke++){const Fe=F[ke];ye(Fe,je),je+=Fe.length}i.addGroup(ie,r.length/3-ie,1)}function ye(ie,je){let ke=ie.length;for(;--ke>=0;){const We=ke;let Fe=ke-1;Fe<0&&(Fe=ie.length-1);for(let it=0,Ue=u+x*2;it<Ue;it++){const Ye=re*it,ot=re*(it+1),Q=je+We+Ye,Z=je+Fe+Ye,we=je+Fe+ot,Ee=je+We+ot;Xe(Q,Z,we,Ee)}}}function Me(ie,je,ke){l.push(ie),l.push(je),l.push(ke)}function Pe(ie,je,ke){ht(ie),ht(je),ht(ke);const We=r.length/3,Fe=M.generateTopUV(i,r,We-3,We-2,We-1);He(Fe[0]),He(Fe[1]),He(Fe[2])}function Xe(ie,je,ke,We){ht(ie),ht(je),ht(We),ht(je),ht(ke),ht(We);const Fe=r.length/3,it=M.generateSideWallUV(i,r,Fe-6,Fe-3,Fe-2,Fe-1);He(it[0]),He(it[1]),He(it[3]),He(it[1]),He(it[2]),He(it[3])}function ht(ie){r.push(l[ie*3+0]),r.push(l[ie*3+1]),r.push(l[ie*3+2])}function He(ie){s.push(ie.x),s.push(ie.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return iV(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new cv[r.type]().fromJSON(r)),new Qv(i,e.options)}}const nV={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],c=e[r*3],u=e[r*3+1];return[new $e(s,o),new $e(a,l),new $e(c,u)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[i*3],u=e[i*3+1],f=e[i*3+2],d=e[r*3],h=e[r*3+1],g=e[r*3+2],_=e[s*3],x=e[s*3+1],y=e[s*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new $e(o,1-l),new $e(c,1-f),new $e(d,1-g),new $e(_,1-y)]:[new $e(a,1-l),new $e(u,1-f),new $e(h,1-g),new $e(x,1-y)]}};function iV(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Jv extends xc{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Jv(e.radius,e.detail)}}class Xp extends xc{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Xp(e.radius,e.detail)}}class $v extends un{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],c=[],u=[];let f=e;const d=(t-e)/r,h=new ue,g=new $e;for(let _=0;_<=r;_++){for(let x=0;x<=i;x++){const y=s+x/i*o;h.x=f*Math.cos(y),h.y=f*Math.sin(y),l.push(h.x,h.y,h.z),c.push(0,0,1),g.x=(h.x/t+1)/2,g.y=(h.y/t+1)/2,u.push(g.x,g.y)}f+=d}for(let _=0;_<r;_++){const x=_*(i+1);for(let y=0;y<i;y++){const M=y+x,b=M,A=M+i+1,T=M+i+2,P=M+1;a.push(b,A,P),a.push(A,T,P)}}this.setIndex(a),this.setAttribute("position",new Ot(l,3)),this.setAttribute("normal",new Ot(c,3)),this.setAttribute("uv",new Ot(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $v(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class ey extends un{constructor(e=new Lu([new $e(0,.5),new $e(-.5,-.5),new $e(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new Ot(r,3)),this.setAttribute("normal",new Ot(s,3)),this.setAttribute("uv",new Ot(o,2));function c(u){const f=r.length/3,d=u.extractPoints(t);let h=d.shape;const g=d.holes;va.isClockWise(h)===!1&&(h=h.reverse());for(let x=0,y=g.length;x<y;x++){const M=g[x];va.isClockWise(M)===!0&&(g[x]=M.reverse())}const _=va.triangulateShape(h,g);for(let x=0,y=g.length;x<y;x++){const M=g[x];h=h.concat(M)}for(let x=0,y=h.length;x<y;x++){const M=h[x];r.push(M.x,M.y,0),s.push(0,0,1),o.push(M.x,M.y)}for(let x=0,y=_.length;x<y;x++){const M=_[x],b=M[0]+f,A=M[1]+f,T=M[2]+f;i.push(b,A,T),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return rV(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new ey(i,e.curveSegments)}}function rV(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class Yp extends un{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const u=[],f=new ue,d=new ue,h=[],g=[],_=[],x=[];for(let y=0;y<=i;y++){const M=[],b=y/i;let A=0;y===0&&o===0?A=.5/t:y===i&&l===Math.PI&&(A=-.5/t);for(let T=0;T<=t;T++){const P=T/t;f.x=-e*Math.cos(r+P*s)*Math.sin(o+b*a),f.y=e*Math.cos(o+b*a),f.z=e*Math.sin(r+P*s)*Math.sin(o+b*a),g.push(f.x,f.y,f.z),d.copy(f).normalize(),_.push(d.x,d.y,d.z),x.push(P+A,1-b),M.push(c++)}u.push(M)}for(let y=0;y<i;y++)for(let M=0;M<t;M++){const b=u[y][M+1],A=u[y][M],T=u[y+1][M],P=u[y+1][M+1];(y!==0||o>0)&&h.push(b,A,P),(y!==i-1||l<Math.PI)&&h.push(A,T,P)}this.setIndex(h),this.setAttribute("position",new Ot(g,3)),this.setAttribute("normal",new Ot(_,3)),this.setAttribute("uv",new Ot(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Yp(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class ty extends xc{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new ty(e.radius,e.detail)}}class ny extends un{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],c=[],u=new ue,f=new ue,d=new ue;for(let h=0;h<=i;h++)for(let g=0;g<=r;g++){const _=g/r*s,x=h/i*Math.PI*2;f.x=(e+t*Math.cos(x))*Math.cos(_),f.y=(e+t*Math.cos(x))*Math.sin(_),f.z=t*Math.sin(x),a.push(f.x,f.y,f.z),u.x=e*Math.cos(_),u.y=e*Math.sin(_),d.subVectors(f,u).normalize(),l.push(d.x,d.y,d.z),c.push(g/r),c.push(h/i)}for(let h=1;h<=i;h++)for(let g=1;g<=r;g++){const _=(r+1)*h+g-1,x=(r+1)*(h-1)+g-1,y=(r+1)*(h-1)+g,M=(r+1)*h+g;o.push(_,x,M),o.push(x,y,M)}this.setIndex(o),this.setAttribute("position",new Ot(a,3)),this.setAttribute("normal",new Ot(l,3)),this.setAttribute("uv",new Ot(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ny(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class iy extends un{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],c=[],u=[],f=new ue,d=new ue,h=new ue,g=new ue,_=new ue,x=new ue,y=new ue;for(let b=0;b<=i;++b){const A=b/i*s*Math.PI*2;M(A,s,o,e,h),M(A+.01,s,o,e,g),x.subVectors(g,h),y.addVectors(g,h),_.crossVectors(x,y),y.crossVectors(_,x),_.normalize(),y.normalize();for(let T=0;T<=r;++T){const P=T/r*Math.PI*2,k=-t*Math.cos(P),N=t*Math.sin(P);f.x=h.x+(k*y.x+N*_.x),f.y=h.y+(k*y.y+N*_.y),f.z=h.z+(k*y.z+N*_.z),l.push(f.x,f.y,f.z),d.subVectors(f,h).normalize(),c.push(d.x,d.y,d.z),u.push(b/i),u.push(T/r)}}for(let b=1;b<=i;b++)for(let A=1;A<=r;A++){const T=(r+1)*(b-1)+(A-1),P=(r+1)*b+(A-1),k=(r+1)*b+A,N=(r+1)*(b-1)+A;a.push(T,P,N),a.push(P,k,N)}this.setIndex(a),this.setAttribute("position",new Ot(l,3)),this.setAttribute("normal",new Ot(c,3)),this.setAttribute("uv",new Ot(u,2));function M(b,A,T,P,k){const N=Math.cos(b),z=Math.sin(b),R=T/A*b,F=Math.cos(R);k.x=P*(2+F)*.5*N,k.y=P*(2+F)*z*.5,k.z=P*Math.sin(R)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new iy(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class ry extends un{constructor(e=new hS(new ue(-1,-1,0),new ue(-1,1,0),new ue(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new ue,l=new ue,c=new $e;let u=new ue;const f=[],d=[],h=[],g=[];_(),this.setIndex(g),this.setAttribute("position",new Ot(f,3)),this.setAttribute("normal",new Ot(d,3)),this.setAttribute("uv",new Ot(h,2));function _(){for(let b=0;b<t;b++)x(b);x(s===!1?t:0),M(),y()}function x(b){u=e.getPointAt(b/t,u);const A=o.normals[b],T=o.binormals[b];for(let P=0;P<=r;P++){const k=P/r*Math.PI*2,N=Math.sin(k),z=-Math.cos(k);l.x=z*A.x+N*T.x,l.y=z*A.y+N*T.y,l.z=z*A.z+N*T.z,l.normalize(),d.push(l.x,l.y,l.z),a.x=u.x+i*l.x,a.y=u.y+i*l.y,a.z=u.z+i*l.z,f.push(a.x,a.y,a.z)}}function y(){for(let b=1;b<=t;b++)for(let A=1;A<=r;A++){const T=(r+1)*(b-1)+(A-1),P=(r+1)*b+(A-1),k=(r+1)*b+A,N=(r+1)*(b-1)+A;g.push(T,P,N),g.push(P,k,N)}}function M(){for(let b=0;b<=t;b++)for(let A=0;A<=r;A++)c.x=b/t,c.y=A/r,h.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new ry(new cv[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class dS extends un{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new ue,s=new ue;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const f=l[c],d=f.start,h=f.count;for(let g=d,_=d+h;g<_;g+=3)for(let x=0;x<3;x++){const y=a.getX(g+x),M=a.getX(g+(x+1)%3);r.fromBufferAttribute(o,y),s.fromBufferAttribute(o,M),IM(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,f=3*a+(c+1)%3;r.fromBufferAttribute(o,u),s.fromBufferAttribute(o,f),IM(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Ot(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function IM(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var DM=Object.freeze({__proto__:null,BoxGeometry:Zu,CapsuleGeometry:qv,CircleGeometry:Xv,ConeGeometry:Yv,CylinderGeometry:$f,DodecahedronGeometry:Zv,EdgesGeometry:EA,ExtrudeGeometry:Qv,IcosahedronGeometry:Jv,LatheGeometry:qp,OctahedronGeometry:Xp,PlaneGeometry:dl,PolyhedronGeometry:xc,RingGeometry:$v,ShapeGeometry:ey,SphereGeometry:Yp,TetrahedronGeometry:ty,TorusGeometry:ny,TorusKnotGeometry:iy,TubeGeometry:ry,WireframeGeometry:dS});class PA extends Hr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Ct(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class RA extends vo{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class pS extends Hr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ct(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ct(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yc,this.normalScale=new $e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new qs,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class kA extends pS{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new $e(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return bi(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ct(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ct(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ct(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class LA extends Hr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ct(16777215),this.specular=new Ct(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ct(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yc,this.normalScale=new $e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new qs,this.combine=Hp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class NA extends Hr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ct(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ct(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yc,this.normalScale=new $e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class IA extends Hr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yc,this.normalScale=new $e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class DA extends Hr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ct(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ct(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yc,this.normalScale=new $e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new qs,this.combine=Hp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class OA extends Hr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ct(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yc,this.normalScale=new $e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class FA extends as{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Eu(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function UA(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function zA(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function m3(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function mS(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function sV(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),f=[],d=[];for(let h=0;h<c.times.length;++h){const g=c.times[h]*r;if(!(g<t||g>=i)){f.push(c.times[h]);for(let _=0;_<u;++_)d.push(c.values[h*u+_])}}f.length!==0&&(c.times=Eu(f,c.times.constructor),c.values=Eu(d,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function oV(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(y){return y.name===a.name&&y.ValueTypeName===l});if(c===void 0)continue;let u=0;const f=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=f/3);let d=0;const h=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=h/3);const g=a.times.length-1;let _;if(s<=a.times[0]){const y=u,M=f-u;_=a.values.slice(y,M)}else if(s>=a.times[g]){const y=g*f+u,M=y+f-u;_=a.values.slice(y,M)}else{const y=a.createInterpolant(),M=u,b=f-u;y.evaluate(s),_=y.resultBuffer.slice(M,b)}l==="quaternion"&&new zr().fromArray(_).normalize().conjugate().toArray(_);const x=c.times.length;for(let y=0;y<x;++y){const M=y*h+d;if(l==="quaternion")zr.multiplyQuaternionsFlat(c.values,M,_,0,c.values,M);else{const b=h-d*2;for(let A=0;A<b;++A)c.values[M+A]-=_[A]}}}return n.blendMode=q_,n}const aV={convertArray:Eu,isTypedArray:UA,getKeyframeOrder:zA,sortedArray:m3,flattenJSON:mS,subclip:sV,makeClipAdditive:oV};class Zp{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class BA extends Zp{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:wu,endingEnd:wu}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case bu:s=e,a=2*t-i;break;case vp:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case bu:o=e,l=2*i-t;break;case vp:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const c=(i-t)*.5,u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,f=this._offsetNext,d=this._weightPrev,h=this._weightNext,g=(i-t)/(r-t),_=g*g,x=_*g,y=-d*x+2*d*_-d*g,M=(1+d)*x+(-1.5-2*d)*_+(-.5+d)*g+1,b=(-1-h)*x+(1.5+h)*_+.5*g,A=h*x-h*_;for(let T=0;T!==a;++T)s[T]=y*o[u+T]+M*o[c+T]+b*o[l+T]+A*o[f+T];return s}}class gS extends Zp{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(i-t)/(r-t),f=1-u;for(let d=0;d!==a;++d)s[d]=o[c+d]*f+o[l+d]*u;return s}}class HA extends Zp{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Go{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Eu(t,this.TimeBufferType),this.values=Eu(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Eu(e.times,Array),values:Eu(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new HA(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new gS(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new BA(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case mp:t=this.InterpolantFactoryMethodDiscrete;break;case gp:t=this.InterpolantFactoryMethodLinear;break;case S1:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return mp;case this.InterpolantFactoryMethodLinear:return gp;case this.InterpolantFactoryMethodSmooth:return S1}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&UA(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===S1,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(r)l=!0;else{const f=a*i,d=f-i,h=f+i;for(let g=0;g!==i;++g){const _=t[f+g];if(_!==t[d+g]||_!==t[h+g]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const f=a*i,d=o*i;for(let h=0;h!==i;++h)t[d+h]=t[f+h]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Go.prototype.TimeBufferType=Float32Array;Go.prototype.ValueBufferType=Float32Array;Go.prototype.DefaultInterpolation=gp;class Ku extends Go{}Ku.prototype.ValueTypeName="bool";Ku.prototype.ValueBufferType=Array;Ku.prototype.DefaultInterpolation=mp;Ku.prototype.InterpolantFactoryMethodLinear=void 0;Ku.prototype.InterpolantFactoryMethodSmooth=void 0;class vS extends Go{}vS.prototype.ValueTypeName="color";class Pp extends Go{}Pp.prototype.ValueTypeName="number";class VA extends Zp{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let c=e*a;for(let u=c+a;c!==u;c+=4)zr.slerpFlat(s,0,o,c-a,o,c,l);return s}}class ed extends Go{InterpolantFactoryMethodLinear(e){return new VA(this.times,this.values,this.getValueSize(),e)}}ed.prototype.ValueTypeName="quaternion";ed.prototype.DefaultInterpolation=gp;ed.prototype.InterpolantFactoryMethodSmooth=void 0;class Qu extends Go{}Qu.prototype.ValueTypeName="string";Qu.prototype.ValueBufferType=Array;Qu.prototype.DefaultInterpolation=mp;Qu.prototype.InterpolantFactoryMethodLinear=void 0;Qu.prototype.InterpolantFactoryMethodSmooth=void 0;class Rp extends Go{}Rp.prototype.ValueTypeName="vector";class kp{constructor(e,t=-1,i,r=Iv){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Ws(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(cV(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(Go.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=zA(l);l=m3(l,1,u),c=m3(c,1,u),!r&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new Pp(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const f=u[1];let d=r[f];d||(r[f]=d=[]),d.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(f,d,h,g,_){if(h.length!==0){const x=[],y=[];mS(h,x,y,g),x.length!==0&&_.push(new f(d,x,y))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let f=0;f<c.length;f++){const d=c[f].keys;if(!(!d||d.length===0))if(d[0].morphTargets){const h={};let g;for(g=0;g<d.length;g++)if(d[g].morphTargets)for(let _=0;_<d[g].morphTargets.length;_++)h[d[g].morphTargets[_]]=-1;for(const _ in h){const x=[],y=[];for(let M=0;M!==d[g].morphTargets.length;++M){const b=d[g];x.push(b.time),y.push(b.morphTarget===_?1:0)}r.push(new Pp(".morphTargetInfluence["+_+"]",x,y))}l=h.length*o}else{const h=".bones["+t[f].name+"]";i(Rp,h+".position",d,"pos",r),i(ed,h+".quaternion",d,"rot",r),i(Rp,h+".scale",d,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function lV(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Pp;case"vector":case"vector2":case"vector3":case"vector4":return Rp;case"color":return vS;case"quaternion":return ed;case"bool":case"boolean":return Ku;case"string":return Qu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function cV(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=lV(n.type);if(n.times===void 0){const t=[],i=[];mS(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Ja={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class yS{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,s===!1&&r.onStart!==void 0&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,r.onProgress!==void 0&&r.onProgress(u,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(u){r.onError!==void 0&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,f){return c.push(u,f),this},this.removeHandler=function(u){const f=c.indexOf(u);return f!==-1&&c.splice(f,2),this},this.getHandler=function(u){for(let f=0,d=c.length;f<d;f+=2){const h=c[f],g=c[f+1];if(h.global&&(h.lastIndex=0),h.test(u))return g}return null}}}const GA=new yS;class Ts{constructor(e){this.manager=e!==void 0?e:GA,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Ts.DEFAULT_MATERIAL_NAME="__DEFAULT";const Ba={};class uV extends Error{constructor(e,t){super(e),this.response=t}}class ll extends Ts{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Ja.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Ba[e]!==void 0){Ba[e].push({onLoad:t,onProgress:i,onError:r});return}Ba[e]=[],Ba[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=Ba[e],f=c.body.getReader(),d=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),h=d?parseInt(d):0,g=h!==0;let _=0;const x=new ReadableStream({start(y){M();function M(){f.read().then(({done:b,value:A})=>{if(b)y.close();else{_+=A.byteLength;const T=new ProgressEvent("progress",{lengthComputable:g,loaded:_,total:h});for(let P=0,k=u.length;P<k;P++){const N=u[P];N.onProgress&&N.onProgress(T)}y.enqueue(A),M()}})}}});return new Response(x)}else throw new uV(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),d=f&&f[1]?f[1].toLowerCase():void 0,h=new TextDecoder(d);return c.arrayBuffer().then(g=>h.decode(g))}}}).then(c=>{Ja.add(e,c);const u=Ba[e];delete Ba[e];for(let f=0,d=u.length;f<d;f++){const h=u[f];h.onLoad&&h.onLoad(c)}}).catch(c=>{const u=Ba[e];if(u===void 0)throw this.manager.itemError(e),c;delete Ba[e];for(let f=0,d=u.length;f<d;f++){const h=u[f];h.onError&&h.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class hV extends Ts{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new ll(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=kp.parse(e[i]);t.push(r)}return t}}class fV extends Ts{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],a=new Wv,l=new ll(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(f){l.load(e[f],function(d){const h=s.parse(d,!0);o[f]={width:h.width,height:h.height,format:h.format,mipmaps:h.mipmaps},c+=1,c===6&&(h.mipmapCount===1&&(a.minFilter=oi),a.image=o,a.format=h.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let f=0,d=e.length;f<d;++f)u(f);else l.load(e,function(f){const d=s.parse(f,!0);if(d.isCubemap){const h=d.mipmaps.length/d.mipmapCount;for(let g=0;g<h;g++){o[g]={mipmaps:[]};for(let _=0;_<d.mipmapCount;_++)o[g].mipmaps.push(d.mipmaps[g*d.mipmapCount+_]),o[g].format=d.format,o[g].width=d.width,o[g].height=d.height}a.image=o}else a.image.width=d.width,a.image.height=d.height,a.mipmaps=d.mipmaps;d.mipmapCount===1&&(a.minFilter=oi),a.format=d.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}}class Lp extends Ts{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Ja.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=bp("img");function l(){u(),Ja.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(f){u(),r&&r(f),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class dV extends Ts{constructor(e){super(e)}load(e,t,i,r){const s=new Wp;s.colorSpace=so;const o=new Lp(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class pV extends Ts{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new cc,a=new ll(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let c;try{c=s.parse(l)}catch(u){if(r!==void 0)r(u);else{console.error(u);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:Fr,o.wrapT=c.wrapT!==void 0?c.wrapT:Fr,o.magFilter=c.magFilter!==void 0?c.magFilter:oi,o.minFilter=c.minFilter!==void 0?c.minFilter:oi,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(o.colorSpace=c.colorSpace),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=ua),c.mipmapCount===1&&(o.minFilter=oi),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c)},i,r),o}}class mV extends Ts{constructor(e){super(e)}load(e,t,i,r){const s=new yi,o=new Lp(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class _c extends Rn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ct(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class WA extends _c{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Rn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Ct(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const n2=new qt,OM=new ue,FM=new ue;class xS{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new $e(512,512),this.map=null,this.mapPass=null,this.matrix=new qt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new jp,this._frameExtents=new $e(1,1),this._viewportCount=1,this._viewports=[new gn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;OM.setFromMatrixPosition(e.matrixWorld),t.position.copy(OM),FM.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(FM),t.updateMatrixWorld(),n2.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(n2),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(n2)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class gV extends xS{constructor(){super(new Li(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=Wf*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class jA extends _c{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Rn.DEFAULT_UP),this.updateMatrix(),this.target=new Rn,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new gV}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const UM=new qt,r0=new ue,i2=new ue;class vV extends xS{constructor(){super(new Li(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new $e(4,2),this._viewportCount=6,this._viewports=[new gn(2,1,1,1),new gn(0,1,1,1),new gn(3,1,1,1),new gn(1,1,1,1),new gn(3,0,1,1),new gn(1,0,1,1)],this._cubeDirections=[new ue(1,0,0),new ue(-1,0,0),new ue(0,0,1),new ue(0,0,-1),new ue(0,1,0),new ue(0,-1,0)],this._cubeUps=[new ue(0,1,0),new ue(0,1,0),new ue(0,1,0),new ue(0,1,0),new ue(0,0,1),new ue(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),r0.setFromMatrixPosition(e.matrixWorld),i.position.copy(r0),i2.copy(i.position),i2.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(i2),i.updateMatrixWorld(),r.makeTranslation(-r0.x,-r0.y,-r0.z),UM.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(UM)}}class qA extends _c{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new vV}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class yV extends xS{constructor(){super(new lc(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class XA extends _c{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Rn.DEFAULT_UP),this.updateMatrix(),this.target=new Rn,this.shadow=new yV}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class YA extends _c{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class ZA extends _c{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class KA{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ue)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class QA extends _c{constructor(e=new KA,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class sy extends Ts{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new ll(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=sy.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Ct().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new Ct().setHex(o.value);break;case"v2":r.uniforms[s].value=new $e().fromArray(o.value);break;case"v3":r.uniforms[s].value=new ue().fromArray(o.value);break;case"v4":r.uniforms[s].value=new gn().fromArray(o.value);break;case"m3":r.uniforms[s].value=new tn().fromArray(o.value);break;case"m4":r.uniforms[s].value=new qt().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new $e().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new $e().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:PA,SpriteMaterial:rS,RawShaderMaterial:RA,ShaderMaterial:vo,PointsMaterial:oS,MeshPhysicalMaterial:kA,MeshStandardMaterial:pS,MeshPhongMaterial:LA,MeshToonMaterial:NA,MeshNormalMaterial:IA,MeshLambertMaterial:DA,MeshDepthMaterial:Uv,MeshDistanceMaterial:zv,MeshBasicMaterial:fl,MeshMatcapMaterial:OA,LineDashedMaterial:FA,LineBasicMaterial:as,Material:Hr};return new t[e]}}class g3{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class oy extends un{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class JA extends Ts{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new ll(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(h,g){if(t[g]!==void 0)return t[g];const x=h.interleavedBuffers[g],y=s(h,x.buffer),M=xf(x.type,y),b=new Vv(M,x.stride);return b.uuid=x.uuid,t[g]=b,b}function s(h,g){if(i[g]!==void 0)return i[g];const x=h.arrayBuffers[g],y=new Uint32Array(x).buffer;return i[g]=y,y}const o=e.isInstancedBufferGeometry?new oy:new un,a=e.data.index;if(a!==void 0){const h=xf(a.type,a.array);o.setIndex(new Xn(h,1))}const l=e.data.attributes;for(const h in l){const g=l[h];let _;if(g.isInterleavedBufferAttribute){const x=r(e.data,g.data);_=new Vs(x,g.itemSize,g.offset,g.normalized)}else{const x=xf(g.type,g.array),y=g.isInstancedBufferAttribute?Vu:Xn;_=new y(x,g.itemSize,g.normalized)}g.name!==void 0&&(_.name=g.name),g.usage!==void 0&&_.setUsage(g.usage),o.setAttribute(h,_)}const c=e.data.morphAttributes;if(c)for(const h in c){const g=c[h],_=[];for(let x=0,y=g.length;x<y;x++){const M=g[x];let b;if(M.isInterleavedBufferAttribute){const A=r(e.data,M.data);b=new Vs(A,M.itemSize,M.offset,M.normalized)}else{const A=xf(M.type,M.array);b=new Xn(A,M.itemSize,M.normalized)}M.name!==void 0&&(b.name=M.name),_.push(b)}o.morphAttributes[h]=_}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let h=0,g=f.length;h!==g;++h){const _=f[h];o.addGroup(_.start,_.count,_.materialIndex)}const d=e.data.boundingSphere;if(d!==void 0){const h=new ue;d.center!==void 0&&h.fromArray(d.center),o.boundingSphere=new Qi(h,d.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class xV extends Ts{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?g3.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new ll(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(f){r!==void 0&&r(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?g3.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new ll(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,i),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),t!==void 0){let f=!1;for(const d in o)if(o[d].data instanceof HTMLImageElement){f=!0;break}f===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new Lu().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new Gv().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new JA;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in DM?a=DM[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new sy;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=kp.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return o(u)}else return l.data?{data:xf(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new yS(t);s=new Lp(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const f=e[c],d=f.url;if(Array.isArray(d)){const h=[];for(let g=0,_=d.length;g<_;g++){const x=d[g],y=a(x);y!==null&&(y instanceof HTMLImageElement?h.push(y):h.push(new cc(y.data,y.width,y.height)))}r[f.uuid]=new Mu(h)}else{const h=a(f.url);r[f.uuid]=new Mu(h)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:xf(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new Lp(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let f=0,d=c.length;f<d;f++){const h=c[f],g=await s(h);g!==null&&(g instanceof HTMLImageElement?u.push(g):u.push(new cc(g.data,g.width,g.height)))}i[l.uuid]=new Mu(u)}else{const u=await s(l.url);i[l.uuid]=new Mu(u)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let u;Array.isArray(c)?(u=new Wp,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new cc:u=new yi,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=i(a.mapping,_V)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=i(a.wrap[0],zM),u.wrapT=i(a.wrap[1],zM)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.minFilter!==void 0&&(u.minFilter=i(a.minFilter,BM)),a.magFilter!==void 0&&(u.magFilter=i(a.magFilter,BM)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(u.compareFunction=a.compareFunction),a.userData!==void 0&&(u.userData=a.userData),r[a.uuid]=u}return r}parseObject(e,t,i,r,s){let o;function a(d){return t[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",d),t[d]}function l(d){if(d!==void 0){if(Array.isArray(d)){const h=[];for(let g=0,_=d.length;g<_;g++){const x=d[g];i[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",x),h.push(i[x])}return h}return i[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",d),i[d]}}function c(d){return r[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",d),r[d]}let u,f;switch(e.type){case"Scene":o=new iS,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Ct(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new Hv(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new Bv(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new Li(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new lc(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new YA(e.color,e.intensity);break;case"DirectionalLight":o=new XA(e.color,e.intensity);break;case"PointLight":o=new qA(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new ZA(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new jA(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new WA(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new QA().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),f=l(e.material),o=new mA(u,f),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),f=l(e.material),o=new di(u,f);break;case"InstancedMesh":u=a(e.geometry),f=l(e.material);const d=e.count,h=e.instanceMatrix,g=e.instanceColor;o=new gA(u,f,d),o.instanceMatrix=new Vu(new Float32Array(h.array),16),g!==void 0&&(o.instanceColor=new Vu(new Float32Array(g.array),g.itemSize));break;case"BatchedMesh":u=a(e.geometry),f=l(e.material),o=new vA(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,f),o.geometry=u,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(_=>{const x=new Vi;x.min.fromArray(_.boxMin),x.max.fromArray(_.boxMax);const y=new Qi;return y.radius=_.sphereRadius,y.center.fromArray(_.sphereCenter),{boxInitialized:_.boxInitialized,box:x,sphereInitialized:_.sphereInitialized,sphere:y}}),o._maxGeometryCount=e.maxGeometryCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=c(e.matricesTexture.uuid);break;case"LOD":o=new pA;break;case"Line":o=new pc(a(e.geometry),l(e.material));break;case"LineLoop":o=new yA(a(e.geometry),l(e.material));break;case"LineSegments":o=new ya(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new xA(a(e.geometry),l(e.material));break;case"Sprite":o=new dA(l(e.material));break;case"Group":o=new wf;break;case"Bone":o=new sS;break;default:o=new Rn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const d=e.children;for(let h=0;h<d.length;h++)o.add(this.parseObject(d[h],t,i,r,s))}if(e.animations!==void 0){const d=e.animations;for(let h=0;h<d.length;h++){const g=d[h];o.animations.push(s[g])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const d=e.levels;for(let h=0;h<d.length;h++){const g=d[h],_=o.getObjectByProperty("uuid",g.object);_!==void 0&&o.addLevel(_,g.distance,g.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const _V={UVMapping:Lv,CubeReflectionMapping:al,CubeRefractionMapping:dc,EquirectangularReflectionMapping:hp,EquirectangularRefractionMapping:fp,CubeUVReflectionMapping:Qf},zM={RepeatWrapping:dp,ClampToEdgeWrapping:Fr,MirroredRepeatWrapping:pp},BM={NearestFilter:Ri,NearestMipmapNearestFilter:ov,NearestMipmapLinearFilter:mu,LinearFilter:oi,LinearMipmapNearestFilter:O0,LinearMipmapLinearFilter:ua};class SV extends Ts{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Ja.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(c=>{t&&t(c),s.manager.itemEnd(e)}).catch(c=>{r&&r(c)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return Ja.add(e,c),t&&t(c),s.manager.itemEnd(e),c}).catch(function(c){r&&r(c),Ja.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Ja.add(e,l),s.manager.itemStart(e)}}let Ug;class _S{static getContext(){return Ug===void 0&&(Ug=new(window.AudioContext||window.webkitAudioContext)),Ug}static setContext(e){Ug=e}}class wV extends Ts{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new ll(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);_S.getContext().decodeAudioData(c,function(f){t(f)}).catch(a)}catch(c){a(c)}},i,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}const HM=new qt,VM=new qt,tu=new qt;class bV{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Li,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Li,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,tu.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(Ru*t.fov*.5)/t.zoom;let a,l;VM.elements[12]=-r,HM.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,tu.elements[0]=2*t.near/(l-a),tu.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(tu),a=-o*t.aspect-s,l=o*t.aspect-s,tu.elements[0]=2*t.near/(l-a),tu.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(tu)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(VM),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(HM)}}class SS{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=GM(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=GM();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function GM(){return(typeof performance>"u"?Date:performance).now()}const nu=new ue,WM=new zr,MV=new ue,iu=new ue;class EV extends Rn{constructor(){super(),this.type="AudioListener",this.context=_S.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new SS}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(nu,WM,MV),iu.set(0,0,-1).applyQuaternion(WM),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(nu.x,r),t.positionY.linearRampToValueAtTime(nu.y,r),t.positionZ.linearRampToValueAtTime(nu.z,r),t.forwardX.linearRampToValueAtTime(iu.x,r),t.forwardY.linearRampToValueAtTime(iu.y,r),t.forwardZ.linearRampToValueAtTime(iu.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(nu.x,nu.y,nu.z),t.setOrientation(iu.x,iu.y,iu.z,i.x,i.y,i.z)}}class $A extends Rn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const ru=new ue,jM=new zr,TV=new ue,su=new ue;class AV extends $A{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(ru,jM,TV),su.set(0,0,1).applyQuaternion(jM);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(ru.x,i),t.positionY.linearRampToValueAtTime(ru.y,i),t.positionZ.linearRampToValueAtTime(ru.z,i),t.orientationX.linearRampToValueAtTime(su.x,i),t.orientationY.linearRampToValueAtTime(su.y,i),t.orientationZ.linearRampToValueAtTime(su.z,i)}else t.setPosition(ru.x,ru.y,ru.z),t.setOrientation(su.x,su.y,su.z)}}class CV{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class eC{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){zr.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;zr.multiplyQuaternionsFlat(e,o,e,t,e,i),zr.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const wS="\\[\\]\\.:\\/",PV=new RegExp("["+wS+"]","g"),bS="[^"+wS+"]",RV="[^"+wS.replace("\\.","")+"]",kV=/((?:WC+[\/:])*)/.source.replace("WC",bS),LV=/(WCOD+)?/.source.replace("WCOD",RV),NV=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",bS),IV=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",bS),DV=new RegExp("^"+kV+LV+NV+IV+"$"),OV=["material","materials","bones","map"];class FV{constructor(e,t,i){const r=i||Mn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Mn{constructor(e,t,i){this.path=t,this.parsedPath=i||Mn.parseTrackName(t),this.node=Mn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Mn.Composite(e,t,i):new Mn(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(PV,"")}static parseTrackName(e){const t=DV.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);OV.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=Mn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let c=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[r];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Mn.Composite=FV;Mn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Mn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Mn.prototype.GetterByBindingType=[Mn.prototype._getValue_direct,Mn.prototype._getValue_array,Mn.prototype._getValue_arrayElement,Mn.prototype._getValue_toArray];Mn.prototype.SetterByBindingTypeAndVersioning=[[Mn.prototype._setValue_direct,Mn.prototype._setValue_direct_setNeedsUpdate,Mn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Mn.prototype._setValue_array,Mn.prototype._setValue_array_setNeedsUpdate,Mn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Mn.prototype._setValue_arrayElement,Mn.prototype._setValue_arrayElement_setNeedsUpdate,Mn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Mn.prototype._setValue_fromArray,Mn.prototype._setValue_fromArray_setNeedsUpdate,Mn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class UV{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Ws(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,f=arguments.length;u!==f;++u){const d=arguments[u],h=d.uuid;let g=t[h];if(g===void 0){g=l++,t[h]=g,e.push(d);for(let _=0,x=o;_!==x;++_)s[_].push(new Mn(d,i[_],r[_]))}else if(g<c){a=e[g];const _=--c,x=e[_];t[x.uuid]=g,e[g]=x,t[h]=_,e[_]=d;for(let y=0,M=o;y!==M;++y){const b=s[y],A=b[_];let T=b[g];b[g]=A,T===void 0&&(T=new Mn(d,i[y],r[y])),b[_]=T}}else e[g]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=t[c];if(u!==void 0&&u>=s){const f=s++,d=e[f];t[d.uuid]=u,e[u]=d,t[c]=f,e[f]=l;for(let h=0,g=r;h!==g;++h){const _=i[h],x=_[f],y=_[u];_[u]=x,_[f]=y}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,f=t[u];if(f!==void 0)if(delete t[u],f<s){const d=--s,h=e[d],g=--o,_=e[g];t[h.uuid]=f,e[f]=h,t[_.uuid]=d,e[d]=_,e.pop();for(let x=0,y=r;x!==y;++x){const M=i[x],b=M[d],A=M[g];M[f]=b,M[d]=A,M.pop()}}else{const d=--o,h=e[d];d>0&&(t[h.uuid]=f),e[f]=h,e.pop();for(let g=0,_=r;g!==_;++g){const x=i[g];x[f]=x[d],x.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,f=new Array(c);r=s.length,i[e]=r,o.push(e),a.push(t),s.push(f);for(let d=u,h=l.length;d!==h;++d){const g=l[d];f[d]=new Mn(g,e,t)}return f}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class tC{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:wu,endingEnd:wu};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=FT,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case q_:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case Iv:default:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(o),c[u].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===UT;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===OT){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=bu,r.endingEnd=bu):(e?r.endingStart=this.zeroSlopeAtStart?bu:wu:r.endingStart=vp,t?r.endingEnd=this.zeroSlopeAtEnd?bu:wu:r.endingEnd=vp)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}const zV=new Float32Array(1);class BV extends hl{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let f=0;f!==s;++f){const d=r[f],h=d.name;let g=u[h];if(g!==void 0)++g.referenceCount,o[f]=g;else{if(g=o[f],g!==void 0){g._cacheIndex===null&&(++g.referenceCount,this._addInactiveBinding(g,l,h));continue}const _=t&&t._propertyBindings[f].binding.parsedPath;g=new eC(Mn.create(i,h,_),d.ValueTypeName,d.getValueSize()),++g.referenceCount,this._addInactiveBinding(g,l,h),o[f]=g}a[f].resultBuffer=g.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const f=a.actionByRoot,d=(e._localRoot||this._root).uuid;delete f[d],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new gS(new Float32Array(2),new Float32Array(2),1,zV),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?kp.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(i===void 0&&(o!==null?i=o.blendMode:i=Iv),l!==void 0){const f=l.actionByRoot[s];if(f!==void 0&&f.blendMode===i)return f;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new tC(this,o,t,i);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?kp.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,f=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,f._cacheIndex=u,t[u]=f,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class MS{constructor(e){this.value=e}clone(){return new MS(this.value.clone===void 0?this.value:this.value.clone())}}let HV=0;class VV extends hl{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:HV++}),this.name="",this.usage=Sp,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class uv extends Vv{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class GV{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const qM=new qt;class nC{constructor(e,t,i=0,r=1/0){this.ray=new Yu(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new ku,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return qM.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(qM),this}intersectObject(e,t=!0,i=[]){return v3(e,this,i,t),i.sort(XM),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)v3(e[r],this,i,t);return i.sort(XM),i}}function XM(n,e){return n.distance-e.distance}function v3(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const r=n.children;for(let s=0,o=r.length;s<o;s++)v3(r[s],e,t,!0)}}class y3{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(bi(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class WV{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const YM=new $e;class jV{constructor(e=new $e(1/0,1/0),t=new $e(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=YM.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,YM).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ZM=new ue,zg=new ue;class iC{constructor(e=new ue,t=new ue){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){ZM.subVectors(e,this.start),zg.subVectors(this.end,this.start);const i=zg.dot(zg);let s=zg.dot(ZM)/i;return t&&(s=bi(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const KM=new ue;class qV extends Rn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new un,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}i.setAttribute("position",new Ot(r,3));const s=new as({fog:!1,toneMapped:!1});this.cone=new ya(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),KM.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(KM),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Bl=new ue,Bg=new qt,r2=new qt;class XV extends ya{constructor(e){const t=rC(e),i=new un,r=[],s=[],o=new Ct(0,0,1),a=new Ct(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new Ot(r,3)),i.setAttribute("color",new Ot(s,3));const l=new as({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");r2.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(Bg.multiplyMatrices(r2,a.matrixWorld),Bl.setFromMatrixPosition(Bg),r.setXYZ(o,Bl.x,Bl.y,Bl.z),Bg.multiplyMatrices(r2,a.parent.matrixWorld),Bl.setFromMatrixPosition(Bg),r.setXYZ(o+1,Bl.x,Bl.y,Bl.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function rC(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,rC(n.children[t]));return e}class YV extends di{constructor(e,t,i){const r=new Yp(t,4,2),s=new fl({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const ZV=new ue,QM=new Ct,JM=new Ct;class KV extends Rn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new Xp(t);r.rotateY(Math.PI*.5),this.material=new fl({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new Xn(o,3)),this.add(new di(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");QM.copy(this.light.color),JM.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?QM:JM;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(ZV.setFromMatrixPosition(this.light.matrixWorld).negate())}}class QV extends ya{constructor(e=10,t=10,i=4473924,r=8947848){i=new Ct(i),r=new Ct(r);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let d=0,h=0,g=-a;d<=t;d++,g+=o){l.push(-a,0,g,a,0,g),l.push(g,0,-a,g,0,a);const _=d===s?i:r;_.toArray(c,h),h+=3,_.toArray(c,h),h+=3,_.toArray(c,h),h+=3,_.toArray(c,h),h+=3}const u=new un;u.setAttribute("position",new Ot(l,3)),u.setAttribute("color",new Ot(c,3));const f=new as({vertexColors:!0,toneMapped:!1});super(u,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class JV extends ya{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new Ct(s),o=new Ct(o);const a=[],l=[];if(t>1)for(let f=0;f<t;f++){const d=f/t*(Math.PI*2),h=Math.sin(d)*e,g=Math.cos(d)*e;a.push(0,0,0),a.push(h,0,g);const _=f&1?s:o;l.push(_.r,_.g,_.b),l.push(_.r,_.g,_.b)}for(let f=0;f<i;f++){const d=f&1?s:o,h=e-e/i*f;for(let g=0;g<r;g++){let _=g/r*(Math.PI*2),x=Math.sin(_)*h,y=Math.cos(_)*h;a.push(x,0,y),l.push(d.r,d.g,d.b),_=(g+1)/r*(Math.PI*2),x=Math.sin(_)*h,y=Math.cos(_)*h,a.push(x,0,y),l.push(d.r,d.g,d.b)}}const c=new un;c.setAttribute("position",new Ot(a,3)),c.setAttribute("color",new Ot(l,3));const u=new as({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const $M=new ue,Hg=new ue,e6=new ue;class $V extends Rn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new un;r.setAttribute("position",new Ot([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new as({fog:!1,toneMapped:!1});this.lightPlane=new pc(r,s),this.add(this.lightPlane),r=new un,r.setAttribute("position",new Ot([0,0,0,0,0,1],3)),this.targetLine=new pc(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),$M.setFromMatrixPosition(this.light.matrixWorld),Hg.setFromMatrixPosition(this.light.target.matrixWorld),e6.subVectors(Hg,$M),this.lightPlane.lookAt(Hg),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Hg),this.targetLine.scale.z=e6.length()}}const Vg=new ue,Si=new Gp;class eG extends ya{constructor(e){const t=new un,i=new as({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(g,_){l(g),l(_)}function l(g){r.push(0,0,0),s.push(0,0,0),o[g]===void 0&&(o[g]=[]),o[g].push(r.length/3-1)}t.setAttribute("position",new Ot(r,3)),t.setAttribute("color",new Ot(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new Ct(16755200),u=new Ct(16711680),f=new Ct(43775),d=new Ct(16777215),h=new Ct(3355443);this.setColors(c,u,f,d,h)}setColors(e,t,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;Si.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Pi("c",t,e,Si,0,0,-1),Pi("t",t,e,Si,0,0,1),Pi("n1",t,e,Si,-i,-r,-1),Pi("n2",t,e,Si,i,-r,-1),Pi("n3",t,e,Si,-i,r,-1),Pi("n4",t,e,Si,i,r,-1),Pi("f1",t,e,Si,-i,-r,1),Pi("f2",t,e,Si,i,-r,1),Pi("f3",t,e,Si,-i,r,1),Pi("f4",t,e,Si,i,r,1),Pi("u1",t,e,Si,i*.7,r*1.1,-1),Pi("u2",t,e,Si,-i*.7,r*1.1,-1),Pi("u3",t,e,Si,0,r*2,-1),Pi("cf1",t,e,Si,-i,0,1),Pi("cf2",t,e,Si,i,0,1),Pi("cf3",t,e,Si,0,-r,1),Pi("cf4",t,e,Si,0,r,1),Pi("cn1",t,e,Si,-i,0,-1),Pi("cn2",t,e,Si,i,0,-1),Pi("cn3",t,e,Si,0,-r,-1),Pi("cn4",t,e,Si,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Pi(n,e,t,i,r,s,o){Vg.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],Vg.x,Vg.y,Vg.z)}}const Gg=new Vi;class tG extends ya{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new un;s.setIndex(new Xn(i,1)),s.setAttribute("position",new Xn(r,3)),super(s,new as({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Gg.setFromObject(this.object),Gg.isEmpty())return;const t=Gg.min,i=Gg.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class nG extends ya{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new un;s.setIndex(new Xn(i,1)),s.setAttribute("position",new Ot(r,3)),super(s,new as({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class iG extends pc{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new un;o.setAttribute("position",new Ot(s,3)),o.computeBoundingSphere(),super(o,new as({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new un;l.setAttribute("position",new Ot(a,3)),l.computeBoundingSphere(),this.add(new di(l,new fl({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const t6=new ue;let Wg,s2;class rG extends Rn{constructor(e=new ue(0,0,1),t=new ue(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",Wg===void 0&&(Wg=new un,Wg.setAttribute("position",new Ot([0,0,0,0,1,0],3)),s2=new $f(0,.5,1,5,1),s2.translate(0,-.5,0)),this.position.copy(t),this.line=new pc(Wg,new as({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new di(s2,new fl({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{t6.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(t6,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class sG extends ya{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new un;r.setAttribute("position",new Ot(t,3)),r.setAttribute("color",new Ot(i,3));const s=new as({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new Ct,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class oG{constructor(){this.type="ShapePath",this.color=new Ct,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Ep,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(y){const M=[];for(let b=0,A=y.length;b<A;b++){const T=y[b],P=new Lu;P.curves=T.curves,M.push(P)}return M}function i(y,M){const b=M.length;let A=!1;for(let T=b-1,P=0;P<b;T=P++){let k=M[T],N=M[P],z=N.x-k.x,R=N.y-k.y;if(Math.abs(R)>Number.EPSILON){if(R<0&&(k=M[P],z=-z,N=M[T],R=-R),y.y<k.y||y.y>N.y)continue;if(y.y===k.y){if(y.x===k.x)return!0}else{const F=R*(y.x-k.x)-z*(y.y-k.y);if(F===0)return!0;if(F<0)continue;A=!A}}else{if(y.y!==k.y)continue;if(N.x<=y.x&&y.x<=k.x||k.x<=y.x&&y.x<=N.x)return!0}}return A}const r=va.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new Lu,l.curves=a.curves,c.push(l),c;let u=!r(s[0].getPoints());u=e?!u:u;const f=[],d=[];let h=[],g=0,_;d[g]=void 0,h[g]=[];for(let y=0,M=s.length;y<M;y++)a=s[y],_=a.getPoints(),o=r(_),o=e?!o:o,o?(!u&&d[g]&&g++,d[g]={s:new Lu,p:_},d[g].s.curves=a.curves,u&&g++,h[g]=[]):h[g].push({h:a,p:_[0]});if(!d[0])return t(s);if(d.length>1){let y=!1,M=0;for(let b=0,A=d.length;b<A;b++)f[b]=[];for(let b=0,A=d.length;b<A;b++){const T=h[b];for(let P=0;P<T.length;P++){const k=T[P];let N=!0;for(let z=0;z<d.length;z++)i(k.p,d[z].p)&&(b!==z&&M++,N?(N=!1,f[z].push(k)):y=!0);N&&f[b].push(k)}}M>0&&y===!1&&(h=f)}let x;for(let y=0,M=d.length;y<M;y++){l=d[y].s,c.push(l),x=h[y];for(let b=0,A=x.length;b<A;b++)l.holes.push(x[b].h)}return c}}class aG extends Ho{constructor(e=1,t=1,i=1,r={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,t,{...r,count:i}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Bp}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Bp);const lG=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:F_,AddEquation:Xl,AddOperation:ST,AdditiveAnimationBlendMode:q_,AdditiveBlending:R4,AgXToneMapping:TT,AlphaFormat:kT,AlwaysCompare:XT,AlwaysDepth:pT,AlwaysStencilFunc:a3,AmbientLight:YA,AnimationAction:tC,AnimationClip:kp,AnimationLoader:hV,AnimationMixer:BV,AnimationObjectGroup:UV,AnimationUtils:aV,ArcCurve:_A,ArrayCamera:uA,ArrowHelper:rG,AttachedBindMode:D4,Audio:$A,AudioAnalyser:CV,AudioContext:_S,AudioListener:EV,AudioLoader:wV,AxesHelper:sG,BackSide:rs,BasicDepthPacking:zT,BasicShadowMap:KE,BatchedMesh:vA,Bone:sS,BooleanKeyframeTrack:Ku,Box2:jV,Box3:Vi,Box3Helper:nG,BoxGeometry:Zu,BoxHelper:tG,BufferAttribute:Xn,BufferGeometry:un,BufferGeometryLoader:JA,ByteType:PT,Cache:Ja,Camera:Gp,CameraHelper:eG,CanvasTexture:kH,CapsuleGeometry:qv,CatmullRomCurve3:SA,CineonToneMapping:MT,CircleGeometry:Xv,ClampToEdgeWrapping:Fr,Clock:SS,Color:Ct,ColorKeyframeTrack:vS,ColorManagement:Gn,CompressedArrayTexture:PH,CompressedCubeTexture:RH,CompressedTexture:Wv,CompressedTextureLoader:fV,ConeGeometry:Yv,ConstantAlphaFactor:hT,ConstantColorFactor:cT,CubeCamera:tA,CubeReflectionMapping:al,CubeRefractionMapping:dc,CubeTexture:Wp,CubeTextureLoader:dV,CubeUVReflectionMapping:Qf,CubicBezierCurve:lS,CubicBezierCurve3:wA,CubicInterpolant:BA,CullFaceBack:P4,CullFaceFront:ZE,CullFaceFrontBack:gD,CullFaceNone:YE,Curve:Vo,CurvePath:MA,CustomBlending:QE,CustomToneMapping:ET,CylinderGeometry:$f,Cylindrical:WV,Data3DTexture:Q_,DataArrayTexture:Ov,DataTexture:cc,DataTextureLoader:pV,DataUtils:bO,DecrementStencilOp:AD,DecrementWrapStencilOp:PD,DefaultLoadingManager:GA,DepthFormat:ac,DepthStencilFormat:Hu,DepthTexture:tS,DetachedBindMode:CT,DirectionalLight:XA,DirectionalLightHelper:$V,DiscreteInterpolant:HA,DisplayP3ColorSpace:Dv,DodecahedronGeometry:Zv,DoubleSide:Oo,DstAlphaFactor:rT,DstColorFactor:oT,DynamicCopyUsage:WD,DynamicDrawUsage:UD,DynamicReadUsage:HD,EdgesGeometry:EA,EllipseCurve:jv,EqualCompare:GT,EqualDepth:gT,EqualStencilFunc:ND,EquirectangularReflectionMapping:hp,EquirectangularRefractionMapping:fp,Euler:qs,EventDispatcher:hl,ExtrudeGeometry:Qv,FileLoader:ll,Float16BufferAttribute:PO,Float32BufferAttribute:Ot,FloatType:zs,Fog:Hv,FogExp2:Bv,FramebufferTexture:CH,FrontSide:ol,Frustum:jp,GLBufferAttribute:GV,GLSL1:qD,GLSL3:l3,GreaterCompare:WT,GreaterDepth:yT,GreaterEqualCompare:qT,GreaterEqualDepth:vT,GreaterEqualStencilFunc:FD,GreaterStencilFunc:DD,GridHelper:QV,Group:wf,HalfFloatType:Gf,HemisphereLight:WA,HemisphereLightHelper:KV,IcosahedronGeometry:Jv,ImageBitmapLoader:SV,ImageLoader:Lp,ImageUtils:K_,IncrementStencilOp:TD,IncrementWrapStencilOp:CD,InstancedBufferAttribute:Vu,InstancedBufferGeometry:oy,InstancedInterleavedBuffer:uv,InstancedMesh:gA,Int16BufferAttribute:AO,Int32BufferAttribute:CO,Int8BufferAttribute:MO,IntType:U_,InterleavedBuffer:Vv,InterleavedBufferAttribute:Vs,Interpolant:Zp,InterpolateDiscrete:mp,InterpolateLinear:gp,InterpolateSmooth:S1,InvertStencilOp:RD,KeepStencilOp:du,KeyframeTrack:Go,LOD:pA,LatheGeometry:qp,Layers:ku,LessCompare:VT,LessDepth:mT,LessEqualCompare:Y_,LessEqualDepth:up,LessEqualStencilFunc:ID,LessStencilFunc:LD,Light:_c,LightProbe:QA,Line:pc,Line3:iC,LineBasicMaterial:as,LineCurve:cS,LineCurve3:bA,LineDashedMaterial:FA,LineLoop:yA,LineSegments:ya,LinearDisplayP3ColorSpace:Vp,LinearFilter:oi,LinearInterpolant:gS,LinearMipMapLinearFilter:_D,LinearMipMapNearestFilter:xD,LinearMipmapLinearFilter:ua,LinearMipmapNearestFilter:O0,LinearSRGBColorSpace:ul,LinearToneMapping:wT,LinearTransfer:yp,Loader:Ts,LoaderUtils:g3,LoadingManager:yS,LoopOnce:OT,LoopPingPong:UT,LoopRepeat:FT,LuminanceAlphaFormat:NT,LuminanceFormat:LT,MOUSE:hu,Material:Hr,MaterialLoader:sy,MathUtils:YT,Matrix3:tn,Matrix4:qt,MaxEquation:I4,Mesh:di,MeshBasicMaterial:fl,MeshDepthMaterial:Uv,MeshDistanceMaterial:zv,MeshLambertMaterial:DA,MeshMatcapMaterial:OA,MeshNormalMaterial:IA,MeshPhongMaterial:LA,MeshPhysicalMaterial:kA,MeshStandardMaterial:pS,MeshToonMaterial:NA,MinEquation:N4,MirroredRepeatWrapping:pp,MixOperation:_T,MultiplyBlending:L4,MultiplyOperation:Hp,NearestFilter:Ri,NearestMipMapLinearFilter:yD,NearestMipMapNearestFilter:vD,NearestMipmapLinearFilter:mu,NearestMipmapNearestFilter:ov,NeutralToneMapping:AT,NeverCompare:HT,NeverDepth:dT,NeverStencilFunc:kD,NoBlending:el,NoColorSpace:Xa,NoToneMapping:ma,NormalAnimationBlendMode:Iv,NormalBlending:Pu,NotEqualCompare:jT,NotEqualDepth:xT,NotEqualStencilFunc:OD,NumberKeyframeTrack:Pp,Object3D:Rn,ObjectLoader:xV,ObjectSpaceNormalMap:BT,OctahedronGeometry:Xp,OneFactor:tT,OneMinusConstantAlphaFactor:fT,OneMinusConstantColorFactor:uT,OneMinusDstAlphaFactor:sT,OneMinusDstColorFactor:aT,OneMinusSrcAlphaFactor:sv,OneMinusSrcColorFactor:iT,OrthographicCamera:lc,P3Primaries:_p,PCFShadowMap:kv,PCFSoftShadowMap:D0,PMREMGenerator:u3,Path:Ep,PerspectiveCamera:Li,Plane:qa,PlaneGeometry:dl,PlaneHelper:iG,PointLight:qA,PointLightHelper:YV,Points:xA,PointsMaterial:oS,PolarGridHelper:JV,PolyhedronGeometry:xc,PositionalAudio:AV,PropertyBinding:Mn,PropertyMixer:eC,QuadraticBezierCurve:uS,QuadraticBezierCurve3:hS,Quaternion:zr,QuaternionKeyframeTrack:ed,QuaternionLinearInterpolant:VA,RED_GREEN_RGTC2_Format:s3,RED_RGTC1_Format:DT,REVISION:Bp,RGBADepthPacking:X_,RGBAFormat:ts,RGBAIntegerFormat:W_,RGBA_ASTC_10x10_Format:$4,RGBA_ASTC_10x5_Format:K4,RGBA_ASTC_10x6_Format:Q4,RGBA_ASTC_10x8_Format:J4,RGBA_ASTC_12x10_Format:e3,RGBA_ASTC_12x12_Format:t3,RGBA_ASTC_4x4_Format:V4,RGBA_ASTC_5x4_Format:G4,RGBA_ASTC_5x5_Format:W4,RGBA_ASTC_6x5_Format:j4,RGBA_ASTC_6x6_Format:q4,RGBA_ASTC_8x5_Format:X4,RGBA_ASTC_8x6_Format:Y4,RGBA_ASTC_8x8_Format:Z4,RGBA_BPTC_Format:_1,RGBA_ETC2_EAC_Format:H4,RGBA_PVRTC_2BPPV1_Format:z4,RGBA_PVRTC_4BPPV1_Format:U4,RGBA_S3TC_DXT1_Format:v1,RGBA_S3TC_DXT3_Format:y1,RGBA_S3TC_DXT5_Format:x1,RGB_BPTC_SIGNED_Format:n3,RGB_BPTC_UNSIGNED_Format:i3,RGB_ETC1_Format:j_,RGB_ETC2_Format:B4,RGB_PVRTC_2BPPV1_Format:F4,RGB_PVRTC_4BPPV1_Format:O4,RGB_S3TC_DXT1_Format:g1,RGFormat:IT,RGIntegerFormat:G_,RawShaderMaterial:RA,Ray:Yu,Raycaster:nC,Rec709Primaries:xp,RectAreaLight:ZA,RedFormat:H_,RedIntegerFormat:V_,ReinhardToneMapping:bT,RenderTarget:JT,RepeatWrapping:dp,ReplaceStencilOp:ED,ReverseSubtractEquation:$E,RingGeometry:$v,SIGNED_RED_GREEN_RGTC2_Format:o3,SIGNED_RED_RGTC1_Format:r3,SRGBColorSpace:so,SRGBTransfer:$n,Scene:iS,ShaderChunk:rn,ShaderLib:Do,ShaderMaterial:vo,ShadowMaterial:PA,Shape:Lu,ShapeGeometry:ey,ShapePath:oG,ShapeUtils:va,ShortType:RT,Skeleton:Gv,SkeletonHelper:XV,SkinnedMesh:mA,Source:Mu,Sphere:Qi,SphereGeometry:Yp,Spherical:y3,SphericalHarmonics3:KA,SplineCurve:fS,SpotLight:jA,SpotLightHelper:qV,Sprite:dA,SpriteMaterial:rS,SrcAlphaFactor:rv,SrcAlphaSaturateFactor:lT,SrcColorFactor:nT,StaticCopyUsage:GD,StaticDrawUsage:Sp,StaticReadUsage:BD,StereoCamera:bV,StreamCopyUsage:jD,StreamDrawUsage:zD,StreamReadUsage:VD,StringKeyframeTrack:Qu,SubtractEquation:JE,SubtractiveBlending:k4,TOUCH:fu,TangentSpaceNormalMap:yc,TetrahedronGeometry:ty,Texture:yi,TextureLoader:mV,TorusGeometry:ny,TorusKnotGeometry:iy,Triangle:Bs,TriangleFanDrawMode:bD,TriangleStripDrawMode:wD,TrianglesDrawMode:SD,TubeGeometry:ry,UVMapping:Lv,Uint16BufferAttribute:J_,Uint32BufferAttribute:$_,Uint8BufferAttribute:EO,Uint8ClampedBufferAttribute:TO,Uniform:MS,UniformsGroup:VV,UniformsLib:bt,UniformsUtils:Mp,UnsignedByteType:ga,UnsignedInt248Type:oc,UnsignedIntType:Qa,UnsignedShort4444Type:z_,UnsignedShort5551Type:B_,UnsignedShortType:Nv,VSMShadowMap:Lo,Vector2:$e,Vector3:ue,Vector4:gn,VectorKeyframeTrack:Rp,VideoTexture:AH,WebGL1Renderer:hA,WebGL3DRenderTarget:fO,WebGLArrayRenderTarget:hO,WebGLCoordinateSystem:ha,WebGLCubeRenderTarget:nA,WebGLMultipleRenderTargets:aG,WebGLRenderTarget:Ho,WebGLRenderer:nS,WebGLUtils:cA,WebGPUCoordinateSystem:wp,WireframeGeometry:dS,WrapAroundEnding:vp,ZeroCurvatureEnding:wu,ZeroFactor:eT,ZeroSlopeEnding:bu,ZeroStencilOp:MD,_SRGBAFormat:av,createCanvasElement:KT},Symbol.toStringTag,{value:"Module"}));var sC={exports:{}},Ju={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Ju.ConcurrentRoot=1;Ju.ContinuousEventPriority=4;Ju.DefaultEventPriority=16;Ju.DiscreteEventPriority=1;Ju.IdleEventPriority=536870912;Ju.LegacyRoot=0;sC.exports=Ju;var Mf=sC.exports;function cG(n){let e;const t=new Set,i=(c,u)=>{const f=typeof c=="function"?c(e):c;if(f!==e){const d=e;e=u?f:Object.assign({},e,f),t.forEach(h=>h(e,d))}},r=()=>e,s=(c,u=r,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let d=u(e);function h(){const g=u(e);if(!f(d,g)){const _=d;c(d=g,_)}}return t.add(h),()=>t.delete(h)},l={setState:i,getState:r,subscribe:(c,u,f)=>u||f?s(c,u,f):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(i,r,l),l}const uG=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),n6=uG?Qe.useEffect:Qe.useLayoutEffect;function hG(n){const e=typeof n=="function"?cG(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=Qe.useReducer(x=>x+1,0),o=e.getState(),a=Qe.useRef(o),l=Qe.useRef(i),c=Qe.useRef(r),u=Qe.useRef(!1),f=Qe.useRef();f.current===void 0&&(f.current=i(o));let d,h=!1;(a.current!==o||l.current!==i||c.current!==r||u.current)&&(d=i(o),h=!r(f.current,d)),n6(()=>{h&&(f.current=d),a.current=o,l.current=i,c.current=r,u.current=!1});const g=Qe.useRef(o);n6(()=>{const x=()=>{try{const M=e.getState(),b=l.current(M);c.current(f.current,b)||(a.current=M,f.current=b,s())}catch{u.current=!0,s()}},y=e.subscribe(x);return e.getState()!==g.current&&x(),y},[]);const _=h?d:f.current;return Qe.useDebugValue(_),_};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}const fG=n=>typeof n=="object"&&typeof n.then=="function",jg=[];function dG(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function pG(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const s of jg)if(dG(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,remove:()=>{const s=jg.indexOf(r);s!==-1&&jg.splice(s,1)},promise:(fG(n)?n:n(...e)).then(s=>{r.response=s,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(s=>r.error=s)};if(jg.push(r),!t)throw r.promise}const mG=(n,e,t)=>pG(n,e,!1,t);var oC={exports:{}},o2={exports:{}},a2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i6;function gG(){return i6||(i6=1,function(n){function e(X,$){var J=X.length;X.push($);e:for(;0<J;){var j=J-1>>>1,se=X[j];if(0<r(se,$))X[j]=$,X[J]=se,J=j;else break e}}function t(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var $=X[0],J=X.pop();if(J!==$){X[0]=J;e:for(var j=0,se=X.length,ve=se>>>1;j<ve;){var oe=2*(j+1)-1,he=X[oe],ye=oe+1,Me=X[ye];if(0>r(he,J))ye<se&&0>r(Me,he)?(X[j]=Me,X[ye]=J,j=ye):(X[j]=he,X[oe]=J,j=oe);else if(ye<se&&0>r(Me,J))X[j]=Me,X[ye]=J,j=ye;else break e}}return $}function r(X,$){var J=X.sortIndex-$.sortIndex;return J!==0?J:X.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,d=3,h=!1,g=!1,_=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(X){for(var $=t(c);$!==null;){if($.callback===null)i(c);else if($.startTime<=X)i(c),$.sortIndex=$.expirationTime,e(l,$);else break;$=t(c)}}function A(X){if(_=!1,b(X),!g)if(t(l)!==null)g=!0,re(T);else{var $=t(c);$!==null&&de(A,$.startTime-X)}}function T(X,$){g=!1,_&&(_=!1,y(N),N=-1),h=!0;var J=d;try{for(b($),f=t(l);f!==null&&(!(f.expirationTime>$)||X&&!F());){var j=f.callback;if(typeof j=="function"){f.callback=null,d=f.priorityLevel;var se=j(f.expirationTime<=$);$=n.unstable_now(),typeof se=="function"?f.callback=se:f===t(l)&&i(l),b($)}else i(l);f=t(l)}if(f!==null)var ve=!0;else{var oe=t(c);oe!==null&&de(A,oe.startTime-$),ve=!1}return ve}finally{f=null,d=J,h=!1}}var P=!1,k=null,N=-1,z=5,R=-1;function F(){return!(n.unstable_now()-R<z)}function V(){if(k!==null){var X=n.unstable_now();R=X;var $=!0;try{$=k(!0,X)}finally{$?K():(P=!1,k=null)}}else P=!1}var K;if(typeof M=="function")K=function(){M(V)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,ne=W.port2;W.port1.onmessage=V,K=function(){ne.postMessage(null)}}else K=function(){x(V,0)};function re(X){k=X,P||(P=!0,K())}function de(X,$){N=x(function(){X(n.unstable_now())},$)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_continueExecution=function(){g||h||(g=!0,re(T))},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(X){switch(d){case 1:case 2:case 3:var $=3;break;default:$=d}var J=d;d=$;try{return X()}finally{d=J}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(X,$){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var J=d;d=X;try{return $()}finally{d=J}},n.unstable_scheduleCallback=function(X,$,J){var j=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?j+J:j):J=j,X){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=J+se,X={id:u++,callback:$,priorityLevel:X,startTime:J,expirationTime:se,sortIndex:-1},J>j?(X.sortIndex=J,e(c,X),t(l)===null&&X===t(c)&&(_?(y(N),N=-1):_=!0,de(A,J-j))):(X.sortIndex=se,e(l,X),g||h||(g=!0,re(T))),X},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(X){var $=d;return function(){var J=d;d=$;try{return X.apply(this,arguments)}finally{d=J}}}}(a2)),a2}var r6;function vG(){return r6||(r6=1,o2.exports=gG()),o2.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yG=function(e){var t={},i=Qe,r=vG(),s=Object.assign;function o(p){for(var m="https://reactjs.org/docs/error-decoder.html?invariant="+p,E=1;E<arguments.length;E++)m+="&args[]="+encodeURIComponent(arguments[E]);return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),g=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),y=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),A=Symbol.for("react.offscreen"),T=Symbol.iterator;function P(p){return p===null||typeof p!="object"?null:(p=T&&p[T]||p["@@iterator"],typeof p=="function"?p:null)}function k(p){if(p==null)return null;if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case u:return"Fragment";case c:return"Portal";case d:return"Profiler";case f:return"StrictMode";case x:return"Suspense";case y:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case g:return(p.displayName||"Context")+".Consumer";case h:return(p._context.displayName||"Context")+".Provider";case _:var m=p.render;return p=p.displayName,p||(p=m.displayName||m.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case M:return m=p.displayName||null,m!==null?m:k(p.type)||"Memo";case b:m=p._payload,p=p._init;try{return k(p(m))}catch{}}return null}function N(p){var m=p.type;switch(p.tag){case 24:return"Cache";case 9:return(m.displayName||"Context")+".Consumer";case 10:return(m._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return p=m.render,p=p.displayName||p.name||"",m.displayName||(p!==""?"ForwardRef("+p+")":"ForwardRef");case 7:return"Fragment";case 5:return m;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return k(m);case 8:return m===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m}return null}function z(p){var m=p,E=p;if(p.alternate)for(;m.return;)m=m.return;else{p=m;do m=p,m.flags&4098&&(E=m.return),p=m.return;while(p)}return m.tag===3?E:null}function R(p){if(z(p)!==p)throw Error(o(188))}function F(p){var m=p.alternate;if(!m){if(m=z(p),m===null)throw Error(o(188));return m!==p?null:p}for(var E=p,L=m;;){var U=E.return;if(U===null)break;var G=U.alternate;if(G===null){if(L=U.return,L!==null){E=L;continue}break}if(U.child===G.child){for(G=U.child;G;){if(G===E)return R(U),p;if(G===L)return R(U),m;G=G.sibling}throw Error(o(188))}if(E.return!==L.return)E=U,L=G;else{for(var pe=!1,Te=U.child;Te;){if(Te===E){pe=!0,E=U,L=G;break}if(Te===L){pe=!0,L=U,E=G;break}Te=Te.sibling}if(!pe){for(Te=G.child;Te;){if(Te===E){pe=!0,E=G,L=U;break}if(Te===L){pe=!0,L=G,E=U;break}Te=Te.sibling}if(!pe)throw Error(o(189))}}if(E.alternate!==L)throw Error(o(190))}if(E.tag!==3)throw Error(o(188));return E.stateNode.current===E?p:m}function V(p){return p=F(p),p!==null?K(p):null}function K(p){if(p.tag===5||p.tag===6)return p;for(p=p.child;p!==null;){var m=K(p);if(m!==null)return m;p=p.sibling}return null}function W(p){if(p.tag===5||p.tag===6)return p;for(p=p.child;p!==null;){if(p.tag!==4){var m=W(p);if(m!==null)return m}p=p.sibling}return null}var ne=Array.isArray,re=e.getPublicInstance,de=e.getRootHostContext,X=e.getChildHostContext,$=e.prepareForCommit,J=e.resetAfterCommit,j=e.createInstance,se=e.appendInitialChild,ve=e.finalizeInitialChildren,oe=e.prepareUpdate,he=e.shouldSetTextContent,ye=e.createTextInstance,Me=e.scheduleTimeout,Pe=e.cancelTimeout,Xe=e.noTimeout,ht=e.isPrimaryRenderer,He=e.supportsMutation,ie=e.supportsPersistence,je=e.supportsHydration,ke=e.getInstanceFromNode,We=e.preparePortalMount,Fe=e.getCurrentEventPriority,it=e.detachDeletedInstance,Ue=e.supportsMicrotasks,Ye=e.scheduleMicrotask,ot=e.supportsTestSelectors,Q=e.findFiberRoot,Z=e.getBoundingRect,we=e.getTextContent,Ee=e.isHiddenSubtree,Ne=e.matchAccessibilityRole,Ze=e.setFocusIfFocusable,lt=e.setupIntersectionObserver,ft=e.appendChild,qe=e.appendChildToContainer,st=e.commitTextUpdate,St=e.commitMount,nt=e.commitUpdate,Lt=e.insertBefore,ct=e.insertInContainerBefore,be=e.removeChild,fe=e.removeChildFromContainer,De=e.resetTextContent,mt=e.hideInstance,pt=e.hideTextInstance,vt=e.unhideInstance,xe=e.unhideTextInstance,gt=e.clearContainer,Re=e.cloneInstance,et=e.createContainerChildSet,rt=e.appendChildToContainerChildSet,wt=e.finalizeContainerChildren,_t=e.replaceContainerChildren,Ht=e.cloneHiddenInstance,an=e.cloneHiddenTextInstance,Gt=e.canHydrateInstance,hn=e.canHydrateTextInstance,Kn=e.canHydrateSuspenseInstance,Gi=e.isSuspenseInstancePending,fn=e.isSuspenseInstanceFallback,D=e.registerSuspenseInstanceRetry,B=e.getNextHydratableSibling,tt=e.getFirstHydratableChild,Y=e.getFirstHydratableChildWithinContainer,me=e.getFirstHydratableChildWithinSuspenseInstance,kn=e.hydrateInstance,Et=e.hydrateTextInstance,Mi=e.hydrateSuspenseInstance,le=e.getNextHydratableInstanceAfterSuspenseInstance,Se=e.commitHydratedContainer,Ie=e.commitHydratedSuspenseInstance,Be=e.clearSuspenseBoundary,ze=e.clearSuspenseBoundaryFromContainer,ae=e.shouldDeleteUnhydratedTailInstances,Rt=e.didNotMatchHydratedContainerTextInstance,ge=e.didNotMatchHydratedTextInstance,ut;function Vt(p){if(ut===void 0)try{throw Error()}catch(E){var m=E.stack.trim().match(/\n( *(at )?)/);ut=m&&m[1]||""}return`
`+ut+p}var Xt=!1;function Ut(p,m){if(!p||Xt)return"";Xt=!0;var E=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(m)if(m=function(){throw Error()},Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(xt){var L=xt}Reflect.construct(p,[],m)}else{try{m.call()}catch(xt){L=xt}p.call(m.prototype)}else{try{throw Error()}catch(xt){L=xt}p()}}catch(xt){if(xt&&L&&typeof xt.stack=="string"){for(var U=xt.stack.split(`
`),G=L.stack.split(`
`),pe=U.length-1,Te=G.length-1;1<=pe&&0<=Te&&U[pe]!==G[Te];)Te--;for(;1<=pe&&0<=Te;pe--,Te--)if(U[pe]!==G[Te]){if(pe!==1||Te!==1)do if(pe--,Te--,0>Te||U[pe]!==G[Te]){var Je=`
`+U[pe].replace(" at new "," at ");return p.displayName&&Je.includes("<anonymous>")&&(Je=Je.replace("<anonymous>",p.displayName)),Je}while(1<=pe&&0<=Te);break}}}finally{Xt=!1,Error.prepareStackTrace=E}return(p=p?p.displayName||p.name:"")?Vt(p):""}var Tt=Object.prototype.hasOwnProperty,li=[],_n=-1;function Qn(p){return{current:p}}function Bt(p){0>_n||(p.current=li[_n],li[_n]=null,_n--)}function At(p,m){_n++,li[_n]=p.current,p.current=m}var zn={},Yt=Qn(zn),jn=Qn(!1),Vr=zn;function Ii(p,m){var E=p.type.contextTypes;if(!E)return zn;var L=p.stateNode;if(L&&L.__reactInternalMemoizedUnmaskedChildContext===m)return L.__reactInternalMemoizedMaskedChildContext;var U={},G;for(G in E)U[G]=m[G];return L&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=m,p.__reactInternalMemoizedMaskedChildContext=U),U}function ci(p){return p=p.childContextTypes,p!=null}function Tn(){Bt(jn),Bt(Yt)}function Bn(p,m,E){if(Yt.current!==zn)throw Error(o(168));At(Yt,m),At(jn,E)}function As(p,m,E){var L=p.stateNode;if(m=m.childContextTypes,typeof L.getChildContext!="function")return E;L=L.getChildContext();for(var U in L)if(!(U in m))throw Error(o(108,N(p)||"Unknown",U));return s({},E,L)}function pi(p){return p=(p=p.stateNode)&&p.__reactInternalMemoizedMergedChildContext||zn,Vr=Yt.current,At(Yt,p),At(jn,jn.current),!0}function Wi(p,m,E){var L=p.stateNode;if(!L)throw Error(o(169));E?(p=As(p,m,Vr),L.__reactInternalMemoizedMergedChildContext=p,Bt(jn),Bt(Yt),At(Yt,p)):Bt(jn),At(jn,E)}var er=Math.clz32?Math.clz32:$u,yo=Math.log,xa=Math.LN2;function $u(p){return p>>>=0,p===0?32:31-(yo(p)/xa|0)|0}var xo=64,ls=4194304;function Zs(p){switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return p&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return p}}function Wo(p,m){var E=p.pendingLanes;if(E===0)return 0;var L=0,U=p.suspendedLanes,G=p.pingedLanes,pe=E&268435455;if(pe!==0){var Te=pe&~U;Te!==0?L=Zs(Te):(G&=pe,G!==0&&(L=Zs(G)))}else pe=E&~U,pe!==0?L=Zs(pe):G!==0&&(L=Zs(G));if(L===0)return 0;if(m!==0&&m!==L&&!(m&U)&&(U=L&-L,G=m&-m,U>=G||U===16&&(G&4194240)!==0))return m;if(L&4&&(L|=E&16),m=p.entangledLanes,m!==0)for(p=p.entanglements,m&=L;0<m;)E=31-er(m),U=1<<E,L|=p[E],m&=~U;return L}function nd(p,m){switch(p){case 1:case 2:case 4:return m+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Oe(p,m){for(var E=p.suspendedLanes,L=p.pingedLanes,U=p.expirationTimes,G=p.pendingLanes;0<G;){var pe=31-er(G),Te=1<<pe,Je=U[pe];Je===-1?(!(Te&E)||Te&L)&&(U[pe]=nd(Te,m)):Je<=m&&(p.expiredLanes|=Te),G&=~Te}}function wn(p){return p=p.pendingLanes&-1073741825,p!==0?p:p&1073741824?1073741824:0}function cs(p){for(var m=[],E=0;31>E;E++)m.push(p);return m}function Di(p,m,E){p.pendingLanes|=m,m!==536870912&&(p.suspendedLanes=0,p.pingedLanes=0),p=p.eventTimes,m=31-er(m),p[m]=E}function jo(p,m){var E=p.pendingLanes&~m;p.pendingLanes=m,p.suspendedLanes=0,p.pingedLanes=0,p.expiredLanes&=m,p.mutableReadLanes&=m,p.entangledLanes&=m,m=p.entanglements;var L=p.eventTimes;for(p=p.expirationTimes;0<E;){var U=31-er(E),G=1<<U;m[U]=0,L[U]=-1,p[U]=-1,E&=~G}}function Ks(p,m){var E=p.entangledLanes|=m;for(p=p.entanglements;E;){var L=31-er(E),U=1<<L;U&m|p[L]&m&&(p[L]|=m),E&=~U}}var on=0;function qo(p){return p&=-p,1<p?4<p?p&268435455?16:536870912:4:1}var us=r.unstable_scheduleCallback,Mt=r.unstable_cancelCallback,Cs=r.unstable_shouldYield,_a=r.unstable_requestPaint,Qt=r.unstable_now,hr=r.unstable_ImmediatePriority,eh=r.unstable_UserBlockingPriority,fr=r.unstable_NormalPriority,Sc=r.unstable_IdlePriority,Sa=null,bn=null;function wa(p){if(bn&&typeof bn.onCommitFiberRoot=="function")try{bn.onCommitFiberRoot(Sa,p,void 0,(p.current.flags&128)===128)}catch{}}function wc(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var dr=typeof Object.is=="function"?Object.is:wc,ji=null,Er=!1,Zt=!1;function Xo(p){ji===null?ji=[p]:ji.push(p)}function ba(p){Er=!0,Xo(p)}function pr(){if(!Zt&&ji!==null){Zt=!0;var p=0,m=on;try{var E=ji;for(on=1;p<E.length;p++){var L=E[p];do L=L(!0);while(L!==null)}ji=null,Er=!1}catch(U){throw ji!==null&&(ji=ji.slice(p+1)),us(hr,pr),U}finally{on=m,Zt=!1}}return null}var Ei=a.ReactCurrentBatchConfig;function tr(p,m){if(dr(p,m))return!0;if(typeof p!="object"||p===null||typeof m!="object"||m===null)return!1;var E=Object.keys(p),L=Object.keys(m);if(E.length!==L.length)return!1;for(L=0;L<E.length;L++){var U=E[L];if(!Tt.call(m,U)||!dr(p[U],m[U]))return!1}return!0}function Ma(p){switch(p.tag){case 5:return Vt(p.type);case 16:return Vt("Lazy");case 13:return Vt("Suspense");case 19:return Vt("SuspenseList");case 0:case 2:case 15:return p=Ut(p.type,!1),p;case 11:return p=Ut(p.type.render,!1),p;case 1:return p=Ut(p.type,!0),p;default:return""}}function at(p,m){if(p&&p.defaultProps){m=s({},m),p=p.defaultProps;for(var E in p)m[E]===void 0&&(m[E]=p[E]);return m}return m}var Ln=Qn(null),Yo=null,Gr=null,Qs=null;function Ti(){Qs=Gr=Yo=null}function Ps(p,m,E){ht?(At(Ln,m._currentValue),m._currentValue=E):(At(Ln,m._currentValue2),m._currentValue2=E)}function Kt(p){var m=Ln.current;Bt(Ln),ht?p._currentValue=m:p._currentValue2=m}function nr(p,m,E){for(;p!==null;){var L=p.alternate;if((p.childLanes&m)!==m?(p.childLanes|=m,L!==null&&(L.childLanes|=m)):L!==null&&(L.childLanes&m)!==m&&(L.childLanes|=m),p===E)break;p=p.return}}function ui(p,m){Yo=p,Qs=Gr=null,p=p.dependencies,p!==null&&p.firstContext!==null&&(p.lanes&m&&(Zr=!0),p.firstContext=null)}function hi(p){var m=ht?p._currentValue:p._currentValue2;if(Qs!==p)if(p={context:p,memoizedValue:m,next:null},Gr===null){if(Yo===null)throw Error(o(308));Gr=p,Yo.dependencies={lanes:0,firstContext:p}}else Gr=Gr.next=p;return m}var Wr=null,Zo=!1;function id(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qp(p,m){p=p.updateQueue,m.updateQueue===p&&(m.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,effects:p.effects})}function _o(p,m){return{eventTime:p,lane:m,tag:0,payload:null,callback:null,next:null}}function Ko(p,m){var E=p.updateQueue;E!==null&&(E=E.shared,Fi!==null&&p.mode&1&&!(pn&2)?(p=E.interleaved,p===null?(m.next=m,Wr===null?Wr=[E]:Wr.push(E)):(m.next=p.next,p.next=m),E.interleaved=m):(p=E.pending,p===null?m.next=m:(m.next=p.next,p.next=m),E.pending=m))}function rd(p,m,E){if(m=m.updateQueue,m!==null&&(m=m.shared,(E&4194240)!==0)){var L=m.lanes;L&=p.pendingLanes,E|=L,m.lanes=E,Ks(p,E)}}function ly(p,m){var E=p.updateQueue,L=p.alternate;if(L!==null&&(L=L.updateQueue,E===L)){var U=null,G=null;if(E=E.firstBaseUpdate,E!==null){do{var pe={eventTime:E.eventTime,lane:E.lane,tag:E.tag,payload:E.payload,callback:E.callback,next:null};G===null?U=G=pe:G=G.next=pe,E=E.next}while(E!==null);G===null?U=G=m:G=G.next=m}else U=G=m;E={baseState:L.baseState,firstBaseUpdate:U,lastBaseUpdate:G,shared:L.shared,effects:L.effects},p.updateQueue=E;return}p=E.lastBaseUpdate,p===null?E.firstBaseUpdate=m:p.next=m,E.lastBaseUpdate=m}function hs(p,m,E,L){var U=p.updateQueue;Zo=!1;var G=U.firstBaseUpdate,pe=U.lastBaseUpdate,Te=U.shared.pending;if(Te!==null){U.shared.pending=null;var Je=Te,xt=Je.next;Je.next=null,pe===null?G=xt:pe.next=xt,pe=Je;var It=p.alternate;It!==null&&(It=It.updateQueue,Te=It.lastBaseUpdate,Te!==pe&&(Te===null?It.firstBaseUpdate=xt:Te.next=xt,It.lastBaseUpdate=Je))}if(G!==null){var $t=U.baseState;pe=0,It=xt=Je=null,Te=G;do{var Wt=Te.lane,Zn=Te.eventTime;if((L&Wt)===Wt){It!==null&&(It=It.next={eventTime:Zn,lane:0,tag:Te.tag,payload:Te.payload,callback:Te.callback,next:null});e:{var zt=p,Pr=Te;switch(Wt=m,Zn=E,Pr.tag){case 1:if(zt=Pr.payload,typeof zt=="function"){$t=zt.call(Zn,$t,Wt);break e}$t=zt;break e;case 3:zt.flags=zt.flags&-65537|128;case 0:if(zt=Pr.payload,Wt=typeof zt=="function"?zt.call(Zn,$t,Wt):zt,Wt==null)break e;$t=s({},$t,Wt);break e;case 2:Zo=!0}}Te.callback!==null&&Te.lane!==0&&(p.flags|=64,Wt=U.effects,Wt===null?U.effects=[Te]:Wt.push(Te))}else Zn={eventTime:Zn,lane:Wt,tag:Te.tag,payload:Te.payload,callback:Te.callback,next:null},It===null?(xt=It=Zn,Je=$t):It=It.next=Zn,pe|=Wt;if(Te=Te.next,Te===null){if(Te=U.shared.pending,Te===null)break;Wt=Te,Te=Wt.next,Wt.next=null,U.lastBaseUpdate=Wt,U.shared.pending=null}}while(!0);if(It===null&&(Je=$t),U.baseState=Je,U.firstBaseUpdate=xt,U.lastBaseUpdate=It,m=U.shared.interleaved,m!==null){U=m;do pe|=U.lane,U=U.next;while(U!==m)}else G===null&&(U.shared.lanes=0);Ph|=pe,p.lanes=pe,p.memoizedState=$t}}function Jt(p,m,E){if(p=m.effects,m.effects=null,p!==null)for(m=0;m<p.length;m++){var L=p[m],U=L.callback;if(U!==null){if(L.callback=null,L=E,typeof U!="function")throw Error(o(191,U));U.call(L)}}}var th=new i.Component().refs;function pl(p,m,E,L){m=p.memoizedState,E=E(L,m),E=E==null?m:s({},m,E),p.memoizedState=E,p.lanes===0&&(p.updateQueue.baseState=E)}var ml={isMounted:function(p){return(p=p._reactInternals)?z(p)===p:!1},enqueueSetState:function(p,m,E){p=p._reactInternals;var L=Qr(),U=Cl(p),G=_o(L,U);G.payload=m,E!=null&&(G.callback=E),Ko(p,G),m=eo(p,U,L),m!==null&&rd(m,p,U)},enqueueReplaceState:function(p,m,E){p=p._reactInternals;var L=Qr(),U=Cl(p),G=_o(L,U);G.tag=1,G.payload=m,E!=null&&(G.callback=E),Ko(p,G),m=eo(p,U,L),m!==null&&rd(m,p,U)},enqueueForceUpdate:function(p,m){p=p._reactInternals;var E=Qr(),L=Cl(p),U=_o(E,L);U.tag=2,m!=null&&(U.callback=m),Ko(p,U),m=eo(p,L,E),m!==null&&rd(m,p,L)}};function sd(p,m,E,L,U,G,pe){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(L,G,pe):m.prototype&&m.prototype.isPureReactComponent?!tr(E,L)||!tr(U,G):!0}function Jp(p,m,E){var L=!1,U=zn,G=m.contextType;return typeof G=="object"&&G!==null?G=hi(G):(U=ci(m)?Vr:Yt.current,L=m.contextTypes,G=(L=L!=null)?Ii(p,U):zn),m=new m(E,G),p.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=ml,p.stateNode=m,m._reactInternals=p,L&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=U,p.__reactInternalMemoizedMaskedChildContext=G),m}function bc(p,m,E,L){p=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(E,L),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(E,L),m.state!==p&&ml.enqueueReplaceState(m,m.state,null)}function od(p,m,E,L){var U=p.stateNode;U.props=E,U.state=p.memoizedState,U.refs=th,id(p);var G=m.contextType;typeof G=="object"&&G!==null?U.context=hi(G):(G=ci(m)?Vr:Yt.current,U.context=Ii(p,G)),U.state=p.memoizedState,G=m.getDerivedStateFromProps,typeof G=="function"&&(pl(p,m,G,E),U.state=p.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof U.getSnapshotBeforeUpdate=="function"||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(m=U.state,typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount(),m!==U.state&&ml.enqueueReplaceState(U,U.state,null),hs(p,E,U,L),U.state=p.memoizedState),typeof U.componentDidMount=="function"&&(p.flags|=4194308)}var Ea=[],Ta=0,Aa=null,nh=0,jr=[],qr=0,Ca=null,So=1,wo="";function Qo(p,m){Ea[Ta++]=nh,Ea[Ta++]=Aa,Aa=p,nh=m}function ad(p,m,E){jr[qr++]=So,jr[qr++]=wo,jr[qr++]=Ca,Ca=p;var L=So;p=wo;var U=32-er(L)-1;L&=~(1<<U),E+=1;var G=32-er(m)+U;if(30<G){var pe=U-U%5;G=(L&(1<<pe)-1).toString(32),L>>=pe,U-=pe,So=1<<32-er(m)+U|E<<U|L,wo=G+p}else So=1<<G|E<<U|L,wo=p}function Mc(p){p.return!==null&&(Qo(p,1),ad(p,1,0))}function ih(p){for(;p===Aa;)Aa=Ea[--Ta],Ea[Ta]=null,nh=Ea[--Ta],Ea[Ta]=null;for(;p===Ca;)Ca=jr[--qr],jr[qr]=null,wo=jr[--qr],jr[qr]=null,So=jr[--qr],jr[qr]=null}var Xr=null,Tr=null,On=!1,Pa=!1,fs=null;function $p(p,m){var E=to(5,null,null,0);E.elementType="DELETED",E.stateNode=m,E.return=p,m=p.deletions,m===null?(p.deletions=[E],p.flags|=16):m.push(E)}function em(p,m){switch(p.tag){case 5:return m=Gt(m,p.type,p.pendingProps),m!==null?(p.stateNode=m,Xr=p,Tr=tt(m),!0):!1;case 6:return m=hn(m,p.pendingProps),m!==null?(p.stateNode=m,Xr=p,Tr=null,!0):!1;case 13:if(m=Kn(m),m!==null){var E=Ca!==null?{id:So,overflow:wo}:null;return p.memoizedState={dehydrated:m,treeContext:E,retryLane:1073741824},E=to(18,null,null,0),E.stateNode=m,E.return=p,p.child=E,Xr=p,Tr=null,!0}return!1;default:return!1}}function rh(p){return(p.mode&1)!==0&&(p.flags&128)===0}function Ec(p){if(On){var m=Tr;if(m){var E=m;if(!em(p,m)){if(rh(p))throw Error(o(418));m=B(E);var L=Xr;m&&em(p,m)?$p(L,E):(p.flags=p.flags&-4097|2,On=!1,Xr=p)}}else{if(rh(p))throw Error(o(418));p.flags=p.flags&-4097|2,On=!1,Xr=p}}}function sh(p){for(p=p.return;p!==null&&p.tag!==5&&p.tag!==3&&p.tag!==13;)p=p.return;Xr=p}function Ra(p){if(!je||p!==Xr)return!1;if(!On)return sh(p),On=!0,!1;if(p.tag!==3&&(p.tag!==5||ae(p.type)&&!he(p.type,p.memoizedProps))){var m=Tr;if(m){if(rh(p)){for(p=Tr;p;)p=B(p);throw Error(o(418))}for(;m;)$p(p,m),m=B(m)}}if(sh(p),p.tag===13){if(!je)throw Error(o(316));if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(o(317));Tr=le(p)}else Tr=Xr?B(p.stateNode):null;return!0}function bo(){je&&(Tr=Xr=null,Pa=On=!1)}function ld(p){fs===null?fs=[p]:fs.push(p)}function Tc(p,m,E){if(p=E.ref,p!==null&&typeof p!="function"&&typeof p!="object"){if(E._owner){if(E=E._owner,E){if(E.tag!==1)throw Error(o(309));var L=E.stateNode}if(!L)throw Error(o(147,p));var U=L,G=""+p;return m!==null&&m.ref!==null&&typeof m.ref=="function"&&m.ref._stringRef===G?m.ref:(m=function(pe){var Te=U.refs;Te===th&&(Te=U.refs={}),pe===null?delete Te[G]:Te[G]=pe},m._stringRef=G,m)}if(typeof p!="string")throw Error(o(284));if(!E._owner)throw Error(o(290,p))}return p}function Ac(p,m){throw p=Object.prototype.toString.call(m),Error(o(31,p==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":p))}function oh(p){var m=p._init;return m(p._payload)}function ah(p){function m(Ve,Ce){if(p){var Ke=Ve.deletions;Ke===null?(Ve.deletions=[Ce],Ve.flags|=16):Ke.push(Ce)}}function E(Ve,Ce){if(!p)return null;for(;Ce!==null;)m(Ve,Ce),Ce=Ce.sibling;return null}function L(Ve,Ce){for(Ve=new Map;Ce!==null;)Ce.key!==null?Ve.set(Ce.key,Ce):Ve.set(Ce.index,Ce),Ce=Ce.sibling;return Ve}function U(Ve,Ce){return Ve=Rl(Ve,Ce),Ve.index=0,Ve.sibling=null,Ve}function G(Ve,Ce,Ke){return Ve.index=Ke,p?(Ke=Ve.alternate,Ke!==null?(Ke=Ke.index,Ke<Ce?(Ve.flags|=2,Ce):Ke):(Ve.flags|=2,Ce)):(Ve.flags|=1048576,Ce)}function pe(Ve){return p&&Ve.alternate===null&&(Ve.flags|=2),Ve}function Te(Ve,Ce,Ke,Pt){return Ce===null||Ce.tag!==6?(Ce=Ry(Ke,Ve.mode,Pt),Ce.return=Ve,Ce):(Ce=U(Ce,Ke),Ce.return=Ve,Ce)}function Je(Ve,Ce,Ke,Pt){var Ft=Ke.type;return Ft===u?It(Ve,Ce,Ke.props.children,Pt,Ke.key):Ce!==null&&(Ce.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===b&&oh(Ft)===Ce.type)?(Pt=U(Ce,Ke.props),Pt.ref=Tc(Ve,Ce,Ke),Pt.return=Ve,Pt):(Pt=Sm(Ke.type,Ke.key,Ke.props,null,Ve.mode,Pt),Pt.ref=Tc(Ve,Ce,Ke),Pt.return=Ve,Pt)}function xt(Ve,Ce,Ke,Pt){return Ce===null||Ce.tag!==4||Ce.stateNode.containerInfo!==Ke.containerInfo||Ce.stateNode.implementation!==Ke.implementation?(Ce=ky(Ke,Ve.mode,Pt),Ce.return=Ve,Ce):(Ce=U(Ce,Ke.children||[]),Ce.return=Ve,Ce)}function It(Ve,Ce,Ke,Pt,Ft){return Ce===null||Ce.tag!==7?(Ce=Wc(Ke,Ve.mode,Pt,Ft),Ce.return=Ve,Ce):(Ce=U(Ce,Ke),Ce.return=Ve,Ce)}function $t(Ve,Ce,Ke){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return Ce=Ry(""+Ce,Ve.mode,Ke),Ce.return=Ve,Ce;if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case l:return Ke=Sm(Ce.type,Ce.key,Ce.props,null,Ve.mode,Ke),Ke.ref=Tc(Ve,null,Ce),Ke.return=Ve,Ke;case c:return Ce=ky(Ce,Ve.mode,Ke),Ce.return=Ve,Ce;case b:var Pt=Ce._init;return $t(Ve,Pt(Ce._payload),Ke)}if(ne(Ce)||P(Ce))return Ce=Wc(Ce,Ve.mode,Ke,null),Ce.return=Ve,Ce;Ac(Ve,Ce)}return null}function Wt(Ve,Ce,Ke,Pt){var Ft=Ce!==null?Ce.key:null;if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number")return Ft!==null?null:Te(Ve,Ce,""+Ke,Pt);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case l:return Ke.key===Ft?Je(Ve,Ce,Ke,Pt):null;case c:return Ke.key===Ft?xt(Ve,Ce,Ke,Pt):null;case b:return Ft=Ke._init,Wt(Ve,Ce,Ft(Ke._payload),Pt)}if(ne(Ke)||P(Ke))return Ft!==null?null:It(Ve,Ce,Ke,Pt,null);Ac(Ve,Ke)}return null}function Zn(Ve,Ce,Ke,Pt,Ft){if(typeof Pt=="string"&&Pt!==""||typeof Pt=="number")return Ve=Ve.get(Ke)||null,Te(Ce,Ve,""+Pt,Ft);if(typeof Pt=="object"&&Pt!==null){switch(Pt.$$typeof){case l:return Ve=Ve.get(Pt.key===null?Ke:Pt.key)||null,Je(Ce,Ve,Pt,Ft);case c:return Ve=Ve.get(Pt.key===null?Ke:Pt.key)||null,xt(Ce,Ve,Pt,Ft);case b:var ln=Pt._init;return Zn(Ve,Ce,Ke,ln(Pt._payload),Ft)}if(ne(Pt)||P(Pt))return Ve=Ve.get(Ke)||null,It(Ce,Ve,Pt,Ft,null);Ac(Ce,Pt)}return null}function zt(Ve,Ce,Ke,Pt){for(var Ft=null,ln=null,en=Ce,Cn=Ce=0,rr=null;en!==null&&Cn<Ke.length;Cn++){en.index>Cn?(rr=en,en=null):rr=en.sibling;var Pn=Wt(Ve,en,Ke[Cn],Pt);if(Pn===null){en===null&&(en=rr);break}p&&en&&Pn.alternate===null&&m(Ve,en),Ce=G(Pn,Ce,Cn),ln===null?Ft=Pn:ln.sibling=Pn,ln=Pn,en=rr}if(Cn===Ke.length)return E(Ve,en),On&&Qo(Ve,Cn),Ft;if(en===null){for(;Cn<Ke.length;Cn++)en=$t(Ve,Ke[Cn],Pt),en!==null&&(Ce=G(en,Ce,Cn),ln===null?Ft=en:ln.sibling=en,ln=en);return On&&Qo(Ve,Cn),Ft}for(en=L(Ve,en);Cn<Ke.length;Cn++)rr=Zn(en,Ve,Cn,Ke[Cn],Pt),rr!==null&&(p&&rr.alternate!==null&&en.delete(rr.key===null?Cn:rr.key),Ce=G(rr,Ce,Cn),ln===null?Ft=rr:ln.sibling=rr,ln=rr);return p&&en.forEach(function(kl){return m(Ve,kl)}),On&&Qo(Ve,Cn),Ft}function Pr(Ve,Ce,Ke,Pt){var Ft=P(Ke);if(typeof Ft!="function")throw Error(o(150));if(Ke=Ft.call(Ke),Ke==null)throw Error(o(151));for(var ln=Ft=null,en=Ce,Cn=Ce=0,rr=null,Pn=Ke.next();en!==null&&!Pn.done;Cn++,Pn=Ke.next()){en.index>Cn?(rr=en,en=null):rr=en.sibling;var kl=Wt(Ve,en,Pn.value,Pt);if(kl===null){en===null&&(en=rr);break}p&&en&&kl.alternate===null&&m(Ve,en),Ce=G(kl,Ce,Cn),ln===null?Ft=kl:ln.sibling=kl,ln=kl,en=rr}if(Pn.done)return E(Ve,en),On&&Qo(Ve,Cn),Ft;if(en===null){for(;!Pn.done;Cn++,Pn=Ke.next())Pn=$t(Ve,Pn.value,Pt),Pn!==null&&(Ce=G(Pn,Ce,Cn),ln===null?Ft=Pn:ln.sibling=Pn,ln=Pn);return On&&Qo(Ve,Cn),Ft}for(en=L(Ve,en);!Pn.done;Cn++,Pn=Ke.next())Pn=Zn(en,Ve,Cn,Pn.value,Pt),Pn!==null&&(p&&Pn.alternate!==null&&en.delete(Pn.key===null?Cn:Pn.key),Ce=G(Pn,Ce,Cn),ln===null?Ft=Pn:ln.sibling=Pn,ln=Pn);return p&&en.forEach(function(e9){return m(Ve,e9)}),On&&Qo(Ve,Cn),Ft}function no(Ve,Ce,Ke,Pt){if(typeof Ke=="object"&&Ke!==null&&Ke.type===u&&Ke.key===null&&(Ke=Ke.props.children),typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case l:e:{for(var Ft=Ke.key,ln=Ce;ln!==null;){if(ln.key===Ft){if(Ft=Ke.type,Ft===u){if(ln.tag===7){E(Ve,ln.sibling),Ce=U(ln,Ke.props.children),Ce.return=Ve,Ve=Ce;break e}}else if(ln.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===b&&oh(Ft)===ln.type){E(Ve,ln.sibling),Ce=U(ln,Ke.props),Ce.ref=Tc(Ve,ln,Ke),Ce.return=Ve,Ve=Ce;break e}E(Ve,ln);break}else m(Ve,ln);ln=ln.sibling}Ke.type===u?(Ce=Wc(Ke.props.children,Ve.mode,Pt,Ke.key),Ce.return=Ve,Ve=Ce):(Pt=Sm(Ke.type,Ke.key,Ke.props,null,Ve.mode,Pt),Pt.ref=Tc(Ve,Ce,Ke),Pt.return=Ve,Ve=Pt)}return pe(Ve);case c:e:{for(ln=Ke.key;Ce!==null;){if(Ce.key===ln)if(Ce.tag===4&&Ce.stateNode.containerInfo===Ke.containerInfo&&Ce.stateNode.implementation===Ke.implementation){E(Ve,Ce.sibling),Ce=U(Ce,Ke.children||[]),Ce.return=Ve,Ve=Ce;break e}else{E(Ve,Ce);break}else m(Ve,Ce);Ce=Ce.sibling}Ce=ky(Ke,Ve.mode,Pt),Ce.return=Ve,Ve=Ce}return pe(Ve);case b:return ln=Ke._init,no(Ve,Ce,ln(Ke._payload),Pt)}if(ne(Ke))return zt(Ve,Ce,Ke,Pt);if(P(Ke))return Pr(Ve,Ce,Ke,Pt);Ac(Ve,Ke)}return typeof Ke=="string"&&Ke!==""||typeof Ke=="number"?(Ke=""+Ke,Ce!==null&&Ce.tag===6?(E(Ve,Ce.sibling),Ce=U(Ce,Ke),Ce.return=Ve,Ve=Ce):(E(Ve,Ce),Ce=Ry(Ke,Ve.mode,Pt),Ce.return=Ve,Ve=Ce),pe(Ve)):E(Ve,Ce)}return no}var Jo=ah(!0),tm=ah(!1),gl={},ds=Qn(gl),vl=Qn(gl),Js=Qn(gl);function $s(p){if(p===gl)throw Error(o(174));return p}function cd(p,m){At(Js,m),At(vl,p),At(ds,gl),p=de(m),Bt(ds),At(ds,p)}function yl(){Bt(ds),Bt(vl),Bt(Js)}function ud(p){var m=$s(Js.current),E=$s(ds.current);m=X(E,p.type,m),E!==m&&(At(vl,p),At(ds,m))}function hd(p){vl.current===p&&(Bt(ds),Bt(vl))}var Jn=Qn(0);function Cc(p){for(var m=p;m!==null;){if(m.tag===13){var E=m.memoizedState;if(E!==null&&(E=E.dehydrated,E===null||Gi(E)||fn(E)))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if(m.flags&128)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===p)break;for(;m.sibling===null;){if(m.return===null||m.return===p)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var nm=[];function Rs(){for(var p=0;p<nm.length;p++){var m=nm[p];ht?m._workInProgressVersionPrimary=null:m._workInProgressVersionSecondary=null}nm.length=0}var Pc=a.ReactCurrentDispatcher,ps=a.ReactCurrentBatchConfig,Mo=0,ni=null,Oi=null,_i=null,Rc=!1,Ar=!1,xl=0,te=0;function Fn(){throw Error(o(321))}function Cr(p,m){if(m===null)return!1;for(var E=0;E<m.length&&E<p.length;E++)if(!dr(p[E],m[E]))return!1;return!0}function lh(p,m,E,L,U,G){if(Mo=G,ni=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,Pc.current=p===null||p.memoizedState===null?sm:Sd,p=E(L,U),Ar){G=0;do{if(Ar=!1,xl=0,25<=G)throw Error(o(301));G+=1,_i=Oi=null,m.updateQueue=null,Pc.current=wd,p=E(L,U)}while(Ar)}if(Pc.current=mh,m=Oi!==null&&Oi.next!==null,Mo=0,_i=Oi=ni=null,Rc=!1,m)throw Error(o(300));return p}function _l(){var p=xl!==0;return xl=0,p}function ks(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _i===null?ni.memoizedState=_i=p:_i=_i.next=p,_i}function qi(){if(Oi===null){var p=ni.alternate;p=p!==null?p.memoizedState:null}else p=Oi.next;var m=_i===null?ni.memoizedState:_i.next;if(m!==null)_i=m,Oi=p;else{if(p===null)throw Error(o(310));Oi=p,p={memoizedState:Oi.memoizedState,baseState:Oi.baseState,baseQueue:Oi.baseQueue,queue:Oi.queue,next:null},_i===null?ni.memoizedState=_i=p:_i=_i.next=p}return _i}function Eo(p,m){return typeof m=="function"?m(p):m}function Yr(p){var m=qi(),E=m.queue;if(E===null)throw Error(o(311));E.lastRenderedReducer=p;var L=Oi,U=L.baseQueue,G=E.pending;if(G!==null){if(U!==null){var pe=U.next;U.next=G.next,G.next=pe}L.baseQueue=U=G,E.pending=null}if(U!==null){G=U.next,L=L.baseState;var Te=pe=null,Je=null,xt=G;do{var It=xt.lane;if((Mo&It)===It)Je!==null&&(Je=Je.next={lane:0,action:xt.action,hasEagerState:xt.hasEagerState,eagerState:xt.eagerState,next:null}),L=xt.hasEagerState?xt.eagerState:p(L,xt.action);else{var $t={lane:It,action:xt.action,hasEagerState:xt.hasEagerState,eagerState:xt.eagerState,next:null};Je===null?(Te=Je=$t,pe=L):Je=Je.next=$t,ni.lanes|=It,Ph|=It}xt=xt.next}while(xt!==null&&xt!==G);Je===null?pe=L:Je.next=Te,dr(L,m.memoizedState)||(Zr=!0),m.memoizedState=L,m.baseState=pe,m.baseQueue=Je,E.lastRenderedState=L}if(p=E.interleaved,p!==null){U=p;do G=U.lane,ni.lanes|=G,Ph|=G,U=U.next;while(U!==p)}else U===null&&(E.lanes=0);return[m.memoizedState,E.dispatch]}function ch(p){var m=qi(),E=m.queue;if(E===null)throw Error(o(311));E.lastRenderedReducer=p;var L=E.dispatch,U=E.pending,G=m.memoizedState;if(U!==null){E.pending=null;var pe=U=U.next;do G=p(G,pe.action),pe=pe.next;while(pe!==U);dr(G,m.memoizedState)||(Zr=!0),m.memoizedState=G,m.baseQueue===null&&(m.baseState=G),E.lastRenderedState=G}return[G,L]}function Ls(){}function fd(p,m){var E=ni,L=qi(),U=m(),G=!dr(L.memoizedState,U);if(G&&(L.memoizedState=U,Zr=!0),L=L.queue,bl(pd.bind(null,E,L,p),[p]),L.getSnapshot!==m||G||_i!==null&&_i.memoizedState.tag&1){if(E.flags|=2048,Sl(9,dd.bind(null,E,L,U,m),void 0,null),Fi===null)throw Error(o(349));Mo&30||cy(E,m,U)}return U}function cy(p,m,E){p.flags|=16384,p={getSnapshot:m,value:E},m=ni.updateQueue,m===null?(m={lastEffect:null,stores:null},ni.updateQueue=m,m.stores=[p]):(E=m.stores,E===null?m.stores=[p]:E.push(p))}function dd(p,m,E,L){m.value=E,m.getSnapshot=L,md(m)&&eo(p,1,-1)}function pd(p,m,E){return E(function(){md(m)&&eo(p,1,-1)})}function md(p){var m=p.getSnapshot;p=p.value;try{var E=m();return!dr(p,E)}catch{return!0}}function uh(p){var m=ks();return typeof p=="function"&&(p=p()),m.memoizedState=m.baseState=p,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Eo,lastRenderedState:p},m.queue=p,p=p.dispatch=RS.bind(null,ni,p),[m.memoizedState,p]}function Sl(p,m,E,L){return p={tag:p,create:m,destroy:E,deps:L,next:null},m=ni.updateQueue,m===null?(m={lastEffect:null,stores:null},ni.updateQueue=m,m.lastEffect=p.next=p):(E=m.lastEffect,E===null?m.lastEffect=p.next=p:(L=E.next,E.next=p,p.next=L,m.lastEffect=p)),p}function hh(){return qi().memoizedState}function wl(p,m,E,L){var U=ks();ni.flags|=p,U.memoizedState=Sl(1|m,E,void 0,L===void 0?null:L)}function kc(p,m,E,L){var U=qi();L=L===void 0?null:L;var G=void 0;if(Oi!==null){var pe=Oi.memoizedState;if(G=pe.destroy,L!==null&&Cr(L,pe.deps)){U.memoizedState=Sl(m,E,G,L);return}}ni.flags|=p,U.memoizedState=Sl(1|m,E,G,L)}function fh(p,m){return wl(8390656,8,p,m)}function bl(p,m){return kc(2048,8,p,m)}function uy(p,m){return kc(4,2,p,m)}function dh(p,m){return kc(4,4,p,m)}function gd(p,m){if(typeof m=="function")return p=p(),m(p),function(){m(null)};if(m!=null)return p=p(),m.current=p,function(){m.current=null}}function vd(p,m,E){return E=E!=null?E.concat([p]):null,kc(4,4,gd.bind(null,m,p),E)}function ph(){}function ka(p,m){var E=qi();m=m===void 0?null:m;var L=E.memoizedState;return L!==null&&m!==null&&Cr(m,L[1])?L[0]:(E.memoizedState=[p,m],p)}function Ml(p,m){var E=qi();m=m===void 0?null:m;var L=E.memoizedState;return L!==null&&m!==null&&Cr(m,L[1])?L[0]:(p=p(),E.memoizedState=[p,m],p)}function hy(p,m){var E=on;on=E!==0&&4>E?E:4,p(!0);var L=ps.transition;ps.transition={};try{p(!1),m()}finally{on=E,ps.transition=L}}function im(){return qi().memoizedState}function rm(p,m,E){var L=Cl(p);E={lane:L,action:E,hasEagerState:!1,eagerState:null,next:null},yd(p)?xd(m,E):(fy(p,m,E),E=Qr(),p=eo(p,L,E),p!==null&&_d(p,m,L))}function RS(p,m,E){var L=Cl(p),U={lane:L,action:E,hasEagerState:!1,eagerState:null,next:null};if(yd(p))xd(m,U);else{fy(p,m,U);var G=p.alternate;if(p.lanes===0&&(G===null||G.lanes===0)&&(G=m.lastRenderedReducer,G!==null))try{var pe=m.lastRenderedState,Te=G(pe,E);if(U.hasEagerState=!0,U.eagerState=Te,dr(Te,pe))return}catch{}finally{}E=Qr(),p=eo(p,L,E),p!==null&&_d(p,m,L)}}function yd(p){var m=p.alternate;return p===ni||m!==null&&m===ni}function xd(p,m){Ar=Rc=!0;var E=p.pending;E===null?m.next=m:(m.next=E.next,E.next=m),p.pending=m}function fy(p,m,E){Fi!==null&&p.mode&1&&!(pn&2)?(p=m.interleaved,p===null?(E.next=E,Wr===null?Wr=[m]:Wr.push(m)):(E.next=p.next,p.next=E),m.interleaved=E):(p=m.pending,p===null?E.next=E:(E.next=p.next,p.next=E),m.pending=E)}function _d(p,m,E){if(E&4194240){var L=m.lanes;L&=p.pendingLanes,E|=L,m.lanes=E,Ks(p,E)}}var mh={readContext:hi,useCallback:Fn,useContext:Fn,useEffect:Fn,useImperativeHandle:Fn,useInsertionEffect:Fn,useLayoutEffect:Fn,useMemo:Fn,useReducer:Fn,useRef:Fn,useState:Fn,useDebugValue:Fn,useDeferredValue:Fn,useTransition:Fn,useMutableSource:Fn,useSyncExternalStore:Fn,useId:Fn,unstable_isNewReconciler:!1},sm={readContext:hi,useCallback:function(p,m){return ks().memoizedState=[p,m===void 0?null:m],p},useContext:hi,useEffect:fh,useImperativeHandle:function(p,m,E){return E=E!=null?E.concat([p]):null,wl(4194308,4,gd.bind(null,m,p),E)},useLayoutEffect:function(p,m){return wl(4194308,4,p,m)},useInsertionEffect:function(p,m){return wl(4,2,p,m)},useMemo:function(p,m){var E=ks();return m=m===void 0?null:m,p=p(),E.memoizedState=[p,m],p},useReducer:function(p,m,E){var L=ks();return m=E!==void 0?E(m):m,L.memoizedState=L.baseState=m,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:m},L.queue=p,p=p.dispatch=rm.bind(null,ni,p),[L.memoizedState,p]},useRef:function(p){var m=ks();return p={current:p},m.memoizedState=p},useState:uh,useDebugValue:ph,useDeferredValue:function(p){var m=uh(p),E=m[0],L=m[1];return fh(function(){var U=ps.transition;ps.transition={};try{L(p)}finally{ps.transition=U}},[p]),E},useTransition:function(){var p=uh(!1),m=p[0];return p=hy.bind(null,p[1]),ks().memoizedState=p,[m,p]},useMutableSource:function(){},useSyncExternalStore:function(p,m,E){var L=ni,U=ks();if(On){if(E===void 0)throw Error(o(407));E=E()}else{if(E=m(),Fi===null)throw Error(o(349));Mo&30||cy(L,m,E)}U.memoizedState=E;var G={value:E,getSnapshot:m};return U.queue=G,fh(pd.bind(null,L,G,p),[p]),L.flags|=2048,Sl(9,dd.bind(null,L,G,E,m),void 0,null),E},useId:function(){var p=ks(),m=Fi.identifierPrefix;if(On){var E=wo,L=So;E=(L&~(1<<32-er(L)-1)).toString(32)+E,m=":"+m+"R"+E,E=xl++,0<E&&(m+="H"+E.toString(32)),m+=":"}else E=te++,m=":"+m+"r"+E.toString(32)+":";return p.memoizedState=m},unstable_isNewReconciler:!1},Sd={readContext:hi,useCallback:ka,useContext:hi,useEffect:bl,useImperativeHandle:vd,useInsertionEffect:uy,useLayoutEffect:dh,useMemo:Ml,useReducer:Yr,useRef:hh,useState:function(){return Yr(Eo)},useDebugValue:ph,useDeferredValue:function(p){var m=Yr(Eo),E=m[0],L=m[1];return bl(function(){var U=ps.transition;ps.transition={};try{L(p)}finally{ps.transition=U}},[p]),E},useTransition:function(){var p=Yr(Eo)[0],m=qi().memoizedState;return[p,m]},useMutableSource:Ls,useSyncExternalStore:fd,useId:im,unstable_isNewReconciler:!1},wd={readContext:hi,useCallback:ka,useContext:hi,useEffect:bl,useImperativeHandle:vd,useInsertionEffect:uy,useLayoutEffect:dh,useMemo:Ml,useReducer:ch,useRef:hh,useState:function(){return ch(Eo)},useDebugValue:ph,useDeferredValue:function(p){var m=ch(Eo),E=m[0],L=m[1];return bl(function(){var U=ps.transition;ps.transition={};try{L(p)}finally{ps.transition=U}},[p]),E},useTransition:function(){var p=ch(Eo)[0],m=qi().memoizedState;return[p,m]},useMutableSource:Ls,useSyncExternalStore:fd,useId:im,unstable_isNewReconciler:!1};function gh(p,m){try{var E="",L=m;do E+=Ma(L),L=L.return;while(L);var U=E}catch(G){U=`
Error generating stack: `+G.message+`
`+G.stack}return{value:p,source:m,stack:U}}function vh(p,m){try{console.error(m.value)}catch(E){setTimeout(function(){throw E})}}var om=typeof WeakMap=="function"?WeakMap:Map;function am(p,m,E){E=_o(-1,E),E.tag=3,E.payload={element:null};var L=m.value;return E.callback=function(){pm||(pm=!0,by=L),vh(p,m)},E}function bd(p,m,E){E=_o(-1,E),E.tag=3;var L=p.type.getDerivedStateFromError;if(typeof L=="function"){var U=m.value;E.payload=function(){return L(U)},E.callback=function(){vh(p,m)}}var G=p.stateNode;return G!==null&&typeof G.componentDidCatch=="function"&&(E.callback=function(){vh(p,m),typeof L!="function"&&(Tl===null?Tl=new Set([this]):Tl.add(this));var pe=m.stack;this.componentDidCatch(m.value,{componentStack:pe!==null?pe:""})}),E}function Md(p,m,E){var L=p.pingCache;if(L===null){L=p.pingCache=new om;var U=new Set;L.set(m,U)}else U=L.get(m),U===void 0&&(U=new Set,L.set(m,U));U.has(E)||(U.add(E),p=qC.bind(null,p,m,E),m.then(p,p))}function dy(p){do{var m;if((m=p.tag===13)&&(m=p.memoizedState,m=m!==null?m.dehydrated!==null:!0),m)return p;p=p.return}while(p!==null);return null}function To(p,m,E,L,U){return p.mode&1?(p.flags|=65536,p.lanes=U,p):(p===m?p.flags|=65536:(p.flags|=128,E.flags|=131072,E.flags&=-52805,E.tag===1&&(E.alternate===null?E.tag=17:(m=_o(-1,1),m.tag=2,Ko(E,m))),E.lanes|=1),p)}function Ns(p){p.flags|=4}function lm(p,m){if(p!==null&&p.child===m.child)return!0;if(m.flags&16)return!1;for(p=m.child;p!==null;){if(p.flags&12854||p.subtreeFlags&12854)return!1;p=p.sibling}return!0}var Lc,Nc,yh,El;if(He)Lc=function(p,m){for(var E=m.child;E!==null;){if(E.tag===5||E.tag===6)se(p,E.stateNode);else if(E.tag!==4&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===m)break;for(;E.sibling===null;){if(E.return===null||E.return===m)return;E=E.return}E.sibling.return=E.return,E=E.sibling}},Nc=function(){},yh=function(p,m,E,L,U){if(p=p.memoizedProps,p!==L){var G=m.stateNode,pe=$s(ds.current);E=oe(G,E,p,L,U,pe),(m.updateQueue=E)&&Ns(m)}},El=function(p,m,E,L){E!==L&&Ns(m)};else if(ie){Lc=function(p,m,E,L){for(var U=m.child;U!==null;){if(U.tag===5){var G=U.stateNode;E&&L&&(G=Ht(G,U.type,U.memoizedProps,U)),se(p,G)}else if(U.tag===6)G=U.stateNode,E&&L&&(G=an(G,U.memoizedProps,U)),se(p,G);else if(U.tag!==4){if(U.tag===22&&U.memoizedState!==null)G=U.child,G!==null&&(G.return=U),Lc(p,U,!0,!0);else if(U.child!==null){U.child.return=U,U=U.child;continue}}if(U===m)break;for(;U.sibling===null;){if(U.return===null||U.return===m)return;U=U.return}U.sibling.return=U.return,U=U.sibling}};var cm=function(p,m,E,L){for(var U=m.child;U!==null;){if(U.tag===5){var G=U.stateNode;E&&L&&(G=Ht(G,U.type,U.memoizedProps,U)),rt(p,G)}else if(U.tag===6)G=U.stateNode,E&&L&&(G=an(G,U.memoizedProps,U)),rt(p,G);else if(U.tag!==4){if(U.tag===22&&U.memoizedState!==null)G=U.child,G!==null&&(G.return=U),cm(p,U,!0,!0);else if(U.child!==null){U.child.return=U,U=U.child;continue}}if(U===m)break;for(;U.sibling===null;){if(U.return===null||U.return===m)return;U=U.return}U.sibling.return=U.return,U=U.sibling}};Nc=function(p,m){var E=m.stateNode;if(!lm(p,m)){p=E.containerInfo;var L=et(p);cm(L,m,!1,!1),E.pendingChildren=L,Ns(m),wt(p,L)}},yh=function(p,m,E,L,U){var G=p.stateNode,pe=p.memoizedProps;if((p=lm(p,m))&&pe===L)m.stateNode=G;else{var Te=m.stateNode,Je=$s(ds.current),xt=null;pe!==L&&(xt=oe(Te,E,pe,L,U,Je)),p&&xt===null?m.stateNode=G:(G=Re(G,xt,E,pe,L,m,p,Te),ve(G,E,L,U,Je)&&Ns(m),m.stateNode=G,p?Ns(m):Lc(G,m,!1,!1))}},El=function(p,m,E,L){E!==L?(p=$s(Js.current),E=$s(ds.current),m.stateNode=ye(L,p,E,m),Ns(m)):m.stateNode=p.stateNode}}else Nc=function(){},yh=function(){},El=function(){};function Ic(p,m){if(!On)switch(p.tailMode){case"hidden":m=p.tail;for(var E=null;m!==null;)m.alternate!==null&&(E=m),m=m.sibling;E===null?p.tail=null:E.sibling=null;break;case"collapsed":E=p.tail;for(var L=null;E!==null;)E.alternate!==null&&(L=E),E=E.sibling;L===null?m||p.tail===null?p.tail=null:p.tail.sibling=null:L.sibling=null}}function Xi(p){var m=p.alternate!==null&&p.alternate.child===p.child,E=0,L=0;if(m)for(var U=p.child;U!==null;)E|=U.lanes|U.childLanes,L|=U.subtreeFlags&14680064,L|=U.flags&14680064,U.return=p,U=U.sibling;else for(U=p.child;U!==null;)E|=U.lanes|U.childLanes,L|=U.subtreeFlags,L|=U.flags,U.return=p,U=U.sibling;return p.subtreeFlags|=L,p.childLanes=E,m}function py(p,m,E){var L=m.pendingProps;switch(ih(m),m.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xi(m),null;case 1:return ci(m.type)&&Tn(),Xi(m),null;case 3:return L=m.stateNode,yl(),Bt(jn),Bt(Yt),Rs(),L.pendingContext&&(L.context=L.pendingContext,L.pendingContext=null),(p===null||p.child===null)&&(Ra(m)?Ns(m):p===null||p.memoizedState.isDehydrated&&!(m.flags&256)||(m.flags|=1024,fs!==null&&(Ty(fs),fs=null))),Nc(p,m),Xi(m),null;case 5:hd(m),E=$s(Js.current);var U=m.type;if(p!==null&&m.stateNode!=null)yh(p,m,U,L,E),p.ref!==m.ref&&(m.flags|=512,m.flags|=2097152);else{if(!L){if(m.stateNode===null)throw Error(o(166));return Xi(m),null}if(p=$s(ds.current),Ra(m)){if(!je)throw Error(o(175));p=kn(m.stateNode,m.type,m.memoizedProps,E,p,m,!Pa),m.updateQueue=p,p!==null&&Ns(m)}else{var G=j(U,L,E,p,m);Lc(G,m,!1,!1),m.stateNode=G,ve(G,U,L,E,p)&&Ns(m)}m.ref!==null&&(m.flags|=512,m.flags|=2097152)}return Xi(m),null;case 6:if(p&&m.stateNode!=null)El(p,m,p.memoizedProps,L);else{if(typeof L!="string"&&m.stateNode===null)throw Error(o(166));if(p=$s(Js.current),E=$s(ds.current),Ra(m)){if(!je)throw Error(o(176));if(p=m.stateNode,L=m.memoizedProps,(E=Et(p,L,m,!Pa))&&(U=Xr,U!==null))switch(G=(U.mode&1)!==0,U.tag){case 3:Rt(U.stateNode.containerInfo,p,L,G);break;case 5:ge(U.type,U.memoizedProps,U.stateNode,p,L,G)}E&&Ns(m)}else m.stateNode=ye(L,p,E,m)}return Xi(m),null;case 13:if(Bt(Jn),L=m.memoizedState,On&&Tr!==null&&m.mode&1&&!(m.flags&128)){for(p=Tr;p;)p=B(p);return bo(),m.flags|=98560,m}if(L!==null&&L.dehydrated!==null){if(L=Ra(m),p===null){if(!L)throw Error(o(318));if(!je)throw Error(o(344));if(p=m.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(o(317));Mi(p,m)}else bo(),!(m.flags&128)&&(m.memoizedState=null),m.flags|=4;return Xi(m),null}return fs!==null&&(Ty(fs),fs=null),m.flags&128?(m.lanes=E,m):(L=L!==null,E=!1,p===null?Ra(m):E=p.memoizedState!==null,L&&!E&&(m.child.flags|=8192,m.mode&1&&(p===null||Jn.current&1?Yi===0&&(Yi=3):Cy())),m.updateQueue!==null&&(m.flags|=4),Xi(m),null);case 4:return yl(),Nc(p,m),p===null&&We(m.stateNode.containerInfo),Xi(m),null;case 10:return Kt(m.type._context),Xi(m),null;case 17:return ci(m.type)&&Tn(),Xi(m),null;case 19:if(Bt(Jn),U=m.memoizedState,U===null)return Xi(m),null;if(L=(m.flags&128)!==0,G=U.rendering,G===null)if(L)Ic(U,!1);else{if(Yi!==0||p!==null&&p.flags&128)for(p=m.child;p!==null;){if(G=Cc(p),G!==null){for(m.flags|=128,Ic(U,!1),p=G.updateQueue,p!==null&&(m.updateQueue=p,m.flags|=4),m.subtreeFlags=0,p=E,L=m.child;L!==null;)E=L,U=p,E.flags&=14680066,G=E.alternate,G===null?(E.childLanes=0,E.lanes=U,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=G.childLanes,E.lanes=G.lanes,E.child=G.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=G.memoizedProps,E.memoizedState=G.memoizedState,E.updateQueue=G.updateQueue,E.type=G.type,U=G.dependencies,E.dependencies=U===null?null:{lanes:U.lanes,firstContext:U.firstContext}),L=L.sibling;return At(Jn,Jn.current&1|2),m.child}p=p.sibling}U.tail!==null&&Qt()>wy&&(m.flags|=128,L=!0,Ic(U,!1),m.lanes=4194304)}else{if(!L)if(p=Cc(G),p!==null){if(m.flags|=128,L=!0,p=p.updateQueue,p!==null&&(m.updateQueue=p,m.flags|=4),Ic(U,!0),U.tail===null&&U.tailMode==="hidden"&&!G.alternate&&!On)return Xi(m),null}else 2*Qt()-U.renderingStartTime>wy&&E!==1073741824&&(m.flags|=128,L=!0,Ic(U,!1),m.lanes=4194304);U.isBackwards?(G.sibling=m.child,m.child=G):(p=U.last,p!==null?p.sibling=G:m.child=G,U.last=G)}return U.tail!==null?(m=U.tail,U.rendering=m,U.tail=m.sibling,U.renderingStartTime=Qt(),m.sibling=null,p=Jn.current,At(Jn,L?p&1|2:p&1),m):(Xi(m),null);case 22:case 23:return Ay(),L=m.memoizedState!==null,p!==null&&p.memoizedState!==null!==L&&(m.flags|=8192),L&&m.mode&1?Is&1073741824&&(Xi(m),He&&m.subtreeFlags&6&&(m.flags|=8192)):Xi(m),null;case 24:return null;case 25:return null}throw Error(o(156,m.tag))}var kS=a.ReactCurrentOwner,Zr=!1;function ir(p,m,E,L){m.child=p===null?tm(m,null,E,L):Jo(m,p.child,E,L)}function xh(p,m,E,L,U){E=E.render;var G=m.ref;return ui(m,U),L=lh(p,m,E,L,G,U),E=_l(),p!==null&&!Zr?(m.updateQueue=p.updateQueue,m.flags&=-2053,p.lanes&=~U,$o(p,m,U)):(On&&E&&Mc(m),m.flags|=1,ir(p,m,L,U),m.child)}function Ed(p,m,E,L,U){if(p===null){var G=E.type;return typeof G=="function"&&!Py(G)&&G.defaultProps===void 0&&E.compare===null&&E.defaultProps===void 0?(m.tag=15,m.type=G,_h(p,m,G,L,U)):(p=Sm(E.type,null,L,m,m.mode,U),p.ref=m.ref,p.return=m,m.child=p)}if(G=p.child,!(p.lanes&U)){var pe=G.memoizedProps;if(E=E.compare,E=E!==null?E:tr,E(pe,L)&&p.ref===m.ref)return $o(p,m,U)}return m.flags|=1,p=Rl(G,L),p.ref=m.ref,p.return=m,m.child=p}function _h(p,m,E,L,U){if(p!==null&&tr(p.memoizedProps,L)&&p.ref===m.ref)if(Zr=!1,(p.lanes&U)!==0)p.flags&131072&&(Zr=!0);else return m.lanes=p.lanes,$o(p,m,U);return Sh(p,m,E,L,U)}function Td(p,m,E){var L=m.pendingProps,U=L.children,G=p!==null?p.memoizedState:null;if(L.mode==="hidden")if(!(m.mode&1))m.memoizedState={baseLanes:0,cachePool:null},At(Ch,Is),Is|=E;else if(E&1073741824)m.memoizedState={baseLanes:0,cachePool:null},L=G!==null?G.baseLanes:E,At(Ch,Is),Is|=L;else return p=G!==null?G.baseLanes|E:E,m.lanes=m.childLanes=1073741824,m.memoizedState={baseLanes:p,cachePool:null},m.updateQueue=null,At(Ch,Is),Is|=p,null;else G!==null?(L=G.baseLanes|E,m.memoizedState=null):L=E,At(Ch,Is),Is|=L;return ir(p,m,U,E),m.child}function Ad(p,m){var E=m.ref;(p===null&&E!==null||p!==null&&p.ref!==E)&&(m.flags|=512,m.flags|=2097152)}function Sh(p,m,E,L,U){var G=ci(E)?Vr:Yt.current;return G=Ii(m,G),ui(m,U),E=lh(p,m,E,L,G,U),L=_l(),p!==null&&!Zr?(m.updateQueue=p.updateQueue,m.flags&=-2053,p.lanes&=~U,$o(p,m,U)):(On&&L&&Mc(m),m.flags|=1,ir(p,m,E,U),m.child)}function um(p,m,E,L,U){if(ci(E)){var G=!0;pi(m)}else G=!1;if(ui(m,U),m.stateNode===null)p!==null&&(p.alternate=null,m.alternate=null,m.flags|=2),Jp(m,E,L),od(m,E,L,U),L=!0;else if(p===null){var pe=m.stateNode,Te=m.memoizedProps;pe.props=Te;var Je=pe.context,xt=E.contextType;typeof xt=="object"&&xt!==null?xt=hi(xt):(xt=ci(E)?Vr:Yt.current,xt=Ii(m,xt));var It=E.getDerivedStateFromProps,$t=typeof It=="function"||typeof pe.getSnapshotBeforeUpdate=="function";$t||typeof pe.UNSAFE_componentWillReceiveProps!="function"&&typeof pe.componentWillReceiveProps!="function"||(Te!==L||Je!==xt)&&bc(m,pe,L,xt),Zo=!1;var Wt=m.memoizedState;pe.state=Wt,hs(m,L,pe,U),Je=m.memoizedState,Te!==L||Wt!==Je||jn.current||Zo?(typeof It=="function"&&(pl(m,E,It,L),Je=m.memoizedState),(Te=Zo||sd(m,E,Te,L,Wt,Je,xt))?($t||typeof pe.UNSAFE_componentWillMount!="function"&&typeof pe.componentWillMount!="function"||(typeof pe.componentWillMount=="function"&&pe.componentWillMount(),typeof pe.UNSAFE_componentWillMount=="function"&&pe.UNSAFE_componentWillMount()),typeof pe.componentDidMount=="function"&&(m.flags|=4194308)):(typeof pe.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=L,m.memoizedState=Je),pe.props=L,pe.state=Je,pe.context=xt,L=Te):(typeof pe.componentDidMount=="function"&&(m.flags|=4194308),L=!1)}else{pe=m.stateNode,Qp(p,m),Te=m.memoizedProps,xt=m.type===m.elementType?Te:at(m.type,Te),pe.props=xt,$t=m.pendingProps,Wt=pe.context,Je=E.contextType,typeof Je=="object"&&Je!==null?Je=hi(Je):(Je=ci(E)?Vr:Yt.current,Je=Ii(m,Je));var Zn=E.getDerivedStateFromProps;(It=typeof Zn=="function"||typeof pe.getSnapshotBeforeUpdate=="function")||typeof pe.UNSAFE_componentWillReceiveProps!="function"&&typeof pe.componentWillReceiveProps!="function"||(Te!==$t||Wt!==Je)&&bc(m,pe,L,Je),Zo=!1,Wt=m.memoizedState,pe.state=Wt,hs(m,L,pe,U);var zt=m.memoizedState;Te!==$t||Wt!==zt||jn.current||Zo?(typeof Zn=="function"&&(pl(m,E,Zn,L),zt=m.memoizedState),(xt=Zo||sd(m,E,xt,L,Wt,zt,Je)||!1)?(It||typeof pe.UNSAFE_componentWillUpdate!="function"&&typeof pe.componentWillUpdate!="function"||(typeof pe.componentWillUpdate=="function"&&pe.componentWillUpdate(L,zt,Je),typeof pe.UNSAFE_componentWillUpdate=="function"&&pe.UNSAFE_componentWillUpdate(L,zt,Je)),typeof pe.componentDidUpdate=="function"&&(m.flags|=4),typeof pe.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof pe.componentDidUpdate!="function"||Te===p.memoizedProps&&Wt===p.memoizedState||(m.flags|=4),typeof pe.getSnapshotBeforeUpdate!="function"||Te===p.memoizedProps&&Wt===p.memoizedState||(m.flags|=1024),m.memoizedProps=L,m.memoizedState=zt),pe.props=L,pe.state=zt,pe.context=Je,L=xt):(typeof pe.componentDidUpdate!="function"||Te===p.memoizedProps&&Wt===p.memoizedState||(m.flags|=4),typeof pe.getSnapshotBeforeUpdate!="function"||Te===p.memoizedProps&&Wt===p.memoizedState||(m.flags|=1024),L=!1)}return wh(p,m,E,L,G,U)}function wh(p,m,E,L,U,G){Ad(p,m);var pe=(m.flags&128)!==0;if(!L&&!pe)return U&&Wi(m,E,!1),$o(p,m,G);L=m.stateNode,kS.current=m;var Te=pe&&typeof E.getDerivedStateFromError!="function"?null:L.render();return m.flags|=1,p!==null&&pe?(m.child=Jo(m,p.child,null,G),m.child=Jo(m,null,Te,G)):ir(p,m,Te,G),m.memoizedState=L.state,U&&Wi(m,E,!0),m.child}function Dc(p){var m=p.stateNode;m.pendingContext?Bn(p,m.pendingContext,m.pendingContext!==m.context):m.context&&Bn(p,m.context,!1),cd(p,m.containerInfo)}function bh(p,m,E,L,U){return bo(),ld(U),m.flags|=256,ir(p,m,E,L),m.child}var Oc={dehydrated:null,treeContext:null,retryLane:0};function La(p){return{baseLanes:p,cachePool:null}}function my(p,m,E){var L=m.pendingProps,U=Jn.current,G=!1,pe=(m.flags&128)!==0,Te;if((Te=pe)||(Te=p!==null&&p.memoizedState===null?!1:(U&2)!==0),Te?(G=!0,m.flags&=-129):(p===null||p.memoizedState!==null)&&(U|=1),At(Jn,U&1),p===null)return Ec(m),p=m.memoizedState,p!==null&&(p=p.dehydrated,p!==null)?(m.mode&1?fn(p)?m.lanes=8:m.lanes=1073741824:m.lanes=1,null):(U=L.children,p=L.fallback,G?(L=m.mode,G=m.child,U={mode:"hidden",children:U},!(L&1)&&G!==null?(G.childLanes=0,G.pendingProps=U):G=wm(U,L,0,null),p=Wc(p,L,E,null),G.return=m,p.return=m,G.sibling=p,m.child=G,m.child.memoizedState=La(E),m.memoizedState=Oc,p):Fc(m,U));if(U=p.memoizedState,U!==null){if(Te=U.dehydrated,Te!==null){if(pe)return m.flags&256?(m.flags&=-257,Mh(p,m,E,Error(o(422)))):m.memoizedState!==null?(m.child=p.child,m.flags|=128,null):(G=L.fallback,U=m.mode,L=wm({mode:"visible",children:L.children},U,0,null),G=Wc(G,U,E,null),G.flags|=2,L.return=m,G.return=m,L.sibling=G,m.child=L,m.mode&1&&Jo(m,p.child,null,E),m.child.memoizedState=La(E),m.memoizedState=Oc,G);if(!(m.mode&1))m=Mh(p,m,E,null);else if(fn(Te))m=Mh(p,m,E,Error(o(419)));else if(L=(E&p.childLanes)!==0,Zr||L){if(L=Fi,L!==null){switch(E&-E){case 4:G=2;break;case 16:G=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:G=32;break;case 536870912:G=268435456;break;default:G=0}L=G&(L.suspendedLanes|E)?0:G,L!==0&&L!==U.retryLane&&(U.retryLane=L,eo(p,L,-1))}Cy(),m=Mh(p,m,E,Error(o(421)))}else Gi(Te)?(m.flags|=128,m.child=p.child,m=XC.bind(null,p),D(Te,m),m=null):(E=U.treeContext,je&&(Tr=me(Te),Xr=m,On=!0,fs=null,Pa=!1,E!==null&&(jr[qr++]=So,jr[qr++]=wo,jr[qr++]=Ca,So=E.id,wo=E.overflow,Ca=m)),m=Fc(m,m.pendingProps.children),m.flags|=4096);return m}return G?(L=hm(p,m,L.children,L.fallback,E),G=m.child,U=p.child.memoizedState,G.memoizedState=U===null?La(E):{baseLanes:U.baseLanes|E,cachePool:null},G.childLanes=p.childLanes&~E,m.memoizedState=Oc,L):(E=Cd(p,m,L.children,E),m.memoizedState=null,E)}return G?(L=hm(p,m,L.children,L.fallback,E),G=m.child,U=p.child.memoizedState,G.memoizedState=U===null?La(E):{baseLanes:U.baseLanes|E,cachePool:null},G.childLanes=p.childLanes&~E,m.memoizedState=Oc,L):(E=Cd(p,m,L.children,E),m.memoizedState=null,E)}function Fc(p,m){return m=wm({mode:"visible",children:m},p.mode,0,null),m.return=p,p.child=m}function Cd(p,m,E,L){var U=p.child;return p=U.sibling,E=Rl(U,{mode:"visible",children:E}),!(m.mode&1)&&(E.lanes=L),E.return=m,E.sibling=null,p!==null&&(L=m.deletions,L===null?(m.deletions=[p],m.flags|=16):L.push(p)),m.child=E}function hm(p,m,E,L,U){var G=m.mode;p=p.child;var pe=p.sibling,Te={mode:"hidden",children:E};return!(G&1)&&m.child!==p?(E=m.child,E.childLanes=0,E.pendingProps=Te,m.deletions=null):(E=Rl(p,Te),E.subtreeFlags=p.subtreeFlags&14680064),pe!==null?L=Rl(pe,L):(L=Wc(L,G,U,null),L.flags|=2),L.return=m,E.return=m,E.sibling=L,m.child=E,L}function Mh(p,m,E,L){return L!==null&&ld(L),Jo(m,p.child,null,E),p=Fc(m,m.pendingProps.children),p.flags|=2,m.memoizedState=null,p}function Pd(p,m,E){p.lanes|=m;var L=p.alternate;L!==null&&(L.lanes|=m),nr(p.return,m,E)}function Uc(p,m,E,L,U){var G=p.memoizedState;G===null?p.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:L,tail:E,tailMode:U}:(G.isBackwards=m,G.rendering=null,G.renderingStartTime=0,G.last=L,G.tail=E,G.tailMode=U)}function gy(p,m,E){var L=m.pendingProps,U=L.revealOrder,G=L.tail;if(ir(p,m,L.children,E),L=Jn.current,L&2)L=L&1|2,m.flags|=128;else{if(p!==null&&p.flags&128)e:for(p=m.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&Pd(p,E,m);else if(p.tag===19)Pd(p,E,m);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===m)break e;for(;p.sibling===null;){if(p.return===null||p.return===m)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}L&=1}if(At(Jn,L),!(m.mode&1))m.memoizedState=null;else switch(U){case"forwards":for(E=m.child,U=null;E!==null;)p=E.alternate,p!==null&&Cc(p)===null&&(U=E),E=E.sibling;E=U,E===null?(U=m.child,m.child=null):(U=E.sibling,E.sibling=null),Uc(m,!1,U,E,G);break;case"backwards":for(E=null,U=m.child,m.child=null;U!==null;){if(p=U.alternate,p!==null&&Cc(p)===null){m.child=U;break}p=U.sibling,U.sibling=E,E=U,U=p}Uc(m,!0,E,null,G);break;case"together":Uc(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function $o(p,m,E){if(p!==null&&(m.dependencies=p.dependencies),Ph|=m.lanes,!(E&m.childLanes))return null;if(p!==null&&m.child!==p.child)throw Error(o(153));if(m.child!==null){for(p=m.child,E=Rl(p,p.pendingProps),m.child=E,E.return=m;p.sibling!==null;)p=p.sibling,E=E.sibling=Rl(p,p.pendingProps),E.return=m;E.sibling=null}return m.child}function LS(p,m,E){switch(m.tag){case 3:Dc(m),bo();break;case 5:ud(m);break;case 1:ci(m.type)&&pi(m);break;case 4:cd(m,m.stateNode.containerInfo);break;case 10:Ps(m,m.type._context,m.memoizedProps.value);break;case 13:var L=m.memoizedState;if(L!==null)return L.dehydrated!==null?(At(Jn,Jn.current&1),m.flags|=128,null):E&m.child.childLanes?my(p,m,E):(At(Jn,Jn.current&1),p=$o(p,m,E),p!==null?p.sibling:null);At(Jn,Jn.current&1);break;case 19:if(L=(E&m.childLanes)!==0,p.flags&128){if(L)return gy(p,m,E);m.flags|=128}var U=m.memoizedState;if(U!==null&&(U.rendering=null,U.tail=null,U.lastEffect=null),At(Jn,Jn.current),L)break;return null;case 22:case 23:return m.lanes=0,Td(p,m,E)}return $o(p,m,E)}function vy(p,m){switch(ih(m),m.tag){case 1:return ci(m.type)&&Tn(),p=m.flags,p&65536?(m.flags=p&-65537|128,m):null;case 3:return yl(),Bt(jn),Bt(Yt),Rs(),p=m.flags,p&65536&&!(p&128)?(m.flags=p&-65537|128,m):null;case 5:return hd(m),null;case 13:if(Bt(Jn),p=m.memoizedState,p!==null&&p.dehydrated!==null){if(m.alternate===null)throw Error(o(340));bo()}return p=m.flags,p&65536?(m.flags=p&-65537|128,m):null;case 19:return Bt(Jn),null;case 4:return yl(),null;case 10:return Kt(m.type._context),null;case 22:case 23:return Ay(),null;case 24:return null;default:return null}}var Eh=!1,S=!1,v=typeof WeakSet=="function"?WeakSet:Set,w=null;function C(p,m){var E=p.ref;if(E!==null)if(typeof E=="function")try{E(null)}catch(L){vs(p,m,L)}else E.current=null}function I(p,m,E){try{E()}catch(L){vs(p,m,L)}}var H=!1;function q(p,m){for($(p.containerInfo),w=m;w!==null;)if(p=w,m=p.child,(p.subtreeFlags&1028)!==0&&m!==null)m.return=p,w=m;else for(;w!==null;){p=w;try{var E=p.alternate;if(p.flags&1024)switch(p.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var L=E.memoizedProps,U=E.memoizedState,G=p.stateNode,pe=G.getSnapshotBeforeUpdate(p.elementType===p.type?L:at(p.type,L),U);G.__reactInternalSnapshotBeforeUpdate=pe}break;case 3:He&&gt(p.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Te){vs(p,p.return,Te)}if(m=p.sibling,m!==null){m.return=p.return,w=m;break}w=p.return}return E=H,H=!1,E}function ee(p,m,E){var L=m.updateQueue;if(L=L!==null?L.lastEffect:null,L!==null){var U=L=L.next;do{if((U.tag&p)===p){var G=U.destroy;U.destroy=void 0,G!==void 0&&I(m,E,G)}U=U.next}while(U!==L)}}function ce(p,m){if(m=m.updateQueue,m=m!==null?m.lastEffect:null,m!==null){var E=m=m.next;do{if((E.tag&p)===p){var L=E.create;E.destroy=L()}E=E.next}while(E!==m)}}function _e(p){var m=p.ref;if(m!==null){var E=p.stateNode;switch(p.tag){case 5:p=re(E);break;default:p=E}typeof m=="function"?m(p):m.current=p}}function Ae(p,m,E){if(bn&&typeof bn.onCommitFiberUnmount=="function")try{bn.onCommitFiberUnmount(Sa,m)}catch{}switch(m.tag){case 0:case 11:case 14:case 15:if(p=m.updateQueue,p!==null&&(p=p.lastEffect,p!==null)){var L=p=p.next;do{var U=L,G=U.destroy;U=U.tag,G!==void 0&&(U&2||U&4)&&I(m,E,G),L=L.next}while(L!==p)}break;case 1:if(C(m,E),p=m.stateNode,typeof p.componentWillUnmount=="function")try{p.props=m.memoizedProps,p.state=m.memoizedState,p.componentWillUnmount()}catch(pe){vs(m,E,pe)}break;case 5:C(m,E);break;case 4:He?mn(p,m,E):ie&&ie&&(m=m.stateNode.containerInfo,E=et(m),_t(m,E))}}function Le(p,m,E){for(var L=m;;)if(Ae(p,L,E),L.child===null||He&&L.tag===4){if(L===m)break;for(;L.sibling===null;){if(L.return===null||L.return===m)return;L=L.return}L.sibling.return=L.return,L=L.sibling}else L.child.return=L,L=L.child}function Ge(p){var m=p.alternate;m!==null&&(p.alternate=null,Ge(m)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(m=p.stateNode,m!==null&&it(m)),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}function dt(p){return p.tag===5||p.tag===3||p.tag===4}function kt(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||dt(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function Dt(p){if(He){e:{for(var m=p.return;m!==null;){if(dt(m))break e;m=m.return}throw Error(o(160))}var E=m;switch(E.tag){case 5:m=E.stateNode,E.flags&32&&(De(m),E.flags&=-33),E=kt(p),nn(p,E,m);break;case 3:case 4:m=E.stateNode.containerInfo,E=kt(p),dn(p,E,m);break;default:throw Error(o(161))}}}function dn(p,m,E){var L=p.tag;if(L===5||L===6)p=p.stateNode,m?ct(E,p,m):qe(E,p);else if(L!==4&&(p=p.child,p!==null))for(dn(p,m,E),p=p.sibling;p!==null;)dn(p,m,E),p=p.sibling}function nn(p,m,E){var L=p.tag;if(L===5||L===6)p=p.stateNode,m?Lt(E,p,m):ft(E,p);else if(L!==4&&(p=p.child,p!==null))for(nn(p,m,E),p=p.sibling;p!==null;)nn(p,m,E),p=p.sibling}function mn(p,m,E){for(var L=m,U=!1,G,pe;;){if(!U){U=L.return;e:for(;;){if(U===null)throw Error(o(160));switch(G=U.stateNode,U.tag){case 5:pe=!1;break e;case 3:G=G.containerInfo,pe=!0;break e;case 4:G=G.containerInfo,pe=!0;break e}U=U.return}U=!0}if(L.tag===5||L.tag===6)Le(p,L,E),pe?fe(G,L.stateNode):be(G,L.stateNode);else if(L.tag===18)pe?ze(G,L.stateNode):Be(G,L.stateNode);else if(L.tag===4){if(L.child!==null){G=L.stateNode.containerInfo,pe=!0,L.child.return=L,L=L.child;continue}}else if(Ae(p,L,E),L.child!==null){L.child.return=L,L=L.child;continue}if(L===m)break;for(;L.sibling===null;){if(L.return===null||L.return===m)return;L=L.return,L.tag===4&&(U=!1)}L.sibling.return=L.return,L=L.sibling}}function xn(p,m){if(He){switch(m.tag){case 0:case 11:case 14:case 15:ee(3,m,m.return),ce(3,m),ee(5,m,m.return);return;case 1:return;case 5:var E=m.stateNode;if(E!=null){var L=m.memoizedProps;p=p!==null?p.memoizedProps:L;var U=m.type,G=m.updateQueue;m.updateQueue=null,G!==null&&nt(E,G,U,p,L,m)}return;case 6:if(m.stateNode===null)throw Error(o(162));E=m.memoizedProps,st(m.stateNode,p!==null?p.memoizedProps:E,E);return;case 3:je&&p!==null&&p.memoizedState.isDehydrated&&Se(m.stateNode.containerInfo);return;case 12:return;case 13:Nn(m);return;case 19:Nn(m);return;case 17:return}throw Error(o(163))}switch(m.tag){case 0:case 11:case 14:case 15:ee(3,m,m.return),ce(3,m),ee(5,m,m.return);return;case 12:return;case 13:Nn(m);return;case 19:Nn(m);return;case 3:je&&p!==null&&p.memoizedState.isDehydrated&&Se(m.stateNode.containerInfo);break;case 22:case 23:return}e:if(ie){switch(m.tag){case 1:case 5:case 6:break e;case 3:case 4:m=m.stateNode,_t(m.containerInfo,m.pendingChildren);break e}throw Error(o(163))}}function Nn(p){var m=p.updateQueue;if(m!==null){p.updateQueue=null;var E=p.stateNode;E===null&&(E=p.stateNode=new v),m.forEach(function(L){var U=YC.bind(null,p,L);E.has(L)||(E.add(L),L.then(U,U))})}}function mr(p,m){for(w=m;w!==null;){m=w;var E=m.deletions;if(E!==null)for(var L=0;L<E.length;L++){var U=E[L];try{var G=p;He?mn(G,U,m):Le(G,U,m);var pe=U.alternate;pe!==null&&(pe.return=null),U.return=null}catch(Ft){vs(U,m,Ft)}}if(E=m.child,m.subtreeFlags&12854&&E!==null)E.return=m,w=E;else for(;w!==null;){m=w;try{var Te=m.flags;if(Te&32&&He&&De(m.stateNode),Te&512){var Je=m.alternate;if(Je!==null){var xt=Je.ref;xt!==null&&(typeof xt=="function"?xt(null):xt.current=null)}}if(Te&8192)switch(m.tag){case 13:if(m.memoizedState!==null){var It=m.alternate;(It===null||It.memoizedState===null)&&(Sy=Qt())}break;case 22:var $t=m.memoizedState!==null,Wt=m.alternate,Zn=Wt!==null&&Wt.memoizedState!==null;if(E=m,He){e:if(L=E,U=$t,G=null,He)for(var zt=L;;){if(zt.tag===5){if(G===null){G=zt;var Pr=zt.stateNode;U?mt(Pr):vt(zt.stateNode,zt.memoizedProps)}}else if(zt.tag===6){if(G===null){var no=zt.stateNode;U?pt(no):xe(no,zt.memoizedProps)}}else if((zt.tag!==22&&zt.tag!==23||zt.memoizedState===null||zt===L)&&zt.child!==null){zt.child.return=zt,zt=zt.child;continue}if(zt===L)break;for(;zt.sibling===null;){if(zt.return===null||zt.return===L)break e;G===zt&&(G=null),zt=zt.return}G===zt&&(G=null),zt.sibling.return=zt.return,zt=zt.sibling}}if($t&&!Zn&&E.mode&1){w=E;for(var Ve=E.child;Ve!==null;){for(E=w=Ve;w!==null;){L=w;var Ce=L.child;switch(L.tag){case 0:case 11:case 14:case 15:ee(4,L,L.return);break;case 1:C(L,L.return);var Ke=L.stateNode;if(typeof Ke.componentWillUnmount=="function"){var Pt=L.return;try{Ke.props=L.memoizedProps,Ke.state=L.memoizedState,Ke.componentWillUnmount()}catch(Ft){vs(L,Pt,Ft)}}break;case 5:C(L,L.return);break;case 22:if(L.memoizedState!==null){yn(E);continue}}Ce!==null?(Ce.return=L,w=Ce):yn(E)}Ve=Ve.sibling}}}switch(Te&4102){case 2:Dt(m),m.flags&=-3;break;case 6:Dt(m),m.flags&=-3,xn(m.alternate,m);break;case 4096:m.flags&=-4097;break;case 4100:m.flags&=-4097,xn(m.alternate,m);break;case 4:xn(m.alternate,m)}}catch(Ft){vs(m,m.return,Ft)}if(E=m.sibling,E!==null){E.return=m.return,w=E;break}w=m.return}}}function Ai(p,m,E){w=p,Kr(p)}function Kr(p,m,E){for(var L=(p.mode&1)!==0;w!==null;){var U=w,G=U.child;if(U.tag===22&&L){var pe=U.memoizedState!==null||Eh;if(!pe){var Te=U.alternate,Je=Te!==null&&Te.memoizedState!==null||S;Te=Eh;var xt=S;if(Eh=pe,(S=Je)&&!xt)for(w=U;w!==null;)pe=w,Je=pe.child,pe.tag===22&&pe.memoizedState!==null?An(U):Je!==null?(Je.return=pe,w=Je):An(U);for(;G!==null;)w=G,Kr(G),G=G.sibling;w=U,Eh=Te,S=xt}Na(p)}else U.subtreeFlags&8772&&G!==null?(G.return=U,w=G):Na(p)}}function Na(p){for(;w!==null;){var m=w;if(m.flags&8772){var E=m.alternate;try{if(m.flags&8772)switch(m.tag){case 0:case 11:case 15:S||ce(5,m);break;case 1:var L=m.stateNode;if(m.flags&4&&!S)if(E===null)L.componentDidMount();else{var U=m.elementType===m.type?E.memoizedProps:at(m.type,E.memoizedProps);L.componentDidUpdate(U,E.memoizedState,L.__reactInternalSnapshotBeforeUpdate)}var G=m.updateQueue;G!==null&&Jt(m,G,L);break;case 3:var pe=m.updateQueue;if(pe!==null){if(E=null,m.child!==null)switch(m.child.tag){case 5:E=re(m.child.stateNode);break;case 1:E=m.child.stateNode}Jt(m,pe,E)}break;case 5:var Te=m.stateNode;E===null&&m.flags&4&&St(Te,m.type,m.memoizedProps,m);break;case 6:break;case 4:break;case 12:break;case 13:if(je&&m.memoizedState===null){var Je=m.alternate;if(Je!==null){var xt=Je.memoizedState;if(xt!==null){var It=xt.dehydrated;It!==null&&Ie(It)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}S||m.flags&512&&_e(m)}catch($t){vs(m,m.return,$t)}}if(m===p){w=null;break}if(E=m.sibling,E!==null){E.return=m.return,w=E;break}w=m.return}}function yn(p){for(;w!==null;){var m=w;if(m===p){w=null;break}var E=m.sibling;if(E!==null){E.return=m.return,w=E;break}w=m.return}}function An(p){for(;w!==null;){var m=w;try{switch(m.tag){case 0:case 11:case 15:var E=m.return;try{ce(4,m)}catch(Je){vs(m,E,Je)}break;case 1:var L=m.stateNode;if(typeof L.componentDidMount=="function"){var U=m.return;try{L.componentDidMount()}catch(Je){vs(m,U,Je)}}var G=m.return;try{_e(m)}catch(Je){vs(m,G,Je)}break;case 5:var pe=m.return;try{_e(m)}catch(Je){vs(m,pe,Je)}}}catch(Je){vs(m,m.return,Je)}if(m===p){w=null;break}var Te=m.sibling;if(Te!==null){Te.return=m.return,w=Te;break}w=m.return}}var Un=0,Hn=1,Yn=2,qn=3,gr=4;if(typeof Symbol=="function"&&Symbol.for){var zc=Symbol.for;Un=zc("selector.component"),Hn=zc("selector.has_pseudo_class"),Yn=zc("selector.role"),qn=zc("selector.test_id"),gr=zc("selector.text")}function Th(p){var m=ke(p);if(m!=null){if(typeof m.memoizedProps["data-testname"]!="string")throw Error(o(364));return m}if(p=Q(p),p===null)throw Error(o(362));return p.stateNode.current}function Ah(p,m){switch(m.$$typeof){case Un:if(p.type===m.value)return!0;break;case Hn:e:{m=m.value,p=[p,0];for(var E=0;E<p.length;){var L=p[E++],U=p[E++],G=m[U];if(L.tag!==5||!Ee(L)){for(;G!=null&&Ah(L,G);)U++,G=m[U];if(U===m.length){m=!0;break e}else for(L=L.child;L!==null;)p.push(L,U),L=L.sibling}}m=!1}return m;case Yn:if(p.tag===5&&Ne(p.stateNode,m.value))return!0;break;case gr:if((p.tag===5||p.tag===6)&&(p=we(p),p!==null&&0<=p.indexOf(m.value)))return!0;break;case qn:if(p.tag===5&&(p=p.memoizedProps["data-testname"],typeof p=="string"&&p.toLowerCase()===m.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Rd(p){switch(p.$$typeof){case Un:return"<"+(k(p.value)||"Unknown")+">";case Hn:return":has("+(Rd(p)||"")+")";case Yn:return'[role="'+p.value+'"]';case gr:return'"'+p.value+'"';case qn:return'[data-testname="'+p.value+'"]';default:throw Error(o(365))}}function Bc(p,m){var E=[];p=[p,0];for(var L=0;L<p.length;){var U=p[L++],G=p[L++],pe=m[G];if(U.tag!==5||!Ee(U)){for(;pe!=null&&Ah(U,pe);)G++,pe=m[G];if(G===m.length)E.push(U);else for(U=U.child;U!==null;)p.push(U,G),U=U.sibling}}return E}function yy(p,m){if(!ot)throw Error(o(363));p=Th(p),p=Bc(p,m),m=[],p=Array.from(p);for(var E=0;E<p.length;){var L=p[E++];if(L.tag===5)Ee(L)||m.push(L.stateNode);else for(L=L.child;L!==null;)p.push(L),L=L.sibling}return m}var HC=Math.ceil,fm=a.ReactCurrentDispatcher,xy=a.ReactCurrentOwner,Ci=a.ReactCurrentBatchConfig,pn=0,Fi=null,Ui=null,vr=0,Is=0,Ch=Qn(0),Yi=0,kd=null,Ph=0,dm=0,_y=0,Ld=null,ms=null,Sy=0,wy=1/0;function Rh(){wy=Qt()+500}var pm=!1,by=null,Tl=null,mm=!1,Al=null,gm=0,Nd=0,My=null,vm=-1,ym=0;function Qr(){return pn&6?Qt():vm!==-1?vm:vm=Qt()}function Cl(p){return p.mode&1?pn&2&&vr!==0?vr&-vr:Ei.transition!==null?(ym===0&&(p=xo,xo<<=1,!(xo&4194240)&&(xo=64),ym=p),ym):(p=on,p!==0?p:Fe()):1}function eo(p,m,E){if(50<Nd)throw Nd=0,My=null,Error(o(185));var L=xm(p,m);return L===null?null:(Di(L,m,E),(!(pn&2)||L!==Fi)&&(L===Fi&&(!(pn&2)&&(dm|=m),Yi===4&&Pl(L,vr)),gs(L,E),m===1&&pn===0&&!(p.mode&1)&&(Rh(),Er&&pr())),L)}function xm(p,m){p.lanes|=m;var E=p.alternate;for(E!==null&&(E.lanes|=m),E=p,p=p.return;p!==null;)p.childLanes|=m,E=p.alternate,E!==null&&(E.childLanes|=m),E=p,p=p.return;return E.tag===3?E.stateNode:null}function gs(p,m){var E=p.callbackNode;Oe(p,m);var L=Wo(p,p===Fi?vr:0);if(L===0)E!==null&&Mt(E),p.callbackNode=null,p.callbackPriority=0;else if(m=L&-L,p.callbackPriority!==m){if(E!=null&&Mt(E),m===1)p.tag===0?ba(IS.bind(null,p)):Xo(IS.bind(null,p)),Ue?Ye(function(){pn===0&&pr()}):us(hr,pr),E=null;else{switch(qo(L)){case 1:E=hr;break;case 4:E=eh;break;case 16:E=fr;break;case 536870912:E=Sc;break;default:E=fr}E=GS(E,NS.bind(null,p))}p.callbackPriority=m,p.callbackNode=E}}function NS(p,m){if(vm=-1,ym=0,pn&6)throw Error(o(327));var E=p.callbackNode;if(Gc()&&p.callbackNode!==E)return null;var L=Wo(p,p===Fi?vr:0);if(L===0)return null;if(L&30||L&p.expiredLanes||m)m=_m(p,L);else{m=L;var U=pn;pn|=2;var G=FS();(Fi!==p||vr!==m)&&(Rh(),Hc(p,m));do try{WC();break}catch(Te){OS(p,Te)}while(!0);Ti(),fm.current=G,pn=U,Ui!==null?m=0:(Fi=null,vr=0,m=Yi)}if(m!==0){if(m===2&&(U=wn(p),U!==0&&(L=U,m=Ey(p,U))),m===1)throw E=kd,Hc(p,0),Pl(p,L),gs(p,Qt()),E;if(m===6)Pl(p,L);else{if(U=p.current.alternate,!(L&30)&&!VC(U)&&(m=_m(p,L),m===2&&(G=wn(p),G!==0&&(L=G,m=Ey(p,G))),m===1))throw E=kd,Hc(p,0),Pl(p,L),gs(p,Qt()),E;switch(p.finishedWork=U,p.finishedLanes=L,m){case 0:case 1:throw Error(o(345));case 2:Vc(p,ms);break;case 3:if(Pl(p,L),(L&130023424)===L&&(m=Sy+500-Qt(),10<m)){if(Wo(p,0)!==0)break;if(U=p.suspendedLanes,(U&L)!==L){Qr(),p.pingedLanes|=p.suspendedLanes&U;break}p.timeoutHandle=Me(Vc.bind(null,p,ms),m);break}Vc(p,ms);break;case 4:if(Pl(p,L),(L&4194240)===L)break;for(m=p.eventTimes,U=-1;0<L;){var pe=31-er(L);G=1<<pe,pe=m[pe],pe>U&&(U=pe),L&=~G}if(L=U,L=Qt()-L,L=(120>L?120:480>L?480:1080>L?1080:1920>L?1920:3e3>L?3e3:4320>L?4320:1960*HC(L/1960))-L,10<L){p.timeoutHandle=Me(Vc.bind(null,p,ms),L);break}Vc(p,ms);break;case 5:Vc(p,ms);break;default:throw Error(o(329))}}}return gs(p,Qt()),p.callbackNode===E?NS.bind(null,p):null}function Ey(p,m){var E=Ld;return p.current.memoizedState.isDehydrated&&(Hc(p,m).flags|=256),p=_m(p,m),p!==2&&(m=ms,ms=E,m!==null&&Ty(m)),p}function Ty(p){ms===null?ms=p:ms.push.apply(ms,p)}function VC(p){for(var m=p;;){if(m.flags&16384){var E=m.updateQueue;if(E!==null&&(E=E.stores,E!==null))for(var L=0;L<E.length;L++){var U=E[L],G=U.getSnapshot;U=U.value;try{if(!dr(G(),U))return!1}catch{return!1}}}if(E=m.child,m.subtreeFlags&16384&&E!==null)E.return=m,m=E;else{if(m===p)break;for(;m.sibling===null;){if(m.return===null||m.return===p)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function Pl(p,m){for(m&=~_y,m&=~dm,p.suspendedLanes|=m,p.pingedLanes&=~m,p=p.expirationTimes;0<m;){var E=31-er(m),L=1<<E;p[E]=-1,m&=~L}}function IS(p){if(pn&6)throw Error(o(327));Gc();var m=Wo(p,0);if(!(m&1))return gs(p,Qt()),null;var E=_m(p,m);if(p.tag!==0&&E===2){var L=wn(p);L!==0&&(m=L,E=Ey(p,L))}if(E===1)throw E=kd,Hc(p,0),Pl(p,m),gs(p,Qt()),E;if(E===6)throw Error(o(345));return p.finishedWork=p.current.alternate,p.finishedLanes=m,Vc(p,ms),gs(p,Qt()),null}function DS(p){Al!==null&&Al.tag===0&&!(pn&6)&&Gc();var m=pn;pn|=1;var E=Ci.transition,L=on;try{if(Ci.transition=null,on=1,p)return p()}finally{on=L,Ci.transition=E,pn=m,!(pn&6)&&pr()}}function Ay(){Is=Ch.current,Bt(Ch)}function Hc(p,m){p.finishedWork=null,p.finishedLanes=0;var E=p.timeoutHandle;if(E!==Xe&&(p.timeoutHandle=Xe,Pe(E)),Ui!==null)for(E=Ui.return;E!==null;){var L=E;switch(ih(L),L.tag){case 1:L=L.type.childContextTypes,L!=null&&Tn();break;case 3:yl(),Bt(jn),Bt(Yt),Rs();break;case 5:hd(L);break;case 4:yl();break;case 13:Bt(Jn);break;case 19:Bt(Jn);break;case 10:Kt(L.type._context);break;case 22:case 23:Ay()}E=E.return}if(Fi=p,Ui=p=Rl(p.current,null),vr=Is=m,Yi=0,kd=null,_y=dm=Ph=0,ms=Ld=null,Wr!==null){for(m=0;m<Wr.length;m++)if(E=Wr[m],L=E.interleaved,L!==null){E.interleaved=null;var U=L.next,G=E.pending;if(G!==null){var pe=G.next;G.next=U,L.next=pe}E.pending=L}Wr=null}return p}function OS(p,m){do{var E=Ui;try{if(Ti(),Pc.current=mh,Rc){for(var L=ni.memoizedState;L!==null;){var U=L.queue;U!==null&&(U.pending=null),L=L.next}Rc=!1}if(Mo=0,_i=Oi=ni=null,Ar=!1,xl=0,xy.current=null,E===null||E.return===null){Yi=1,kd=m,Ui=null;break}e:{var G=p,pe=E.return,Te=E,Je=m;if(m=vr,Te.flags|=32768,Je!==null&&typeof Je=="object"&&typeof Je.then=="function"){var xt=Je,It=Te,$t=It.tag;if(!(It.mode&1)&&($t===0||$t===11||$t===15)){var Wt=It.alternate;Wt?(It.updateQueue=Wt.updateQueue,It.memoizedState=Wt.memoizedState,It.lanes=Wt.lanes):(It.updateQueue=null,It.memoizedState=null)}var Zn=dy(pe);if(Zn!==null){Zn.flags&=-257,To(Zn,pe,Te,G,m),Zn.mode&1&&Md(G,xt,m),m=Zn,Je=xt;var zt=m.updateQueue;if(zt===null){var Pr=new Set;Pr.add(Je),m.updateQueue=Pr}else zt.add(Je);break e}else{if(!(m&1)){Md(G,xt,m),Cy();break e}Je=Error(o(426))}}else if(On&&Te.mode&1){var no=dy(pe);if(no!==null){!(no.flags&65536)&&(no.flags|=256),To(no,pe,Te,G,m),ld(Je);break e}}G=Je,Yi!==4&&(Yi=2),Ld===null?Ld=[G]:Ld.push(G),Je=gh(Je,Te),Te=pe;do{switch(Te.tag){case 3:Te.flags|=65536,m&=-m,Te.lanes|=m;var Ve=am(Te,Je,m);ly(Te,Ve);break e;case 1:G=Je;var Ce=Te.type,Ke=Te.stateNode;if(!(Te.flags&128)&&(typeof Ce.getDerivedStateFromError=="function"||Ke!==null&&typeof Ke.componentDidCatch=="function"&&(Tl===null||!Tl.has(Ke)))){Te.flags|=65536,m&=-m,Te.lanes|=m;var Pt=bd(Te,G,m);ly(Te,Pt);break e}}Te=Te.return}while(Te!==null)}zS(E)}catch(Ft){m=Ft,Ui===E&&E!==null&&(Ui=E=E.return);continue}break}while(!0)}function FS(){var p=fm.current;return fm.current=mh,p===null?mh:p}function Cy(){(Yi===0||Yi===3||Yi===2)&&(Yi=4),Fi===null||!(Ph&268435455)&&!(dm&268435455)||Pl(Fi,vr)}function _m(p,m){var E=pn;pn|=2;var L=FS();Fi===p&&vr===m||Hc(p,m);do try{GC();break}catch(U){OS(p,U)}while(!0);if(Ti(),pn=E,fm.current=L,Ui!==null)throw Error(o(261));return Fi=null,vr=0,Yi}function GC(){for(;Ui!==null;)US(Ui)}function WC(){for(;Ui!==null&&!Cs();)US(Ui)}function US(p){var m=VS(p.alternate,p,Is);p.memoizedProps=p.pendingProps,m===null?zS(p):Ui=m,xy.current=null}function zS(p){var m=p;do{var E=m.alternate;if(p=m.return,m.flags&32768){if(E=vy(E,m),E!==null){E.flags&=32767,Ui=E;return}if(p!==null)p.flags|=32768,p.subtreeFlags=0,p.deletions=null;else{Yi=6,Ui=null;return}}else if(E=py(E,m,Is),E!==null){Ui=E;return}if(m=m.sibling,m!==null){Ui=m;return}Ui=m=p}while(m!==null);Yi===0&&(Yi=5)}function Vc(p,m){var E=on,L=Ci.transition;try{Ci.transition=null,on=1,jC(p,m,E)}finally{Ci.transition=L,on=E}return null}function jC(p,m,E){do Gc();while(Al!==null);if(pn&6)throw Error(o(327));var L=p.finishedWork,U=p.finishedLanes;if(L===null)return null;if(p.finishedWork=null,p.finishedLanes=0,L===p.current)throw Error(o(177));p.callbackNode=null,p.callbackPriority=0;var G=L.lanes|L.childLanes;if(jo(p,G),p===Fi&&(Ui=Fi=null,vr=0),!(L.subtreeFlags&2064)&&!(L.flags&2064)||mm||(mm=!0,GS(fr,function(){return Gc(),null})),G=(L.flags&15990)!==0,L.subtreeFlags&15990||G){G=Ci.transition,Ci.transition=null;var pe=on;on=1;var Te=pn;pn|=4,xy.current=null,q(p,L),mr(p,L),J(p.containerInfo),p.current=L,Ai(L),_a(),pn=Te,on=pe,Ci.transition=G}else p.current=L;if(mm&&(mm=!1,Al=p,gm=U),G=p.pendingLanes,G===0&&(Tl=null),wa(L.stateNode),gs(p,Qt()),m!==null)for(E=p.onRecoverableError,L=0;L<m.length;L++)E(m[L]);if(pm)throw pm=!1,p=by,by=null,p;return gm&1&&p.tag!==0&&Gc(),G=p.pendingLanes,G&1?p===My?Nd++:(Nd=0,My=p):Nd=0,pr(),null}function Gc(){if(Al!==null){var p=qo(gm),m=Ci.transition,E=on;try{if(Ci.transition=null,on=16>p?16:p,Al===null)var L=!1;else{if(p=Al,Al=null,gm=0,pn&6)throw Error(o(331));var U=pn;for(pn|=4,w=p.current;w!==null;){var G=w,pe=G.child;if(w.flags&16){var Te=G.deletions;if(Te!==null){for(var Je=0;Je<Te.length;Je++){var xt=Te[Je];for(w=xt;w!==null;){var It=w;switch(It.tag){case 0:case 11:case 15:ee(8,It,G)}var $t=It.child;if($t!==null)$t.return=It,w=$t;else for(;w!==null;){It=w;var Wt=It.sibling,Zn=It.return;if(Ge(It),It===xt){w=null;break}if(Wt!==null){Wt.return=Zn,w=Wt;break}w=Zn}}}var zt=G.alternate;if(zt!==null){var Pr=zt.child;if(Pr!==null){zt.child=null;do{var no=Pr.sibling;Pr.sibling=null,Pr=no}while(Pr!==null)}}w=G}}if(G.subtreeFlags&2064&&pe!==null)pe.return=G,w=pe;else e:for(;w!==null;){if(G=w,G.flags&2048)switch(G.tag){case 0:case 11:case 15:ee(9,G,G.return)}var Ve=G.sibling;if(Ve!==null){Ve.return=G.return,w=Ve;break e}w=G.return}}var Ce=p.current;for(w=Ce;w!==null;){pe=w;var Ke=pe.child;if(pe.subtreeFlags&2064&&Ke!==null)Ke.return=pe,w=Ke;else e:for(pe=Ce;w!==null;){if(Te=w,Te.flags&2048)try{switch(Te.tag){case 0:case 11:case 15:ce(9,Te)}}catch(Ft){vs(Te,Te.return,Ft)}if(Te===pe){w=null;break e}var Pt=Te.sibling;if(Pt!==null){Pt.return=Te.return,w=Pt;break e}w=Te.return}}if(pn=U,pr(),bn&&typeof bn.onPostCommitFiberRoot=="function")try{bn.onPostCommitFiberRoot(Sa,p)}catch{}L=!0}return L}finally{on=E,Ci.transition=m}}return!1}function BS(p,m,E){m=gh(E,m),m=am(p,m,1),Ko(p,m),m=Qr(),p=xm(p,1),p!==null&&(Di(p,1,m),gs(p,m))}function vs(p,m,E){if(p.tag===3)BS(p,p,E);else for(;m!==null;){if(m.tag===3){BS(m,p,E);break}else if(m.tag===1){var L=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof L.componentDidCatch=="function"&&(Tl===null||!Tl.has(L))){p=gh(E,p),p=bd(m,p,1),Ko(m,p),p=Qr(),m=xm(m,1),m!==null&&(Di(m,1,p),gs(m,p));break}}m=m.return}}function qC(p,m,E){var L=p.pingCache;L!==null&&L.delete(m),m=Qr(),p.pingedLanes|=p.suspendedLanes&E,Fi===p&&(vr&E)===E&&(Yi===4||Yi===3&&(vr&130023424)===vr&&500>Qt()-Sy?Hc(p,0):_y|=E),gs(p,m)}function HS(p,m){m===0&&(p.mode&1?(m=ls,ls<<=1,!(ls&130023424)&&(ls=4194304)):m=1);var E=Qr();p=xm(p,m),p!==null&&(Di(p,m,E),gs(p,E))}function XC(p){var m=p.memoizedState,E=0;m!==null&&(E=m.retryLane),HS(p,E)}function YC(p,m){var E=0;switch(p.tag){case 13:var L=p.stateNode,U=p.memoizedState;U!==null&&(E=U.retryLane);break;case 19:L=p.stateNode;break;default:throw Error(o(314))}L!==null&&L.delete(m),HS(p,E)}var VS;VS=function(p,m,E){if(p!==null)if(p.memoizedProps!==m.pendingProps||jn.current)Zr=!0;else{if(!(p.lanes&E)&&!(m.flags&128))return Zr=!1,LS(p,m,E);Zr=!!(p.flags&131072)}else Zr=!1,On&&m.flags&1048576&&ad(m,nh,m.index);switch(m.lanes=0,m.tag){case 2:var L=m.type;p!==null&&(p.alternate=null,m.alternate=null,m.flags|=2),p=m.pendingProps;var U=Ii(m,Yt.current);ui(m,E),U=lh(null,m,L,p,U,E);var G=_l();return m.flags|=1,typeof U=="object"&&U!==null&&typeof U.render=="function"&&U.$$typeof===void 0?(m.tag=1,m.memoizedState=null,m.updateQueue=null,ci(L)?(G=!0,pi(m)):G=!1,m.memoizedState=U.state!==null&&U.state!==void 0?U.state:null,id(m),U.updater=ml,m.stateNode=U,U._reactInternals=m,od(m,L,p,E),m=wh(null,m,L,!0,G,E)):(m.tag=0,On&&G&&Mc(m),ir(null,m,U,E),m=m.child),m;case 16:L=m.elementType;e:{switch(p!==null&&(p.alternate=null,m.alternate=null,m.flags|=2),p=m.pendingProps,U=L._init,L=U(L._payload),m.type=L,U=m.tag=KC(L),p=at(L,p),U){case 0:m=Sh(null,m,L,p,E);break e;case 1:m=um(null,m,L,p,E);break e;case 11:m=xh(null,m,L,p,E);break e;case 14:m=Ed(null,m,L,at(L.type,p),E);break e}throw Error(o(306,L,""))}return m;case 0:return L=m.type,U=m.pendingProps,U=m.elementType===L?U:at(L,U),Sh(p,m,L,U,E);case 1:return L=m.type,U=m.pendingProps,U=m.elementType===L?U:at(L,U),um(p,m,L,U,E);case 3:e:{if(Dc(m),p===null)throw Error(o(387));L=m.pendingProps,G=m.memoizedState,U=G.element,Qp(p,m),hs(m,L,null,E);var pe=m.memoizedState;if(L=pe.element,je&&G.isDehydrated)if(G={element:L,isDehydrated:!1,cache:pe.cache,transitions:pe.transitions},m.updateQueue.baseState=G,m.memoizedState=G,m.flags&256){U=Error(o(423)),m=bh(p,m,L,E,U);break e}else if(L!==U){U=Error(o(424)),m=bh(p,m,L,E,U);break e}else for(je&&(Tr=Y(m.stateNode.containerInfo),Xr=m,On=!0,fs=null,Pa=!1),E=tm(m,null,L,E),m.child=E;E;)E.flags=E.flags&-3|4096,E=E.sibling;else{if(bo(),L===U){m=$o(p,m,E);break e}ir(p,m,L,E)}m=m.child}return m;case 5:return ud(m),p===null&&Ec(m),L=m.type,U=m.pendingProps,G=p!==null?p.memoizedProps:null,pe=U.children,he(L,U)?pe=null:G!==null&&he(L,G)&&(m.flags|=32),Ad(p,m),ir(p,m,pe,E),m.child;case 6:return p===null&&Ec(m),null;case 13:return my(p,m,E);case 4:return cd(m,m.stateNode.containerInfo),L=m.pendingProps,p===null?m.child=Jo(m,null,L,E):ir(p,m,L,E),m.child;case 11:return L=m.type,U=m.pendingProps,U=m.elementType===L?U:at(L,U),xh(p,m,L,U,E);case 7:return ir(p,m,m.pendingProps,E),m.child;case 8:return ir(p,m,m.pendingProps.children,E),m.child;case 12:return ir(p,m,m.pendingProps.children,E),m.child;case 10:e:{if(L=m.type._context,U=m.pendingProps,G=m.memoizedProps,pe=U.value,Ps(m,L,pe),G!==null)if(dr(G.value,pe)){if(G.children===U.children&&!jn.current){m=$o(p,m,E);break e}}else for(G=m.child,G!==null&&(G.return=m);G!==null;){var Te=G.dependencies;if(Te!==null){pe=G.child;for(var Je=Te.firstContext;Je!==null;){if(Je.context===L){if(G.tag===1){Je=_o(-1,E&-E),Je.tag=2;var xt=G.updateQueue;if(xt!==null){xt=xt.shared;var It=xt.pending;It===null?Je.next=Je:(Je.next=It.next,It.next=Je),xt.pending=Je}}G.lanes|=E,Je=G.alternate,Je!==null&&(Je.lanes|=E),nr(G.return,E,m),Te.lanes|=E;break}Je=Je.next}}else if(G.tag===10)pe=G.type===m.type?null:G.child;else if(G.tag===18){if(pe=G.return,pe===null)throw Error(o(341));pe.lanes|=E,Te=pe.alternate,Te!==null&&(Te.lanes|=E),nr(pe,E,m),pe=G.sibling}else pe=G.child;if(pe!==null)pe.return=G;else for(pe=G;pe!==null;){if(pe===m){pe=null;break}if(G=pe.sibling,G!==null){G.return=pe.return,pe=G;break}pe=pe.return}G=pe}ir(p,m,U.children,E),m=m.child}return m;case 9:return U=m.type,L=m.pendingProps.children,ui(m,E),U=hi(U),L=L(U),m.flags|=1,ir(p,m,L,E),m.child;case 14:return L=m.type,U=at(L,m.pendingProps),U=at(L.type,U),Ed(p,m,L,U,E);case 15:return _h(p,m,m.type,m.pendingProps,E);case 17:return L=m.type,U=m.pendingProps,U=m.elementType===L?U:at(L,U),p!==null&&(p.alternate=null,m.alternate=null,m.flags|=2),m.tag=1,ci(L)?(p=!0,pi(m)):p=!1,ui(m,E),Jp(m,L,U),od(m,L,U,E),wh(null,m,L,!0,p,E);case 19:return gy(p,m,E);case 22:return Td(p,m,E)}throw Error(o(156,m.tag))};function GS(p,m){return us(p,m)}function ZC(p,m,E,L){this.tag=p,this.key=E,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=L,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function to(p,m,E,L){return new ZC(p,m,E,L)}function Py(p){return p=p.prototype,!(!p||!p.isReactComponent)}function KC(p){if(typeof p=="function")return Py(p)?1:0;if(p!=null){if(p=p.$$typeof,p===_)return 11;if(p===M)return 14}return 2}function Rl(p,m){var E=p.alternate;return E===null?(E=to(p.tag,m,p.key,p.mode),E.elementType=p.elementType,E.type=p.type,E.stateNode=p.stateNode,E.alternate=p,p.alternate=E):(E.pendingProps=m,E.type=p.type,E.flags=0,E.subtreeFlags=0,E.deletions=null),E.flags=p.flags&14680064,E.childLanes=p.childLanes,E.lanes=p.lanes,E.child=p.child,E.memoizedProps=p.memoizedProps,E.memoizedState=p.memoizedState,E.updateQueue=p.updateQueue,m=p.dependencies,E.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},E.sibling=p.sibling,E.index=p.index,E.ref=p.ref,E}function Sm(p,m,E,L,U,G){var pe=2;if(L=p,typeof p=="function")Py(p)&&(pe=1);else if(typeof p=="string")pe=5;else e:switch(p){case u:return Wc(E.children,U,G,m);case f:pe=8,U|=8;break;case d:return p=to(12,E,m,U|2),p.elementType=d,p.lanes=G,p;case x:return p=to(13,E,m,U),p.elementType=x,p.lanes=G,p;case y:return p=to(19,E,m,U),p.elementType=y,p.lanes=G,p;case A:return wm(E,U,G,m);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case h:pe=10;break e;case g:pe=9;break e;case _:pe=11;break e;case M:pe=14;break e;case b:pe=16,L=null;break e}throw Error(o(130,p==null?p:typeof p,""))}return m=to(pe,E,m,U),m.elementType=p,m.type=L,m.lanes=G,m}function Wc(p,m,E,L){return p=to(7,p,L,m),p.lanes=E,p}function wm(p,m,E,L){return p=to(22,p,L,m),p.elementType=A,p.lanes=E,p.stateNode={},p}function Ry(p,m,E){return p=to(6,p,null,m),p.lanes=E,p}function ky(p,m,E){return m=to(4,p.children!==null?p.children:[],p.key,m),m.lanes=E,m.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},m}function QC(p,m,E,L,U){this.tag=m,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Xe,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cs(0),this.expirationTimes=cs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cs(0),this.identifierPrefix=L,this.onRecoverableError=U,je&&(this.mutableSourceEagerHydrationData=null)}function WS(p,m,E,L,U,G,pe,Te,Je){return p=new QC(p,m,E,Te,Je),m===1?(m=1,G===!0&&(m|=8)):m=0,G=to(3,null,null,m),p.current=G,G.stateNode=p,G.memoizedState={element:L,isDehydrated:E,cache:null,transitions:null},id(G),p}function jS(p){if(!p)return zn;p=p._reactInternals;e:{if(z(p)!==p||p.tag!==1)throw Error(o(170));var m=p;do{switch(m.tag){case 3:m=m.stateNode.context;break e;case 1:if(ci(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break e}}m=m.return}while(m!==null);throw Error(o(171))}if(p.tag===1){var E=p.type;if(ci(E))return As(p,E,m)}return m}function qS(p){var m=p._reactInternals;if(m===void 0)throw typeof p.render=="function"?Error(o(188)):(p=Object.keys(p).join(","),Error(o(268,p)));return p=V(m),p===null?null:p.stateNode}function XS(p,m){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var E=p.retryLane;p.retryLane=E!==0&&E<m?E:m}}function Ly(p,m){XS(p,m),(p=p.alternate)&&XS(p,m)}function JC(p){return p=V(p),p===null?null:p.stateNode}function $C(){return null}return t.attemptContinuousHydration=function(p){if(p.tag===13){var m=Qr();eo(p,134217728,m),Ly(p,134217728)}},t.attemptHydrationAtCurrentPriority=function(p){if(p.tag===13){var m=Qr(),E=Cl(p);eo(p,E,m),Ly(p,E)}},t.attemptSynchronousHydration=function(p){switch(p.tag){case 3:var m=p.stateNode;if(m.current.memoizedState.isDehydrated){var E=Zs(m.pendingLanes);E!==0&&(Ks(m,E|1),gs(m,Qt()),!(pn&6)&&(Rh(),pr()))}break;case 13:var L=Qr();DS(function(){return eo(p,1,L)}),Ly(p,1)}},t.batchedUpdates=function(p,m){var E=pn;pn|=1;try{return p(m)}finally{pn=E,pn===0&&(Rh(),Er&&pr())}},t.createComponentSelector=function(p){return{$$typeof:Un,value:p}},t.createContainer=function(p,m,E,L,U,G,pe){return WS(p,m,!1,null,E,L,U,G,pe)},t.createHasPseudoClassSelector=function(p){return{$$typeof:Hn,value:p}},t.createHydrationContainer=function(p,m,E,L,U,G,pe,Te,Je){return p=WS(E,L,!0,p,U,G,pe,Te,Je),p.context=jS(null),E=p.current,L=Qr(),U=Cl(E),G=_o(L,U),G.callback=m??null,Ko(E,G),p.current.lanes=U,Di(p,U,L),gs(p,L),p},t.createPortal=function(p,m,E){var L=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:L==null?null:""+L,children:p,containerInfo:m,implementation:E}},t.createRoleSelector=function(p){return{$$typeof:Yn,value:p}},t.createTestNameSelector=function(p){return{$$typeof:qn,value:p}},t.createTextSelector=function(p){return{$$typeof:gr,value:p}},t.deferredUpdates=function(p){var m=on,E=Ci.transition;try{return Ci.transition=null,on=16,p()}finally{on=m,Ci.transition=E}},t.discreteUpdates=function(p,m,E,L,U){var G=on,pe=Ci.transition;try{return Ci.transition=null,on=1,p(m,E,L,U)}finally{on=G,Ci.transition=pe,pn===0&&Rh()}},t.findAllNodes=yy,t.findBoundingRects=function(p,m){if(!ot)throw Error(o(363));m=yy(p,m),p=[];for(var E=0;E<m.length;E++)p.push(Z(m[E]));for(m=p.length-1;0<m;m--){E=p[m];for(var L=E.x,U=L+E.width,G=E.y,pe=G+E.height,Te=m-1;0<=Te;Te--)if(m!==Te){var Je=p[Te],xt=Je.x,It=xt+Je.width,$t=Je.y,Wt=$t+Je.height;if(L>=xt&&G>=$t&&U<=It&&pe<=Wt){p.splice(m,1);break}else if(L!==xt||E.width!==Je.width||Wt<G||$t>pe){if(!(G!==$t||E.height!==Je.height||It<L||xt>U)){xt>L&&(Je.width+=xt-L,Je.x=L),It<U&&(Je.width=U-xt),p.splice(m,1);break}}else{$t>G&&(Je.height+=$t-G,Je.y=G),Wt<pe&&(Je.height=pe-$t),p.splice(m,1);break}}}return p},t.findHostInstance=qS,t.findHostInstanceWithNoPortals=function(p){return p=F(p),p=p!==null?W(p):null,p===null?null:p.stateNode},t.findHostInstanceWithWarning=function(p){return qS(p)},t.flushControlled=function(p){var m=pn;pn|=1;var E=Ci.transition,L=on;try{Ci.transition=null,on=1,p()}finally{on=L,Ci.transition=E,pn=m,pn===0&&(Rh(),pr())}},t.flushPassiveEffects=Gc,t.flushSync=DS,t.focusWithin=function(p,m){if(!ot)throw Error(o(363));for(p=Th(p),m=Bc(p,m),m=Array.from(m),p=0;p<m.length;){var E=m[p++];if(!Ee(E)){if(E.tag===5&&Ze(E.stateNode))return!0;for(E=E.child;E!==null;)m.push(E),E=E.sibling}}return!1},t.getCurrentUpdatePriority=function(){return on},t.getFindAllNodesFailureDescription=function(p,m){if(!ot)throw Error(o(363));var E=0,L=[];p=[Th(p),0];for(var U=0;U<p.length;){var G=p[U++],pe=p[U++],Te=m[pe];if((G.tag!==5||!Ee(G))&&(Ah(G,Te)&&(L.push(Rd(Te)),pe++,pe>E&&(E=pe)),pe<m.length))for(G=G.child;G!==null;)p.push(G,pe),G=G.sibling}if(E<m.length){for(p=[];E<m.length;E++)p.push(Rd(m[E]));return`findAllNodes was able to match part of the selector:
  `+(L.join(" > ")+`

No matching component was found for:
  `)+p.join(" > ")}return null},t.getPublicRootInstance=function(p){if(p=p.current,!p.child)return null;switch(p.child.tag){case 5:return re(p.child.stateNode);default:return p.child.stateNode}},t.injectIntoDevTools=function(p){if(p={bundleType:p.bundleType,version:p.version,rendererPackageName:p.rendererPackageName,rendererConfig:p.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:JC,findFiberByHostInstance:p.findFiberByHostInstance||$C,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")p=!1;else{var m=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(m.isDisabled||!m.supportsFiber)p=!0;else{try{Sa=m.inject(p),bn=m}catch{}p=!!m.checkDCE}}return p},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(p,m,E,L){if(!ot)throw Error(o(363));p=yy(p,m);var U=lt(p,E,L).disconnect;return{disconnect:function(){U()}}},t.registerMutableSourceForHydration=function(p,m){var E=m._getVersion;E=E(m._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[m,E]:p.mutableSourceEagerHydrationData.push(m,E)},t.runWithPriority=function(p,m){var E=on;try{return on=p,m()}finally{on=E}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(p,m,E,L){var U=m.current,G=Qr(),pe=Cl(U);return E=jS(E),m.context===null?m.context=E:m.pendingContext=E,m=_o(G,pe),m.payload={element:p},L=L===void 0?null:L,L!==null&&(m.callback=L),Ko(U,m),p=eo(U,pe,G),p!==null&&rd(p,U,pe),pe},t};oC.exports=yG;var xG=oC.exports;const _G=E3(xG);var aC={exports:{}},lC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(X,$){var J=X.length;X.push($);e:for(;0<J;){var j=J-1>>>1,se=X[j];if(0<r(se,$))X[j]=$,X[J]=se,J=j;else break e}}function t(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var $=X[0],J=X.pop();if(J!==$){X[0]=J;e:for(var j=0,se=X.length,ve=se>>>1;j<ve;){var oe=2*(j+1)-1,he=X[oe],ye=oe+1,Me=X[ye];if(0>r(he,J))ye<se&&0>r(Me,he)?(X[j]=Me,X[ye]=J,j=ye):(X[j]=he,X[oe]=J,j=oe);else if(ye<se&&0>r(Me,J))X[j]=Me,X[ye]=J,j=ye;else break e}}return $}function r(X,$){var J=X.sortIndex-$.sortIndex;return J!==0?J:X.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,d=3,h=!1,g=!1,_=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(X){for(var $=t(c);$!==null;){if($.callback===null)i(c);else if($.startTime<=X)i(c),$.sortIndex=$.expirationTime,e(l,$);else break;$=t(c)}}function A(X){if(_=!1,b(X),!g)if(t(l)!==null)g=!0,re(T);else{var $=t(c);$!==null&&de(A,$.startTime-X)}}function T(X,$){g=!1,_&&(_=!1,y(N),N=-1),h=!0;var J=d;try{for(b($),f=t(l);f!==null&&(!(f.expirationTime>$)||X&&!F());){var j=f.callback;if(typeof j=="function"){f.callback=null,d=f.priorityLevel;var se=j(f.expirationTime<=$);$=n.unstable_now(),typeof se=="function"?f.callback=se:f===t(l)&&i(l),b($)}else i(l);f=t(l)}if(f!==null)var ve=!0;else{var oe=t(c);oe!==null&&de(A,oe.startTime-$),ve=!1}return ve}finally{f=null,d=J,h=!1}}var P=!1,k=null,N=-1,z=5,R=-1;function F(){return!(n.unstable_now()-R<z)}function V(){if(k!==null){var X=n.unstable_now();R=X;var $=!0;try{$=k(!0,X)}finally{$?K():(P=!1,k=null)}}else P=!1}var K;if(typeof M=="function")K=function(){M(V)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,ne=W.port2;W.port1.onmessage=V,K=function(){ne.postMessage(null)}}else K=function(){x(V,0)};function re(X){k=X,P||(P=!0,K())}function de(X,$){N=x(function(){X(n.unstable_now())},$)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_continueExecution=function(){g||h||(g=!0,re(T))},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(X){switch(d){case 1:case 2:case 3:var $=3;break;default:$=d}var J=d;d=$;try{return X()}finally{d=J}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(X,$){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var J=d;d=X;try{return $()}finally{d=J}},n.unstable_scheduleCallback=function(X,$,J){var j=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?j+J:j):J=j,X){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=J+se,X={id:u++,callback:$,priorityLevel:X,startTime:J,expirationTime:se,sortIndex:-1},J>j?(X.sortIndex=J,e(c,X),t(l)===null&&X===t(c)&&(_?(y(N),N=-1):_=!0,de(A,J-j))):(X.sortIndex=se,e(l,X),g||h||(g=!0,re(T))),X},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(X){var $=d;return function(){var J=d;d=$;try{return X.apply(this,arguments)}finally{d=J}}}})(lC);aC.exports=lC;var s6=aC.exports;const ES={},SG=n=>void Object.assign(ES,n);function wG(n,e){function t(u,{args:f=[],attach:d,...h},g){let _=`${u[0].toUpperCase()}${u.slice(1)}`,x;if(u==="primitive"){if(h.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const y=h.object;x=rf(y,{type:u,root:g,attach:d,primitive:!0})}else{const y=ES[_];if(!y)throw new Error(`R3F: ${_} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");x=rf(new y(...f),{type:u,root:g,attach:d,memoizedProps:{args:f}})}return x.__r3f.attach===void 0&&(x.isBufferGeometry?x.__r3f.attach="geometry":x.isMaterial&&(x.__r3f.attach="material")),_!=="inject"&&u2(x,h),x}function i(u,f){let d=!1;if(f){var h,g;(h=f.__r3f)!=null&&h.attach?c2(u,f,f.__r3f.attach):f.isObject3D&&u.isObject3D&&(u.add(f),d=!0),d||(g=u.__r3f)==null||g.objects.push(f),f.__r3f||rf(f,{}),f.__r3f.parent=u,_3(f),sf(f)}}function r(u,f,d){let h=!1;if(f){var g,_;if((g=f.__r3f)!=null&&g.attach)c2(u,f,f.__r3f.attach);else if(f.isObject3D&&u.isObject3D){f.parent=u,f.dispatchEvent({type:"added"}),u.dispatchEvent({type:"childadded",child:f});const x=u.children.filter(M=>M!==f),y=x.indexOf(d);u.children=[...x.slice(0,y),f,...x.slice(y)],h=!0}h||(_=u.__r3f)==null||_.objects.push(f),f.__r3f||rf(f,{}),f.__r3f.parent=u,_3(f),sf(f)}}function s(u,f,d=!1){u&&[...u].forEach(h=>o(f,h,d))}function o(u,f,d){if(f){var h,g,_;if(f.__r3f&&(f.__r3f.parent=null),(h=u.__r3f)!=null&&h.objects&&(u.__r3f.objects=u.__r3f.objects.filter(A=>A!==f)),(g=f.__r3f)!=null&&g.attach)u6(u,f,f.__r3f.attach);else if(f.isObject3D&&u.isObject3D){var x;u.remove(f),(x=f.__r3f)!=null&&x.root&&RG(b1(f),f)}const M=(_=f.__r3f)==null?void 0:_.primitive,b=!M&&(d===void 0?f.dispose!==null:d);if(!M){var y;s((y=f.__r3f)==null?void 0:y.objects,f,b),s(f.children,f,b)}if(delete f.__r3f,b&&f.dispose&&f.type!=="Scene"){const A=()=>{try{f.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?s6.unstable_scheduleCallback(s6.unstable_IdlePriority,A):A()}sf(u)}}function a(u,f,d,h){var g;const _=(g=u.__r3f)==null?void 0:g.parent;if(!_)return;const x=t(f,d,u.__r3f.root);if(u.children){for(const y of u.children)y.__r3f&&i(x,y);u.children=u.children.filter(y=>!y.__r3f)}u.__r3f.objects.forEach(y=>i(x,y)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||o(_,u),x.parent&&(x.__r3f.autoRemovedBeforeAppend=!0),i(_,x),x.raycast&&x.__r3f.eventCount&&b1(x).getState().internal.interaction.push(x),[h,h.alternate].forEach(y=>{y!==null&&(y.stateNode=x,y.ref&&(typeof y.ref=="function"?y.ref(x):y.ref.current=x))})}const l=()=>{};return{reconciler:_G({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,f)=>{if(!f)return;const d=u.getState().scene;d.__r3f&&(d.__r3f.root=u,i(d,f))},removeChildFromContainer:(u,f)=>{f&&o(u.getState().scene,f)},insertInContainerBefore:(u,f,d)=>{if(!f||!d)return;const h=u.getState().scene;h.__r3f&&r(h,f,d)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var f;return!!((f=u==null?void 0:u.__r3f)!=null?f:{}).handlers},prepareUpdate(u,f,d,h){var g;if(((g=u==null?void 0:u.__r3f)!=null?g:{}).primitive&&h.object&&h.object!==u)return[!0];{const{args:x=[],children:y,...M}=h,{args:b=[],children:A,...T}=d;if(!Array.isArray(x))throw new Error("R3F: the args prop must be an array!");if(x.some((k,N)=>k!==b[N]))return[!0];const P=mC(u,M,T,!0);return P.changes.length?[!1,P]:null}},commitUpdate(u,[f,d],h,g,_,x){f?a(u,h,_,x):u2(u,d)},commitMount(u,f,d,h){var g;const _=(g=u.__r3f)!=null?g:{};u.raycast&&_.handlers&&_.eventCount&&b1(u).getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>rf(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var f;const{attach:d,parent:h}=(f=u.__r3f)!=null?f:{};d&&h&&u6(h,u,d),u.isObject3D&&(u.visible=!1),sf(u)},unhideInstance(u,f){var d;const{attach:h,parent:g}=(d=u.__r3f)!=null?d:{};h&&g&&c2(g,u,h),(u.isObject3D&&f.visible==null||f.visible)&&(u.visible=!0),sf(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Mf.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&si.fun(performance.now)?performance.now:si.fun(Date.now)?Date.now:()=>0,scheduleTimeout:si.fun(setTimeout)?setTimeout:void 0,cancelTimeout:si.fun(clearTimeout)?clearTimeout:void 0}),applyProps:u2}}var o6,a6;const l2=n=>"colorSpace"in n||"outputColorSpace"in n,cC=()=>{var n;return(n=ES.ColorManagement)!=null?n:null},uC=n=>n&&n.isOrthographicCamera,bG=n=>n&&n.hasOwnProperty("current"),Kp=typeof window<"u"&&((o6=window.document)!=null&&o6.createElement||((a6=window.navigator)==null?void 0:a6.product)==="ReactNative")?Qe.useLayoutEffect:Qe.useEffect;function hC(n){const e=Qe.useRef(n);return Kp(()=>void(e.current=n),[n]),e}function MG({set:n}){return Kp(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class fC extends Qe.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}fC.getDerivedStateFromError=()=>({error:!0});const dC="__default",l6=new Map,EG=n=>n&&!!n.memoized&&!!n.changes;function pC(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const s0=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function b1(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const si={obj:n=>n===Object(n)&&!si.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(si.str(n)||si.num(n)||si.boo(n))return n===e;const s=si.obj(n);if(s&&i==="reference")return n===e;const o=si.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(a in r?e:n)if(!si.equ(n[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:n)if(n[a]!==e[a])return!1;if(si.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function TG(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function rf(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function x3(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const c6=/-\d+$/;function c2(n,e,t){if(si.str(t)){if(c6.test(t)){const s=t.replace(c6,""),{target:o,key:a}=x3(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=x3(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function u6(n,e,t){var i,r;if(si.str(t)){const{target:s,key:o}=x3(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function mC(n,{children:e,key:t,ref:i,...r},{children:s,key:o,ref:a,...l}={},c=!1){const u=n.__r3f,f=Object.entries(r),d=[];if(c){const g=Object.keys(l);for(let _=0;_<g.length;_++)r.hasOwnProperty(g[_])||f.unshift([g[_],dC+"remove"])}f.forEach(([g,_])=>{var x;if((x=n.__r3f)!=null&&x.primitive&&g==="object"||si.equ(_,l[g]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(g))return d.push([g,_,!0,[]]);let y=[];g.includes("-")&&(y=g.split("-")),d.push([g,_,!1,y]);for(const M in r){const b=r[M];M.startsWith(`${g}-`)&&d.push([M,b,!1,M.split("-")])}});const h={...r};return u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.args&&(h.args=u.memoizedProps.args),u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.attach&&(h.attach=u.memoizedProps.attach),{memoized:h,changes:d}}const AG=typeof process<"u"&&!1;function u2(n,e){var t;const i=n.__r3f,r=i==null?void 0:i.root,s=r==null||r.getState==null?void 0:r.getState(),{memoized:o,changes:a}=EG(e)?e:mC(n,e),l=i==null?void 0:i.eventCount;n.__r3f&&(n.__r3f.memoizedProps=o);for(let d=0;d<a.length;d++){let[h,g,_,x]=a[d];if(l2(n)){const A="srgb",T="srgb-linear";h==="encoding"?(h="colorSpace",g=g===3001?A:T):h==="outputEncoding"&&(h="outputColorSpace",g=g===3001?A:T)}let y=n,M=y[h];if(x.length&&(M=x.reduce((b,A)=>b[A],n),!(M&&M.set))){const[b,...A]=x.reverse();y=A.reverse().reduce((T,P)=>T[P],n),h=b}if(g===dC+"remove")if(y.constructor){let b=l6.get(y.constructor);b||(b=new y.constructor,l6.set(y.constructor,b)),g=b[h]}else g=0;if(_&&i)g?i.handlers[h]=g:delete i.handlers[h],i.eventCount=Object.keys(i.handlers).length;else if(M&&M.set&&(M.copy||M instanceof ku)){if(Array.isArray(g))M.fromArray?M.fromArray(g):M.set(...g);else if(M.copy&&g&&g.constructor&&(AG?M.constructor.name===g.constructor.name:M.constructor===g.constructor))M.copy(g);else if(g!==void 0){var c;const b=(c=M)==null?void 0:c.isColor;!b&&M.setScalar?M.setScalar(g):M instanceof ku&&g instanceof ku?M.mask=g.mask:M.set(g),!cC()&&s&&!s.linear&&b&&M.convertSRGBToLinear()}}else{var u;if(y[h]=g,(u=y[h])!=null&&u.isTexture&&y[h].format===ts&&y[h].type===ga&&s){const b=y[h];l2(b)&&l2(s.gl)?b.colorSpace=s.gl.outputColorSpace:b.encoding=s.gl.outputEncoding}}sf(n)}if(i&&i.parent&&n.raycast&&l!==i.eventCount){const d=b1(n).getState().internal,h=d.interaction.indexOf(n);h>-1&&d.interaction.splice(h,1),i.eventCount&&d.interaction.push(n)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=n.__r3f)!=null&&t.parent&&_3(n),n}function sf(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function _3(n){n.onUpdate==null||n.onUpdate(n)}function CG(n,e){n.manual||(uC(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function qg(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function PG(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Mf.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Mf.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Mf.ContinuousEventPriority;default:return Mf.DefaultEventPriority}}function gC(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function RG(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{gC(t.capturedMap,e,i,r)})}function kG(n){function e(l){const{internal:c}=n.getState(),u=l.offsetX-c.initialClick[0],f=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+f*f))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var f;return(f=c.__r3f)==null?void 0:f.handlers["onPointer"+u]}))}function i(l,c){const u=n.getState(),f=new Set,d=[],h=c?c(u.internal.interaction):u.internal.interaction;for(let y=0;y<h.length;y++){const M=s0(h[y]);M&&(M.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function g(y){const M=s0(y);if(!M||!M.events.enabled||M.raycaster.camera===null)return[];if(M.raycaster.camera===void 0){var b;M.events.compute==null||M.events.compute(l,M,(b=M.previousRoot)==null?void 0:b.getState()),M.raycaster.camera===void 0&&(M.raycaster.camera=null)}return M.raycaster.camera?M.raycaster.intersectObject(y,!0):[]}let _=h.flatMap(g).sort((y,M)=>{const b=s0(y.object),A=s0(M.object);return!b||!A?y.distance-M.distance:A.events.priority-b.events.priority||y.distance-M.distance}).filter(y=>{const M=qg(y);return f.has(M)?!1:(f.add(M),!0)});u.events.filter&&(_=u.events.filter(_,u));for(const y of _){let M=y.object;for(;M;){var x;(x=M.__r3f)!=null&&x.eventCount&&d.push({...y,eventObject:M}),M=M.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let y of u.internal.capturedMap.get(l.pointerId).values())f.has(qg(y.intersection))||d.push(y.intersection);return d}function r(l,c,u,f){const d=n.getState();if(l.length){const h={stopped:!1};for(const g of l){const _=s0(g.object)||d,{raycaster:x,pointer:y,camera:M,internal:b}=_,A=new ue(y.x,y.y,0).unproject(M),T=R=>{var F,V;return(F=(V=b.capturedMap.get(R))==null?void 0:V.has(g.eventObject))!=null?F:!1},P=R=>{const F={intersection:g,target:c.target};b.capturedMap.has(R)?b.capturedMap.get(R).set(g.eventObject,F):b.capturedMap.set(R,new Map([[g.eventObject,F]])),c.target.setPointerCapture(R)},k=R=>{const F=b.capturedMap.get(R);F&&gC(b.capturedMap,g.eventObject,F,R)};let N={};for(let R in c){let F=c[R];typeof F!="function"&&(N[R]=F)}let z={...g,...N,pointer:y,intersections:l,stopped:h.stopped,delta:u,unprojectedPoint:A,ray:x.ray,camera:M,stopPropagation(){const R="pointerId"in c&&b.capturedMap.get(c.pointerId);if((!R||R.has(g.eventObject))&&(z.stopped=h.stopped=!0,b.hovered.size&&Array.from(b.hovered.values()).find(F=>F.eventObject===g.eventObject))){const F=l.slice(0,l.indexOf(g));s([...F,g])}},target:{hasPointerCapture:T,setPointerCapture:P,releasePointerCapture:k},currentTarget:{hasPointerCapture:T,setPointerCapture:P,releasePointerCapture:k},nativeEvent:c};if(f(z),h.stopped===!0)break}}return l}function s(l){const{internal:c}=n.getState();for(const u of c.hovered.values())if(!l.length||!l.find(f=>f.object===u.object&&f.index===u.index&&f.instanceId===u.instanceId)){const d=u.eventObject.__r3f,h=d==null?void 0:d.handlers;if(c.hovered.delete(qg(u)),d!=null&&d.eventCount){const g={...u,intersections:l};h.onPointerOut==null||h.onPointerOut(g),h.onPointerLeave==null||h.onPointerLeave(g)}}}function o(l,c){for(let u=0;u<c.length;u++){const f=c[u].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:u}=n.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),s([]))})}}return function(u){const{onPointerMissed:f,internal:d}=n.getState();d.lastEvent.current=u;const h=l==="onPointerMove",g=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",x=i(u,h?t:void 0),y=g?e(u):0;l==="onPointerDown"&&(d.initialClick=[u.offsetX,u.offsetY],d.initialHits=x.map(b=>b.eventObject)),g&&!x.length&&y<=2&&(o(u,d.interaction),f&&f(u)),h&&s(x);function M(b){const A=b.eventObject,T=A.__r3f,P=T==null?void 0:T.handlers;if(T!=null&&T.eventCount)if(h){if(P.onPointerOver||P.onPointerEnter||P.onPointerOut||P.onPointerLeave){const k=qg(b),N=d.hovered.get(k);N?N.stopped&&b.stopPropagation():(d.hovered.set(k,b),P.onPointerOver==null||P.onPointerOver(b),P.onPointerEnter==null||P.onPointerEnter(b))}P.onPointerMove==null||P.onPointerMove(b)}else{const k=P[l];k?(!g||d.initialHits.includes(A))&&(o(u,d.interaction.filter(N=>!d.initialHits.includes(N))),k(b)):g&&d.initialHits.includes(A)&&o(u,d.interaction.filter(N=>!d.initialHits.includes(N)))}}r(x,u,y,M)}}return{handlePointer:a}}const vC=n=>!!(n!=null&&n.render),yC=Qe.createContext(null),LG=(n,e)=>{const t=hG((a,l)=>{const c=new ue,u=new ue,f=new ue;function d(y=l().camera,M=u,b=l().size){const{width:A,height:T,top:P,left:k}=b,N=A/T;M.isVector3?f.copy(M):f.set(...M);const z=y.getWorldPosition(c).distanceTo(f);if(uC(y))return{width:A/y.zoom,height:T/y.zoom,top:P,left:k,factor:1,distance:z,aspect:N};{const R=y.fov*Math.PI/180,F=2*Math.tan(R/2)*z,V=F*(A/T);return{width:V,height:F,top:P,left:k,factor:A/V,distance:z,aspect:N}}}let h;const g=y=>a(M=>({performance:{...M.performance,current:y}})),_=new $e;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(y=1)=>n(l(),y),advance:(y,M)=>e(y,M,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new SS,pointer:_,mouse:_,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const y=l();h&&clearTimeout(h),y.performance.current!==y.performance.min&&g(y.performance.min),h=setTimeout(()=>g(l().performance.max),y.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:d},setEvents:y=>a(M=>({...M,events:{...M.events,...y}})),setSize:(y,M,b,A,T)=>{const P=l().camera,k={width:y,height:M,top:A||0,left:T||0,updateStyle:b};a(N=>({size:k,viewport:{...N.viewport,...d(P,u,k)}}))},setDpr:y=>a(M=>{const b=pC(y);return{viewport:{...M.viewport,dpr:b,initialDpr:M.viewport.initialDpr||b}}}),setFrameloop:(y="always")=>{const M=l().clock;M.stop(),M.elapsedTime=0,y!=="never"&&(M.start(),M.elapsedTime=0),a(()=>({frameloop:y}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:Qe.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(y,M,b)=>{const A=l().internal;return A.priority=A.priority+(M>0?1:0),A.subscribers.push({ref:y,priority:M,store:b}),A.subscribers=A.subscribers.sort((T,P)=>T.priority-P.priority),()=>{const T=l().internal;T!=null&&T.subscribers&&(T.priority=T.priority-(M>0?1:0),T.subscribers=T.subscribers.filter(P=>P.ref!==y))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:u,set:f}=t.getState();if(l.width!==r.width||l.height!==r.height||c.dpr!==s){var d;r=l,s=c.dpr,CG(a,l),u.setPixelRatio(c.dpr);const h=(d=l.updateStyle)!=null?d:typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,h)}a!==o&&(o=a,f(h=>({viewport:{...h.viewport,...h.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let Xg,NG=new Set,IG=new Set,DG=new Set;function h2(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function o0(n,e){switch(n){case"before":return h2(NG,e);case"after":return h2(IG,e);case"tail":return h2(DG,e)}}let f2,d2;function p2(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),f2=e.internal.subscribers,Xg=0;Xg<f2.length;Xg++)d2=f2[Xg],d2.ref.current(d2.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function OG(n){let e=!1,t=!1,i,r,s;function o(c){r=requestAnimationFrame(o),e=!0,i=0,o0("before",c),t=!0;for(const f of n.values()){var u;s=f.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((u=s.gl.xr)!=null&&u.isPresenting)&&(i+=p2(c,s))}if(t=!1,o0("after",c),i===0)return o0("tail",c),e=!1,cancelAnimationFrame(r)}function a(c,u=1){var f;if(!c)return n.forEach(d=>a(d.store.getState(),u));(f=c.gl.xr)!=null&&f.isPresenting||!c.internal.active||c.frameloop==="never"||(u>1?c.internal.frames=Math.min(60,c.internal.frames+u):t?c.internal.frames=2:c.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(c,u=!0,f,d){if(u&&o0("before",c),f)p2(c,f,d);else for(const h of n.values())p2(c,h.store.getState());u&&o0("after",c)}return{loop:o,invalidate:a,advance:l}}function xC(){const n=Qe.useContext(yC);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function aa(n=t=>t,e){return xC()(n,e)}function FG(n,e=0){const t=xC(),i=t.getState().internal.subscribe,r=hC(n);return Kp(()=>i(r,e,t),[e,i,t]),null}const qf=new Map,{invalidate:h6,advance:f6}=OG(qf),{reconciler:hv,applyProps:ef}=wG(qf,PG),tf={objects:"shallow",strict:!1},UG=(n,e)=>{const t=typeof n=="function"?n(e):n;return vC(t)?t:new nS({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function zG(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:i,height:r,top:s,left:o,updateStyle:a=t}=e;return{width:i,height:r,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:i,height:r,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:i,height:r,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function BG(n){const e=qf.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||LG(h6,f6),o=t||hv.createContainer(s,Mf.ConcurrentRoot,null,!1,null,"",r,null);e||qf.set(n,{fiber:o,store:s});let a,l=!1,c;return{configure(u={}){let{gl:f,size:d,scene:h,events:g,onCreated:_,shadows:x=!1,linear:y=!1,flat:M=!1,legacy:b=!1,orthographic:A=!1,frameloop:T="always",dpr:P=[1,2],performance:k,raycaster:N,camera:z,onPointerMissed:R}=u,F=s.getState(),V=F.gl;F.gl||F.set({gl:V=UG(f,n)});let K=F.raycaster;K||F.set({raycaster:K=new nC});const{params:W,...ne}=N||{};if(si.equ(ne,K,tf)||ef(K,{...ne}),si.equ(W,K.params,tf)||ef(K,{params:{...K.params,...W}}),!F.camera||F.camera===c&&!si.equ(c,z,tf)){c=z;const J=z instanceof Gp,j=J?z:A?new lc(0,0,0,0,.1,1e3):new Li(75,0,.1,1e3);J||(j.position.z=5,z&&(ef(j,z),("aspect"in z||"left"in z||"right"in z||"bottom"in z||"top"in z)&&(j.manual=!0,j.updateProjectionMatrix())),!F.camera&&!(z!=null&&z.rotation)&&j.lookAt(0,0,0)),F.set({camera:j}),K.camera=j}if(!F.scene){let J;h!=null&&h.isScene?J=h:(J=new iS,h&&ef(J,h)),F.set({scene:rf(J)})}if(!F.xr){var re;const J=(ve,oe)=>{const he=s.getState();he.frameloop!=="never"&&f6(ve,!0,he,oe)},j=()=>{const ve=s.getState();ve.gl.xr.enabled=ve.gl.xr.isPresenting,ve.gl.xr.setAnimationLoop(ve.gl.xr.isPresenting?J:null),ve.gl.xr.isPresenting||h6(ve)},se={connect(){const ve=s.getState().gl;ve.xr.addEventListener("sessionstart",j),ve.xr.addEventListener("sessionend",j)},disconnect(){const ve=s.getState().gl;ve.xr.removeEventListener("sessionstart",j),ve.xr.removeEventListener("sessionend",j)}};typeof((re=V.xr)==null?void 0:re.addEventListener)=="function"&&se.connect(),F.set({xr:se})}if(V.shadowMap){const J=V.shadowMap.enabled,j=V.shadowMap.type;if(V.shadowMap.enabled=!!x,si.boo(x))V.shadowMap.type=D0;else if(si.str(x)){var de;const se={basic:KE,percentage:kv,soft:D0,variance:Lo};V.shadowMap.type=(de=se[x])!=null?de:D0}else si.obj(x)&&Object.assign(V.shadowMap,x);(J!==V.shadowMap.enabled||j!==V.shadowMap.type)&&(V.shadowMap.needsUpdate=!0)}const X=cC();X&&("enabled"in X?X.enabled=!b:"legacyMode"in X&&(X.legacyMode=b)),l||ef(V,{outputEncoding:y?3e3:3001,toneMapping:M?ma:F_}),F.legacy!==b&&F.set(()=>({legacy:b})),F.linear!==y&&F.set(()=>({linear:y})),F.flat!==M&&F.set(()=>({flat:M})),f&&!si.fun(f)&&!vC(f)&&!si.equ(f,V,tf)&&ef(V,f),g&&!F.events.handlers&&F.set({events:g(s)});const $=zG(n,d);return si.equ($,F.size,tf)||F.setSize($.width,$.height,$.updateStyle,$.top,$.left),P&&F.viewport.dpr!==pC(P)&&F.setDpr(P),F.frameloop!==T&&F.setFrameloop(T),F.onPointerMissed||F.set({onPointerMissed:R}),k&&!si.equ(k,F.performance,tf)&&F.set(J=>({performance:{...J.performance,...k}})),a=_,l=!0,this},render(u){return l||this.configure(),hv.updateContainer(O.jsx(HG,{store:s,children:u,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){_C(n)}}}function HG({store:n,children:e,onCreated:t,rootElement:i}){return Kp(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),O.jsx(yC.Provider,{value:n,children:e})}function _C(n,e){const t=qf.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),hv.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),TG(r),qf.delete(n)}catch{}},500)})}}hv.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:Qe.version});const m2={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function VG(n){const{handlePointer:e}=kG(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(m2).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,c]=m2[o];t.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=m2[s];i.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function d6(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function GG({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=Qe.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=Qe.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,c=n?typeof n=="number"?n:n.resize:null,u=Qe.useRef(!1);Qe.useEffect(()=>(u.current=!0,()=>void(u.current=!1)));const[f,d,h]=Qe.useMemo(()=>{const y=()=>{if(!a.current.element)return;const{left:M,top:b,width:A,height:T,bottom:P,right:k,x:N,y:z}=a.current.element.getBoundingClientRect(),R={left:M,top:b,width:A,height:T,bottom:P,right:k,x:N,y:z};a.current.element instanceof HTMLElement&&i&&(R.height=a.current.element.offsetHeight,R.width=a.current.element.offsetWidth),Object.freeze(R),u.current&&!XG(a.current.lastBounds,R)&&o(a.current.lastBounds=R)};return[y,c?d6(y,c):y,l?d6(y,l):y]},[o,i,l,c]);function g(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(y=>y.removeEventListener("scroll",h,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function _(){a.current.element&&(a.current.resizeObserver=new r(h),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(y=>y.addEventListener("scroll",h,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{h()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const x=y=>{!y||y===a.current.element||(g(),a.current.element=y,a.current.scrollContainers=SC(y),_())};return jG(h,!!e),WG(d),Qe.useEffect(()=>{g(),_()},[e,h,d]),Qe.useEffect(()=>g,[]),[x,s,f]}function WG(n){Qe.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function jG(n,e){Qe.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function SC(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...SC(n.parentElement)]}const qG=["x","y","top","bottom","left","right","width","height"],XG=(n,e)=>qG.every(t=>n[t]===e[t]);var YG=Object.defineProperty,ZG=Object.defineProperties,KG=Object.getOwnPropertyDescriptors,p6=Object.getOwnPropertySymbols,QG=Object.prototype.hasOwnProperty,JG=Object.prototype.propertyIsEnumerable,m6=(n,e,t)=>e in n?YG(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,g6=(n,e)=>{for(var t in e||(e={}))QG.call(e,t)&&m6(n,t,e[t]);if(p6)for(var t of p6(e))JG.call(e,t)&&m6(n,t,e[t]);return n},$G=(n,e)=>ZG(n,KG(e)),v6,y6;typeof window<"u"&&((v6=window.document)!=null&&v6.createElement||((y6=window.navigator)==null?void 0:y6.product)==="ReactNative")?Qe.useLayoutEffect:Qe.useEffect;function wC(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=n.child;for(;i;){const r=wC(i,e,t);if(r)return r;i=i.sibling}}function bC(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const x6=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=x6;return}return x6.apply(this,arguments)};const TS=bC(Qe.createContext(null));class MC extends Qe.Component{render(){return Qe.createElement(TS.Provider,{value:this._reactInternals},this.props.children)}}function eW(){const n=Qe.useContext(TS);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=Qe.useId();return Qe.useMemo(()=>{for(const i of[n,n==null?void 0:n.alternate]){if(!i)continue;const r=wC(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[n,e])}function tW(){const n=eW(),[e]=Qe.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==TS&&!e.has(r)&&e.set(r,Qe.useContext(bC(r)))}t=t.return}return e}function nW(){const n=tW();return Qe.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>Qe.createElement(e,null,Qe.createElement(t.Provider,$G(g6({},i),{value:n.get(t)}))),e=>Qe.createElement(MC,g6({},e))),[n])}const iW=Qe.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:o=VG,eventSource:a,eventPrefix:l,shadows:c,linear:u,flat:f,legacy:d,orthographic:h,frameloop:g,dpr:_,performance:x,raycaster:y,camera:M,scene:b,onPointerMissed:A,onCreated:T,...P},k){Qe.useMemo(()=>SG(lG),[]);const N=nW(),[z,R]=GG({scroll:!0,debounce:{scroll:50,resize:0},...i}),F=Qe.useRef(null),V=Qe.useRef(null);Qe.useImperativeHandle(k,()=>F.current);const K=hC(A),[W,ne]=Qe.useState(!1),[re,de]=Qe.useState(!1);if(W)throw W;if(re)throw re;const X=Qe.useRef(null);Kp(()=>{const J=F.current;R.width>0&&R.height>0&&J&&(X.current||(X.current=BG(J)),X.current.configure({gl:s,events:o,shadows:c,linear:u,flat:f,legacy:d,orthographic:h,frameloop:g,dpr:_,performance:x,raycaster:y,camera:M,scene:b,size:R,onPointerMissed:(...j)=>K.current==null?void 0:K.current(...j),onCreated:j=>{j.events.connect==null||j.events.connect(a?bG(a)?a.current:a:V.current),l&&j.setEvents({compute:(se,ve)=>{const oe=se[l+"X"],he=se[l+"Y"];ve.pointer.set(oe/ve.size.width*2-1,-(he/ve.size.height)*2+1),ve.raycaster.setFromCamera(ve.pointer,ve.camera)}}),T==null||T(j)}}),X.current.render(O.jsx(N,{children:O.jsx(fC,{set:de,children:O.jsx(Qe.Suspense,{fallback:O.jsx(MG,{set:ne}),children:e??null})})})))}),Qe.useEffect(()=>{const J=F.current;if(J)return()=>_C(J)},[]);const $=a?"none":"auto";return O.jsx("div",{ref:V,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:$,...r},...P,children:O.jsx("div",{ref:z,style:{width:"100%",height:"100%"},children:O.jsx("canvas",{ref:F,style:{display:"block"},children:t})})})}),rW=Qe.forwardRef(function(e,t){return O.jsx(MC,{children:O.jsx(iW,{...e,ref:t})})});function Wu(){return Wu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Wu.apply(null,arguments)}const EC=parseInt(Bp.replace(/\D+/g,"")),TC=EC>=125?"uv1":"uv2";var sW=Object.defineProperty,oW=(n,e,t)=>e in n?sW(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,aW=(n,e,t)=>(oW(n,e+"",t),t);class lW{constructor(){aW(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}var cW=Object.defineProperty,uW=(n,e,t)=>e in n?cW(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,jt=(n,e,t)=>(uW(n,typeof e!="symbol"?e+"":e,t),t);const Yg=new Yu,_6=new qa,hW=Math.cos(70*(Math.PI/180)),S6=(n,e)=>(n%e+e)%e;let fW=class extends lW{constructor(e,t){super(),jt(this,"object"),jt(this,"domElement"),jt(this,"enabled",!0),jt(this,"target",new ue),jt(this,"minDistance",0),jt(this,"maxDistance",1/0),jt(this,"minZoom",0),jt(this,"maxZoom",1/0),jt(this,"minPolarAngle",0),jt(this,"maxPolarAngle",Math.PI),jt(this,"minAzimuthAngle",-1/0),jt(this,"maxAzimuthAngle",1/0),jt(this,"enableDamping",!1),jt(this,"dampingFactor",.05),jt(this,"enableZoom",!0),jt(this,"zoomSpeed",1),jt(this,"enableRotate",!0),jt(this,"rotateSpeed",1),jt(this,"enablePan",!0),jt(this,"panSpeed",1),jt(this,"screenSpacePanning",!0),jt(this,"keyPanSpeed",7),jt(this,"zoomToCursor",!1),jt(this,"autoRotate",!1),jt(this,"autoRotateSpeed",2),jt(this,"reverseOrbit",!1),jt(this,"reverseHorizontalOrbit",!1),jt(this,"reverseVerticalOrbit",!1),jt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),jt(this,"mouseButtons",{LEFT:hu.ROTATE,MIDDLE:hu.DOLLY,RIGHT:hu.PAN}),jt(this,"touches",{ONE:fu.ROTATE,TWO:fu.DOLLY_PAN}),jt(this,"target0"),jt(this,"position0"),jt(this,"zoom0"),jt(this,"_domElementKeyEvents",null),jt(this,"getPolarAngle"),jt(this,"getAzimuthalAngle"),jt(this,"setPolarAngle"),jt(this,"setAzimuthalAngle"),jt(this,"getDistance"),jt(this,"getZoomScale"),jt(this,"listenToKeyEvents"),jt(this,"stopListenToKeyEvents"),jt(this,"saveState"),jt(this,"reset"),jt(this,"update"),jt(this,"connect"),jt(this,"dispose"),jt(this,"dollyIn"),jt(this,"dollyOut"),jt(this,"getScale"),jt(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=fe=>{let De=S6(fe,2*Math.PI),mt=u.phi;mt<0&&(mt+=2*Math.PI),De<0&&(De+=2*Math.PI);let pt=Math.abs(De-mt);2*Math.PI-pt<pt&&(De<mt?De+=2*Math.PI:mt+=2*Math.PI),f.phi=De-mt,i.update()},this.setAzimuthalAngle=fe=>{let De=S6(fe,2*Math.PI),mt=u.theta;mt<0&&(mt+=2*Math.PI),De<0&&(De+=2*Math.PI);let pt=Math.abs(De-mt);2*Math.PI-pt<pt&&(De<mt?De+=2*Math.PI:mt+=2*Math.PI),f.theta=De-mt,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=fe=>{fe.addEventListener("keydown",ft),this._domElementKeyEvents=fe},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",ft),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),l=a.NONE},this.update=(()=>{const fe=new ue,De=new ue(0,1,0),mt=new zr().setFromUnitVectors(e.up,De),pt=mt.clone().invert(),vt=new ue,xe=new zr,gt=2*Math.PI;return function(){const et=i.object.position;mt.setFromUnitVectors(e.up,De),pt.copy(mt).invert(),fe.copy(et).sub(i.target),fe.applyQuaternion(mt),u.setFromVector3(fe),i.autoRotate&&l===a.NONE&&W(V()),i.enableDamping?(u.theta+=f.theta*i.dampingFactor,u.phi+=f.phi*i.dampingFactor):(u.theta+=f.theta,u.phi+=f.phi);let rt=i.minAzimuthAngle,wt=i.maxAzimuthAngle;isFinite(rt)&&isFinite(wt)&&(rt<-Math.PI?rt+=gt:rt>Math.PI&&(rt-=gt),wt<-Math.PI?wt+=gt:wt>Math.PI&&(wt-=gt),rt<=wt?u.theta=Math.max(rt,Math.min(wt,u.theta)):u.theta=u.theta>(rt+wt)/2?Math.max(rt,u.theta):Math.min(wt,u.theta)),u.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,u.phi)),u.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(h,i.dampingFactor):i.target.add(h),i.zoomToCursor&&z||i.object.isOrthographicCamera?u.radius=ve(u.radius):u.radius=ve(u.radius*d),fe.setFromSpherical(u),fe.applyQuaternion(pt),et.copy(i.target).add(fe),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(f.theta*=1-i.dampingFactor,f.phi*=1-i.dampingFactor,h.multiplyScalar(1-i.dampingFactor)):(f.set(0,0,0),h.set(0,0,0));let _t=!1;if(i.zoomToCursor&&z){let Ht=null;if(i.object instanceof Li&&i.object.isPerspectiveCamera){const an=fe.length();Ht=ve(an*d);const Gt=an-Ht;i.object.position.addScaledVector(k,Gt),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const an=new ue(N.x,N.y,0);an.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/d)),i.object.updateProjectionMatrix(),_t=!0;const Gt=new ue(N.x,N.y,0);Gt.unproject(i.object),i.object.position.sub(Gt).add(an),i.object.updateMatrixWorld(),Ht=fe.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;Ht!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Ht).add(i.object.position):(Yg.origin.copy(i.object.position),Yg.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(Yg.direction))<hW?e.lookAt(i.target):(_6.setFromNormalAndCoplanarPoint(i.object.up,i.target),Yg.intersectPlane(_6,i.target))))}else i.object instanceof lc&&i.object.isOrthographicCamera&&(_t=d!==1,_t&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/d)),i.object.updateProjectionMatrix()));return d=1,z=!1,_t||vt.distanceToSquared(i.object.position)>c||8*(1-xe.dot(i.object.quaternion))>c?(i.dispatchEvent(r),vt.copy(i.object.position),xe.copy(i.object.quaternion),_t=!1,!0):!1}})(),this.connect=fe=>{i.domElement=fe,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",St),i.domElement.addEventListener("pointerdown",Z),i.domElement.addEventListener("pointercancel",Ee),i.domElement.addEventListener("wheel",lt)},this.dispose=()=>{var fe,De,mt,pt,vt,xe;i.domElement&&(i.domElement.style.touchAction="auto"),(fe=i.domElement)==null||fe.removeEventListener("contextmenu",St),(De=i.domElement)==null||De.removeEventListener("pointerdown",Z),(mt=i.domElement)==null||mt.removeEventListener("pointercancel",Ee),(pt=i.domElement)==null||pt.removeEventListener("wheel",lt),(vt=i.domElement)==null||vt.ownerDocument.removeEventListener("pointermove",we),(xe=i.domElement)==null||xe.ownerDocument.removeEventListener("pointerup",Ee),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",ft)};const i=this,r={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,u=new y3,f=new y3;let d=1;const h=new ue,g=new $e,_=new $e,x=new $e,y=new $e,M=new $e,b=new $e,A=new $e,T=new $e,P=new $e,k=new ue,N=new $e;let z=!1;const R=[],F={};function V(){return 2*Math.PI/60/60*i.autoRotateSpeed}function K(){return Math.pow(.95,i.zoomSpeed)}function W(fe){i.reverseOrbit||i.reverseHorizontalOrbit?f.theta+=fe:f.theta-=fe}function ne(fe){i.reverseOrbit||i.reverseVerticalOrbit?f.phi+=fe:f.phi-=fe}const re=(()=>{const fe=new ue;return function(mt,pt){fe.setFromMatrixColumn(pt,0),fe.multiplyScalar(-mt),h.add(fe)}})(),de=(()=>{const fe=new ue;return function(mt,pt){i.screenSpacePanning===!0?fe.setFromMatrixColumn(pt,1):(fe.setFromMatrixColumn(pt,0),fe.crossVectors(i.object.up,fe)),fe.multiplyScalar(mt),h.add(fe)}})(),X=(()=>{const fe=new ue;return function(mt,pt){const vt=i.domElement;if(vt&&i.object instanceof Li&&i.object.isPerspectiveCamera){const xe=i.object.position;fe.copy(xe).sub(i.target);let gt=fe.length();gt*=Math.tan(i.object.fov/2*Math.PI/180),re(2*mt*gt/vt.clientHeight,i.object.matrix),de(2*pt*gt/vt.clientHeight,i.object.matrix)}else vt&&i.object instanceof lc&&i.object.isOrthographicCamera?(re(mt*(i.object.right-i.object.left)/i.object.zoom/vt.clientWidth,i.object.matrix),de(pt*(i.object.top-i.object.bottom)/i.object.zoom/vt.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function $(fe){i.object instanceof Li&&i.object.isPerspectiveCamera||i.object instanceof lc&&i.object.isOrthographicCamera?d=fe:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function J(fe){$(d/fe)}function j(fe){$(d*fe)}function se(fe){if(!i.zoomToCursor||!i.domElement)return;z=!0;const De=i.domElement.getBoundingClientRect(),mt=fe.clientX-De.left,pt=fe.clientY-De.top,vt=De.width,xe=De.height;N.x=mt/vt*2-1,N.y=-(pt/xe)*2+1,k.set(N.x,N.y,1).unproject(i.object).sub(i.object.position).normalize()}function ve(fe){return Math.max(i.minDistance,Math.min(i.maxDistance,fe))}function oe(fe){g.set(fe.clientX,fe.clientY)}function he(fe){se(fe),A.set(fe.clientX,fe.clientY)}function ye(fe){y.set(fe.clientX,fe.clientY)}function Me(fe){_.set(fe.clientX,fe.clientY),x.subVectors(_,g).multiplyScalar(i.rotateSpeed);const De=i.domElement;De&&(W(2*Math.PI*x.x/De.clientHeight),ne(2*Math.PI*x.y/De.clientHeight)),g.copy(_),i.update()}function Pe(fe){T.set(fe.clientX,fe.clientY),P.subVectors(T,A),P.y>0?J(K()):P.y<0&&j(K()),A.copy(T),i.update()}function Xe(fe){M.set(fe.clientX,fe.clientY),b.subVectors(M,y).multiplyScalar(i.panSpeed),X(b.x,b.y),y.copy(M),i.update()}function ht(fe){se(fe),fe.deltaY<0?j(K()):fe.deltaY>0&&J(K()),i.update()}function He(fe){let De=!1;switch(fe.code){case i.keys.UP:X(0,i.keyPanSpeed),De=!0;break;case i.keys.BOTTOM:X(0,-i.keyPanSpeed),De=!0;break;case i.keys.LEFT:X(i.keyPanSpeed,0),De=!0;break;case i.keys.RIGHT:X(-i.keyPanSpeed,0),De=!0;break}De&&(fe.preventDefault(),i.update())}function ie(){if(R.length==1)g.set(R[0].pageX,R[0].pageY);else{const fe=.5*(R[0].pageX+R[1].pageX),De=.5*(R[0].pageY+R[1].pageY);g.set(fe,De)}}function je(){if(R.length==1)y.set(R[0].pageX,R[0].pageY);else{const fe=.5*(R[0].pageX+R[1].pageX),De=.5*(R[0].pageY+R[1].pageY);y.set(fe,De)}}function ke(){const fe=R[0].pageX-R[1].pageX,De=R[0].pageY-R[1].pageY,mt=Math.sqrt(fe*fe+De*De);A.set(0,mt)}function We(){i.enableZoom&&ke(),i.enablePan&&je()}function Fe(){i.enableZoom&&ke(),i.enableRotate&&ie()}function it(fe){if(R.length==1)_.set(fe.pageX,fe.pageY);else{const mt=be(fe),pt=.5*(fe.pageX+mt.x),vt=.5*(fe.pageY+mt.y);_.set(pt,vt)}x.subVectors(_,g).multiplyScalar(i.rotateSpeed);const De=i.domElement;De&&(W(2*Math.PI*x.x/De.clientHeight),ne(2*Math.PI*x.y/De.clientHeight)),g.copy(_)}function Ue(fe){if(R.length==1)M.set(fe.pageX,fe.pageY);else{const De=be(fe),mt=.5*(fe.pageX+De.x),pt=.5*(fe.pageY+De.y);M.set(mt,pt)}b.subVectors(M,y).multiplyScalar(i.panSpeed),X(b.x,b.y),y.copy(M)}function Ye(fe){const De=be(fe),mt=fe.pageX-De.x,pt=fe.pageY-De.y,vt=Math.sqrt(mt*mt+pt*pt);T.set(0,vt),P.set(0,Math.pow(T.y/A.y,i.zoomSpeed)),J(P.y),A.copy(T)}function ot(fe){i.enableZoom&&Ye(fe),i.enablePan&&Ue(fe)}function Q(fe){i.enableZoom&&Ye(fe),i.enableRotate&&it(fe)}function Z(fe){var De,mt;i.enabled!==!1&&(R.length===0&&((De=i.domElement)==null||De.ownerDocument.addEventListener("pointermove",we),(mt=i.domElement)==null||mt.ownerDocument.addEventListener("pointerup",Ee)),nt(fe),fe.pointerType==="touch"?qe(fe):Ne(fe))}function we(fe){i.enabled!==!1&&(fe.pointerType==="touch"?st(fe):Ze(fe))}function Ee(fe){var De,mt,pt;Lt(fe),R.length===0&&((De=i.domElement)==null||De.releasePointerCapture(fe.pointerId),(mt=i.domElement)==null||mt.ownerDocument.removeEventListener("pointermove",we),(pt=i.domElement)==null||pt.ownerDocument.removeEventListener("pointerup",Ee)),i.dispatchEvent(o),l=a.NONE}function Ne(fe){let De;switch(fe.button){case 0:De=i.mouseButtons.LEFT;break;case 1:De=i.mouseButtons.MIDDLE;break;case 2:De=i.mouseButtons.RIGHT;break;default:De=-1}switch(De){case hu.DOLLY:if(i.enableZoom===!1)return;he(fe),l=a.DOLLY;break;case hu.ROTATE:if(fe.ctrlKey||fe.metaKey||fe.shiftKey){if(i.enablePan===!1)return;ye(fe),l=a.PAN}else{if(i.enableRotate===!1)return;oe(fe),l=a.ROTATE}break;case hu.PAN:if(fe.ctrlKey||fe.metaKey||fe.shiftKey){if(i.enableRotate===!1)return;oe(fe),l=a.ROTATE}else{if(i.enablePan===!1)return;ye(fe),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function Ze(fe){if(i.enabled!==!1)switch(l){case a.ROTATE:if(i.enableRotate===!1)return;Me(fe);break;case a.DOLLY:if(i.enableZoom===!1)return;Pe(fe);break;case a.PAN:if(i.enablePan===!1)return;Xe(fe);break}}function lt(fe){i.enabled===!1||i.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(fe.preventDefault(),i.dispatchEvent(s),ht(fe),i.dispatchEvent(o))}function ft(fe){i.enabled===!1||i.enablePan===!1||He(fe)}function qe(fe){switch(ct(fe),R.length){case 1:switch(i.touches.ONE){case fu.ROTATE:if(i.enableRotate===!1)return;ie(),l=a.TOUCH_ROTATE;break;case fu.PAN:if(i.enablePan===!1)return;je(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(i.touches.TWO){case fu.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;We(),l=a.TOUCH_DOLLY_PAN;break;case fu.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Fe(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function st(fe){switch(ct(fe),l){case a.TOUCH_ROTATE:if(i.enableRotate===!1)return;it(fe),i.update();break;case a.TOUCH_PAN:if(i.enablePan===!1)return;Ue(fe),i.update();break;case a.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;ot(fe),i.update();break;case a.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Q(fe),i.update();break;default:l=a.NONE}}function St(fe){i.enabled!==!1&&fe.preventDefault()}function nt(fe){R.push(fe)}function Lt(fe){delete F[fe.pointerId];for(let De=0;De<R.length;De++)if(R[De].pointerId==fe.pointerId){R.splice(De,1);return}}function ct(fe){let De=F[fe.pointerId];De===void 0&&(De=new $e,F[fe.pointerId]=De),De.set(fe.pageX,fe.pageY)}function be(fe){const De=fe.pointerId===R[0].pointerId?R[1]:R[0];return F[De.pointerId]}this.dollyIn=(fe=K())=>{j(fe),i.update()},this.dollyOut=(fe=K())=>{J(fe),i.update()},this.getScale=()=>d,this.setScale=fe=>{$(fe),i.update()},this.getZoomScale=()=>K(),t!==void 0&&this.connect(t),this.update()}};const w6=new Vi,Zg=new ue;class AS extends oy{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],i=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(i),this.setAttribute("position",new Ot(e,3)),this.setAttribute("uv",new Ot(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,i=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),i.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const i=new uv(t,6,1);return this.setAttribute("instanceStart",new Vs(i,3,0)),this.setAttribute("instanceEnd",new Vs(i,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e,t=3){let i;e instanceof Float32Array?i=e:Array.isArray(e)&&(i=new Float32Array(e));const r=new uv(i,t*2,1);return this.setAttribute("instanceColorStart",new Vs(r,t,0)),this.setAttribute("instanceColorEnd",new Vs(r,t,t)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new dS(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Vi);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),w6.setFromBufferAttribute(t),this.boundingBox.union(w6))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Qi),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const i=this.boundingSphere.center;this.boundingBox.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Zg.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Zg)),Zg.fromBufferAttribute(t,s),r=Math.max(r,i.distanceToSquared(Zg));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}class AC extends AS{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,i=new Float32Array(2*t);for(let r=0;r<t;r+=3)i[2*r]=e[r],i[2*r+1]=e[r+1],i[2*r+2]=e[r+2],i[2*r+3]=e[r+3],i[2*r+4]=e[r+4],i[2*r+5]=e[r+5];return super.setPositions(i),this}setColors(e,t=3){const i=e.length-t,r=new Float32Array(2*i);if(t===3)for(let s=0;s<i;s+=t)r[2*s]=e[s],r[2*s+1]=e[s+1],r[2*s+2]=e[s+2],r[2*s+3]=e[s+3],r[2*s+4]=e[s+4],r[2*s+5]=e[s+5];else for(let s=0;s<i;s+=t)r[2*s]=e[s],r[2*s+1]=e[s+1],r[2*s+2]=e[s+2],r[2*s+3]=e[s+3],r[2*s+4]=e[s+4],r[2*s+5]=e[s+5],r[2*s+6]=e[s+6],r[2*s+7]=e[s+7];return super.setColors(r,t),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}class CS extends vo{constructor(e){super({type:"LineMaterial",uniforms:Mp.clone(Mp.merge([bt.common,bt.fog,{worldUnits:{value:1},linewidth:{value:1},resolution:{value:new $e(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}}])),vertexShader:`
				#include <common>
				#include <fog_pars_vertex>
				#include <logdepthbuf_pars_vertex>
				#include <clipping_planes_pars_vertex>

				uniform float linewidth;
				uniform vec2 resolution;

				attribute vec3 instanceStart;
				attribute vec3 instanceEnd;

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
						attribute vec4 instanceColorStart;
						attribute vec4 instanceColorEnd;
					#else
						varying vec3 vLineColor;
						attribute vec3 instanceColorStart;
						attribute vec3 instanceColorEnd;
					#endif
				#endif

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#ifdef USE_DASH

					uniform float dashScale;
					attribute float instanceDistanceStart;
					attribute float instanceDistanceEnd;
					varying float vLineDistance;

				#endif

				void trimSegment( const in vec4 start, inout vec4 end ) {

					// trim end segment so it terminates between the camera plane and the near plane

					// conservative estimate of the near plane
					float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
					float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
					float nearEstimate = - 0.5 * b / a;

					float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

					end.xyz = mix( start.xyz, end.xyz, alpha );

				}

				void main() {

					#ifdef USE_COLOR

						vLineColor = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

					#endif

					#ifdef USE_DASH

						vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
						vUv = uv;

					#endif

					float aspect = resolution.x / resolution.y;

					// camera space
					vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
					vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

					#ifdef WORLD_UNITS

						worldStart = start.xyz;
						worldEnd = end.xyz;

					#else

						vUv = uv;

					#endif

					// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
					// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
					// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
					// perhaps there is a more elegant solution -- WestLangley

					bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

					if ( perspective ) {

						if ( start.z < 0.0 && end.z >= 0.0 ) {

							trimSegment( start, end );

						} else if ( end.z < 0.0 && start.z >= 0.0 ) {

							trimSegment( end, start );

						}

					}

					// clip space
					vec4 clipStart = projectionMatrix * start;
					vec4 clipEnd = projectionMatrix * end;

					// ndc space
					vec3 ndcStart = clipStart.xyz / clipStart.w;
					vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

					// direction
					vec2 dir = ndcEnd.xy - ndcStart.xy;

					// account for clip-space aspect ratio
					dir.x *= aspect;
					dir = normalize( dir );

					#ifdef WORLD_UNITS

						// get the offset direction as perpendicular to the view vector
						vec3 worldDir = normalize( end.xyz - start.xyz );
						vec3 offset;
						if ( position.y < 0.5 ) {

							offset = normalize( cross( start.xyz, worldDir ) );

						} else {

							offset = normalize( cross( end.xyz, worldDir ) );

						}

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

						// don't extend the line if we're rendering dashes because we
						// won't be rendering the endcaps
						#ifndef USE_DASH

							// extend the line bounds to encompass  endcaps
							start.xyz += - worldDir * linewidth * 0.5;
							end.xyz += worldDir * linewidth * 0.5;

							// shift the position of the quad so it hugs the forward edge of the line
							offset.xy -= dir * forwardOffset;
							offset.z += 0.5;

						#endif

						// endcaps
						if ( position.y > 1.0 || position.y < 0.0 ) {

							offset.xy += dir * 2.0 * forwardOffset;

						}

						// adjust for linewidth
						offset *= linewidth * 0.5;

						// set the world position
						worldPos = ( position.y < 0.5 ) ? start : end;
						worldPos.xyz += offset;

						// project the worldpos
						vec4 clip = projectionMatrix * worldPos;

						// shift the depth of the projected points so the line
						// segments overlap neatly
						vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
						clip.z = clipPose.z * clip.w;

					#else

						vec2 offset = vec2( dir.y, - dir.x );
						// undo aspect ratio adjustment
						dir.x /= aspect;
						offset.x /= aspect;

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						// endcaps
						if ( position.y < 0.0 ) {

							offset += - dir;

						} else if ( position.y > 1.0 ) {

							offset += dir;

						}

						// adjust for linewidth
						offset *= linewidth;

						// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
						offset /= resolution.y;

						// select end
						vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

						// back to clip space
						offset *= clip.w;

						clip.xy += offset;

					#endif

					gl_Position = clip;

					vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

					#include <logdepthbuf_vertex>
					#include <clipping_planes_vertex>
					#include <fog_vertex>

				}
			`,fragmentShader:`
				uniform vec3 diffuse;
				uniform float opacity;
				uniform float linewidth;

				#ifdef USE_DASH

					uniform float dashOffset;
					uniform float dashSize;
					uniform float gapSize;

				#endif

				varying float vLineDistance;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#include <common>
				#include <fog_pars_fragment>
				#include <logdepthbuf_pars_fragment>
				#include <clipping_planes_pars_fragment>

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
					#else
						varying vec3 vLineColor;
					#endif
				#endif

				vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

					float mua;
					float mub;

					vec3 p13 = p1 - p3;
					vec3 p43 = p4 - p3;

					vec3 p21 = p2 - p1;

					float d1343 = dot( p13, p43 );
					float d4321 = dot( p43, p21 );
					float d1321 = dot( p13, p21 );
					float d4343 = dot( p43, p43 );
					float d2121 = dot( p21, p21 );

					float denom = d2121 * d4343 - d4321 * d4321;

					float numer = d1343 * d4321 - d1321 * d4343;

					mua = numer / denom;
					mua = clamp( mua, 0.0, 1.0 );
					mub = ( d1343 + d4321 * ( mua ) ) / d4343;
					mub = clamp( mub, 0.0, 1.0 );

					return vec2( mua, mub );

				}

				void main() {

					#include <clipping_planes_fragment>

					#ifdef USE_DASH

						if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

						if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

					#endif

					float alpha = opacity;

					#ifdef WORLD_UNITS

						// Find the closest points on the view ray and the line segment
						vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
						vec3 lineDir = worldEnd - worldStart;
						vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

						vec3 p1 = worldStart + lineDir * params.x;
						vec3 p2 = rayEnd * params.y;
						vec3 delta = p1 - p2;
						float len = length( delta );
						float norm = len / linewidth;

						#ifndef USE_DASH

							#ifdef USE_ALPHA_TO_COVERAGE

								float dnorm = fwidth( norm );
								alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

							#else

								if ( norm > 0.5 ) {

									discard;

								}

							#endif

						#endif

					#else

						#ifdef USE_ALPHA_TO_COVERAGE

							// artifacts appear on some hardware if a derivative is taken within a conditional
							float a = vUv.x;
							float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
							float len2 = a * a + b * b;
							float dlen = fwidth( len2 );

							if ( abs( vUv.y ) > 1.0 ) {

								alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

							}

						#else

							if ( abs( vUv.y ) > 1.0 ) {

								float a = vUv.x;
								float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
								float len2 = a * a + b * b;

								if ( len2 > 1.0 ) discard;

							}

						#endif

					#endif

					vec4 diffuseColor = vec4( diffuse, alpha );
					#ifdef USE_COLOR
						#ifdef USE_LINE_COLOR_ALPHA
							diffuseColor *= vLineColor;
						#else
							diffuseColor.rgb *= vLineColor;
						#endif
					#endif

					#include <logdepthbuf_fragment>

					gl_FragColor = diffuseColor;

					#include <tonemapping_fragment>
					#include <${EC>=154?"colorspace_fragment":"encodings_fragment"}>
					#include <fog_fragment>
					#include <premultiplied_alpha_fragment>

				}
			`,clipping:!0}),this.isLineMaterial=!0,this.onBeforeCompile=function(){this.transparent?this.defines.USE_LINE_COLOR_ALPHA="1":delete this.defines.USE_LINE_COLOR_ALPHA},Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(t){this.uniforms.diffuse.value=t}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(t){t===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(t){this.uniforms.linewidth.value=t}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(t){!!t!="USE_DASH"in this.defines&&(this.needsUpdate=!0),t===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(t){this.uniforms.dashScale.value=t}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(t){this.uniforms.dashSize.value=t}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(t){this.uniforms.dashOffset.value=t}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(t){this.uniforms.gapSize.value=t}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(t){!!t!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),t===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const g2=new gn,b6=new ue,M6=new ue,yr=new gn,xr=new gn,na=new gn,v2=new ue,y2=new qt,wr=new iC,E6=new ue,Kg=new Vi,Qg=new Qi,ia=new gn;let ca,Nu;function T6(n,e,t){return ia.set(0,0,-e,1).applyMatrix4(n.projectionMatrix),ia.multiplyScalar(1/ia.w),ia.x=Nu/t.width,ia.y=Nu/t.height,ia.applyMatrix4(n.projectionMatrixInverse),ia.multiplyScalar(1/ia.w),Math.abs(Math.max(ia.x,ia.y))}function dW(n,e){const t=n.matrixWorld,i=n.geometry,r=i.attributes.instanceStart,s=i.attributes.instanceEnd,o=Math.min(i.instanceCount,r.count);for(let a=0,l=o;a<l;a++){wr.start.fromBufferAttribute(r,a),wr.end.fromBufferAttribute(s,a),wr.applyMatrix4(t);const c=new ue,u=new ue;ca.distanceSqToSegment(wr.start,wr.end,u,c),u.distanceTo(c)<Nu*.5&&e.push({point:u,pointOnLine:c,distance:ca.origin.distanceTo(u),object:n,face:null,faceIndex:a,uv:null,[TC]:null})}}function pW(n,e,t){const i=e.projectionMatrix,s=n.material.resolution,o=n.matrixWorld,a=n.geometry,l=a.attributes.instanceStart,c=a.attributes.instanceEnd,u=Math.min(a.instanceCount,l.count),f=-e.near;ca.at(1,na),na.w=1,na.applyMatrix4(e.matrixWorldInverse),na.applyMatrix4(i),na.multiplyScalar(1/na.w),na.x*=s.x/2,na.y*=s.y/2,na.z=0,v2.copy(na),y2.multiplyMatrices(e.matrixWorldInverse,o);for(let d=0,h=u;d<h;d++){if(yr.fromBufferAttribute(l,d),xr.fromBufferAttribute(c,d),yr.w=1,xr.w=1,yr.applyMatrix4(y2),xr.applyMatrix4(y2),yr.z>f&&xr.z>f)continue;if(yr.z>f){const b=yr.z-xr.z,A=(yr.z-f)/b;yr.lerp(xr,A)}else if(xr.z>f){const b=xr.z-yr.z,A=(xr.z-f)/b;xr.lerp(yr,A)}yr.applyMatrix4(i),xr.applyMatrix4(i),yr.multiplyScalar(1/yr.w),xr.multiplyScalar(1/xr.w),yr.x*=s.x/2,yr.y*=s.y/2,xr.x*=s.x/2,xr.y*=s.y/2,wr.start.copy(yr),wr.start.z=0,wr.end.copy(xr),wr.end.z=0;const _=wr.closestPointToPointParameter(v2,!0);wr.at(_,E6);const x=YT.lerp(yr.z,xr.z,_),y=x>=-1&&x<=1,M=v2.distanceTo(E6)<Nu*.5;if(y&&M){wr.start.fromBufferAttribute(l,d),wr.end.fromBufferAttribute(c,d),wr.start.applyMatrix4(o),wr.end.applyMatrix4(o);const b=new ue,A=new ue;ca.distanceSqToSegment(wr.start,wr.end,A,b),t.push({point:A,pointOnLine:b,distance:ca.origin.distanceTo(A),object:n,face:null,faceIndex:d,uv:null,[TC]:null})}}}class CC extends di{constructor(e=new AS,t=new CS({color:Math.random()*16777215})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,i=e.attributes.instanceEnd,r=new Float32Array(2*t.count);for(let o=0,a=0,l=t.count;o<l;o++,a+=2)b6.fromBufferAttribute(t,o),M6.fromBufferAttribute(i,o),r[a]=a===0?0:r[a-1],r[a+1]=r[a]+b6.distanceTo(M6);const s=new uv(r,2,1);return e.setAttribute("instanceDistanceStart",new Vs(s,1,0)),e.setAttribute("instanceDistanceEnd",new Vs(s,1,1)),this}raycast(e,t){const i=this.material.worldUnits,r=e.camera;r===null&&!i&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const s=e.params.Line2!==void 0&&e.params.Line2.threshold||0;ca=e.ray;const o=this.matrixWorld,a=this.geometry,l=this.material;Nu=l.linewidth+s,a.boundingSphere===null&&a.computeBoundingSphere(),Qg.copy(a.boundingSphere).applyMatrix4(o);let c;if(i)c=Nu*.5;else{const f=Math.max(r.near,Qg.distanceToPoint(ca.origin));c=T6(r,f,l.resolution)}if(Qg.radius+=c,ca.intersectsSphere(Qg)===!1)return;a.boundingBox===null&&a.computeBoundingBox(),Kg.copy(a.boundingBox).applyMatrix4(o);let u;if(i)u=Nu*.5;else{const f=Math.max(r.near,Kg.distanceToPoint(ca.origin));u=T6(r,f,l.resolution)}Kg.expandByScalar(u),ca.intersectsBox(Kg)!==!1&&(i?dW(this,t):pW(this,r,t))}onBeforeRender(e){const t=this.material.uniforms;t&&t.resolution&&(e.getViewport(g2),this.material.uniforms.resolution.value.set(g2.z,g2.w))}}class mW extends CC{constructor(e=new AC,t=new CS({color:Math.random()*16777215})){super(e,t),this.isLine2=!0,this.type="Line2"}}const gW=Qe.forwardRef(function({points:e,color:t=16777215,vertexColors:i,linewidth:r,lineWidth:s,segments:o,dashed:a,...l},c){var u,f;const d=aa(y=>y.size),h=Qe.useMemo(()=>o?new CC:new mW,[o]),[g]=Qe.useState(()=>new CS),_=(i==null||(u=i[0])==null?void 0:u.length)===4?4:3,x=Qe.useMemo(()=>{const y=o?new AS:new AC,M=e.map(b=>{const A=Array.isArray(b);return b instanceof ue||b instanceof gn?[b.x,b.y,b.z]:b instanceof $e?[b.x,b.y,0]:A&&b.length===3?[b[0],b[1],b[2]]:A&&b.length===2?[b[0],b[1],0]:b});if(y.setPositions(M.flat()),i){t=16777215;const b=i.map(A=>A instanceof Ct?A.toArray():A);y.setColors(b.flat(),_)}return y},[e,o,i,_]);return Qe.useLayoutEffect(()=>{h.computeLineDistances()},[e,h]),Qe.useLayoutEffect(()=>{a?g.defines.USE_DASH="":delete g.defines.USE_DASH,g.needsUpdate=!0},[a,g]),Qe.useEffect(()=>()=>{x.dispose(),g.dispose()},[x]),Qe.createElement("primitive",Wu({object:h,ref:c},l),Qe.createElement("primitive",{object:x,attach:"geometry"}),Qe.createElement("primitive",Wu({object:g,attach:"material",color:t,vertexColors:!!i,resolution:[d.width,d.height],linewidth:(f=r??s)!==null&&f!==void 0?f:1,dashed:a,transparent:_===4},l)))});function vW(){var n=Object.create(null);function e(r,s){var o=r.id,a=r.name,l=r.dependencies;l===void 0&&(l=[]);var c=r.init;c===void 0&&(c=function(){});var u=r.getTransferables;if(u===void 0&&(u=null),!n[o])try{l=l.map(function(d){return d&&d.isWorkerModule&&(e(d,function(h){if(h instanceof Error)throw h}),d=n[d.id].value),d}),c=i("<"+a+">.init",c),u&&(u=i("<"+a+">.getTransferables",u));var f=null;typeof c=="function"?f=c.apply(void 0,l):console.error("worker module init function failed to rehydrate"),n[o]={id:o,value:f,getTransferables:u},s(f)}catch(d){d&&d.noLog||console.error(d),s(d)}}function t(r,s){var o,a=r.id,l=r.args;(!n[a]||typeof n[a].value!="function")&&s(new Error("Worker module "+a+": not found or its 'init' did not return a function"));try{var c=(o=n[a]).value.apply(o,l);c&&typeof c.then=="function"?c.then(u,function(f){return s(f instanceof Error?f:new Error(""+f))}):u(c)}catch(f){s(f)}function u(f){try{var d=n[a].getTransferables&&n[a].getTransferables(f);(!d||!Array.isArray(d)||!d.length)&&(d=void 0),s(f,d)}catch(h){console.error(h),s(h)}}}function i(r,s){var o=void 0;self.troikaDefine=function(l){return o=l};var a=URL.createObjectURL(new Blob(["/** "+r.replace(/\*/g,"")+` **/

troikaDefine(
`+s+`
)`],{type:"application/javascript"}));try{importScripts(a)}catch(l){console.error(l)}return URL.revokeObjectURL(a),delete self.troikaDefine,o}self.addEventListener("message",function(r){var s=r.data,o=s.messageId,a=s.action,l=s.data;try{a==="registerModule"&&e(l,function(c){c instanceof Error?postMessage({messageId:o,success:!1,error:c.message}):postMessage({messageId:o,success:!0,result:{isCallable:typeof c=="function"}})}),a==="callModule"&&t(l,function(c,u){c instanceof Error?postMessage({messageId:o,success:!1,error:c.message}):postMessage({messageId:o,success:!0,result:c},u||void 0)})}catch(c){postMessage({messageId:o,success:!1,error:c.stack})}})}function yW(n){var e=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return e._getInitResult().then(function(r){if(typeof r=="function")return r.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=n.dependencies,i=n.init;t=Array.isArray(t)?t.map(function(s){return s&&(s=s.onMainThread||s,s._getInitResult&&(s=s._getInitResult())),s}):[];var r=Promise.all(t).then(function(s){return i.apply(null,s)});return e._getInitResult=function(){return r},r},e}var PC=function(){var n=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),n=!0}catch(t){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return PC=function(){return n},n},xW=0,_W=0,x2=!1,B0=Object.create(null),H0=Object.create(null),S3=Object.create(null);function td(n){if((!n||typeof n.init!="function")&&!x2)throw new Error("requires `options.init` function");var e=n.dependencies,t=n.init,i=n.getTransferables,r=n.workerId,s=yW(n);r==null&&(r="#default");var o="workerModule"+ ++xW,a=n.name||o,l=null;e=e&&e.map(function(u){return typeof u=="function"&&!u.workerModuleData&&(x2=!0,u=td({workerId:r,name:"<"+a+"> function dependency: "+u.name,init:`function(){return (
`+M1(u)+`
)}`}),x2=!1),u&&u.workerModuleData&&(u=u.workerModuleData),u});function c(){for(var u=[],f=arguments.length;f--;)u[f]=arguments[f];if(!PC())return s.apply(void 0,u);if(!l){l=A6(r,"registerModule",c.workerModuleData);var d=function(){l=null,H0[r].delete(d)};(H0[r]||(H0[r]=new Set)).add(d)}return l.then(function(h){var g=h.isCallable;if(g)return A6(r,"callModule",{id:o,args:u});throw new Error("Worker module function was called but `init` did not return a callable function")})}return c.workerModuleData={isWorkerModule:!0,id:o,name:a,dependencies:e,init:M1(t),getTransferables:i&&M1(i)},c.onMainThread=s,c}function SW(n){H0[n]&&H0[n].forEach(function(e){e()}),B0[n]&&(B0[n].terminate(),delete B0[n])}function M1(n){var e=n.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function wW(n){var e=B0[n];if(!e){var t=M1(vW);e=B0[n]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+n.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(i){var r=i.data,s=r.messageId,o=S3[s];if(!o)throw new Error("WorkerModule response with empty or unknown messageId");delete S3[s],o(r)}}return e}function A6(n,e,t){return new Promise(function(i,r){var s=++_W;S3[s]=function(o){o.success?i(o.result):r(new Error("Error in worker "+e+" call: "+o.error))},wW(n).postMessage({messageId:s,action:e,data:t})})}function RC(){var n=function(e){function t($,J,j,se,ve,oe,he,ye){var Me=1-he;ye.x=Me*Me*$+2*Me*he*j+he*he*ve,ye.y=Me*Me*J+2*Me*he*se+he*he*oe}function i($,J,j,se,ve,oe,he,ye,Me,Pe){var Xe=1-Me;Pe.x=Xe*Xe*Xe*$+3*Xe*Xe*Me*j+3*Xe*Me*Me*ve+Me*Me*Me*he,Pe.y=Xe*Xe*Xe*J+3*Xe*Xe*Me*se+3*Xe*Me*Me*oe+Me*Me*Me*ye}function r($,J){for(var j=/([MLQCZ])([^MLQCZ]*)/g,se,ve,oe,he,ye;se=j.exec($);){var Me=se[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(Pe){return parseFloat(Pe)});switch(se[1]){case"M":he=ve=Me[0],ye=oe=Me[1];break;case"L":(Me[0]!==he||Me[1]!==ye)&&J("L",he,ye,he=Me[0],ye=Me[1]);break;case"Q":{J("Q",he,ye,he=Me[2],ye=Me[3],Me[0],Me[1]);break}case"C":{J("C",he,ye,he=Me[4],ye=Me[5],Me[0],Me[1],Me[2],Me[3]);break}case"Z":(he!==ve||ye!==oe)&&J("L",he,ye,ve,oe);break}}}function s($,J,j){j===void 0&&(j=16);var se={x:0,y:0};r($,function(ve,oe,he,ye,Me,Pe,Xe,ht,He){switch(ve){case"L":J(oe,he,ye,Me);break;case"Q":{for(var ie=oe,je=he,ke=1;ke<j;ke++)t(oe,he,Pe,Xe,ye,Me,ke/(j-1),se),J(ie,je,se.x,se.y),ie=se.x,je=se.y;break}case"C":{for(var We=oe,Fe=he,it=1;it<j;it++)i(oe,he,Pe,Xe,ht,He,ye,Me,it/(j-1),se),J(We,Fe,se.x,se.y),We=se.x,Fe=se.y;break}}})}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",a="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",l=new WeakMap,c={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function u($,J){var j=$.getContext?$.getContext("webgl",c):$,se=l.get(j);if(!se){let We=function(Q){var Z=oe[Q];if(!Z&&(Z=oe[Q]=j.getExtension(Q),!Z))throw new Error(Q+" not supported");return Z},Fe=function(Q,Z){var we=j.createShader(Z);return j.shaderSource(we,Q),j.compileShader(we),we},it=function(Q,Z,we,Ee){if(!he[Q]){var Ne={},Ze={},lt=j.createProgram();j.attachShader(lt,Fe(Z,j.VERTEX_SHADER)),j.attachShader(lt,Fe(we,j.FRAGMENT_SHADER)),j.linkProgram(lt),he[Q]={program:lt,transaction:function(qe){j.useProgram(lt),qe({setUniform:function(St,nt){for(var Lt=[],ct=arguments.length-2;ct-- >0;)Lt[ct]=arguments[ct+2];var be=Ze[nt]||(Ze[nt]=j.getUniformLocation(lt,nt));j["uniform"+St].apply(j,[be].concat(Lt))},setAttribute:function(St,nt,Lt,ct,be){var fe=Ne[St];fe||(fe=Ne[St]={buf:j.createBuffer(),loc:j.getAttribLocation(lt,St),data:null}),j.bindBuffer(j.ARRAY_BUFFER,fe.buf),j.vertexAttribPointer(fe.loc,nt,j.FLOAT,!1,0,0),j.enableVertexAttribArray(fe.loc),ve?j.vertexAttribDivisor(fe.loc,ct):We("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(fe.loc,ct),be!==fe.data&&(j.bufferData(j.ARRAY_BUFFER,be,Lt),fe.data=be)}})}}}he[Q].transaction(Ee)},Ue=function(Q,Z){Me++;try{j.activeTexture(j.TEXTURE0+Me);var we=ye[Q];we||(we=ye[Q]=j.createTexture(),j.bindTexture(j.TEXTURE_2D,we),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MIN_FILTER,j.NEAREST),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MAG_FILTER,j.NEAREST)),j.bindTexture(j.TEXTURE_2D,we),Z(we,Me)}finally{Me--}},Ye=function(Q,Z,we){var Ee=j.createFramebuffer();Pe.push(Ee),j.bindFramebuffer(j.FRAMEBUFFER,Ee),j.activeTexture(j.TEXTURE0+Z),j.bindTexture(j.TEXTURE_2D,Q),j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_2D,Q,0);try{we(Ee)}finally{j.deleteFramebuffer(Ee),j.bindFramebuffer(j.FRAMEBUFFER,Pe[--Pe.length-1]||null)}},ot=function(){oe={},he={},ye={},Me=-1,Pe.length=0};var Xe=We,ht=Fe,He=it,ie=Ue,je=Ye,ke=ot,ve=typeof WebGL2RenderingContext<"u"&&j instanceof WebGL2RenderingContext,oe={},he={},ye={},Me=-1,Pe=[];j.canvas.addEventListener("webglcontextlost",function(Q){ot(),Q.preventDefault()},!1),l.set(j,se={gl:j,isWebGL2:ve,getExtension:We,withProgram:it,withTexture:Ue,withTextureFramebuffer:Ye,handleContextLoss:ot})}J(se)}function f($,J,j,se,ve,oe,he,ye){he===void 0&&(he=15),ye===void 0&&(ye=null),u($,function(Me){var Pe=Me.gl,Xe=Me.withProgram,ht=Me.withTexture;ht("copy",function(He,ie){Pe.texImage2D(Pe.TEXTURE_2D,0,Pe.RGBA,ve,oe,0,Pe.RGBA,Pe.UNSIGNED_BYTE,J),Xe("copy",o,a,function(je){var ke=je.setUniform,We=je.setAttribute;We("aUV",2,Pe.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),ke("1i","image",ie),Pe.bindFramebuffer(Pe.FRAMEBUFFER,ye||null),Pe.disable(Pe.BLEND),Pe.colorMask(he&8,he&4,he&2,he&1),Pe.viewport(j,se,ve,oe),Pe.scissor(j,se,ve,oe),Pe.drawArrays(Pe.TRIANGLES,0,3)})})})}function d($,J,j){var se=$.width,ve=$.height;u($,function(oe){var he=oe.gl,ye=new Uint8Array(se*ve*4);he.readPixels(0,0,se,ve,he.RGBA,he.UNSIGNED_BYTE,ye),$.width=J,$.height=j,f(he,ye,0,0,se,ve)})}var h=Object.freeze({__proto__:null,withWebGLContext:u,renderImageData:f,resizeWebGLCanvasWithoutClearing:d});function g($,J,j,se,ve,oe){oe===void 0&&(oe=1);var he=new Uint8Array($*J),ye=se[2]-se[0],Me=se[3]-se[1],Pe=[];s(j,function(We,Fe,it,Ue){Pe.push({x1:We,y1:Fe,x2:it,y2:Ue,minX:Math.min(We,it),minY:Math.min(Fe,Ue),maxX:Math.max(We,it),maxY:Math.max(Fe,Ue)})}),Pe.sort(function(We,Fe){return We.maxX-Fe.maxX});for(var Xe=0;Xe<$;Xe++)for(var ht=0;ht<J;ht++){var He=je(se[0]+ye*(Xe+.5)/$,se[1]+Me*(ht+.5)/J),ie=Math.pow(1-Math.abs(He)/ve,oe)/2;He<0&&(ie=1-ie),ie=Math.max(0,Math.min(255,Math.round(ie*255))),he[ht*$+Xe]=ie}return he;function je(We,Fe){for(var it=1/0,Ue=1/0,Ye=Pe.length;Ye--;){var ot=Pe[Ye];if(ot.maxX+Ue<=We)break;if(We+Ue>ot.minX&&Fe-Ue<ot.maxY&&Fe+Ue>ot.minY){var Q=y(We,Fe,ot.x1,ot.y1,ot.x2,ot.y2);Q<it&&(it=Q,Ue=Math.sqrt(it))}}return ke(We,Fe)&&(Ue=-Ue),Ue}function ke(We,Fe){for(var it=0,Ue=Pe.length;Ue--;){var Ye=Pe[Ue];if(Ye.maxX<=We)break;var ot=Ye.y1>Fe!=Ye.y2>Fe&&We<(Ye.x2-Ye.x1)*(Fe-Ye.y1)/(Ye.y2-Ye.y1)+Ye.x1;ot&&(it+=Ye.y1<Ye.y2?1:-1)}return it!==0}}function _($,J,j,se,ve,oe,he,ye,Me,Pe){oe===void 0&&(oe=1),ye===void 0&&(ye=0),Me===void 0&&(Me=0),Pe===void 0&&(Pe=0),x($,J,j,se,ve,oe,he,null,ye,Me,Pe)}function x($,J,j,se,ve,oe,he,ye,Me,Pe,Xe){oe===void 0&&(oe=1),Me===void 0&&(Me=0),Pe===void 0&&(Pe=0),Xe===void 0&&(Xe=0);for(var ht=g($,J,j,se,ve,oe),He=new Uint8Array(ht.length*4),ie=0;ie<ht.length;ie++)He[ie*4+Xe]=ht[ie];f(he,He,Me,Pe,$,J,1<<3-Xe,ye)}function y($,J,j,se,ve,oe){var he=ve-j,ye=oe-se,Me=he*he+ye*ye,Pe=Me?Math.max(0,Math.min(1,(($-j)*he+(J-se)*ye)/Me)):0,Xe=$-(j+Pe*he),ht=J-(se+Pe*ye);return Xe*Xe+ht*ht}var M=Object.freeze({__proto__:null,generate:g,generateIntoCanvas:_,generateIntoFramebuffer:x}),b="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",A="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",T="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",P=new Float32Array([0,0,2,0,0,2]),k=null,N=!1,z={},R=new WeakMap;function F($){if(!N&&!ne($))throw new Error("WebGL generation not supported")}function V($,J,j,se,ve,oe,he){if(oe===void 0&&(oe=1),he===void 0&&(he=null),!he&&(he=k,!he)){var ye=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!ye)throw new Error("OffscreenCanvas or DOM canvas not supported");he=k=ye.getContext("webgl",{depth:!1})}F(he);var Me=new Uint8Array($*J*4);u(he,function(He){var ie=He.gl,je=He.withTexture,ke=He.withTextureFramebuffer;je("readable",function(We,Fe){ie.texImage2D(ie.TEXTURE_2D,0,ie.RGBA,$,J,0,ie.RGBA,ie.UNSIGNED_BYTE,null),ke(We,Fe,function(it){W($,J,j,se,ve,oe,ie,it,0,0,0),ie.readPixels(0,0,$,J,ie.RGBA,ie.UNSIGNED_BYTE,Me)})})});for(var Pe=new Uint8Array($*J),Xe=0,ht=0;Xe<Me.length;Xe+=4)Pe[ht++]=Me[Xe];return Pe}function K($,J,j,se,ve,oe,he,ye,Me,Pe){oe===void 0&&(oe=1),ye===void 0&&(ye=0),Me===void 0&&(Me=0),Pe===void 0&&(Pe=0),W($,J,j,se,ve,oe,he,null,ye,Me,Pe)}function W($,J,j,se,ve,oe,he,ye,Me,Pe,Xe){oe===void 0&&(oe=1),Me===void 0&&(Me=0),Pe===void 0&&(Pe=0),Xe===void 0&&(Xe=0),F(he);var ht=[];s(j,function(He,ie,je,ke){ht.push(He,ie,je,ke)}),ht=new Float32Array(ht),u(he,function(He){var ie=He.gl,je=He.isWebGL2,ke=He.getExtension,We=He.withProgram,Fe=He.withTexture,it=He.withTextureFramebuffer,Ue=He.handleContextLoss;if(Fe("rawDistances",function(Ye,ot){($!==Ye._lastWidth||J!==Ye._lastHeight)&&ie.texImage2D(ie.TEXTURE_2D,0,ie.RGBA,Ye._lastWidth=$,Ye._lastHeight=J,0,ie.RGBA,ie.UNSIGNED_BYTE,null),We("main",b,A,function(Q){var Z=Q.setAttribute,we=Q.setUniform,Ee=!je&&ke("ANGLE_instanced_arrays"),Ne=!je&&ke("EXT_blend_minmax");Z("aUV",2,ie.STATIC_DRAW,0,P),Z("aLineSegment",4,ie.DYNAMIC_DRAW,1,ht),we.apply(void 0,["4f","uGlyphBounds"].concat(se)),we("1f","uMaxDistance",ve),we("1f","uExponent",oe),it(Ye,ot,function(Ze){ie.enable(ie.BLEND),ie.colorMask(!0,!0,!0,!0),ie.viewport(0,0,$,J),ie.scissor(0,0,$,J),ie.blendFunc(ie.ONE,ie.ONE),ie.blendEquationSeparate(ie.FUNC_ADD,je?ie.MAX:Ne.MAX_EXT),ie.clear(ie.COLOR_BUFFER_BIT),je?ie.drawArraysInstanced(ie.TRIANGLES,0,3,ht.length/4):Ee.drawArraysInstancedANGLE(ie.TRIANGLES,0,3,ht.length/4)})}),We("post",o,T,function(Q){Q.setAttribute("aUV",2,ie.STATIC_DRAW,0,P),Q.setUniform("1i","tex",ot),ie.bindFramebuffer(ie.FRAMEBUFFER,ye),ie.disable(ie.BLEND),ie.colorMask(Xe===0,Xe===1,Xe===2,Xe===3),ie.viewport(Me,Pe,$,J),ie.scissor(Me,Pe,$,J),ie.drawArrays(ie.TRIANGLES,0,3)})}),ie.isContextLost())throw Ue(),new Error("webgl context lost")})}function ne($){var J=!$||$===k?z:$.canvas||$,j=R.get(J);if(j===void 0){N=!0;var se=null;try{var ve=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],oe=V(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,$);j=oe&&ve.length===oe.length&&oe.every(function(he,ye){return he===ve[ye]}),j||(se="bad trial run results",console.info(ve,oe))}catch(he){j=!1,se=he.message}se&&console.warn("WebGL SDF generation not supported:",se),N=!1,R.set(J,j)}return j}var re=Object.freeze({__proto__:null,generate:V,generateIntoCanvas:K,generateIntoFramebuffer:W,isSupported:ne});function de($,J,j,se,ve,oe){ve===void 0&&(ve=Math.max(se[2]-se[0],se[3]-se[1])/2),oe===void 0&&(oe=1);try{return V.apply(re,arguments)}catch(he){return console.info("WebGL SDF generation failed, falling back to JS",he),g.apply(M,arguments)}}function X($,J,j,se,ve,oe,he,ye,Me,Pe){ve===void 0&&(ve=Math.max(se[2]-se[0],se[3]-se[1])/2),oe===void 0&&(oe=1),ye===void 0&&(ye=0),Me===void 0&&(Me=0),Pe===void 0&&(Pe=0);try{return K.apply(re,arguments)}catch(Xe){return console.info("WebGL SDF generation failed, falling back to JS",Xe),_.apply(M,arguments)}}return e.forEachPathCommand=r,e.generate=de,e.generateIntoCanvas=X,e.javascript=M,e.pathToLineSegments=s,e.webgl=re,e.webglUtils=h,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}function bW(){var n=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},i={},r={};i.L=1,r[1]="L",Object.keys(t).forEach(function(Ue,Ye){i[Ue]=1<<Ye+1,r[i[Ue]]=Ue}),Object.freeze(i);var s=i.LRI|i.RLI|i.FSI,o=i.L|i.R|i.AL,a=i.B|i.S|i.WS|i.ON|i.FSI|i.LRI|i.RLI|i.PDI,l=i.BN|i.RLE|i.LRE|i.RLO|i.LRO|i.PDF,c=i.S|i.WS|i.B|s|i.PDI|l,u=null;function f(){if(!u){u=new Map;var Ue=function(ot){if(t.hasOwnProperty(ot)){var Q=0;t[ot].split(",").forEach(function(Z){var we=Z.split("+"),Ee=we[0],Ne=we[1];Ee=parseInt(Ee,36),Ne=Ne?parseInt(Ne,36):0,u.set(Q+=Ee,i[ot]);for(var Ze=0;Ze<Ne;Ze++)u.set(++Q,i[ot])})}};for(var Ye in t)Ue(Ye)}}function d(Ue){return f(),u.get(Ue.codePointAt(0))||i.L}function h(Ue){return r[d(Ue)]}var g={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function _(Ue,Ye){var ot=36,Q=0,Z=new Map,we=Ye&&new Map,Ee;return Ue.split(",").forEach(function Ne(Ze){if(Ze.indexOf("+")!==-1)for(var lt=+Ze;lt--;)Ne(Ee);else{Ee=Ze;var ft=Ze.split(">"),qe=ft[0],st=ft[1];qe=String.fromCodePoint(Q+=parseInt(qe,ot)),st=String.fromCodePoint(Q+=parseInt(st,ot)),Z.set(qe,st),Ye&&we.set(st,qe)}}),{map:Z,reverseMap:we}}var x,y,M;function b(){if(!x){var Ue=_(g.pairs,!0),Ye=Ue.map,ot=Ue.reverseMap;x=Ye,y=ot,M=_(g.canonical,!1).map}}function A(Ue){return b(),x.get(Ue)||null}function T(Ue){return b(),y.get(Ue)||null}function P(Ue){return b(),M.get(Ue)||null}var k=i.L,N=i.R,z=i.EN,R=i.ES,F=i.ET,V=i.AN,K=i.CS,W=i.B,ne=i.S,re=i.ON,de=i.BN,X=i.NSM,$=i.AL,J=i.LRO,j=i.RLO,se=i.LRE,ve=i.RLE,oe=i.PDF,he=i.LRI,ye=i.RLI,Me=i.FSI,Pe=i.PDI;function Xe(Ue,Ye){for(var ot=125,Q=new Uint32Array(Ue.length),Z=0;Z<Ue.length;Z++)Q[Z]=d(Ue[Z]);var we=new Map;function Ee(Kt,nr){var ui=Q[Kt];Q[Kt]=nr,we.set(ui,we.get(ui)-1),ui&a&&we.set(a,we.get(a)-1),we.set(nr,(we.get(nr)||0)+1),nr&a&&we.set(a,(we.get(a)||0)+1)}for(var Ne=new Uint8Array(Ue.length),Ze=new Map,lt=[],ft=null,qe=0;qe<Ue.length;qe++)ft||lt.push(ft={start:qe,end:Ue.length-1,level:Ye==="rtl"?1:Ye==="ltr"?0:Ti(qe,!1)}),Q[qe]&W&&(ft.end=qe,ft=null);for(var st=ve|se|j|J|s|Pe|oe|W,St=function(Kt){return Kt+(Kt&1?1:2)},nt=function(Kt){return Kt+(Kt&1?2:1)},Lt=0;Lt<lt.length;Lt++){ft=lt[Lt];var ct=[{_level:ft.level,_override:0,_isolate:0}],be=void 0,fe=0,De=0,mt=0;we.clear();for(var pt=ft.start;pt<=ft.end;pt++){var vt=Q[pt];if(be=ct[ct.length-1],we.set(vt,(we.get(vt)||0)+1),vt&a&&we.set(a,(we.get(a)||0)+1),vt&st)if(vt&(ve|se)){Ne[pt]=be._level;var xe=(vt===ve?nt:St)(be._level);xe<=ot&&!fe&&!De?ct.push({_level:xe,_override:0,_isolate:0}):fe||De++}else if(vt&(j|J)){Ne[pt]=be._level;var gt=(vt===j?nt:St)(be._level);gt<=ot&&!fe&&!De?ct.push({_level:gt,_override:vt&j?N:k,_isolate:0}):fe||De++}else if(vt&s){vt&Me&&(vt=Ti(pt+1,!0)===1?ye:he),Ne[pt]=be._level,be._override&&Ee(pt,be._override);var Re=(vt===ye?nt:St)(be._level);Re<=ot&&fe===0&&De===0?(mt++,ct.push({_level:Re,_override:0,_isolate:1,_isolInitIndex:pt})):fe++}else if(vt&Pe){if(fe>0)fe--;else if(mt>0){for(De=0;!ct[ct.length-1]._isolate;)ct.pop();var et=ct[ct.length-1]._isolInitIndex;et!=null&&(Ze.set(et,pt),Ze.set(pt,et)),ct.pop(),mt--}be=ct[ct.length-1],Ne[pt]=be._level,be._override&&Ee(pt,be._override)}else vt&oe?(fe===0&&(De>0?De--:!be._isolate&&ct.length>1&&(ct.pop(),be=ct[ct.length-1])),Ne[pt]=be._level):vt&W&&(Ne[pt]=ft.level);else Ne[pt]=be._level,be._override&&vt!==de&&Ee(pt,be._override)}for(var rt=[],wt=null,_t=ft.start;_t<=ft.end;_t++){var Ht=Q[_t];if(!(Ht&l)){var an=Ne[_t],Gt=Ht&s,hn=Ht===Pe;wt&&an===wt._level?(wt._end=_t,wt._endsWithIsolInit=Gt):rt.push(wt={_start:_t,_end:_t,_level:an,_startsWithPDI:hn,_endsWithIsolInit:Gt})}}for(var Kn=[],Gi=0;Gi<rt.length;Gi++){var fn=rt[Gi];if(!fn._startsWithPDI||fn._startsWithPDI&&!Ze.has(fn._start)){for(var D=[wt=fn],B=void 0;wt&&wt._endsWithIsolInit&&(B=Ze.get(wt._end))!=null;)for(var tt=Gi+1;tt<rt.length;tt++)if(rt[tt]._start===B){D.push(wt=rt[tt]);break}for(var Y=[],me=0;me<D.length;me++)for(var kn=D[me],Et=kn._start;Et<=kn._end;Et++)Y.push(Et);for(var Mi=Ne[Y[0]],le=ft.level,Se=Y[0]-1;Se>=0;Se--)if(!(Q[Se]&l)){le=Ne[Se];break}var Ie=Y[Y.length-1],Be=Ne[Ie],ze=ft.level;if(!(Q[Ie]&s)){for(var ae=Ie+1;ae<=ft.end;ae++)if(!(Q[ae]&l)){ze=Ne[ae];break}}Kn.push({_seqIndices:Y,_sosType:Math.max(le,Mi)%2?N:k,_eosType:Math.max(ze,Be)%2?N:k})}}for(var Rt=0;Rt<Kn.length;Rt++){var ge=Kn[Rt],ut=ge._seqIndices,Vt=ge._sosType,Xt=ge._eosType,Ut=Ne[ut[0]]&1?N:k;if(we.get(X))for(var Tt=0;Tt<ut.length;Tt++){var li=ut[Tt];if(Q[li]&X){for(var _n=Vt,Qn=Tt-1;Qn>=0;Qn--)if(!(Q[ut[Qn]]&l)){_n=Q[ut[Qn]];break}Ee(li,_n&(s|Pe)?re:_n)}}if(we.get(z))for(var Bt=0;Bt<ut.length;Bt++){var At=ut[Bt];if(Q[At]&z)for(var zn=Bt-1;zn>=-1;zn--){var Yt=zn===-1?Vt:Q[ut[zn]];if(Yt&o){Yt===$&&Ee(At,V);break}}}if(we.get($))for(var jn=0;jn<ut.length;jn++){var Vr=ut[jn];Q[Vr]&$&&Ee(Vr,N)}if(we.get(R)||we.get(K))for(var Ii=1;Ii<ut.length-1;Ii++){var ci=ut[Ii];if(Q[ci]&(R|K)){for(var Tn=0,Bn=0,As=Ii-1;As>=0&&(Tn=Q[ut[As]],!!(Tn&l));As--);for(var pi=Ii+1;pi<ut.length&&(Bn=Q[ut[pi]],!!(Bn&l));pi++);Tn===Bn&&(Q[ci]===R?Tn===z:Tn&(z|V))&&Ee(ci,Tn)}}if(we.get(z))for(var Wi=0;Wi<ut.length;Wi++){var er=ut[Wi];if(Q[er]&z){for(var yo=Wi-1;yo>=0&&Q[ut[yo]]&(F|l);yo--)Ee(ut[yo],z);for(Wi++;Wi<ut.length&&Q[ut[Wi]]&(F|l|z);Wi++)Q[ut[Wi]]!==z&&Ee(ut[Wi],z)}}if(we.get(F)||we.get(R)||we.get(K))for(var xa=0;xa<ut.length;xa++){var $u=ut[xa];if(Q[$u]&(F|R|K)){Ee($u,re);for(var xo=xa-1;xo>=0&&Q[ut[xo]]&l;xo--)Ee(ut[xo],re);for(var ls=xa+1;ls<ut.length&&Q[ut[ls]]&l;ls++)Ee(ut[ls],re)}}if(we.get(z))for(var Zs=0,Wo=Vt;Zs<ut.length;Zs++){var nd=ut[Zs],Oe=Q[nd];Oe&z?Wo===k&&Ee(nd,k):Oe&o&&(Wo=Oe)}if(we.get(a)){var wn=N|z|V,cs=wn|k,Di=[];{for(var jo=[],Ks=0;Ks<ut.length;Ks++)if(Q[ut[Ks]]&a){var on=Ue[ut[Ks]],qo=void 0;if(A(on)!==null)if(jo.length<63)jo.push({char:on,seqIndex:Ks});else break;else if((qo=T(on))!==null)for(var us=jo.length-1;us>=0;us--){var Mt=jo[us].char;if(Mt===qo||Mt===T(P(on))||A(P(Mt))===on){Di.push([jo[us].seqIndex,Ks]),jo.length=us;break}}}Di.sort(function(Kt,nr){return Kt[0]-nr[0]})}for(var Cs=0;Cs<Di.length;Cs++){for(var _a=Di[Cs],Qt=_a[0],hr=_a[1],eh=!1,fr=0,Sc=Qt+1;Sc<hr;Sc++){var Sa=ut[Sc];if(Q[Sa]&cs){eh=!0;var bn=Q[Sa]&wn?N:k;if(bn===Ut){fr=bn;break}}}if(eh&&!fr){fr=Vt;for(var wa=Qt-1;wa>=0;wa--){var wc=ut[wa];if(Q[wc]&cs){var dr=Q[wc]&wn?N:k;dr!==Ut?fr=dr:fr=Ut;break}}}if(fr){if(Q[ut[Qt]]=Q[ut[hr]]=fr,fr!==Ut){for(var ji=Qt+1;ji<ut.length;ji++)if(!(Q[ut[ji]]&l)){d(Ue[ut[ji]])&X&&(Q[ut[ji]]=fr);break}}if(fr!==Ut){for(var Er=hr+1;Er<ut.length;Er++)if(!(Q[ut[Er]]&l)){d(Ue[ut[Er]])&X&&(Q[ut[Er]]=fr);break}}}}for(var Zt=0;Zt<ut.length;Zt++)if(Q[ut[Zt]]&a){for(var Xo=Zt,ba=Zt,pr=Vt,Ei=Zt-1;Ei>=0;Ei--)if(Q[ut[Ei]]&l)Xo=Ei;else{pr=Q[ut[Ei]]&wn?N:k;break}for(var tr=Xt,Ma=Zt+1;Ma<ut.length;Ma++)if(Q[ut[Ma]]&(a|l))ba=Ma;else{tr=Q[ut[Ma]]&wn?N:k;break}for(var at=Xo;at<=ba;at++)Q[ut[at]]=pr===tr?pr:Ut;Zt=ba}}}for(var Ln=ft.start;Ln<=ft.end;Ln++){var Yo=Ne[Ln],Gr=Q[Ln];if(Yo&1?Gr&(k|z|V)&&Ne[Ln]++:Gr&N?Ne[Ln]++:Gr&(V|z)&&(Ne[Ln]+=2),Gr&l&&(Ne[Ln]=Ln===0?ft.level:Ne[Ln-1]),Ln===ft.end||d(Ue[Ln])&(ne|W))for(var Qs=Ln;Qs>=0&&d(Ue[Qs])&c;Qs--)Ne[Qs]=ft.level}}return{levels:Ne,paragraphs:lt};function Ti(Kt,nr){for(var ui=Kt;ui<Ue.length;ui++){var hi=Q[ui];if(hi&(N|$))return 1;if(hi&(W|k)||nr&&hi===Pe)return 0;if(hi&s){var Wr=Ps(ui);ui=Wr===-1?Ue.length:Wr}}return 0}function Ps(Kt){for(var nr=1,ui=Kt+1;ui<Ue.length;ui++){var hi=Q[ui];if(hi&W)break;if(hi&Pe){if(--nr===0)return ui}else hi&s&&nr++}return-1}}var ht="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",He;function ie(){if(!He){var Ue=_(ht,!0),Ye=Ue.map,ot=Ue.reverseMap;ot.forEach(function(Q,Z){Ye.set(Z,Q)}),He=Ye}}function je(Ue){return ie(),He.get(Ue)||null}function ke(Ue,Ye,ot,Q){var Z=Ue.length;ot=Math.max(0,ot==null?0:+ot),Q=Math.min(Z-1,Q==null?Z-1:+Q);for(var we=new Map,Ee=ot;Ee<=Q;Ee++)if(Ye[Ee]&1){var Ne=je(Ue[Ee]);Ne!==null&&we.set(Ee,Ne)}return we}function We(Ue,Ye,ot,Q){var Z=Ue.length;ot=Math.max(0,ot==null?0:+ot),Q=Math.min(Z-1,Q==null?Z-1:+Q);var we=[];return Ye.paragraphs.forEach(function(Ee){var Ne=Math.max(ot,Ee.start),Ze=Math.min(Q,Ee.end);if(Ne<Ze){for(var lt=Ye.levels.slice(Ne,Ze+1),ft=Ze;ft>=Ne&&d(Ue[ft])&c;ft--)lt[ft]=Ee.level;for(var qe=Ee.level,st=1/0,St=0;St<lt.length;St++){var nt=lt[St];nt>qe&&(qe=nt),nt<st&&(st=nt|1)}for(var Lt=qe;Lt>=st;Lt--)for(var ct=0;ct<lt.length;ct++)if(lt[ct]>=Lt){for(var be=ct;ct+1<lt.length&&lt[ct+1]>=Lt;)ct++;ct>be&&we.push([be+Ne,ct+Ne])}}}),we}function Fe(Ue,Ye,ot,Q){var Z=it(Ue,Ye,ot,Q),we=[].concat(Ue);return Z.forEach(function(Ee,Ne){we[Ne]=(Ye.levels[Ee]&1?je(Ue[Ee]):null)||Ue[Ee]}),we.join("")}function it(Ue,Ye,ot,Q){for(var Z=We(Ue,Ye,ot,Q),we=[],Ee=0;Ee<Ue.length;Ee++)we[Ee]=Ee;return Z.forEach(function(Ne){for(var Ze=Ne[0],lt=Ne[1],ft=we.slice(Ze,lt+1),qe=ft.length;qe--;)we[lt-qe]=ft[qe]}),we}return e.closingToOpeningBracket=T,e.getBidiCharType=d,e.getBidiCharTypeName=h,e.getCanonicalBracket=P,e.getEmbeddingLevels=Xe,e.getMirroredCharacter=je,e.getMirroredCharactersMap=ke,e.getReorderSegments=We,e.getReorderedIndices=it,e.getReorderedString=Fe,e.openingToClosingBracket=A,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}const kC=/\bvoid\s+main\s*\(\s*\)\s*{/g;function w3(n){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(i,r){let s=rn[r];return s?w3(s):i}return n.replace(e,t)}const _r=[];for(let n=0;n<256;n++)_r[n]=(n<16?"0":"")+n.toString(16);function MW(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(_r[n&255]+_r[n>>8&255]+_r[n>>16&255]+_r[n>>24&255]+"-"+_r[e&255]+_r[e>>8&255]+"-"+_r[e>>16&15|64]+_r[e>>24&255]+"-"+_r[t&63|128]+_r[t>>8&255]+"-"+_r[t>>16&255]+_r[t>>24&255]+_r[i&255]+_r[i>>8&255]+_r[i>>16&255]+_r[i>>24&255]).toUpperCase()}const ou=Object.assign||function(){let n=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let i=arguments[e];if(i)for(let r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},EW=Date.now(),C6=new WeakMap,P6=new Map;let TW=1e10;function b3(n,e){const t=RW(e);let i=C6.get(n);if(i||C6.set(n,i=Object.create(null)),i[t])return new i[t];const r=`_onBeforeCompile${t}`,s=function(c,u){n.onBeforeCompile.call(this,c,u);const f=this.customProgramCacheKey()+"|"+c.vertexShader+"|"+c.fragmentShader;let d=P6[f];if(!d){const h=AW(this,c,e,t);d=P6[f]=h}c.vertexShader=d.vertexShader,c.fragmentShader=d.fragmentShader,ou(c.uniforms,this.uniforms),e.timeUniform&&(c.uniforms[e.timeUniform]={get value(){return Date.now()-EW}}),this[r]&&this[r](c)},o=function(){return a(e.chained?n:n.clone())},a=function(c){const u=Object.create(c,l);return Object.defineProperty(u,"baseMaterial",{value:n}),Object.defineProperty(u,"id",{value:TW++}),u.uuid=MW(),u.uniforms=ou({},c.uniforms,e.uniforms),u.defines=ou({},c.defines,e.defines),u.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",u.extensions=ou({},c.extensions,e.extensions),u._listeners=void 0,u},l={constructor:{value:o},isDerivedMaterial:{value:!0},type:{get:()=>n.type,set:c=>{n.type=c}},isDerivedFrom:{writable:!0,configurable:!0,value:function(c){const u=this.baseMaterial;return c===u||u.isDerivedMaterial&&u.isDerivedFrom(c)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return n.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return s},set(c){this[r]=c}},copy:{writable:!0,configurable:!0,value:function(c){return n.copy.call(this,c),!n.isShaderMaterial&&!n.isDerivedMaterial&&(ou(this.extensions,c.extensions),ou(this.defines,c.defines),ou(this.uniforms,Mp.clone(c.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const c=new n.constructor;return a(c).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let c=this._depthMaterial;return c||(c=this._depthMaterial=b3(n.isDerivedMaterial?n.getDepthMaterial():new Uv({depthPacking:X_}),e),c.defines.IS_DEPTH_MATERIAL="",c.uniforms=this.uniforms),c}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let c=this._distanceMaterial;return c||(c=this._distanceMaterial=b3(n.isDerivedMaterial?n.getDistanceMaterial():new zv,e),c.defines.IS_DISTANCE_MATERIAL="",c.uniforms=this.uniforms),c}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:c,_distanceMaterial:u}=this;c&&c.dispose(),u&&u.dispose(),n.dispose.call(this)}}};return i[t]=o,new o}function AW(n,{vertexShader:e,fragmentShader:t},i,r){let{vertexDefs:s,vertexMainIntro:o,vertexMainOutro:a,vertexTransform:l,fragmentDefs:c,fragmentMainIntro:u,fragmentMainOutro:f,fragmentColorTransform:d,customRewriter:h,timeUniform:g}=i;if(s=s||"",o=o||"",a=a||"",c=c||"",u=u||"",f=f||"",(l||h)&&(e=w3(e)),(d||h)&&(t=t.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),t=w3(t)),h){let _=h({vertexShader:e,fragmentShader:t});e=_.vertexShader,t=_.fragmentShader}if(d){let _=[];t=t.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,x=>(_.push(x),"")),f=`${d}
${_.join(`
`)}
${f}`}if(g){const _=`
uniform float ${g};
`;s=_+s,c=_+c}return l&&(e=`vec3 troika_position_${r};
vec3 troika_normal_${r};
vec2 troika_uv_${r};
${e}
`,s=`${s}
void troikaVertexTransform${r}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${l}
}
`,o=`
troika_position_${r} = vec3(position);
troika_normal_${r} = vec3(normal);
troika_uv_${r} = vec2(uv);
troikaVertexTransform${r}(troika_position_${r}, troika_normal_${r}, troika_uv_${r});
${o}
`,e=e.replace(/\b(position|normal|uv)\b/g,(_,x,y,M)=>/\battribute\s+vec[23]\s+$/.test(M.substr(0,y))?x:`troika_${x}_${r}`),n.map&&n.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${r}`))),e=R6(e,r,s,o,a),t=R6(t,r,c,u,f),{vertexShader:e,fragmentShader:t}}function R6(n,e,t,i,r){return(i||r||t)&&(n=n.replace(kC,`
${t}
void troikaOrigMain${e}() {`),n+=`
void main() {
  ${i}
  troikaOrigMain${e}();
  ${r}
}`),n}function CW(n,e){return n==="uniforms"?void 0:typeof e=="function"?e.toString():e}let PW=0;const k6=new Map;function RW(n){const e=JSON.stringify(n,CW);let t=k6.get(e);return t==null&&k6.set(e,t=++PW),t}/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function kW(){return typeof window>"u"&&(self.window=self),function(n){var e={parse:function(r){var s=e._bin,o=new Uint8Array(r);if(s.readASCII(o,0,4)=="ttcf"){var a=4;s.readUshort(o,a),a+=2,s.readUshort(o,a),a+=2;var l=s.readUint(o,a);a+=4;for(var c=[],u=0;u<l;u++){var f=s.readUint(o,a);a+=4,c.push(e._readFont(o,f))}return c}return[e._readFont(o,0)]},_readFont:function(r,s){var o=e._bin,a=s;o.readFixed(r,s),s+=4;var l=o.readUshort(r,s);s+=2,o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2;for(var c=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],u={_data:r,_offset:a},f={},d=0;d<l;d++){var h=o.readASCII(r,s,4);s+=4,o.readUint(r,s),s+=4;var g=o.readUint(r,s);s+=4;var _=o.readUint(r,s);s+=4,f[h]={offset:g,length:_}}for(d=0;d<c.length;d++){var x=c[d];f[x]&&(u[x.trim()]=e[x.trim()].parse(r,f[x].offset,f[x].length,u))}return u},_tabOffset:function(r,s,o){for(var a=e._bin,l=a.readUshort(r,o+4),c=o+12,u=0;u<l;u++){var f=a.readASCII(r,c,4);c+=4,a.readUint(r,c),c+=4;var d=a.readUint(r,c);if(c+=4,a.readUint(r,c),c+=4,f==s)return d}return 0}};e._bin={readFixed:function(r,s){return(r[s]<<8|r[s+1])+(r[s+2]<<8|r[s+3])/65540},readF2dot14:function(r,s){return e._bin.readShort(r,s)/16384},readInt:function(r,s){return e._bin._view(r).getInt32(s)},readInt8:function(r,s){return e._bin._view(r).getInt8(s)},readShort:function(r,s){return e._bin._view(r).getInt16(s)},readUshort:function(r,s){return e._bin._view(r).getUint16(s)},readUshorts:function(r,s,o){for(var a=[],l=0;l<o;l++)a.push(e._bin.readUshort(r,s+2*l));return a},readUint:function(r,s){return e._bin._view(r).getUint32(s)},readUint64:function(r,s){return 4294967296*e._bin.readUint(r,s)+e._bin.readUint(r,s+4)},readASCII:function(r,s,o){for(var a="",l=0;l<o;l++)a+=String.fromCharCode(r[s+l]);return a},readUnicode:function(r,s,o){for(var a="",l=0;l<o;l++){var c=r[s++]<<8|r[s++];a+=String.fromCharCode(c)}return a},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(r,s,o){var a=e._bin._tdec;return a&&s==0&&o==r.length?a.decode(r):e._bin.readASCII(r,s,o)},readBytes:function(r,s,o){for(var a=[],l=0;l<o;l++)a.push(r[s+l]);return a},readASCIIArray:function(r,s,o){for(var a=[],l=0;l<o;l++)a.push(String.fromCharCode(r[s+l]));return a},_view:function(r){return r._dataView||(r._dataView=r.buffer?new DataView(r.buffer,r.byteOffset,r.byteLength):new DataView(new Uint8Array(r).buffer))}},e._lctf={},e._lctf.parse=function(r,s,o,a,l){var c=e._bin,u={},f=s;c.readFixed(r,s),s+=4;var d=c.readUshort(r,s);s+=2;var h=c.readUshort(r,s);s+=2;var g=c.readUshort(r,s);return s+=2,u.scriptList=e._lctf.readScriptList(r,f+d),u.featureList=e._lctf.readFeatureList(r,f+h),u.lookupList=e._lctf.readLookupList(r,f+g,l),u},e._lctf.readLookupList=function(r,s,o){var a=e._bin,l=s,c=[],u=a.readUshort(r,s);s+=2;for(var f=0;f<u;f++){var d=a.readUshort(r,s);s+=2;var h=e._lctf.readLookupTable(r,l+d,o);c.push(h)}return c},e._lctf.readLookupTable=function(r,s,o){var a=e._bin,l=s,c={tabs:[]};c.ltype=a.readUshort(r,s),s+=2,c.flag=a.readUshort(r,s),s+=2;var u=a.readUshort(r,s);s+=2;for(var f=c.ltype,d=0;d<u;d++){var h=a.readUshort(r,s);s+=2;var g=o(r,f,l+h,c);c.tabs.push(g)}return c},e._lctf.numOfOnes=function(r){for(var s=0,o=0;o<32;o++)r>>>o&1&&s++;return s},e._lctf.readClassDef=function(r,s){var o=e._bin,a=[],l=o.readUshort(r,s);if(s+=2,l==1){var c=o.readUshort(r,s);s+=2;var u=o.readUshort(r,s);s+=2;for(var f=0;f<u;f++)a.push(c+f),a.push(c+f),a.push(o.readUshort(r,s)),s+=2}if(l==2){var d=o.readUshort(r,s);for(s+=2,f=0;f<d;f++)a.push(o.readUshort(r,s)),s+=2,a.push(o.readUshort(r,s)),s+=2,a.push(o.readUshort(r,s)),s+=2}return a},e._lctf.getInterval=function(r,s){for(var o=0;o<r.length;o+=3){var a=r[o],l=r[o+1];if(r[o+2],a<=s&&s<=l)return o}return-1},e._lctf.readCoverage=function(r,s){var o=e._bin,a={};a.fmt=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);return s+=2,a.fmt==1&&(a.tab=o.readUshorts(r,s,l)),a.fmt==2&&(a.tab=o.readUshorts(r,s,3*l)),a},e._lctf.coverageIndex=function(r,s){var o=r.tab;if(r.fmt==1)return o.indexOf(s);if(r.fmt==2){var a=e._lctf.getInterval(o,s);if(a!=-1)return o[a+2]+(s-o[a])}return-1},e._lctf.readFeatureList=function(r,s){var o=e._bin,a=s,l=[],c=o.readUshort(r,s);s+=2;for(var u=0;u<c;u++){var f=o.readASCII(r,s,4);s+=4;var d=o.readUshort(r,s);s+=2;var h=e._lctf.readFeatureTable(r,a+d);h.tag=f.trim(),l.push(h)}return l},e._lctf.readFeatureTable=function(r,s){var o=e._bin,a=s,l={},c=o.readUshort(r,s);s+=2,c>0&&(l.featureParams=a+c);var u=o.readUshort(r,s);s+=2,l.tab=[];for(var f=0;f<u;f++)l.tab.push(o.readUshort(r,s+2*f));return l},e._lctf.readScriptList=function(r,s){var o=e._bin,a=s,l={},c=o.readUshort(r,s);s+=2;for(var u=0;u<c;u++){var f=o.readASCII(r,s,4);s+=4;var d=o.readUshort(r,s);s+=2,l[f.trim()]=e._lctf.readScriptTable(r,a+d)}return l},e._lctf.readScriptTable=function(r,s){var o=e._bin,a=s,l={},c=o.readUshort(r,s);s+=2,c>0&&(l.default=e._lctf.readLangSysTable(r,a+c));var u=o.readUshort(r,s);s+=2;for(var f=0;f<u;f++){var d=o.readASCII(r,s,4);s+=4;var h=o.readUshort(r,s);s+=2,l[d.trim()]=e._lctf.readLangSysTable(r,a+h)}return l},e._lctf.readLangSysTable=function(r,s){var o=e._bin,a={};o.readUshort(r,s),s+=2,a.reqFeature=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);return s+=2,a.features=o.readUshorts(r,s,l),a},e.CFF={},e.CFF.parse=function(r,s,o){var a=e._bin;(r=new Uint8Array(r.buffer,s,o))[s=0],r[++s],r[++s],r[++s],s++;var l=[];s=e.CFF.readIndex(r,s,l);for(var c=[],u=0;u<l.length-1;u++)c.push(a.readASCII(r,s+l[u],l[u+1]-l[u]));s+=l[l.length-1];var f=[];s=e.CFF.readIndex(r,s,f);var d=[];for(u=0;u<f.length-1;u++)d.push(e.CFF.readDict(r,s+f[u],s+f[u+1]));s+=f[f.length-1];var h=d[0],g=[];s=e.CFF.readIndex(r,s,g);var _=[];for(u=0;u<g.length-1;u++)_.push(a.readASCII(r,s+g[u],g[u+1]-g[u]));if(s+=g[g.length-1],e.CFF.readSubrs(r,s,h),h.CharStrings){s=h.CharStrings,g=[],s=e.CFF.readIndex(r,s,g);var x=[];for(u=0;u<g.length-1;u++)x.push(a.readBytes(r,s+g[u],g[u+1]-g[u]));h.CharStrings=x}if(h.ROS){s=h.FDArray;var y=[];for(s=e.CFF.readIndex(r,s,y),h.FDArray=[],u=0;u<y.length-1;u++){var M=e.CFF.readDict(r,s+y[u],s+y[u+1]);e.CFF._readFDict(r,M,_),h.FDArray.push(M)}s+=y[y.length-1],s=h.FDSelect,h.FDSelect=[];var b=r[s];if(s++,b!=3)throw b;var A=a.readUshort(r,s);for(s+=2,u=0;u<A+1;u++)h.FDSelect.push(a.readUshort(r,s),r[s+2]),s+=3}return h.Encoding&&(h.Encoding=e.CFF.readEncoding(r,h.Encoding,h.CharStrings.length)),h.charset&&(h.charset=e.CFF.readCharset(r,h.charset,h.CharStrings.length)),e.CFF._readFDict(r,h,_),h},e.CFF._readFDict=function(r,s,o){var a;for(var l in s.Private&&(a=s.Private[1],s.Private=e.CFF.readDict(r,a,a+s.Private[0]),s.Private.Subrs&&e.CFF.readSubrs(r,a+s.Private.Subrs,s.Private)),s)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(l)!=-1&&(s[l]=o[s[l]-426+35])},e.CFF.readSubrs=function(r,s,o){var a=e._bin,l=[];s=e.CFF.readIndex(r,s,l);var c,u=l.length;c=u<1240?107:u<33900?1131:32768,o.Bias=c,o.Subrs=[];for(var f=0;f<l.length-1;f++)o.Subrs.push(a.readBytes(r,s+l[f],l[f+1]-l[f]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(r,s){for(var o=0;o<r.charset.length;o++)if(r.charset[o]==s)return o;return-1},e.CFF.glyphBySE=function(r,s){return s<0||s>255?-1:e.CFF.glyphByUnicode(r,e.CFF.tableSE[s])},e.CFF.readEncoding=function(r,s,o){e._bin;var a=[".notdef"],l=r[s];if(s++,l!=0)throw"error: unknown encoding format: "+l;var c=r[s];s++;for(var u=0;u<c;u++)a.push(r[s+u]);return a},e.CFF.readCharset=function(r,s,o){var a=e._bin,l=[".notdef"],c=r[s];if(s++,c==0)for(var u=0;u<o;u++){var f=a.readUshort(r,s);s+=2,l.push(f)}else{if(c!=1&&c!=2)throw"error: format: "+c;for(;l.length<o;){f=a.readUshort(r,s),s+=2;var d=0;for(c==1?(d=r[s],s++):(d=a.readUshort(r,s),s+=2),u=0;u<=d;u++)l.push(f),f++}}return l},e.CFF.readIndex=function(r,s,o){var a=e._bin,l=a.readUshort(r,s)+1,c=r[s+=2];if(s++,c==1)for(var u=0;u<l;u++)o.push(r[s+u]);else if(c==2)for(u=0;u<l;u++)o.push(a.readUshort(r,s+2*u));else if(c==3)for(u=0;u<l;u++)o.push(16777215&a.readUint(r,s+3*u-1));else if(l!=1)throw"unsupported offset size: "+c+", count: "+l;return(s+=l*c)-1},e.CFF.getCharString=function(r,s,o){var a=e._bin,l=r[s],c=r[s+1];r[s+2],r[s+3],r[s+4];var u=1,f=null,d=null;l<=20&&(f=l,u=1),l==12&&(f=100*l+c,u=2),21<=l&&l<=27&&(f=l,u=1),l==28&&(d=a.readShort(r,s+1),u=3),29<=l&&l<=31&&(f=l,u=1),32<=l&&l<=246&&(d=l-139,u=1),247<=l&&l<=250&&(d=256*(l-247)+c+108,u=2),251<=l&&l<=254&&(d=256*-(l-251)-c-108,u=2),l==255&&(d=a.readInt(r,s+1)/65535,u=5),o.val=d??"o"+f,o.size=u},e.CFF.readCharString=function(r,s,o){for(var a=s+o,l=e._bin,c=[];s<a;){var u=r[s],f=r[s+1];r[s+2],r[s+3],r[s+4];var d=1,h=null,g=null;u<=20&&(h=u,d=1),u==12&&(h=100*u+f,d=2),u!=19&&u!=20||(h=u,d=2),21<=u&&u<=27&&(h=u,d=1),u==28&&(g=l.readShort(r,s+1),d=3),29<=u&&u<=31&&(h=u,d=1),32<=u&&u<=246&&(g=u-139,d=1),247<=u&&u<=250&&(g=256*(u-247)+f+108,d=2),251<=u&&u<=254&&(g=256*-(u-251)-f-108,d=2),u==255&&(g=l.readInt(r,s+1)/65535,d=5),c.push(g??"o"+h),s+=d}return c},e.CFF.readDict=function(r,s,o){for(var a=e._bin,l={},c=[];s<o;){var u=r[s],f=r[s+1];r[s+2],r[s+3],r[s+4];var d=1,h=null,g=null;if(u==28&&(g=a.readShort(r,s+1),d=3),u==29&&(g=a.readInt(r,s+1),d=5),32<=u&&u<=246&&(g=u-139,d=1),247<=u&&u<=250&&(g=256*(u-247)+f+108,d=2),251<=u&&u<=254&&(g=256*-(u-251)-f-108,d=2),u==255)throw g=a.readInt(r,s+1)/65535,d=5,"unknown number";if(u==30){var _=[];for(d=1;;){var x=r[s+d];d++;var y=x>>4,M=15&x;if(y!=15&&_.push(y),M!=15&&_.push(M),M==15)break}for(var b="",A=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],T=0;T<_.length;T++)b+=A[_[T]];g=parseFloat(b)}u<=21&&(h=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][u],d=1,u==12&&(h=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][f],d=2)),h!=null?(l[h]=c.length==1?c[0]:c,c=[]):c.push(g),s+=d}return l},e.cmap={},e.cmap.parse=function(r,s,o){r=new Uint8Array(r.buffer,s,o),s=0;var a=e._bin,l={};a.readUshort(r,s),s+=2;var c=a.readUshort(r,s);s+=2;var u=[];l.tables=[];for(var f=0;f<c;f++){var d=a.readUshort(r,s);s+=2;var h=a.readUshort(r,s);s+=2;var g=a.readUint(r,s);s+=4;var _="p"+d+"e"+h,x=u.indexOf(g);if(x==-1){var y;x=l.tables.length,u.push(g);var M=a.readUshort(r,g);M==0?y=e.cmap.parse0(r,g):M==4?y=e.cmap.parse4(r,g):M==6?y=e.cmap.parse6(r,g):M==12?y=e.cmap.parse12(r,g):console.debug("unknown format: "+M,d,h,g),l.tables.push(y)}if(l[_]!=null)throw"multiple tables for one platform+encoding";l[_]=x}return l},e.cmap.parse0=function(r,s){var o=e._bin,a={};a.format=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);s+=2,o.readUshort(r,s),s+=2,a.map=[];for(var c=0;c<l-6;c++)a.map.push(r[s+c]);return a},e.cmap.parse4=function(r,s){var o=e._bin,a=s,l={};l.format=o.readUshort(r,s),s+=2;var c=o.readUshort(r,s);s+=2,o.readUshort(r,s),s+=2;var u=o.readUshort(r,s);s+=2;var f=u/2;l.searchRange=o.readUshort(r,s),s+=2,l.entrySelector=o.readUshort(r,s),s+=2,l.rangeShift=o.readUshort(r,s),s+=2,l.endCount=o.readUshorts(r,s,f),s+=2*f,s+=2,l.startCount=o.readUshorts(r,s,f),s+=2*f,l.idDelta=[];for(var d=0;d<f;d++)l.idDelta.push(o.readShort(r,s)),s+=2;for(l.idRangeOffset=o.readUshorts(r,s,f),s+=2*f,l.glyphIdArray=[];s<a+c;)l.glyphIdArray.push(o.readUshort(r,s)),s+=2;return l},e.cmap.parse6=function(r,s){var o=e._bin,a={};a.format=o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2,a.firstCode=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);s+=2,a.glyphIdArray=[];for(var c=0;c<l;c++)a.glyphIdArray.push(o.readUshort(r,s)),s+=2;return a},e.cmap.parse12=function(r,s){var o=e._bin,a={};a.format=o.readUshort(r,s),s+=2,s+=2,o.readUint(r,s),s+=4,o.readUint(r,s),s+=4;var l=o.readUint(r,s);s+=4,a.groups=[];for(var c=0;c<l;c++){var u=s+12*c,f=o.readUint(r,u+0),d=o.readUint(r,u+4),h=o.readUint(r,u+8);a.groups.push([f,d,h])}return a},e.glyf={},e.glyf.parse=function(r,s,o,a){for(var l=[],c=0;c<a.maxp.numGlyphs;c++)l.push(null);return l},e.glyf._parseGlyf=function(r,s){var o=e._bin,a=r._data,l=e._tabOffset(a,"glyf",r._offset)+r.loca[s];if(r.loca[s]==r.loca[s+1])return null;var c={};if(c.noc=o.readShort(a,l),l+=2,c.xMin=o.readShort(a,l),l+=2,c.yMin=o.readShort(a,l),l+=2,c.xMax=o.readShort(a,l),l+=2,c.yMax=o.readShort(a,l),l+=2,c.xMin>=c.xMax||c.yMin>=c.yMax)return null;if(c.noc>0){c.endPts=[];for(var u=0;u<c.noc;u++)c.endPts.push(o.readUshort(a,l)),l+=2;var f=o.readUshort(a,l);if(l+=2,a.length-l<f)return null;c.instructions=o.readBytes(a,l,f),l+=f;var d=c.endPts[c.noc-1]+1;for(c.flags=[],u=0;u<d;u++){var h=a[l];if(l++,c.flags.push(h),(8&h)!=0){var g=a[l];l++;for(var _=0;_<g;_++)c.flags.push(h),u++}}for(c.xs=[],u=0;u<d;u++){var x=(2&c.flags[u])!=0,y=(16&c.flags[u])!=0;x?(c.xs.push(y?a[l]:-a[l]),l++):y?c.xs.push(0):(c.xs.push(o.readShort(a,l)),l+=2)}for(c.ys=[],u=0;u<d;u++)x=(4&c.flags[u])!=0,y=(32&c.flags[u])!=0,x?(c.ys.push(y?a[l]:-a[l]),l++):y?c.ys.push(0):(c.ys.push(o.readShort(a,l)),l+=2);var M=0,b=0;for(u=0;u<d;u++)M+=c.xs[u],b+=c.ys[u],c.xs[u]=M,c.ys[u]=b}else{var A;c.parts=[];do{A=o.readUshort(a,l),l+=2;var T={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(c.parts.push(T),T.glyphIndex=o.readUshort(a,l),l+=2,1&A){var P=o.readShort(a,l);l+=2;var k=o.readShort(a,l);l+=2}else P=o.readInt8(a,l),l++,k=o.readInt8(a,l),l++;2&A?(T.m.tx=P,T.m.ty=k):(T.p1=P,T.p2=k),8&A?(T.m.a=T.m.d=o.readF2dot14(a,l),l+=2):64&A?(T.m.a=o.readF2dot14(a,l),l+=2,T.m.d=o.readF2dot14(a,l),l+=2):128&A&&(T.m.a=o.readF2dot14(a,l),l+=2,T.m.b=o.readF2dot14(a,l),l+=2,T.m.c=o.readF2dot14(a,l),l+=2,T.m.d=o.readF2dot14(a,l),l+=2)}while(32&A);if(256&A){var N=o.readUshort(a,l);for(l+=2,c.instr=[],u=0;u<N;u++)c.instr.push(a[l]),l++}}return c},e.GDEF={},e.GDEF.parse=function(r,s,o,a){var l=s;s+=4;var c=e._bin.readUshort(r,s);return{glyphClassDef:c===0?null:e._lctf.readClassDef(r,l+c)}},e.GPOS={},e.GPOS.parse=function(r,s,o,a){return e._lctf.parse(r,s,o,a,e.GPOS.subt)},e.GPOS.subt=function(r,s,o,a){var l=e._bin,c=o,u={};if(u.fmt=l.readUshort(r,o),o+=2,s==1||s==2||s==3||s==7||s==8&&u.fmt<=2){var f=l.readUshort(r,o);o+=2,u.coverage=e._lctf.readCoverage(r,f+c)}if(s==1&&u.fmt==1){var d=l.readUshort(r,o);o+=2,d!=0&&(u.pos=e.GPOS.readValueRecord(r,o,d))}else if(s==2&&u.fmt>=1&&u.fmt<=2){d=l.readUshort(r,o),o+=2;var h=l.readUshort(r,o);o+=2;var g=e._lctf.numOfOnes(d),_=e._lctf.numOfOnes(h);if(u.fmt==1){u.pairsets=[];var x=l.readUshort(r,o);o+=2;for(var y=0;y<x;y++){var M=c+l.readUshort(r,o);o+=2;var b=l.readUshort(r,M);M+=2;for(var A=[],T=0;T<b;T++){var P=l.readUshort(r,M);M+=2,d!=0&&(V=e.GPOS.readValueRecord(r,M,d),M+=2*g),h!=0&&(K=e.GPOS.readValueRecord(r,M,h),M+=2*_),A.push({gid2:P,val1:V,val2:K})}u.pairsets.push(A)}}if(u.fmt==2){var k=l.readUshort(r,o);o+=2;var N=l.readUshort(r,o);o+=2;var z=l.readUshort(r,o);o+=2;var R=l.readUshort(r,o);for(o+=2,u.classDef1=e._lctf.readClassDef(r,c+k),u.classDef2=e._lctf.readClassDef(r,c+N),u.matrix=[],y=0;y<z;y++){var F=[];for(T=0;T<R;T++){var V=null,K=null;d!=0&&(V=e.GPOS.readValueRecord(r,o,d),o+=2*g),h!=0&&(K=e.GPOS.readValueRecord(r,o,h),o+=2*_),F.push({val1:V,val2:K})}u.matrix.push(F)}}}else if(s==4&&u.fmt==1)u.markCoverage=e._lctf.readCoverage(r,l.readUshort(r,o)+c),u.baseCoverage=e._lctf.readCoverage(r,l.readUshort(r,o+2)+c),u.markClassCount=l.readUshort(r,o+4),u.markArray=e.GPOS.readMarkArray(r,l.readUshort(r,o+6)+c),u.baseArray=e.GPOS.readBaseArray(r,l.readUshort(r,o+8)+c,u.markClassCount);else if(s==6&&u.fmt==1)u.mark1Coverage=e._lctf.readCoverage(r,l.readUshort(r,o)+c),u.mark2Coverage=e._lctf.readCoverage(r,l.readUshort(r,o+2)+c),u.markClassCount=l.readUshort(r,o+4),u.mark1Array=e.GPOS.readMarkArray(r,l.readUshort(r,o+6)+c),u.mark2Array=e.GPOS.readBaseArray(r,l.readUshort(r,o+8)+c,u.markClassCount);else{if(s==9&&u.fmt==1){var W=l.readUshort(r,o);o+=2;var ne=l.readUint(r,o);if(o+=4,a.ltype==9)a.ltype=W;else if(a.ltype!=W)throw"invalid extension substitution";return e.GPOS.subt(r,a.ltype,c+ne)}console.debug("unsupported GPOS table LookupType",s,"format",u.fmt)}return u},e.GPOS.readValueRecord=function(r,s,o){var a=e._bin,l=[];return l.push(1&o?a.readShort(r,s):0),s+=1&o?2:0,l.push(2&o?a.readShort(r,s):0),s+=2&o?2:0,l.push(4&o?a.readShort(r,s):0),s+=4&o?2:0,l.push(8&o?a.readShort(r,s):0),s+=8&o?2:0,l},e.GPOS.readBaseArray=function(r,s,o){var a=e._bin,l=[],c=s,u=a.readUshort(r,s);s+=2;for(var f=0;f<u;f++){for(var d=[],h=0;h<o;h++)d.push(e.GPOS.readAnchorRecord(r,c+a.readUshort(r,s))),s+=2;l.push(d)}return l},e.GPOS.readMarkArray=function(r,s){var o=e._bin,a=[],l=s,c=o.readUshort(r,s);s+=2;for(var u=0;u<c;u++){var f=e.GPOS.readAnchorRecord(r,o.readUshort(r,s+2)+l);f.markClass=o.readUshort(r,s),a.push(f),s+=4}return a},e.GPOS.readAnchorRecord=function(r,s){var o=e._bin,a={};return a.fmt=o.readUshort(r,s),a.x=o.readShort(r,s+2),a.y=o.readShort(r,s+4),a},e.GSUB={},e.GSUB.parse=function(r,s,o,a){return e._lctf.parse(r,s,o,a,e.GSUB.subt)},e.GSUB.subt=function(r,s,o,a){var l=e._bin,c=o,u={};if(u.fmt=l.readUshort(r,o),o+=2,s!=1&&s!=2&&s!=4&&s!=5&&s!=6)return null;if(s==1||s==2||s==4||s==5&&u.fmt<=2||s==6&&u.fmt<=2){var f=l.readUshort(r,o);o+=2,u.coverage=e._lctf.readCoverage(r,c+f)}if(s==1&&u.fmt>=1&&u.fmt<=2){if(u.fmt==1)u.delta=l.readShort(r,o),o+=2;else if(u.fmt==2){var d=l.readUshort(r,o);o+=2,u.newg=l.readUshorts(r,o,d),o+=2*u.newg.length}}else if(s==2&&u.fmt==1){d=l.readUshort(r,o),o+=2,u.seqs=[];for(var h=0;h<d;h++){var g=l.readUshort(r,o)+c;o+=2;var _=l.readUshort(r,g);u.seqs.push(l.readUshorts(r,g+2,_))}}else if(s==4)for(u.vals=[],d=l.readUshort(r,o),o+=2,h=0;h<d;h++){var x=l.readUshort(r,o);o+=2,u.vals.push(e.GSUB.readLigatureSet(r,c+x))}else if(s==5&&u.fmt==2){if(u.fmt==2){var y=l.readUshort(r,o);o+=2,u.cDef=e._lctf.readClassDef(r,c+y),u.scset=[];var M=l.readUshort(r,o);for(o+=2,h=0;h<M;h++){var b=l.readUshort(r,o);o+=2,u.scset.push(b==0?null:e.GSUB.readSubClassSet(r,c+b))}}}else if(s==6&&u.fmt==3){if(u.fmt==3){for(h=0;h<3;h++){d=l.readUshort(r,o),o+=2;for(var A=[],T=0;T<d;T++)A.push(e._lctf.readCoverage(r,c+l.readUshort(r,o+2*T)));o+=2*d,h==0&&(u.backCvg=A),h==1&&(u.inptCvg=A),h==2&&(u.ahedCvg=A)}d=l.readUshort(r,o),o+=2,u.lookupRec=e.GSUB.readSubstLookupRecords(r,o,d)}}else{if(s==7&&u.fmt==1){var P=l.readUshort(r,o);o+=2;var k=l.readUint(r,o);if(o+=4,a.ltype==9)a.ltype=P;else if(a.ltype!=P)throw"invalid extension substitution";return e.GSUB.subt(r,a.ltype,c+k)}console.debug("unsupported GSUB table LookupType",s,"format",u.fmt)}return u},e.GSUB.readSubClassSet=function(r,s){var o=e._bin.readUshort,a=s,l=[],c=o(r,s);s+=2;for(var u=0;u<c;u++){var f=o(r,s);s+=2,l.push(e.GSUB.readSubClassRule(r,a+f))}return l},e.GSUB.readSubClassRule=function(r,s){var o=e._bin.readUshort,a={},l=o(r,s),c=o(r,s+=2);s+=2,a.input=[];for(var u=0;u<l-1;u++)a.input.push(o(r,s)),s+=2;return a.substLookupRecords=e.GSUB.readSubstLookupRecords(r,s,c),a},e.GSUB.readSubstLookupRecords=function(r,s,o){for(var a=e._bin.readUshort,l=[],c=0;c<o;c++)l.push(a(r,s),a(r,s+2)),s+=4;return l},e.GSUB.readChainSubClassSet=function(r,s){var o=e._bin,a=s,l=[],c=o.readUshort(r,s);s+=2;for(var u=0;u<c;u++){var f=o.readUshort(r,s);s+=2,l.push(e.GSUB.readChainSubClassRule(r,a+f))}return l},e.GSUB.readChainSubClassRule=function(r,s){for(var o=e._bin,a={},l=["backtrack","input","lookahead"],c=0;c<l.length;c++){var u=o.readUshort(r,s);s+=2,c==1&&u--,a[l[c]]=o.readUshorts(r,s,u),s+=2*a[l[c]].length}return u=o.readUshort(r,s),s+=2,a.subst=o.readUshorts(r,s,2*u),s+=2*a.subst.length,a},e.GSUB.readLigatureSet=function(r,s){var o=e._bin,a=s,l=[],c=o.readUshort(r,s);s+=2;for(var u=0;u<c;u++){var f=o.readUshort(r,s);s+=2,l.push(e.GSUB.readLigature(r,a+f))}return l},e.GSUB.readLigature=function(r,s){var o=e._bin,a={chain:[]};a.nglyph=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);s+=2;for(var c=0;c<l-1;c++)a.chain.push(o.readUshort(r,s)),s+=2;return a},e.head={},e.head.parse=function(r,s,o){var a=e._bin,l={};return a.readFixed(r,s),s+=4,l.fontRevision=a.readFixed(r,s),s+=4,a.readUint(r,s),s+=4,a.readUint(r,s),s+=4,l.flags=a.readUshort(r,s),s+=2,l.unitsPerEm=a.readUshort(r,s),s+=2,l.created=a.readUint64(r,s),s+=8,l.modified=a.readUint64(r,s),s+=8,l.xMin=a.readShort(r,s),s+=2,l.yMin=a.readShort(r,s),s+=2,l.xMax=a.readShort(r,s),s+=2,l.yMax=a.readShort(r,s),s+=2,l.macStyle=a.readUshort(r,s),s+=2,l.lowestRecPPEM=a.readUshort(r,s),s+=2,l.fontDirectionHint=a.readShort(r,s),s+=2,l.indexToLocFormat=a.readShort(r,s),s+=2,l.glyphDataFormat=a.readShort(r,s),s+=2,l},e.hhea={},e.hhea.parse=function(r,s,o){var a=e._bin,l={};return a.readFixed(r,s),s+=4,l.ascender=a.readShort(r,s),s+=2,l.descender=a.readShort(r,s),s+=2,l.lineGap=a.readShort(r,s),s+=2,l.advanceWidthMax=a.readUshort(r,s),s+=2,l.minLeftSideBearing=a.readShort(r,s),s+=2,l.minRightSideBearing=a.readShort(r,s),s+=2,l.xMaxExtent=a.readShort(r,s),s+=2,l.caretSlopeRise=a.readShort(r,s),s+=2,l.caretSlopeRun=a.readShort(r,s),s+=2,l.caretOffset=a.readShort(r,s),s+=2,s+=8,l.metricDataFormat=a.readShort(r,s),s+=2,l.numberOfHMetrics=a.readUshort(r,s),s+=2,l},e.hmtx={},e.hmtx.parse=function(r,s,o,a){for(var l=e._bin,c={aWidth:[],lsBearing:[]},u=0,f=0,d=0;d<a.maxp.numGlyphs;d++)d<a.hhea.numberOfHMetrics&&(u=l.readUshort(r,s),s+=2,f=l.readShort(r,s),s+=2),c.aWidth.push(u),c.lsBearing.push(f);return c},e.kern={},e.kern.parse=function(r,s,o,a){var l=e._bin,c=l.readUshort(r,s);if(s+=2,c==1)return e.kern.parseV1(r,s-2,o,a);var u=l.readUshort(r,s);s+=2;for(var f={glyph1:[],rval:[]},d=0;d<u;d++){s+=2,o=l.readUshort(r,s),s+=2;var h=l.readUshort(r,s);s+=2;var g=h>>>8;if((g&=15)!=0)throw"unknown kern table format: "+g;s=e.kern.readFormat0(r,s,f)}return f},e.kern.parseV1=function(r,s,o,a){var l=e._bin;l.readFixed(r,s),s+=4;var c=l.readUint(r,s);s+=4;for(var u={glyph1:[],rval:[]},f=0;f<c;f++){l.readUint(r,s),s+=4;var d=l.readUshort(r,s);s+=2,l.readUshort(r,s),s+=2;var h=d>>>8;if((h&=15)!=0)throw"unknown kern table format: "+h;s=e.kern.readFormat0(r,s,u)}return u},e.kern.readFormat0=function(r,s,o){var a=e._bin,l=-1,c=a.readUshort(r,s);s+=2,a.readUshort(r,s),s+=2,a.readUshort(r,s),s+=2,a.readUshort(r,s),s+=2;for(var u=0;u<c;u++){var f=a.readUshort(r,s);s+=2;var d=a.readUshort(r,s);s+=2;var h=a.readShort(r,s);s+=2,f!=l&&(o.glyph1.push(f),o.rval.push({glyph2:[],vals:[]}));var g=o.rval[o.rval.length-1];g.glyph2.push(d),g.vals.push(h),l=f}return s},e.loca={},e.loca.parse=function(r,s,o,a){var l=e._bin,c=[],u=a.head.indexToLocFormat,f=a.maxp.numGlyphs+1;if(u==0)for(var d=0;d<f;d++)c.push(l.readUshort(r,s+(d<<1))<<1);if(u==1)for(d=0;d<f;d++)c.push(l.readUint(r,s+(d<<2)));return c},e.maxp={},e.maxp.parse=function(r,s,o){var a=e._bin,l={},c=a.readUint(r,s);return s+=4,l.numGlyphs=a.readUshort(r,s),s+=2,c==65536&&(l.maxPoints=a.readUshort(r,s),s+=2,l.maxContours=a.readUshort(r,s),s+=2,l.maxCompositePoints=a.readUshort(r,s),s+=2,l.maxCompositeContours=a.readUshort(r,s),s+=2,l.maxZones=a.readUshort(r,s),s+=2,l.maxTwilightPoints=a.readUshort(r,s),s+=2,l.maxStorage=a.readUshort(r,s),s+=2,l.maxFunctionDefs=a.readUshort(r,s),s+=2,l.maxInstructionDefs=a.readUshort(r,s),s+=2,l.maxStackElements=a.readUshort(r,s),s+=2,l.maxSizeOfInstructions=a.readUshort(r,s),s+=2,l.maxComponentElements=a.readUshort(r,s),s+=2,l.maxComponentDepth=a.readUshort(r,s),s+=2),l},e.name={},e.name.parse=function(r,s,o){var a=e._bin,l={};a.readUshort(r,s),s+=2;var c=a.readUshort(r,s);s+=2,a.readUshort(r,s);for(var u,f=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],d=s+=2,h=0;h<c;h++){var g=a.readUshort(r,s);s+=2;var _=a.readUshort(r,s);s+=2;var x=a.readUshort(r,s);s+=2;var y=a.readUshort(r,s);s+=2;var M=a.readUshort(r,s);s+=2;var b=a.readUshort(r,s);s+=2;var A,T=f[y],P=d+12*c+b;if(g==0)A=a.readUnicode(r,P,M/2);else if(g==3&&_==0)A=a.readUnicode(r,P,M/2);else if(_==0)A=a.readASCII(r,P,M);else if(_==1)A=a.readUnicode(r,P,M/2);else if(_==3)A=a.readUnicode(r,P,M/2);else{if(g!=1)throw"unknown encoding "+_+", platformID: "+g;A=a.readASCII(r,P,M),console.debug("reading unknown MAC encoding "+_+" as ASCII")}var k="p"+g+","+x.toString(16);l[k]==null&&(l[k]={}),l[k][T!==void 0?T:y]=A,l[k]._lang=x}for(var N in l)if(l[N].postScriptName!=null&&l[N]._lang==1033)return l[N];for(var N in l)if(l[N].postScriptName!=null&&l[N]._lang==0)return l[N];for(var N in l)if(l[N].postScriptName!=null&&l[N]._lang==3084)return l[N];for(var N in l)if(l[N].postScriptName!=null)return l[N];for(var N in l){u=N;break}return console.debug("returning name table with languageID "+l[u]._lang),l[u]},e["OS/2"]={},e["OS/2"].parse=function(r,s,o){var a=e._bin.readUshort(r,s);s+=2;var l={};if(a==0)e["OS/2"].version0(r,s,l);else if(a==1)e["OS/2"].version1(r,s,l);else if(a==2||a==3||a==4)e["OS/2"].version2(r,s,l);else{if(a!=5)throw"unknown OS/2 table version: "+a;e["OS/2"].version5(r,s,l)}return l},e["OS/2"].version0=function(r,s,o){var a=e._bin;return o.xAvgCharWidth=a.readShort(r,s),s+=2,o.usWeightClass=a.readUshort(r,s),s+=2,o.usWidthClass=a.readUshort(r,s),s+=2,o.fsType=a.readUshort(r,s),s+=2,o.ySubscriptXSize=a.readShort(r,s),s+=2,o.ySubscriptYSize=a.readShort(r,s),s+=2,o.ySubscriptXOffset=a.readShort(r,s),s+=2,o.ySubscriptYOffset=a.readShort(r,s),s+=2,o.ySuperscriptXSize=a.readShort(r,s),s+=2,o.ySuperscriptYSize=a.readShort(r,s),s+=2,o.ySuperscriptXOffset=a.readShort(r,s),s+=2,o.ySuperscriptYOffset=a.readShort(r,s),s+=2,o.yStrikeoutSize=a.readShort(r,s),s+=2,o.yStrikeoutPosition=a.readShort(r,s),s+=2,o.sFamilyClass=a.readShort(r,s),s+=2,o.panose=a.readBytes(r,s,10),s+=10,o.ulUnicodeRange1=a.readUint(r,s),s+=4,o.ulUnicodeRange2=a.readUint(r,s),s+=4,o.ulUnicodeRange3=a.readUint(r,s),s+=4,o.ulUnicodeRange4=a.readUint(r,s),s+=4,o.achVendID=[a.readInt8(r,s),a.readInt8(r,s+1),a.readInt8(r,s+2),a.readInt8(r,s+3)],s+=4,o.fsSelection=a.readUshort(r,s),s+=2,o.usFirstCharIndex=a.readUshort(r,s),s+=2,o.usLastCharIndex=a.readUshort(r,s),s+=2,o.sTypoAscender=a.readShort(r,s),s+=2,o.sTypoDescender=a.readShort(r,s),s+=2,o.sTypoLineGap=a.readShort(r,s),s+=2,o.usWinAscent=a.readUshort(r,s),s+=2,o.usWinDescent=a.readUshort(r,s),s+=2},e["OS/2"].version1=function(r,s,o){var a=e._bin;return s=e["OS/2"].version0(r,s,o),o.ulCodePageRange1=a.readUint(r,s),s+=4,o.ulCodePageRange2=a.readUint(r,s),s+=4},e["OS/2"].version2=function(r,s,o){var a=e._bin;return s=e["OS/2"].version1(r,s,o),o.sxHeight=a.readShort(r,s),s+=2,o.sCapHeight=a.readShort(r,s),s+=2,o.usDefault=a.readUshort(r,s),s+=2,o.usBreak=a.readUshort(r,s),s+=2,o.usMaxContext=a.readUshort(r,s),s+=2},e["OS/2"].version5=function(r,s,o){var a=e._bin;return s=e["OS/2"].version2(r,s,o),o.usLowerOpticalPointSize=a.readUshort(r,s),s+=2,o.usUpperOpticalPointSize=a.readUshort(r,s),s+=2},e.post={},e.post.parse=function(r,s,o){var a=e._bin,l={};return l.version=a.readFixed(r,s),s+=4,l.italicAngle=a.readFixed(r,s),s+=4,l.underlinePosition=a.readShort(r,s),s+=2,l.underlineThickness=a.readShort(r,s),s+=2,l},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(r,s){var o=r.cmap,a=-1;if(o.p0e4!=null?a=o.p0e4:o.p3e1!=null?a=o.p3e1:o.p1e0!=null?a=o.p1e0:o.p0e3!=null&&(a=o.p0e3),a==-1)throw"no familiar platform and encoding!";var l=o.tables[a];if(l.format==0)return s>=l.map.length?0:l.map[s];if(l.format==4){for(var c=-1,u=0;u<l.endCount.length;u++)if(s<=l.endCount[u]){c=u;break}return c==-1||l.startCount[c]>s?0:65535&(l.idRangeOffset[c]!=0?l.glyphIdArray[s-l.startCount[c]+(l.idRangeOffset[c]>>1)-(l.idRangeOffset.length-c)]:s+l.idDelta[c])}if(l.format==12){if(s>l.groups[l.groups.length-1][1])return 0;for(u=0;u<l.groups.length;u++){var f=l.groups[u];if(f[0]<=s&&s<=f[1])return f[2]+(s-f[0])}return 0}throw"unknown cmap table format "+l.format},e.U.glyphToPath=function(r,s){var o={cmds:[],crds:[]};if(r.SVG&&r.SVG.entries[s]){var a=r.SVG.entries[s];return a==null?o:(typeof a=="string"&&(a=e.SVG.toPath(a),r.SVG.entries[s]=a),a)}if(r.CFF){var l={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:r.CFF.Private?r.CFF.Private.defaultWidthX:0,open:!1},c=r.CFF,u=r.CFF.Private;if(c.ROS){for(var f=0;c.FDSelect[f+2]<=s;)f+=2;u=c.FDArray[c.FDSelect[f+1]].Private}e.U._drawCFF(r.CFF.CharStrings[s],l,c,u,o)}else r.glyf&&e.U._drawGlyf(s,r,o);return o},e.U._drawGlyf=function(r,s,o){var a=s.glyf[r];a==null&&(a=s.glyf[r]=e.glyf._parseGlyf(s,r)),a!=null&&(a.noc>-1?e.U._simpleGlyph(a,o):e.U._compoGlyph(a,s,o))},e.U._simpleGlyph=function(r,s){for(var o=0;o<r.noc;o++){for(var a=o==0?0:r.endPts[o-1]+1,l=r.endPts[o],c=a;c<=l;c++){var u=c==a?l:c-1,f=c==l?a:c+1,d=1&r.flags[c],h=1&r.flags[u],g=1&r.flags[f],_=r.xs[c],x=r.ys[c];if(c==a)if(d){if(!h){e.U.P.moveTo(s,_,x);continue}e.U.P.moveTo(s,r.xs[u],r.ys[u])}else h?e.U.P.moveTo(s,r.xs[u],r.ys[u]):e.U.P.moveTo(s,(r.xs[u]+_)/2,(r.ys[u]+x)/2);d?h&&e.U.P.lineTo(s,_,x):g?e.U.P.qcurveTo(s,_,x,r.xs[f],r.ys[f]):e.U.P.qcurveTo(s,_,x,(_+r.xs[f])/2,(x+r.ys[f])/2)}e.U.P.closePath(s)}},e.U._compoGlyph=function(r,s,o){for(var a=0;a<r.parts.length;a++){var l={cmds:[],crds:[]},c=r.parts[a];e.U._drawGlyf(c.glyphIndex,s,l);for(var u=c.m,f=0;f<l.crds.length;f+=2){var d=l.crds[f],h=l.crds[f+1];o.crds.push(d*u.a+h*u.b+u.tx),o.crds.push(d*u.c+h*u.d+u.ty)}for(f=0;f<l.cmds.length;f++)o.cmds.push(l.cmds[f])}},e.U._getGlyphClass=function(r,s){var o=e._lctf.getInterval(s,r);return o==-1?0:s[o+2]},e.U._applySubs=function(r,s,o,a){for(var l=r.length-s-1,c=0;c<o.tabs.length;c++)if(o.tabs[c]!=null){var u,f=o.tabs[c];if(!f.coverage||(u=e._lctf.coverageIndex(f.coverage,r[s]))!=-1){if(o.ltype==1)r[s],f.fmt==1?r[s]=r[s]+f.delta:r[s]=f.newg[u];else if(o.ltype==4)for(var d=f.vals[u],h=0;h<d.length;h++){var g=d[h],_=g.chain.length;if(!(_>l)){for(var x=!0,y=0,M=0;M<_;M++){for(;r[s+y+(1+M)]==-1;)y++;g.chain[M]!=r[s+y+(1+M)]&&(x=!1)}if(x){for(r[s]=g.nglyph,M=0;M<_+y;M++)r[s+M+1]=-1;break}}}else if(o.ltype==5&&f.fmt==2)for(var b=e._lctf.getInterval(f.cDef,r[s]),A=f.cDef[b+2],T=f.scset[A],P=0;P<T.length;P++){var k=T[P],N=k.input;if(!(N.length>l)){for(x=!0,M=0;M<N.length;M++){var z=e._lctf.getInterval(f.cDef,r[s+1+M]);if(b==-1&&f.cDef[z+2]!=N[M]){x=!1;break}}if(x){var R=k.substLookupRecords;for(h=0;h<R.length;h+=2)R[h],R[h+1]}}}else if(o.ltype==6&&f.fmt==3){if(!e.U._glsCovered(r,f.backCvg,s-f.backCvg.length)||!e.U._glsCovered(r,f.inptCvg,s)||!e.U._glsCovered(r,f.ahedCvg,s+f.inptCvg.length))continue;var F=f.lookupRec;for(P=0;P<F.length;P+=2){b=F[P];var V=a[F[P+1]];e.U._applySubs(r,s+b,V,a)}}}}},e.U._glsCovered=function(r,s,o){for(var a=0;a<s.length;a++)if(e._lctf.coverageIndex(s[a],r[o+a])==-1)return!1;return!0},e.U.glyphsToPath=function(r,s,o){for(var a={cmds:[],crds:[]},l=0,c=0;c<s.length;c++){var u=s[c];if(u!=-1){for(var f=c<s.length-1&&s[c+1]!=-1?s[c+1]:0,d=e.U.glyphToPath(r,u),h=0;h<d.crds.length;h+=2)a.crds.push(d.crds[h]+l),a.crds.push(d.crds[h+1]);for(o&&a.cmds.push(o),h=0;h<d.cmds.length;h++)a.cmds.push(d.cmds[h]);o&&a.cmds.push("X"),l+=r.hmtx.aWidth[u],c<s.length-1&&(l+=e.U.getPairAdjustment(r,u,f))}}return a},e.U.P={},e.U.P.moveTo=function(r,s,o){r.cmds.push("M"),r.crds.push(s,o)},e.U.P.lineTo=function(r,s,o){r.cmds.push("L"),r.crds.push(s,o)},e.U.P.curveTo=function(r,s,o,a,l,c,u){r.cmds.push("C"),r.crds.push(s,o,a,l,c,u)},e.U.P.qcurveTo=function(r,s,o,a,l){r.cmds.push("Q"),r.crds.push(s,o,a,l)},e.U.P.closePath=function(r){r.cmds.push("Z")},e.U._drawCFF=function(r,s,o,a,l){for(var c=s.stack,u=s.nStems,f=s.haveWidth,d=s.width,h=s.open,g=0,_=s.x,x=s.y,y=0,M=0,b=0,A=0,T=0,P=0,k=0,N=0,z=0,R=0,F={val:0,size:0};g<r.length;){e.CFF.getCharString(r,g,F);var V=F.val;if(g+=F.size,V=="o1"||V=="o18")c.length%2!=0&&!f&&(d=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,f=!0;else if(V=="o3"||V=="o23")c.length%2!=0&&!f&&(d=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,f=!0;else if(V=="o4")c.length>1&&!f&&(d=c.shift()+a.nominalWidthX,f=!0),h&&e.U.P.closePath(l),x+=c.pop(),e.U.P.moveTo(l,_,x),h=!0;else if(V=="o5")for(;c.length>0;)_+=c.shift(),x+=c.shift(),e.U.P.lineTo(l,_,x);else if(V=="o6"||V=="o7")for(var K=c.length,W=V=="o6",ne=0;ne<K;ne++){var re=c.shift();W?_+=re:x+=re,W=!W,e.U.P.lineTo(l,_,x)}else if(V=="o8"||V=="o24"){K=c.length;for(var de=0;de+6<=K;)y=_+c.shift(),M=x+c.shift(),b=y+c.shift(),A=M+c.shift(),_=b+c.shift(),x=A+c.shift(),e.U.P.curveTo(l,y,M,b,A,_,x),de+=6;V=="o24"&&(_+=c.shift(),x+=c.shift(),e.U.P.lineTo(l,_,x))}else{if(V=="o11")break;if(V=="o1234"||V=="o1235"||V=="o1236"||V=="o1237")V=="o1234"&&(M=x,b=(y=_+c.shift())+c.shift(),R=A=M+c.shift(),P=A,N=x,_=(k=(T=(z=b+c.shift())+c.shift())+c.shift())+c.shift(),e.U.P.curveTo(l,y,M,b,A,z,R),e.U.P.curveTo(l,T,P,k,N,_,x)),V=="o1235"&&(y=_+c.shift(),M=x+c.shift(),b=y+c.shift(),A=M+c.shift(),z=b+c.shift(),R=A+c.shift(),T=z+c.shift(),P=R+c.shift(),k=T+c.shift(),N=P+c.shift(),_=k+c.shift(),x=N+c.shift(),c.shift(),e.U.P.curveTo(l,y,M,b,A,z,R),e.U.P.curveTo(l,T,P,k,N,_,x)),V=="o1236"&&(y=_+c.shift(),M=x+c.shift(),b=y+c.shift(),R=A=M+c.shift(),P=A,k=(T=(z=b+c.shift())+c.shift())+c.shift(),N=P+c.shift(),_=k+c.shift(),e.U.P.curveTo(l,y,M,b,A,z,R),e.U.P.curveTo(l,T,P,k,N,_,x)),V=="o1237"&&(y=_+c.shift(),M=x+c.shift(),b=y+c.shift(),A=M+c.shift(),z=b+c.shift(),R=A+c.shift(),T=z+c.shift(),P=R+c.shift(),k=T+c.shift(),N=P+c.shift(),Math.abs(k-_)>Math.abs(N-x)?_=k+c.shift():x=N+c.shift(),e.U.P.curveTo(l,y,M,b,A,z,R),e.U.P.curveTo(l,T,P,k,N,_,x));else if(V=="o14"){if(c.length>0&&!f&&(d=c.shift()+o.nominalWidthX,f=!0),c.length==4){var X=c.shift(),$=c.shift(),J=c.shift(),j=c.shift(),se=e.CFF.glyphBySE(o,J),ve=e.CFF.glyphBySE(o,j);e.U._drawCFF(o.CharStrings[se],s,o,a,l),s.x=X,s.y=$,e.U._drawCFF(o.CharStrings[ve],s,o,a,l)}h&&(e.U.P.closePath(l),h=!1)}else if(V=="o19"||V=="o20")c.length%2!=0&&!f&&(d=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,f=!0,g+=u+7>>3;else if(V=="o21")c.length>2&&!f&&(d=c.shift()+a.nominalWidthX,f=!0),x+=c.pop(),_+=c.pop(),h&&e.U.P.closePath(l),e.U.P.moveTo(l,_,x),h=!0;else if(V=="o22")c.length>1&&!f&&(d=c.shift()+a.nominalWidthX,f=!0),_+=c.pop(),h&&e.U.P.closePath(l),e.U.P.moveTo(l,_,x),h=!0;else if(V=="o25"){for(;c.length>6;)_+=c.shift(),x+=c.shift(),e.U.P.lineTo(l,_,x);y=_+c.shift(),M=x+c.shift(),b=y+c.shift(),A=M+c.shift(),_=b+c.shift(),x=A+c.shift(),e.U.P.curveTo(l,y,M,b,A,_,x)}else if(V=="o26")for(c.length%2&&(_+=c.shift());c.length>0;)y=_,M=x+c.shift(),_=b=y+c.shift(),x=(A=M+c.shift())+c.shift(),e.U.P.curveTo(l,y,M,b,A,_,x);else if(V=="o27")for(c.length%2&&(x+=c.shift());c.length>0;)M=x,b=(y=_+c.shift())+c.shift(),A=M+c.shift(),_=b+c.shift(),x=A,e.U.P.curveTo(l,y,M,b,A,_,x);else if(V=="o10"||V=="o29"){var oe=V=="o10"?a:o;if(c.length==0)console.debug("error: empty stack");else{var he=c.pop(),ye=oe.Subrs[he+oe.Bias];s.x=_,s.y=x,s.nStems=u,s.haveWidth=f,s.width=d,s.open=h,e.U._drawCFF(ye,s,o,a,l),_=s.x,x=s.y,u=s.nStems,f=s.haveWidth,d=s.width,h=s.open}}else if(V=="o30"||V=="o31"){var Me=c.length,Pe=(de=0,V=="o31");for(de+=Me-(K=-3&Me);de<K;)Pe?(M=x,b=(y=_+c.shift())+c.shift(),x=(A=M+c.shift())+c.shift(),K-de==5?(_=b+c.shift(),de++):_=b,Pe=!1):(y=_,M=x+c.shift(),b=y+c.shift(),A=M+c.shift(),_=b+c.shift(),K-de==5?(x=A+c.shift(),de++):x=A,Pe=!0),e.U.P.curveTo(l,y,M,b,A,_,x),de+=4}else{if((V+"").charAt(0)=="o")throw console.debug("Unknown operation: "+V,r),V;c.push(V)}}}s.x=_,s.y=x,s.nStems=u,s.haveWidth=f,s.width=d,s.open=h};var t=e,i={Typr:t};return n.Typr=t,n.default=i,Object.defineProperty(n,"__esModule",{value:!0}),n}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function LW(){return function(n){var e=Uint8Array,t=Uint16Array,i=Uint32Array,r=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(V,K){for(var W=new t(31),ne=0;ne<31;++ne)W[ne]=K+=1<<V[ne-1];var re=new i(W[30]);for(ne=1;ne<30;++ne)for(var de=W[ne];de<W[ne+1];++de)re[de]=de-W[ne]<<5|ne;return[W,re]},l=a(r,2),c=l[0],u=l[1];c[28]=258,u[258]=28;for(var f=a(s,0)[0],d=new t(32768),h=0;h<32768;++h){var g=(43690&h)>>>1|(21845&h)<<1;g=(61680&(g=(52428&g)>>>2|(13107&g)<<2))>>>4|(3855&g)<<4,d[h]=((65280&g)>>>8|(255&g)<<8)>>>1}var _=function(V,K,W){for(var ne=V.length,re=0,de=new t(K);re<ne;++re)++de[V[re]-1];var X,$=new t(K);for(re=0;re<K;++re)$[re]=$[re-1]+de[re-1]<<1;{X=new t(1<<K);var J=15-K;for(re=0;re<ne;++re)if(V[re])for(var j=re<<4|V[re],se=K-V[re],ve=$[V[re]-1]++<<se,oe=ve|(1<<se)-1;ve<=oe;++ve)X[d[ve]>>>J]=j}return X},x=new e(288);for(h=0;h<144;++h)x[h]=8;for(h=144;h<256;++h)x[h]=9;for(h=256;h<280;++h)x[h]=7;for(h=280;h<288;++h)x[h]=8;var y=new e(32);for(h=0;h<32;++h)y[h]=5;var M=_(x,9),b=_(y,5),A=function(V){for(var K=V[0],W=1;W<V.length;++W)V[W]>K&&(K=V[W]);return K},T=function(V,K,W){var ne=K/8|0;return(V[ne]|V[ne+1]<<8)>>(7&K)&W},P=function(V,K){var W=K/8|0;return(V[W]|V[W+1]<<8|V[W+2]<<16)>>(7&K)},k=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],N=function(V,K,W){var ne=new Error(K||k[V]);if(ne.code=V,Error.captureStackTrace&&Error.captureStackTrace(ne,N),!W)throw ne;return ne},z=function(V,K,W){var ne=V.length;if(!ne||W&&!W.l&&ne<5)return K||new e(0);var re=!K||W,de=!W||W.i;W||(W={}),K||(K=new e(3*ne));var X,$=function(be){var fe=K.length;if(be>fe){var De=new e(Math.max(2*fe,be));De.set(K),K=De}},J=W.f||0,j=W.p||0,se=W.b||0,ve=W.l,oe=W.d,he=W.m,ye=W.n,Me=8*ne;do{if(!ve){W.f=J=T(V,j,1);var Pe=T(V,j+1,3);if(j+=3,!Pe){var Xe=V[(ot=((X=j)/8|0)+(7&X&&1)+4)-4]|V[ot-3]<<8,ht=ot+Xe;if(ht>ne){de&&N(0);break}re&&$(se+Xe),K.set(V.subarray(ot,ht),se),W.b=se+=Xe,W.p=j=8*ht;continue}if(Pe==1)ve=M,oe=b,he=9,ye=5;else if(Pe==2){var He=T(V,j,31)+257,ie=T(V,j+10,15)+4,je=He+T(V,j+5,31)+1;j+=14;for(var ke=new e(je),We=new e(19),Fe=0;Fe<ie;++Fe)We[o[Fe]]=T(V,j+3*Fe,7);j+=3*ie;var it=A(We),Ue=(1<<it)-1,Ye=_(We,it);for(Fe=0;Fe<je;){var ot,Q=Ye[T(V,j,Ue)];if(j+=15&Q,(ot=Q>>>4)<16)ke[Fe++]=ot;else{var Z=0,we=0;for(ot==16?(we=3+T(V,j,3),j+=2,Z=ke[Fe-1]):ot==17?(we=3+T(V,j,7),j+=3):ot==18&&(we=11+T(V,j,127),j+=7);we--;)ke[Fe++]=Z}}var Ee=ke.subarray(0,He),Ne=ke.subarray(He);he=A(Ee),ye=A(Ne),ve=_(Ee,he),oe=_(Ne,ye)}else N(1);if(j>Me){de&&N(0);break}}re&&$(se+131072);for(var Ze=(1<<he)-1,lt=(1<<ye)-1,ft=j;;ft=j){var qe=(Z=ve[P(V,j)&Ze])>>>4;if((j+=15&Z)>Me){de&&N(0);break}if(Z||N(2),qe<256)K[se++]=qe;else{if(qe==256){ft=j,ve=null;break}var st=qe-254;if(qe>264){var St=r[Fe=qe-257];st=T(V,j,(1<<St)-1)+c[Fe],j+=St}var nt=oe[P(V,j)&lt],Lt=nt>>>4;if(nt||N(3),j+=15&nt,Ne=f[Lt],Lt>3&&(St=s[Lt],Ne+=P(V,j)&(1<<St)-1,j+=St),j>Me){de&&N(0);break}re&&$(se+131072);for(var ct=se+st;se<ct;se+=4)K[se]=K[se-Ne],K[se+1]=K[se+1-Ne],K[se+2]=K[se+2-Ne],K[se+3]=K[se+3-Ne];se=ct}}W.l=ve,W.p=ft,W.b=se,ve&&(J=1,W.m=he,W.d=oe,W.n=ye)}while(!J);return se==K.length?K:function(be,fe,De){(De==null||De>be.length)&&(De=be.length);var mt=new(be instanceof t?t:be instanceof i?i:e)(De-fe);return mt.set(be.subarray(fe,De)),mt}(K,0,se)},R=new e(0),F=typeof TextDecoder<"u"&&new TextDecoder;try{F.decode(R,{stream:!0})}catch{}return n.convert_streams=function(V){var K=new DataView(V),W=0;function ne(){var He=K.getUint16(W);return W+=2,He}function re(){var He=K.getUint32(W);return W+=4,He}function de(He){Xe.setUint16(ht,He),ht+=2}function X(He){Xe.setUint32(ht,He),ht+=4}for(var $={signature:re(),flavor:re(),length:re(),numTables:ne(),reserved:ne(),totalSfntSize:re(),majorVersion:ne(),minorVersion:ne(),metaOffset:re(),metaLength:re(),metaOrigLength:re(),privOffset:re(),privLength:re()},J=0;Math.pow(2,J)<=$.numTables;)J++;J--;for(var j=16*Math.pow(2,J),se=16*$.numTables-j,ve=12,oe=[],he=0;he<$.numTables;he++)oe.push({tag:re(),offset:re(),compLength:re(),origLength:re(),origChecksum:re()}),ve+=16;var ye,Me=new Uint8Array(12+16*oe.length+oe.reduce(function(He,ie){return He+ie.origLength+4},0)),Pe=Me.buffer,Xe=new DataView(Pe),ht=0;return X($.flavor),de($.numTables),de(j),de(J),de(se),oe.forEach(function(He){X(He.tag),X(He.origChecksum),X(ve),X(He.origLength),He.outOffset=ve,(ve+=He.origLength)%4!=0&&(ve+=4-ve%4)}),oe.forEach(function(He){var ie,je=V.slice(He.offset,He.offset+He.compLength);if(He.compLength!=He.origLength){var ke=new Uint8Array(He.origLength);ie=new Uint8Array(je,2),z(ie,ke)}else ke=new Uint8Array(je);Me.set(ke,He.outOffset);var We=0;(ve=He.outOffset+He.origLength)%4!=0&&(We=4-ve%4),Me.set(new Uint8Array(We).buffer,He.outOffset+He.origLength),ye=ve+We}),Pe.slice(0,ye)},Object.defineProperty(n,"__esModule",{value:!0}),n}({}).convert_streams}function NW(n,e){const t={M:2,L:2,Q:4,C:6,Z:0},i={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},r=1,s=2,o=4,a=8,l=16,c=32;let u;function f(k){if(!u){const N={R:s,L:r,D:o,C:l,U:c,T:a};u=new Map;for(let z in i){let R=0;i[z].split(",").forEach(F=>{let[V,K]=F.split("+");V=parseInt(V,36),K=K?parseInt(K,36):0,u.set(R+=V,N[z]);for(let W=K;W--;)u.set(++R,N[z])})}}return u.get(k)||c}const d=1,h=2,g=3,_=4,x=[null,"isol","init","fina","medi"];function y(k){const N=new Uint8Array(k.length);let z=c,R=d,F=-1;for(let V=0;V<k.length;V++){const K=k.codePointAt(V);let W=f(K)|0,ne=d;W&a||(z&(r|o|l)?W&(s|o|l)?(ne=g,(R===d||R===g)&&N[F]++):W&(r|c)&&(R===h||R===_)&&N[F]--:z&(s|c)&&(R===h||R===_)&&N[F]--,R=N[V]=ne,z=W,F=V,K>65535&&V++)}return N}function M(k,N){const z=[];for(let F=0;F<N.length;F++){const V=N.codePointAt(F);V>65535&&F++,z.push(n.U.codeToGlyph(k,V))}const R=k.GSUB;if(R){const{lookupList:F,featureList:V}=R;let K;const W=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,ne=[];V.forEach(re=>{if(W.test(re.tag))for(let de=0;de<re.tab.length;de++){if(ne[re.tab[de]])continue;ne[re.tab[de]]=!0;const X=F[re.tab[de]],$=/^(isol|init|fina|medi)$/.test(re.tag);$&&!K&&(K=y(N));for(let J=0;J<z.length;J++)(!K||!$||x[K[J]]===re.tag)&&n.U._applySubs(z,J,X,F)}})}return z}function b(k,N){const z=new Int16Array(N.length*3);let R=0;for(;R<N.length;R++){const W=N[R];if(W===-1)continue;z[R*3+2]=k.hmtx.aWidth[W];const ne=k.GPOS;if(ne){const re=ne.lookupList;for(let de=0;de<re.length;de++){const X=re[de];for(let $=0;$<X.tabs.length;$++){const J=X.tabs[$];if(X.ltype===1){if(n._lctf.coverageIndex(J.coverage,W)!==-1&&J.pos){K(J.pos,R);break}}else if(X.ltype===2){let j=null,se=F();if(se!==-1){const ve=n._lctf.coverageIndex(J.coverage,N[se]);if(ve!==-1){if(J.fmt===1){const oe=J.pairsets[ve];for(let he=0;he<oe.length;he++)oe[he].gid2===W&&(j=oe[he])}else if(J.fmt===2){const oe=n.U._getGlyphClass(N[se],J.classDef1),he=n.U._getGlyphClass(W,J.classDef2);j=J.matrix[oe][he]}if(j){j.val1&&K(j.val1,se),j.val2&&K(j.val2,R);break}}}}else if(X.ltype===4){const j=n._lctf.coverageIndex(J.markCoverage,W);if(j!==-1){const se=F(V),ve=se===-1?-1:n._lctf.coverageIndex(J.baseCoverage,N[se]);if(ve!==-1){const oe=J.markArray[j],he=J.baseArray[ve][oe.markClass];z[R*3]=he.x-oe.x+z[se*3]-z[se*3+2],z[R*3+1]=he.y-oe.y+z[se*3+1];break}}}else if(X.ltype===6){const j=n._lctf.coverageIndex(J.mark1Coverage,W);if(j!==-1){const se=F();if(se!==-1){const ve=N[se];if(A(k,ve)===3){const oe=n._lctf.coverageIndex(J.mark2Coverage,ve);if(oe!==-1){const he=J.mark1Array[j],ye=J.mark2Array[oe][he.markClass];z[R*3]=ye.x-he.x+z[se*3]-z[se*3+2],z[R*3+1]=ye.y-he.y+z[se*3+1];break}}}}}}}}else if(k.kern&&!k.cff){const re=F();if(re!==-1){const de=k.kern.glyph1.indexOf(N[re]);if(de!==-1){const X=k.kern.rval[de].glyph2.indexOf(W);X!==-1&&(z[re*3+2]+=k.kern.rval[de].vals[X])}}}}return z;function F(W){for(let ne=R-1;ne>=0;ne--)if(N[ne]!==-1&&(!W||W(N[ne])))return ne;return-1}function V(W){return A(k,W)===1}function K(W,ne){for(let re=0;re<3;re++)z[ne*3+re]+=W[re]||0}}function A(k,N){const z=k.GDEF&&k.GDEF.glyphClassDef;return z?n.U._getGlyphClass(N,z):0}function T(...k){for(let N=0;N<k.length;N++)if(typeof k[N]=="number")return k[N]}function P(k){const N=Object.create(null),z=k["OS/2"],R=k.hhea,F=k.head.unitsPerEm,V=T(z&&z.sTypoAscender,R&&R.ascender,F),K={unitsPerEm:F,ascender:V,descender:T(z&&z.sTypoDescender,R&&R.descender,0),capHeight:T(z&&z.sCapHeight,V),xHeight:T(z&&z.sxHeight,V),lineGap:T(z&&z.sTypoLineGap,R&&R.lineGap),supportsCodePoint(W){return n.U.codeToGlyph(k,W)>0},forEachGlyph(W,ne,re,de){let X=0;const $=1/K.unitsPerEm*ne,J=M(k,W);let j=0;const se=b(k,J);return J.forEach((ve,oe)=>{if(ve!==-1){let he=N[ve];if(!he){const{cmds:ye,crds:Me}=n.U.glyphToPath(k,ve);let Pe="",Xe=0;for(let ke=0,We=ye.length;ke<We;ke++){const Fe=t[ye[ke]];Pe+=ye[ke];for(let it=1;it<=Fe;it++)Pe+=(it>1?",":"")+Me[Xe++]}let ht,He,ie,je;if(Me.length){ht=He=1/0,ie=je=-1/0;for(let ke=0,We=Me.length;ke<We;ke+=2){let Fe=Me[ke],it=Me[ke+1];Fe<ht&&(ht=Fe),it<He&&(He=it),Fe>ie&&(ie=Fe),it>je&&(je=it)}}else ht=ie=He=je=0;he=N[ve]={index:ve,advanceWidth:k.hmtx.aWidth[ve],xMin:ht,yMin:He,xMax:ie,yMax:je,path:Pe}}de.call(null,he,X+se[oe*3]*$,se[oe*3+1]*$,j),X+=se[oe*3+2]*$,re&&(X+=re*ne)}j+=W.codePointAt(j)>65535?2:1}),X}};return K}return function(N){const z=new Uint8Array(N,0,4),R=n._bin.readASCII(z,0,4);if(R==="wOFF")N=e(N);else if(R==="wOF2")throw new Error("woff2 fonts not supported");return P(n.parse(N)[0])}}const IW=td({name:"Typr Font Parser",dependencies:[kW,LW,NW],init(n,e,t){const i=n(),r=e();return t(i,r)}});/*!
Custom bundle of @unicode-font-resolver/client v1.0.2 (https://github.com/lojjic/unicode-font-resolver)
for use in Troika text rendering. 
Original MIT license applies
*/function DW(){return function(n){var e=function(){this.buckets=new Map};e.prototype.add=function(b){var A=b>>5;this.buckets.set(A,(this.buckets.get(A)||0)|1<<(31&b))},e.prototype.has=function(b){var A=this.buckets.get(b>>5);return A!==void 0&&(A&1<<(31&b))!=0},e.prototype.serialize=function(){var b=[];return this.buckets.forEach(function(A,T){b.push((+T).toString(36)+":"+A.toString(36))}),b.join(",")},e.prototype.deserialize=function(b){var A=this;this.buckets.clear(),b.split(",").forEach(function(T){var P=T.split(":");A.buckets.set(parseInt(P[0],36),parseInt(P[1],36))})};var t=Math.pow(2,8),i=t-1,r=~i;function s(b){var A=function(P){return P&r}(b).toString(16),T=function(P){return(P&r)+t-1}(b).toString(16);return"codepoint-index/plane"+(b>>16)+"/"+A+"-"+T+".json"}function o(b,A){var T=b&i,P=A.codePointAt(T/6|0);return((P=(P||48)-48)&1<<T%6)!=0}function a(b,A){var T;(T=b,T.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map(function(P){return P.split("-").map(function(k){return parseInt(k.trim(),16)})})).forEach(function(P){var k=P[0],N=P[1];N===void 0&&(N=k),A(k,N)})}function l(b,A){a(b,function(T,P){for(var k=T;k<=P;k++)A(k)})}var c={},u={},f=new WeakMap,d="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function h(b){var A=f.get(b);return A||(A=new e,l(b.ranges,function(T){return A.add(T)}),f.set(b,A)),A}var g,_=new Map;function x(b,A,T){return b[A]?A:b[T]?T:function(P){for(var k in P)return k}(b)}function y(b,A){var T=A;if(!b.includes(T)){T=1/0;for(var P=0;P<b.length;P++)Math.abs(b[P]-A)<Math.abs(T-A)&&(T=b[P])}return T}function M(b){return g||(g=new Set,l("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",function(A){g.add(A)})),g.has(b)}return n.CodePointSet=e,n.clearCache=function(){c={},u={}},n.getFontsForString=function(b,A){A===void 0&&(A={});var T,P=A.lang;P===void 0&&(P=new RegExp("\\p{Script=Hangul}","u").test(T=b)?"ko":new RegExp("\\p{Script=Hiragana}|\\p{Script=Katakana}","u").test(T)?"ja":"en");var k=A.category;k===void 0&&(k="sans-serif");var N=A.style;N===void 0&&(N="normal");var z=A.weight;z===void 0&&(z=400);var R=(A.dataUrl||d).replace(/\/$/g,""),F=new Map,V=new Uint8Array(b.length),K={},W={},ne=new Array(b.length),re=new Map,de=!1;function X(j){var se=_.get(j);return se||(se=fetch(R+"/"+j).then(function(ve){if(!ve.ok)throw new Error(ve.statusText);return ve.json().then(function(oe){if(!Array.isArray(oe)||oe[0]!==1)throw new Error("Incorrect schema version; need 1, got "+oe[0]);return oe[1]})}).catch(function(ve){if(R!==d)return de||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+R+'", trying default CDN. '+ve.message),de=!0),R=d,_.delete(j),X(j);throw ve}),_.set(j,se)),se}for(var $=function(j){var se=b.codePointAt(j),ve=s(se);ne[j]=ve,c[ve]||re.has(ve)||re.set(ve,X(ve).then(function(oe){c[ve]=oe})),se>65535&&(j++,J=j)},J=0;J<b.length;J++)$(J);return Promise.all(re.values()).then(function(){re.clear();for(var j=function(ve){var oe=b.codePointAt(ve),he=null,ye=c[ne[ve]],Me=void 0;for(var Pe in ye){var Xe=W[Pe];if(Xe===void 0&&(Xe=W[Pe]=new RegExp(Pe).test(P||"en")),Xe){for(var ht in Me=Pe,ye[Pe])if(o(oe,ye[Pe][ht])){he=ht;break}break}}if(!he){e:for(var He in ye)if(He!==Me){for(var ie in ye[He])if(o(oe,ye[He][ie])){he=ie;break e}}}he||(console.debug("No font coverage for U+"+oe.toString(16)),he="latin"),ne[ve]=he,u[he]||re.has(he)||re.set(he,X("font-meta/"+he+".json").then(function(je){u[he]=je})),oe>65535&&(ve++,se=ve)},se=0;se<b.length;se++)j(se);return Promise.all(re.values())}).then(function(){for(var j,se=null,ve=0;ve<b.length;ve++){var oe=b.codePointAt(ve);if(se&&(M(oe)||h(se).has(oe)))V[ve]=V[ve-1];else{se=u[ne[ve]];var he=K[se.id];if(!he){var ye=se.typeforms,Me=x(ye,k,"sans-serif"),Pe=x(ye[Me],N,"normal"),Xe=y((j=ye[Me])===null||j===void 0?void 0:j[Pe],z);he=K[se.id]=R+"/font-files/"+se.id+"/"+Me+"."+Pe+"."+Xe+".woff"}var ht=F.get(he);ht==null&&(ht=F.size,F.set(he,ht)),V[ve]=ht}oe>65535&&(ve++,V[ve]=V[ve-1])}return{fontUrls:Array.from(F.keys()),chars:V}})},Object.defineProperty(n,"__esModule",{value:!0}),n}({})}function OW(n,e){const t=Object.create(null),i=Object.create(null);function r(o,a){const l=c=>{console.error(`Failure loading font ${o}`,c)};try{const c=new XMLHttpRequest;c.open("get",o,!0),c.responseType="arraybuffer",c.onload=function(){if(c.status>=400)l(new Error(c.statusText));else if(c.status>0)try{const u=n(c.response);u.src=o,a(u)}catch(u){l(u)}},c.onerror=l,c.send()}catch(c){l(c)}}function s(o,a){let l=t[o];l?a(l):i[o]?i[o].push(a):(i[o]=[a],r(o,c=>{c.src=o,t[o]=c,i[o].forEach(u=>u(c)),delete i[o]}))}return function(o,a,{lang:l,fonts:c=[],style:u="normal",weight:f="normal",unicodeFontsURL:d}={}){const h=new Uint8Array(o.length),g=[];o.length||M();const _=new Map,x=[];if(u!=="italic"&&(u="normal"),typeof f!="number"&&(f=f==="bold"?700:400),c&&!Array.isArray(c)&&(c=[c]),c=c.slice().filter(A=>!A.lang||A.lang.test(l)).reverse(),c.length){let k=0;(function N(z=0){for(let R=z,F=o.length;R<F;R++){const V=o.codePointAt(R);if(k===1&&g[h[R-1]].supportsCodePoint(V)||R>0&&/\s/.test(o[R]))h[R]=h[R-1],k===2&&(x[x.length-1][1]=R);else for(let K=h[R],W=c.length;K<=W;K++)if(K===W){const ne=k===2?x[x.length-1]:x[x.length]=[R,R];ne[1]=R,k=2}else{h[R]=K;const{src:ne,unicodeRange:re}=c[K];if(!re||b(V,re)){const de=t[ne];if(!de){s(ne,()=>{N(R)});return}if(de.supportsCodePoint(V)){let X=_.get(de);typeof X!="number"&&(X=g.length,g.push(de),_.set(de,X)),h[R]=X,k=1;break}}}V>65535&&R+1<F&&(h[R+1]=h[R],R++,k===2&&(x[x.length-1][1]=R))}y()})()}else x.push([0,o.length-1]),y();function y(){if(x.length){const A=x.map(T=>o.substring(T[0],T[1]+1)).join(`
`);e.getFontsForString(A,{lang:l||void 0,style:u,weight:f,dataUrl:d}).then(({fontUrls:T,chars:P})=>{const k=g.length;let N=0;x.forEach(R=>{for(let F=0,V=R[1]-R[0];F<=V;F++)h[R[0]+F]=P[N++]+k;N++});let z=0;T.forEach((R,F)=>{s(R,V=>{g[F+k]=V,++z===T.length&&M()})})})}else M()}function M(){a({chars:h,fonts:g})}function b(A,T){for(let P=0;P<T.length;P++){const[k,N=k]=T[P];if(k<=A&&A<=N)return!0}return!1}}}const FW=td({name:"FontResolver",dependencies:[OW,IW,DW],init(n,e,t){return n(e,t())}});function UW(n,e){const i=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,r="[^\\S\\u00A0]",s=new RegExp(`${r}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function o({text:g,lang:_,fonts:x,style:y,weight:M,preResolvedFonts:b,unicodeFontsURL:A},T){const P=({chars:k,fonts:N})=>{let z,R;const F=[];for(let V=0;V<k.length;V++)k[V]!==R?(R=k[V],F.push(z={start:V,end:V,fontObj:N[k[V]]})):z.end=V;T(F)};b?P(b):n(g,P,{lang:_,fonts:x,style:y,weight:M,unicodeFontsURL:A})}function a({text:g="",font:_,lang:x,sdfGlyphSize:y=64,fontSize:M=400,fontWeight:b=1,fontStyle:A="normal",letterSpacing:T=0,lineHeight:P="normal",maxWidth:k=1/0,direction:N,textAlign:z="left",textIndent:R=0,whiteSpace:F="normal",overflowWrap:V="normal",anchorX:K=0,anchorY:W=0,metricsOnly:ne=!1,unicodeFontsURL:re,preResolvedFonts:de=null,includeCaretPositions:X=!1,chunkedBoundsSize:$=8192,colorRanges:J=null},j){const se=f(),ve={fontLoad:0,typesetting:0};g.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),g=g.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),M=+M,T=+T,k=+k,P=P||"normal",R=+R,o({text:g,lang:x,style:A,weight:b,fonts:typeof _=="string"?[{src:_}]:_,unicodeFontsURL:re,preResolvedFonts:de},oe=>{ve.fontLoad=f()-se;const he=isFinite(k);let ye=null,Me=null,Pe=null,Xe=null,ht=null,He=null,ie=null,je=null,ke=0,We=0,Fe=F!=="nowrap";const it=new Map,Ue=f();let Ye=R,ot=0,Q=new d;const Z=[Q];oe.forEach(lt=>{const{fontObj:ft}=lt,{ascender:qe,descender:st,unitsPerEm:St,lineGap:nt,capHeight:Lt,xHeight:ct}=ft;let be=it.get(ft);if(!be){const vt=M/St,xe=P==="normal"?(qe-st+nt)*vt:P*M,gt=(xe-(qe-st)*vt)/2,Re=Math.min(xe,(qe-st)*vt),et=(qe+st)/2*vt+Re/2;be={index:it.size,src:ft.src,fontObj:ft,fontSizeMult:vt,unitsPerEm:St,ascender:qe*vt,descender:st*vt,capHeight:Lt*vt,xHeight:ct*vt,lineHeight:xe,baseline:-gt-qe*vt,caretTop:et,caretBottom:et-Re},it.set(ft,be)}const{fontSizeMult:fe}=be,De=g.slice(lt.start,lt.end+1);let mt,pt;ft.forEachGlyph(De,M,T,(vt,xe,gt,Re)=>{xe+=ot,Re+=lt.start,mt=xe,pt=vt;const et=g.charAt(Re),rt=vt.advanceWidth*fe,wt=Q.count;let _t;if("isEmpty"in vt||(vt.isWhitespace=!!et&&new RegExp(r).test(et),vt.canBreakAfter=!!et&&s.test(et),vt.isEmpty=vt.xMin===vt.xMax||vt.yMin===vt.yMax||i.test(et)),!vt.isWhitespace&&!vt.isEmpty&&We++,Fe&&he&&!vt.isWhitespace&&xe+rt+Ye>k&&wt){if(Q.glyphAt(wt-1).glyphObj.canBreakAfter)_t=new d,Ye=-xe;else for(let an=wt;an--;)if(an===0&&V==="break-word"){_t=new d,Ye=-xe;break}else if(Q.glyphAt(an).glyphObj.canBreakAfter){_t=Q.splitAt(an+1);const Gt=_t.glyphAt(0).x;Ye-=Gt;for(let hn=_t.count;hn--;)_t.glyphAt(hn).x-=Gt;break}_t&&(Q.isSoftWrapped=!0,Q=_t,Z.push(Q),ke=k)}let Ht=Q.glyphAt(Q.count);Ht.glyphObj=vt,Ht.x=xe+Ye,Ht.y=gt,Ht.width=rt,Ht.charIndex=Re,Ht.fontData=be,et===`
`&&(Q=new d,Z.push(Q),Ye=-(xe+rt+T*M)+R)}),ot=mt+pt.advanceWidth*fe+T*M});let we=0;Z.forEach(lt=>{let ft=!0;for(let qe=lt.count;qe--;){const st=lt.glyphAt(qe);ft&&!st.glyphObj.isWhitespace&&(lt.width=st.x+st.width,lt.width>ke&&(ke=lt.width),ft=!1);let{lineHeight:St,capHeight:nt,xHeight:Lt,baseline:ct}=st.fontData;St>lt.lineHeight&&(lt.lineHeight=St);const be=ct-lt.baseline;be<0&&(lt.baseline+=be,lt.cap+=be,lt.ex+=be),lt.cap=Math.max(lt.cap,lt.baseline+nt),lt.ex=Math.max(lt.ex,lt.baseline+Lt)}lt.baseline-=we,lt.cap-=we,lt.ex-=we,we+=lt.lineHeight});let Ee=0,Ne=0;if(K&&(typeof K=="number"?Ee=-K:typeof K=="string"&&(Ee=-ke*(K==="left"?0:K==="center"?.5:K==="right"?1:c(K)))),W&&(typeof W=="number"?Ne=-W:typeof W=="string"&&(Ne=W==="top"?0:W==="top-baseline"?-Z[0].baseline:W==="top-cap"?-Z[0].cap:W==="top-ex"?-Z[0].ex:W==="middle"?we/2:W==="bottom"?we:W==="bottom-baseline"?-Z[Z.length-1].baseline:c(W)*we)),!ne){const lt=e.getEmbeddingLevels(g,N);ye=new Uint16Array(We),Me=new Uint8Array(We),Pe=new Float32Array(We*2),Xe={},ie=[1/0,1/0,-1/0,-1/0],je=[],X&&(He=new Float32Array(g.length*4)),J&&(ht=new Uint8Array(We*3));let ft=0,qe=-1,st=-1,St,nt;if(Z.forEach((Lt,ct)=>{let{count:be,width:fe}=Lt;if(be>0){let De=0;for(let Re=be;Re--&&Lt.glyphAt(Re).glyphObj.isWhitespace;)De++;let mt=0,pt=0;if(z==="center")mt=(ke-fe)/2;else if(z==="right")mt=ke-fe;else if(z==="justify"&&Lt.isSoftWrapped){let Re=0;for(let et=be-De;et--;)Lt.glyphAt(et).glyphObj.isWhitespace&&Re++;pt=(ke-fe)/Re}if(pt||mt){let Re=0;for(let et=0;et<be;et++){let rt=Lt.glyphAt(et);const wt=rt.glyphObj;rt.x+=mt+Re,pt!==0&&wt.isWhitespace&&et<be-De&&(Re+=pt,rt.width+=pt)}}const vt=e.getReorderSegments(g,lt,Lt.glyphAt(0).charIndex,Lt.glyphAt(Lt.count-1).charIndex);for(let Re=0;Re<vt.length;Re++){const[et,rt]=vt[Re];let wt=1/0,_t=-1/0;for(let Ht=0;Ht<be;Ht++)if(Lt.glyphAt(Ht).charIndex>=et){let an=Ht,Gt=Ht;for(;Gt<be;Gt++){let hn=Lt.glyphAt(Gt);if(hn.charIndex>rt)break;Gt<be-De&&(wt=Math.min(wt,hn.x),_t=Math.max(_t,hn.x+hn.width))}for(let hn=an;hn<Gt;hn++){const Kn=Lt.glyphAt(hn);Kn.x=_t-(Kn.x+Kn.width-wt)}break}}let xe;const gt=Re=>xe=Re;for(let Re=0;Re<be;Re++){const et=Lt.glyphAt(Re);xe=et.glyphObj;const rt=xe.index,wt=lt.levels[et.charIndex]&1;if(wt){const _t=e.getMirroredCharacter(g[et.charIndex]);_t&&et.fontData.fontObj.forEachGlyph(_t,0,0,gt)}if(X){const{charIndex:_t,fontData:Ht}=et,an=et.x+Ee,Gt=et.x+et.width+Ee;He[_t*4]=wt?Gt:an,He[_t*4+1]=wt?an:Gt,He[_t*4+2]=Lt.baseline+Ht.caretBottom+Ne,He[_t*4+3]=Lt.baseline+Ht.caretTop+Ne;const hn=_t-qe;hn>1&&u(He,qe,hn),qe=_t}if(J){const{charIndex:_t}=et;for(;_t>st;)st++,J.hasOwnProperty(st)&&(nt=J[st])}if(!xe.isWhitespace&&!xe.isEmpty){const _t=ft++,{fontSizeMult:Ht,src:an,index:Gt}=et.fontData,hn=Xe[an]||(Xe[an]={});hn[rt]||(hn[rt]={path:xe.path,pathBounds:[xe.xMin,xe.yMin,xe.xMax,xe.yMax]});const Kn=et.x+Ee,Gi=et.y+Lt.baseline+Ne;Pe[_t*2]=Kn,Pe[_t*2+1]=Gi;const fn=Kn+xe.xMin*Ht,D=Gi+xe.yMin*Ht,B=Kn+xe.xMax*Ht,tt=Gi+xe.yMax*Ht;fn<ie[0]&&(ie[0]=fn),D<ie[1]&&(ie[1]=D),B>ie[2]&&(ie[2]=B),tt>ie[3]&&(ie[3]=tt),_t%$===0&&(St={start:_t,end:_t,rect:[1/0,1/0,-1/0,-1/0]},je.push(St)),St.end++;const Y=St.rect;if(fn<Y[0]&&(Y[0]=fn),D<Y[1]&&(Y[1]=D),B>Y[2]&&(Y[2]=B),tt>Y[3]&&(Y[3]=tt),ye[_t]=rt,Me[_t]=Gt,J){const me=_t*3;ht[me]=nt>>16&255,ht[me+1]=nt>>8&255,ht[me+2]=nt&255}}}}}),He){const Lt=g.length-qe;Lt>1&&u(He,qe,Lt)}}const Ze=[];it.forEach(({index:lt,src:ft,unitsPerEm:qe,ascender:st,descender:St,lineHeight:nt,capHeight:Lt,xHeight:ct})=>{Ze[lt]={src:ft,unitsPerEm:qe,ascender:st,descender:St,lineHeight:nt,capHeight:Lt,xHeight:ct}}),ve.typesetting=f()-Ue,j({glyphIds:ye,glyphFontIndices:Me,glyphPositions:Pe,glyphData:Xe,fontData:Ze,caretPositions:He,glyphColors:ht,chunkedBounds:je,fontSize:M,topBaseline:Ne+Z[0].baseline,blockBounds:[Ee,Ne-we,Ee+ke,Ne],visibleBounds:ie,timings:ve})})}function l(g,_){a({...g,metricsOnly:!0},x=>{const[y,M,b,A]=x.blockBounds;_({width:b-y,height:A-M})})}function c(g){let _=g.match(/^([\d.]+)%$/),x=_?parseFloat(_[1]):NaN;return isNaN(x)?0:x/100}function u(g,_,x){const y=g[_*4],M=g[_*4+1],b=g[_*4+2],A=g[_*4+3],T=(M-y)/x;for(let P=0;P<x;P++){const k=(_+P)*4;g[k]=y+T*P,g[k+1]=y+T*(P+1),g[k+2]=b,g[k+3]=A}}function f(){return(self.performance||Date).now()}function d(){this.data=[]}const h=["glyphObj","x","y","width","charIndex","fontData"];return d.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/h.length)},glyphAt(g){let _=d.flyweight;return _.data=this.data,_.index=g,_},splitAt(g){let _=new d;return _.data=this.data.splice(g*h.length),_}},d.flyweight=h.reduce((g,_,x,y)=>(Object.defineProperty(g,_,{get(){return this.data[this.index*h.length+x]},set(M){this.data[this.index*h.length+x]=M}}),g),{data:null,index:0}),{typeset:a,measure:l}}const Iu=()=>(self.performance||Date).now(),ay=RC();let L6;function zW(n,e,t,i,r,s,o,a,l,c,u=!0){return u?HW(n,e,t,i,r,s,o,a,l,c).then(null,f=>(L6||(console.warn("WebGL SDF generation failed, falling back to JS",f),L6=!0),I6(n,e,t,i,r,s,o,a,l,c))):I6(n,e,t,i,r,s,o,a,l,c)}const E1=[],BW=5;let M3=0;function LC(){const n=Iu();for(;E1.length&&Iu()-n<BW;)E1.shift()();M3=E1.length?setTimeout(LC,0):0}const HW=(...n)=>new Promise((e,t)=>{E1.push(()=>{const i=Iu();try{ay.webgl.generateIntoCanvas(...n),e({timing:Iu()-i})}catch(r){t(r)}}),M3||(M3=setTimeout(LC,0))}),VW=4,GW=2e3,N6={};let WW=0;function I6(n,e,t,i,r,s,o,a,l,c){const u="TroikaTextSDFGenerator_JS_"+WW++%VW;let f=N6[u];return f||(f=N6[u]={workerModule:td({name:u,workerId:u,dependencies:[RC,Iu],init(d,h){const g=d().javascript.generate;return function(..._){const x=h();return{textureData:g(..._),timing:h()-x}}},getTransferables(d){return[d.textureData.buffer]}}),requests:0,idleTimer:null}),f.requests++,clearTimeout(f.idleTimer),f.workerModule(n,e,t,i,r,s).then(({textureData:d,timing:h})=>{const g=Iu(),_=new Uint8Array(d.length*4);for(let x=0;x<d.length;x++)_[x*4+c]=d[x];return ay.webglUtils.renderImageData(o,_,a,l,n,e,1<<3-c),h+=Iu()-g,--f.requests===0&&(f.idleTimer=setTimeout(()=>{SW(u)},GW)),{timing:h}})}function jW(n){n._warm||(ay.webgl.isSupported(n),n._warm=!0)}const qW=ay.webglUtils.resizeWebGLCanvasWithoutClearing,of={defaultFontURL:null,unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048,useWorker:!0},XW=new Ct;function nf(){return(self.performance||Date).now()}const D6=Object.create(null);function NC(n,e){n=KW({},n);const t=nf(),{defaultFontURL:i}=of,r=[];if(i&&r.push({label:"default",src:O6(i)}),n.font&&r.push({label:"user",src:O6(n.font)}),n.font=r,n.text=""+n.text,n.sdfGlyphSize=n.sdfGlyphSize||of.sdfGlyphSize,n.unicodeFontsURL=n.unicodeFontsURL||of.unicodeFontsURL,n.colorRanges!=null){let h={};for(let g in n.colorRanges)if(n.colorRanges.hasOwnProperty(g)){let _=n.colorRanges[g];typeof _!="number"&&(_=XW.set(_).getHex()),h[g]=_}n.colorRanges=h}Object.freeze(n);const{textureWidth:s,sdfExponent:o}=of,{sdfGlyphSize:a}=n,l=s/a*4;let c=D6[a];if(!c){const h=document.createElement("canvas");h.width=s,h.height=a*256/l,c=D6[a]={glyphCount:0,sdfGlyphSize:a,sdfCanvas:h,sdfTexture:new yi(h,void 0,void 0,void 0,oi,oi),contextLost:!1,glyphsByFont:new Map},c.sdfTexture.generateMipmaps=!1,YW(c)}const{sdfTexture:u,sdfCanvas:f}=c;OC(n).then(h=>{const{glyphIds:g,glyphFontIndices:_,fontData:x,glyphPositions:y,fontSize:M,timings:b}=h,A=[],T=new Float32Array(g.length*4);let P=0,k=0;const N=nf(),z=x.map(W=>{let ne=c.glyphsByFont.get(W.src);return ne||c.glyphsByFont.set(W.src,ne=new Map),ne});g.forEach((W,ne)=>{const re=_[ne],{src:de,unitsPerEm:X}=x[re];let $=z[re].get(W);if(!$){const{path:oe,pathBounds:he}=h.glyphData[de][W],ye=Math.max(he[2]-he[0],he[3]-he[1])/a*(of.sdfMargin*a+.5),Me=c.glyphCount++,Pe=[he[0]-ye,he[1]-ye,he[2]+ye,he[3]+ye];z[re].set(W,$={path:oe,atlasIndex:Me,sdfViewBox:Pe}),A.push($)}const{sdfViewBox:J}=$,j=y[k++],se=y[k++],ve=M/X;T[P++]=j+J[0]*ve,T[P++]=se+J[1]*ve,T[P++]=j+J[2]*ve,T[P++]=se+J[3]*ve,g[ne]=$.atlasIndex}),b.quads=(b.quads||0)+(nf()-N);const R=nf();b.sdf={};const F=f.height,V=Math.ceil(c.glyphCount/l),K=Math.pow(2,Math.ceil(Math.log2(V*a)));K>F&&(console.info(`Increasing SDF texture size ${F}->${K}`),qW(f,s,K),u.dispose()),Promise.all(A.map(W=>IC(W,c,n.gpuAccelerateSDF).then(({timing:ne})=>{b.sdf[W.atlasIndex]=ne}))).then(()=>{A.length&&!c.contextLost&&(DC(c),u.needsUpdate=!0),b.sdfTotal=nf()-R,b.total=nf()-t,e(Object.freeze({parameters:n,sdfTexture:u,sdfGlyphSize:a,sdfExponent:o,glyphBounds:T,glyphAtlasIndices:g,glyphColors:h.glyphColors,caretPositions:h.caretPositions,chunkedBounds:h.chunkedBounds,ascender:h.ascender,descender:h.descender,lineHeight:h.lineHeight,capHeight:h.capHeight,xHeight:h.xHeight,topBaseline:h.topBaseline,blockBounds:h.blockBounds,visibleBounds:h.visibleBounds,timings:h.timings}))})}),Promise.resolve().then(()=>{c.contextLost||jW(f)})}function IC({path:n,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:i,sdfCanvas:r,contextLost:s},o){if(s)return Promise.resolve({timing:-1});const{textureWidth:a,sdfExponent:l}=of,c=Math.max(t[2]-t[0],t[3]-t[1]),u=Math.floor(e/4),f=u%(a/i)*i,d=Math.floor(u/(a/i))*i,h=e%4;return zW(i,i,n,t,c,l,r,f,d,h,o)}function YW(n){const e=n.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),n.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),n.contextLost=!1;const i=[];n.glyphsByFont.forEach(r=>{r.forEach(s=>{i.push(IC(s,n,!0))})}),Promise.all(i).then(()=>{DC(n),n.sdfTexture.needsUpdate=!0})})}function ZW({font:n,characters:e,sdfGlyphSize:t},i){let r=Array.isArray(e)?e.join(`
`):""+e;NC({font:n,sdfGlyphSize:t,text:r},i)}function KW(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}let Jg;function O6(n){return Jg||(Jg=typeof document>"u"?{}:document.createElement("a")),Jg.href=n,Jg.href}function DC(n){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:t}=n,{width:i,height:r}=e,s=n.sdfCanvas.getContext("webgl");let o=t.image.data;(!o||o.length!==i*r*4)&&(o=new Uint8Array(i*r*4),t.image={width:i,height:r,data:o},t.flipY=!1,t.isDataTexture=!0),s.readPixels(0,0,i,r,s.RGBA,s.UNSIGNED_BYTE,o)}}const QW=td({name:"Typesetter",dependencies:[UW,FW,bW],init(n,e,t){return n(e,t())}}),OC=td({name:"Typesetter",dependencies:[QW],init(n){return function(e){return new Promise(t=>{n.typeset(e,t)})}},getTransferables(n){const e=[];for(let t in n)n[t]&&n[t].buffer&&e.push(n[t].buffer);return e}});OC.onMainThread;const F6={};function JW(n){let e=F6[n];return e||(e=F6[n]=new dl(1,1,n,n).translate(.5,.5,0)),e}const $W="aTroikaGlyphBounds",U6="aTroikaGlyphIndex",ej="aTroikaGlyphColor";class tj extends oy{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Qi,this.boundingBox=new Vi}computeBoundingSphere(){}computeBoundingBox(){}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let t=JW(e);["position","normal","uv"].forEach(i=>{this.attributes[i]=t.attributes[i].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,i,r,s){this.updateAttributeData($W,e,4),this.updateAttributeData(U6,t,1),this.updateAttributeData(ej,s,3),this._blockBounds=i,this._chunkedBounds=r,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:i}=this;if(t){const{PI:r,floor:s,min:o,max:a,sin:l,cos:c}=Math,u=r/2,f=r*2,d=Math.abs(t),h=e[0]/d,g=e[2]/d,_=s((h+u)/f)!==s((g+u)/f)?-d:o(l(h)*d,l(g)*d),x=s((h-u)/f)!==s((g-u)/f)?d:a(l(h)*d,l(g)*d),y=s((h+r)/f)!==s((g+r)/f)?d*2:a(d-c(h)*d,d-c(g)*d);i.min.set(_,e[1],t<0?-y:0),i.max.set(x,e[3],t<0?0:y)}else i.min.set(e[0],e[1],0),i.max.set(e[2],e[3],0);i.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(U6).count,i=this._chunkedBounds;if(i)for(let r=i.length;r--;){t=i[r].end;let s=i[r].rect;if(s[1]<e.w&&s[3]>e.y&&s[0]<e.z&&s[2]>e.x)break}this.instanceCount=t}updateAttributeData(e,t,i){const r=this.getAttribute(e);t?r&&r.array.length===t.length?(r.array.set(t),r.needsUpdate=!0):(this.setAttribute(e,new Vu(t,i)),delete this._maxInstanceCount,this.dispose()):r&&this.deleteAttribute(e)}}const nj=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaEdgeOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,ij=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,rj=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaEdgeOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,sj=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function oj(n){const e=b3(n,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new $e},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new gn(0,0,0,0)},uTroikaClipRect:{value:new gn(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new $e},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Ct},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new tn},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:nj,vertexTransform:ij,fragmentDefs:rj,fragmentColorTransform:sj,customRewriter({vertexShader:t,fragmentShader:i}){let r=/\buniform\s+vec3\s+diffuse\b/;return r.test(i)&&(i=i.replace(r,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),r.test(t)||(t=t.replace(kC,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:i}}});return e.transparent=!0,e.forceSinglePass=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const PS=new fl({color:16777215,side:Oo,transparent:!0}),z6=8421504,B6=new qt,$g=new ue,_2=new ue,a0=[],aj=new ue,S2="+x+y";function H6(n){return Array.isArray(n)?n[0]:n}let FC=()=>{const n=new di(new dl(1,1),PS);return FC=()=>n,n},UC=()=>{const n=new di(new dl(1,1,32,1),PS);return UC=()=>n,n};const lj={type:"syncstart"},cj={type:"synccomplete"},zC=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],uj=zC.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let BC=class extends di{constructor(){const e=new tj;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=z6,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=S2,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(lj),NC({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const i=this._queuedSyncs;i&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{i.forEach(r=>r&&r())})),this.dispatchEvent(cj),e&&e()})))}onBeforeRender(e,t,i,r,s,o){this.sync(),s.isTroikaTextMaterial&&this._prepareForRender(s)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(e){return oj(e)}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=PS.clone());if((!e||!e.isDerivedFrom(t))&&(e=this._derivedMaterial=this.createDerivedMaterial(t),t.addEventListener("dispose",function i(){t.removeEventListener("dispose",i),e.dispose()})),this.hasOutline()){let i=e._outlineMtl;return i||(i=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),i.isTextOutlineMaterial=!0,i.depthWrite=!1,i.map=null,e.addEventListener("dispose",function r(){e.removeEventListener("dispose",r),i.dispose()})),[i,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return H6(this.material).getDepthMaterial()}get customDistanceMaterial(){return H6(this.material).getDistanceMaterial()}_prepareForRender(e){const t=e.isTextOutlineMaterial,i=e.uniforms,r=this.textRenderInfo;if(r){const{sdfTexture:a,blockBounds:l}=r;i.uTroikaSDFTexture.value=a,i.uTroikaSDFTextureSize.value.set(a.image.width,a.image.height),i.uTroikaSDFGlyphSize.value=r.sdfGlyphSize,i.uTroikaSDFExponent.value=r.sdfExponent,i.uTroikaTotalBounds.value.fromArray(l),i.uTroikaUseGlyphColors.value=!t&&!!r.glyphColors;let c=0,u=0,f=0,d,h,g,_=0,x=0;if(t){let{outlineWidth:M,outlineOffsetX:b,outlineOffsetY:A,outlineBlur:T,outlineOpacity:P}=this;c=this._parsePercent(M)||0,u=Math.max(0,this._parsePercent(T)||0),d=P,_=this._parsePercent(b)||0,x=this._parsePercent(A)||0}else f=Math.max(0,this._parsePercent(this.strokeWidth)||0),f&&(g=this.strokeColor,i.uTroikaStrokeColor.value.set(g??z6),h=this.strokeOpacity,h==null&&(h=1)),d=this.fillOpacity;i.uTroikaEdgeOffset.value=c,i.uTroikaPositionOffset.value.set(_,x),i.uTroikaBlurRadius.value=u,i.uTroikaStrokeWidth.value=f,i.uTroikaStrokeOpacity.value=h,i.uTroikaFillOpacity.value=d??1,i.uTroikaCurveRadius.value=this.curveRadius||0;let y=this.clipRect;if(y&&Array.isArray(y)&&y.length===4)i.uTroikaClipRect.value.fromArray(y);else{const M=(this.fontSize||.1)*100;i.uTroikaClipRect.value.set(l[0]-M,l[1]-M,l[2]+M,l[3]+M)}this.geometry.applyClipRect(i.uTroikaClipRect.value)}i.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const s=t?this.outlineColor||0:this.color;if(s==null)delete e.color;else{const a=e.hasOwnProperty("color")?e.color:e.color=new Ct;(s!==a._input||typeof s=="object")&&a.set(a._input=s)}let o=this.orientation||S2;if(o!==e._orientation){let a=i.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let l=o!==S2&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(l){let[,c,u,f,d]=l;$g.set(0,0,0)[u]=c==="-"?1:-1,_2.set(0,0,0)[d]=f==="-"?-1:1,B6.lookAt(aj,$g.cross(_2),_2),a.setFromMatrix4(B6)}else a.identity();e._orientation=o}}_parsePercent(e){if(typeof e=="string"){let t=e.match(/^(-?[\d.]+)%$/),i=t?parseFloat(t[1]):NaN;e=(isNaN(i)?0:i/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new $e){t.copy(e);const i=this.curveRadius;return i&&(t.x=Math.atan2(e.x,Math.abs(i)-Math.abs(e.z))*Math.abs(i)),t}worldPositionToTextCoords(e,t=new $e){return $g.copy(e),this.localPositionToTextCoords(this.worldToLocal($g),t)}raycast(e,t){const{textRenderInfo:i,curveRadius:r}=this;if(i){const s=i.blockBounds,o=r?UC():FC(),a=o.geometry,{position:l,uv:c}=a.attributes;for(let u=0;u<c.count;u++){let f=s[0]+c.getX(u)*(s[2]-s[0]);const d=s[1]+c.getY(u)*(s[3]-s[1]);let h=0;r&&(h=r-Math.cos(f/r)*r,f=Math.sin(f/r)*r),l.setXYZ(u,f,d,h)}a.boundingSphere=this.geometry.boundingSphere,a.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,a0.length=0,o.raycast(e,a0);for(let u=0;u<a0.length;u++)a0[u].object=this,t.push(a0[u])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,uj.forEach(i=>{this[i]=e[i]}),this}clone(){return new this.constructor().copy(this)}};zC.forEach(n=>{const e="_private_"+n;Object.defineProperty(BC.prototype,n,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});new Vi;new Ct;const hj=Qe.forwardRef(({sdfGlyphSize:n=64,anchorX:e="center",anchorY:t="middle",font:i,fontSize:r=1,children:s,characters:o,onSync:a,...l},c)=>{const u=aa(({invalidate:g})=>g),[f]=Qe.useState(()=>new BC),[d,h]=Qe.useMemo(()=>{const g=[];let _="";return Qe.Children.forEach(s,x=>{typeof x=="string"||typeof x=="number"?_+=x:g.push(x)}),[g,_]},[s]);return mG(()=>new Promise(g=>ZW({font:i,characters:o},g)),["troika-text",i,o]),Qe.useLayoutEffect(()=>void f.sync(()=>{u(),a&&a(f)})),Qe.useEffect(()=>()=>f.dispose(),[f]),Qe.createElement("primitive",Wu({object:f,ref:c,font:i,text:h,anchorX:e,anchorY:t,fontSize:r,sdfGlyphSize:n},l),d)}),fj=Qe.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:r=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...c},u)=>{const f=aa(P=>P.invalidate),d=aa(P=>P.camera),h=aa(P=>P.gl),g=aa(P=>P.events),_=aa(P=>P.setEvents),x=aa(P=>P.set),y=aa(P=>P.get),M=aa(P=>P.performance),b=e||d,A=i||g.connected||h.domElement,T=Qe.useMemo(()=>new fW(b),[b]);return FG(()=>{T.enabled&&T.update()},-1),Qe.useEffect(()=>(s&&T.connect(s===!0?A:s),T.connect(A),()=>void T.dispose()),[s,A,t,T,f]),Qe.useEffect(()=>{const P=z=>{f(),t&&M.regress(),o&&o(z)},k=z=>{a&&a(z)},N=z=>{l&&l(z)};return T.addEventListener("change",P),T.addEventListener("start",k),T.addEventListener("end",N),()=>{T.removeEventListener("start",k),T.removeEventListener("end",N),T.removeEventListener("change",P)}},[o,a,l,T,f,_]),Qe.useEffect(()=>{if(n){const P=y().controls;return x({controls:T}),()=>x({controls:P})}},[n,T]),Qe.createElement("primitive",Wu({ref:u,object:T,enableDamping:r},c))});function dj(n,e){const t=n+"Geometry";return Qe.forwardRef(({args:i,children:r,...s},o)=>{const a=Qe.useRef(null);return Qe.useImperativeHandle(o,()=>a.current),Qe.useLayoutEffect(()=>void(e==null?void 0:e(a.current))),Qe.createElement("mesh",Wu({ref:a},s),Qe.createElement(t,{attach:"geometry",args:i}),r)})}const pj=dj("sphere"),w2=[{name:"Water (H₂O)",description:"A water molecule consists of two hydrogen atoms covalently bonded to a single oxygen atom.",atoms:[{position:[0,0,0],element:"O",color:"#ff0000"},{position:[-.8,.6,0],element:"H",color:"#ffffff"},{position:[.8,.6,0],element:"H",color:"#ffffff"}],bonds:[{start:[0,0,0],end:[-.8,.6,0]},{start:[0,0,0],end:[.8,.6,0]}]},{name:"Carbon Dioxide (CO₂)",description:"A linear molecule with a carbon atom bonded to two oxygen atoms.",atoms:[{position:[0,0,0],element:"C",color:"#808080"},{position:[-1.2,0,0],element:"O",color:"#ff0000"},{position:[1.2,0,0],element:"O",color:"#ff0000"}],bonds:[{start:[-1.2,0,0],end:[0,0,0]},{start:[0,0,0],end:[1.2,0,0]}]},{name:"Methane (CH₄)",description:"A tetrahedral molecule with a carbon atom bonded to four hydrogen atoms.",atoms:[{position:[0,0,0],element:"C",color:"#808080"},{position:[.8,.8,.8],element:"H",color:"#ffffff"},{position:[-.8,-.8,.8],element:"H",color:"#ffffff"},{position:[.8,-.8,-.8],element:"H",color:"#ffffff"},{position:[-.8,.8,-.8],element:"H",color:"#ffffff"}],bonds:[{start:[0,0,0],end:[.8,.8,.8]},{start:[0,0,0],end:[-.8,-.8,.8]},{start:[0,0,0],end:[.8,-.8,-.8]},{start:[0,0,0],end:[-.8,.8,-.8]}]}],mj=({molecule:n,zoom:e})=>O.jsxs(O.Fragment,{children:[O.jsx("ambientLight",{intensity:.5}),O.jsx("pointLight",{position:[10,10,10]}),n.atoms.map((t,i)=>O.jsxs("group",{position:t.position.map(r=>r*e),children:[O.jsx(pj,{args:[.3*e,32,32],children:O.jsx("meshStandardMaterial",{color:t.color})}),O.jsx(hj,{position:[0,.4*e,0],fontSize:.3*e,color:"white",anchorX:"center",anchorY:"middle",children:t.element})]},i)),n.bonds.map((t,i)=>O.jsx(gW,{points:[t.start.map(r=>r*e),t.end.map(r=>r*e)],color:"white",lineWidth:2},i))]});function gj(){const[n,e]=Qe.useState(w2[0]),[t,i]=Qe.useState(1),r=Qe.useRef(null),s=()=>i(l=>Math.min(l+.2,2)),o=()=>i(l=>Math.max(l-.2,.5)),a=()=>{i(1),r.current&&r.current.reset()};return O.jsxs("div",{className:"bg-gray-800 rounded-xl p-6",children:[O.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[O.jsx(C0,{className:"text-blue-400 w-6 h-6"}),O.jsx("h3",{className:"text-2xl font-bold",children:"3D Molecule Viewer"})]}),O.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[O.jsxs("div",{className:"space-y-4",children:[O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium mb-2",children:"Select Molecule"}),O.jsx("select",{className:"w-full bg-gray-700 rounded-lg p-3 text-white",onChange:l=>e(w2[Number(l.target.value)]),children:w2.map((l,c)=>O.jsx("option",{value:c,children:l.name},c))})]}),O.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[O.jsx("h4",{className:"text-lg font-semibold mb-2",children:n.name}),O.jsx("p",{className:"text-gray-300",children:n.description})]}),O.jsxs("div",{className:"flex gap-2",children:[O.jsxs("button",{onClick:s,className:"flex-1 bg-blue-500 hover:bg-blue-600 text-white p-2 rounded-lg flex items-center justify-center gap-2",children:[O.jsx(QR,{className:"w-4 h-4"}),"Zoom In"]}),O.jsxs("button",{onClick:o,className:"flex-1 bg-blue-500 hover:bg-blue-600 text-white p-2 rounded-lg flex items-center justify-center gap-2",children:[O.jsx(JR,{className:"w-4 h-4"}),"Zoom Out"]}),O.jsx("button",{onClick:a,className:"bg-gray-600 hover:bg-gray-700 text-white p-2 rounded-lg flex items-center justify-center",children:O.jsx(rE,{className:"w-4 h-4"})})]})]}),O.jsx("div",{className:"lg:col-span-2 bg-gray-900 rounded-xl overflow-hidden",style:{height:"400px"},children:O.jsxs(rW,{camera:{position:[0,0,5]},children:[O.jsx(mj,{molecule:n,zoom:t}),O.jsx(fj,{ref:r})]})})]}),O.jsxs("div",{className:"mt-6 bg-gray-700 rounded-lg p-4",children:[O.jsx("h4",{className:"text-lg font-semibold mb-2",children:"Instructions:"}),O.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-300",children:[O.jsx("li",{children:"Click and drag to rotate the molecule"}),O.jsx("li",{children:"Use the scroll wheel or pinch gesture to zoom"}),O.jsx("li",{children:"Right-click and drag to pan"}),O.jsx("li",{children:"Use the zoom buttons for precise control"}),O.jsx("li",{children:"Click the reset button to return to the default view"})]})]})]})}function vj(){const[n,e]=Qe.useState("classical"),[t,i]=Qe.useState(!1),[r,s]=Qe.useState(!1);Qe.useState(!1),Qe.useEffect(()=>{const l=()=>{const c=window.scrollY;i(c>800),s(c>1e3)};return window.addEventListener("scroll",l),()=>window.removeEventListener("scroll",l)},[]);const o=()=>{window.scrollTo({top:0,behavior:"smooth"})},a=()=>{switch(n){case"classical":return O.jsx(O.Fragment,{children:O.jsxs("div",{className:"bg-gray-800 rounded-xl p-6",children:[O.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[O.jsx(nE,{className:"text-blue-400 w-6 h-6"}),O.jsx("h3",{className:"text-2xl font-bold",children:"Classical Mechanics"})]}),O.jsxs("div",{className:"space-y-6",children:[O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[O.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[O.jsx("h4",{className:"text-lg font-semibold mb-3",children:"Newton's Laws"}),O.jsxs("ul",{className:"space-y-2 text-gray-300",children:[O.jsx("li",{children:"1. Law of Inertia"}),O.jsx("li",{children:"2. F = ma"}),O.jsx("li",{children:"3. Action-Reaction"})]})]}),O.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[O.jsx("h4",{className:"text-lg font-semibold mb-3",children:"Conservation Laws"}),O.jsxs("ul",{className:"space-y-2 text-gray-300",children:[O.jsx("li",{children:"Energy Conservation"}),O.jsx("li",{children:"Momentum Conservation"}),O.jsx("li",{children:"Angular Momentum"})]})]})]}),O.jsx(yx,{}),O.jsx(pD,{}),O.jsx(mD,{})]})]})});case"quantum":return O.jsx(O.Fragment,{children:O.jsxs("div",{className:"bg-gray-800 rounded-xl p-6",children:[O.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[O.jsx(C0,{className:"text-blue-400 w-6 h-6"}),O.jsx("h3",{className:"text-2xl font-bold",children:"Quantum Physics"})]}),O.jsxs("div",{className:"space-y-6",children:[O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[O.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[O.jsx("h4",{className:"text-lg font-semibold mb-3",children:"Wave-Particle Duality"}),O.jsxs("ul",{className:"space-y-2 text-gray-300",children:[O.jsx("li",{children:"Double-slit experiment"}),O.jsx("li",{children:"Wave functions"}),O.jsx("li",{children:"Probability distributions"})]})]}),O.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[O.jsx("h4",{className:"text-lg font-semibold mb-3",children:"Quantum States"}),O.jsxs("ul",{className:"space-y-2 text-gray-300",children:[O.jsx("li",{children:"Superposition"}),O.jsx("li",{children:"Entanglement"}),O.jsx("li",{children:"Measurement"})]})]}),O.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[O.jsx("h4",{className:"text-lg font-semibold mb-3",children:"Applications"}),O.jsxs("ul",{className:"space-y-2 text-gray-300",children:[O.jsx("li",{children:"Quantum Computing"}),O.jsx("li",{children:"Quantum Cryptography"}),O.jsx("li",{children:"Quantum Sensors"})]})]})]}),O.jsx(gj,{}),O.jsx(uD,{}),O.jsx(Xd,{})]})]})});case"astronomy":return O.jsx(O.Fragment,{children:O.jsxs("div",{className:"bg-gray-800 rounded-xl p-6",children:[O.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[O.jsx(qR,{className:"text-blue-400 w-6 h-6"}),O.jsx("h3",{className:"text-2xl font-bold",children:"Astronomy & Astrophysics"})]}),O.jsxs("div",{className:"space-y-6",children:[O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[O.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[O.jsx("h4",{className:"text-lg font-semibold mb-3",children:"Solar System"}),O.jsxs("ul",{className:"space-y-2 text-gray-300",children:[O.jsx("li",{children:"Planetary Motion"}),O.jsx("li",{children:"Kepler's Laws"}),O.jsx("li",{children:"Orbital Mechanics"})]})]}),O.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[O.jsx("h4",{className:"text-lg font-semibold mb-3",children:"Stars"}),O.jsxs("ul",{className:"space-y-2 text-gray-300",children:[O.jsx("li",{children:"Stellar Evolution"}),O.jsx("li",{children:"Nuclear Fusion"}),O.jsx("li",{children:"Spectroscopy"})]})]}),O.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[O.jsx("h4",{className:"text-lg font-semibold mb-3",children:"Galaxies"}),O.jsxs("ul",{className:"space-y-2 text-gray-300",children:[O.jsx("li",{children:"Galaxy Types"}),O.jsx("li",{children:"Dark Matter"}),O.jsx("li",{children:"Cosmic Structure"})]})]})]}),O.jsx(w5,{}),O.jsx(Xd,{})]})]})});case"electromagnetism":return O.jsx(O.Fragment,{children:O.jsxs("div",{className:"bg-gray-800 rounded-xl p-6",children:[O.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[O.jsx(KR,{className:"text-blue-400 w-6 h-6"}),O.jsx("h3",{className:"text-2xl font-bold",children:"Electromagnetism"})]}),O.jsxs("div",{className:"space-y-6",children:[O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[O.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[O.jsx("h4",{className:"text-lg font-semibold mb-3",children:"Maxwell's Equations"}),O.jsxs("div",{className:"space-y-2 text-gray-300",children:[O.jsx("p",{children:"∇ · E = ρ/ε₀"}),O.jsx("p",{children:"∇ · B = 0"}),O.jsx("p",{children:"∇ × E = -∂B/∂t"}),O.jsx("p",{children:"∇ × B = μ₀J + μ₀ε₀∂E/∂t"})]})]}),O.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[O.jsx("h4",{className:"text-lg font-semibold mb-3",children:"Applications"}),O.jsxs("ul",{className:"space-y-2 text-gray-300",children:[O.jsx("li",{children:"Electric Circuits"}),O.jsx("li",{children:"Electromagnetic Waves"}),O.jsx("li",{children:"Electromagnetic Induction"})]})]})]}),O.jsx(yx,{}),O.jsx(S5,{})]})]})});case"thermodynamics":return O.jsx(O.Fragment,{children:O.jsxs("div",{className:"bg-gray-800 rounded-xl p-6",children:[O.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[O.jsx(HR,{className:"text-blue-400 w-6 h-6"}),O.jsx("h3",{className:"text-2xl font-bold",children:"Thermodynamics"})]}),O.jsxs("div",{className:"space-y-6",children:[O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[O.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[O.jsx("h4",{className:"text-lg font-semibold mb-3",children:"Laws of Thermodynamics"}),O.jsxs("ul",{className:"space-y-2 text-gray-300",children:[O.jsx("li",{children:"Zeroth Law: Thermal Equilibrium"}),O.jsx("li",{children:"First Law: Energy Conservation"}),O.jsx("li",{children:"Second Law: Entropy"}),O.jsx("li",{children:"Third Law: Absolute Zero"})]})]}),O.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[O.jsx("h4",{className:"text-lg font-semibold mb-3",children:"Processes"}),O.jsxs("ul",{className:"space-y-2 text-gray-300",children:[O.jsx("li",{children:"Isothermal"}),O.jsx("li",{children:"Adiabatic"}),O.jsx("li",{children:"Isobaric"}),O.jsx("li",{children:"Isochoric"})]})]})]}),O.jsx(yx,{}),O.jsx(Xd,{})]})]})});case"relativity":return O.jsx(O.Fragment,{children:O.jsxs("div",{className:"bg-gray-800 rounded-xl p-6",children:[O.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[O.jsx(rb,{className:"text-blue-400 w-6 h-6"}),O.jsx("h3",{className:"text-2xl font-bold",children:"Theory of Relativity"})]}),O.jsxs("div",{className:"space-y-6",children:[O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[O.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[O.jsx("h4",{className:"text-lg font-semibold mb-3",children:"Special Relativity"}),O.jsxs("ul",{className:"space-y-2 text-gray-300",children:[O.jsx("li",{children:"Time Dilation"}),O.jsx("li",{children:"Length Contraction"}),O.jsx("li",{children:"Mass-Energy Equivalence"})]})]}),O.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[O.jsx("h4",{className:"text-lg font-semibold mb-3",children:"General Relativity"}),O.jsxs("ul",{className:"space-y-2 text-gray-300",children:[O.jsx("li",{children:"Curved Spacetime"}),O.jsx("li",{children:"Gravitational Lensing"}),O.jsx("li",{children:"Black Holes"})]})]})]}),O.jsx(Xd,{}),O.jsx(S5,{})]})]})});case"modern":return O.jsx(O.Fragment,{children:O.jsxs("div",{className:"bg-gray-800 rounded-xl p-6",children:[O.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[O.jsx(C0,{className:"text-blue-400 w-6 h-6"}),O.jsx("h3",{className:"text-2xl font-bold",children:"Modern Physics"})]}),O.jsxs("div",{className:"space-y-6",children:[O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[O.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[O.jsx("h4",{className:"text-lg font-semibold mb-3",children:"Particle Physics"}),O.jsxs("ul",{className:"space-y-2 text-gray-300",children:[O.jsx("li",{children:"Standard Model"}),O.jsx("li",{children:"Quantum Field Theory"}),O.jsx("li",{children:"Higgs Boson"})]})]}),O.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[O.jsx("h4",{className:"text-lg font-semibold mb-3",children:"Cosmology"}),O.jsxs("ul",{className:"space-y-2 text-gray-300",children:[O.jsx("li",{children:"Big Bang Theory"}),O.jsx("li",{children:"Dark Energy"}),O.jsx("li",{children:"Cosmic Inflation"})]})]}),O.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[O.jsx("h4",{className:"text-lg font-semibold mb-3",children:"String Theory"}),O.jsxs("ul",{className:"space-y-2 text-gray-300",children:[O.jsx("li",{children:"Extra Dimensions"}),O.jsx("li",{children:"M-Theory"}),O.jsx("li",{children:"Supersymmetry"})]})]})]}),O.jsx(w5,{}),O.jsx(Xd,{})]})]})});default:return null}};return O.jsxs("div",{className:"min-h-screen bg-gray-900 text-white",children:[O.jsx("header",{className:"bg-gray-800 py-6 px-4 md:px-8",children:O.jsxs("div",{className:"max-w-7xl mx-auto",children:[O.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Physics Education Portal"}),O.jsx("p",{className:"text-xl text-gray-300",children:"Explore the fascinating world of physics"})]})}),O.jsx("nav",{className:"bg-gray-800 border-b border-gray-700 sticky top-0 z-50",children:O.jsx("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:O.jsxs("div",{className:"flex space-x-4 overflow-x-auto py-4",children:[O.jsx("button",{onClick:()=>e("classical"),className:`px-4 py-2 rounded-lg transition-colors ${n==="classical"?"bg-blue-500 text-white":"text-gray-300 hover:bg-gray-700"}`,children:"Classical Physics"}),O.jsx("button",{onClick:()=>e("quantum"),className:`px-4 py-2 rounded-lg transition-colors ${n==="quantum"?"bg-blue-500 text-white":"text-gray-300 hover:bg-gray-700"}`,children:"Quantum Physics"}),O.jsx("button",{onClick:()=>e("astronomy"),className:`px-4 py-2 rounded-lg transition-colors ${n==="astronomy"?"bg-blue-500 text-white":"text-gray-300 hover:bg-gray-700"}`,children:"Astronomy"}),O.jsx("button",{onClick:()=>e("electromagnetism"),className:`px-4 py-2 rounded-lg transition-colors ${n==="electromagnetism"?"bg-blue-500 text-white":"text-gray-300 hover:bg-gray-700"}`,children:"Electromagnetism"}),O.jsx("button",{onClick:()=>e("thermodynamics"),className:`px-4 py-2 rounded-lg transition-colors ${n==="thermodynamics"?"bg-blue-500 text-white":"text-gray-300 hover:bg-gray-700"}`,children:"Thermodynamics"}),O.jsx("button",{onClick:()=>e("relativity"),className:`px-4 py-2 rounded-lg transition-colors ${n==="relativity"?"bg-blue-500 text-white":"text-gray-300 hover:bg-gray-700"}`,children:"Relativity"}),O.jsx("button",{onClick:()=>e("modern"),className:`px-4 py-2 rounded-lg transition-colors ${n==="modern"?"bg-blue-500 text-white":"text-gray-300 hover:bg-gray-700"}`,children:"Modern Physics"})]})})}),O.jsxs("main",{className:"max-w-7xl mx-auto px-4 md:px-8 py-12 space-y-12",children:[a(),O.jsx(cD,{})]}),t&&O.jsx("div",{className:"fixed bottom-8 right-8 z-50",children:O.jsx("button",{onClick:o,className:"bg-blue-500 hover:bg-blue-600 text-white p-3 rounded-full shadow-lg transition-colors",children:O.jsx(UR,{className:"w-6 h-6"})})}),O.jsx("footer",{className:"bg-gray-800 py-12 px-4 md:px-8 mt-12",children:O.jsxs("div",{className:"max-w-7xl mx-auto",children:[O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[O.jsxs("div",{children:[O.jsx("h3",{className:"text-xl font-bold mb-4",children:"Physics Education Portal"}),O.jsx("p",{className:"text-gray-300",children:"Empowering students to explore and understand the universe through physics."})]}),O.jsxs("div",{children:[O.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Quick Links"}),O.jsxs("ul",{className:"space-y-2 text-gray-300",children:[O.jsx("li",{children:O.jsx("a",{href:"#",className:"hover:text-blue-400 transition-colors",children:"About Us"})}),O.jsx("li",{children:O.jsx("a",{href:"#",className:"hover:text-blue-400 transition-colors",children:"Contact"})}),O.jsx("li",{children:O.jsx("a",{href:"#",className:"hover:text-blue-400 transition-colors",children:"Terms of Service"})}),O.jsx("li",{children:O.jsx("a",{href:"#",className:"hover:text-blue-400 transition-colors",children:"Privacy Policy"})})]})]}),O.jsxs("div",{children:[O.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Connect With Us"}),O.jsxs("div",{className:"flex space-x-4",children:[O.jsx("a",{href:"#",className:"text-gray-300 hover:text-blue-400 transition-colors",children:O.jsx(NR,{className:"w-6 h-6"})}),O.jsx("a",{href:"#",className:"text-gray-300 hover:text-blue-400 transition-colors",children:O.jsx(C0,{className:"w-6 h-6"})}),O.jsx("a",{href:"#",className:"text-gray-300 hover:text-blue-400 transition-colors",children:O.jsx(rb,{className:"w-6 h-6"})})]})]})]}),O.jsxs("div",{className:"mt-8 pt-8 border-t border-gray-700 text-center text-gray-300",children:[O.jsxs("p",{children:["© ",new Date().getFullYear()," Physics Education Portal. All rights reserved."]}),O.jsx("p",{className:"mt-2 text-sm",children:"Created by Alireza Minagar in March 2025"})]})]})})]})}eE(document.getElementById("root")).render(O.jsx(Qe.StrictMode,{children:O.jsx(vj,{})}));
